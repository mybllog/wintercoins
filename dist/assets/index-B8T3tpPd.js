var ZT=Object.defineProperty;var f4=n=>{throw TypeError(n)};var JT=(n,e,t)=>e in n?ZT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var se=(n,e,t)=>JT(n,typeof e!="symbol"?e+"":e,t),ab=(n,e,t)=>e.has(n)||f4("Cannot "+t);var F=(n,e,t)=>(ab(n,e,"read from private field"),t?t.call(n):e.get(n)),ce=(n,e,t)=>e.has(n)?f4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),G=(n,e,t,r)=>(ab(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),be=(n,e,t)=>(ab(n,e,"access private method"),t);var bd=(n,e,t,r)=>({set _(i){G(n,e,i,t)},get _(){return F(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function YT(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var cb={exports:{}},vd={},lb={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h4;function XT(){if(h4)return Me;h4=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function g($){return $===null||typeof $!="object"?null:($=p&&$[p]||$["@@iterator"],typeof $=="function"?$:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function A($,U,Y){this.props=$,this.context=U,this.refs=b,this.updater=Y||m}A.prototype.isReactComponent={},A.prototype.setState=function($,U){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,U,"setState")},A.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function N(){}N.prototype=A.prototype;function R($,U,Y){this.props=$,this.context=U,this.refs=b,this.updater=Y||m}var O=R.prototype=new N;O.constructor=R,v(O,A.prototype),O.isPureReactComponent=!0;var T=Array.isArray,k=Object.prototype.hasOwnProperty,j={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function V($,U,Y){var q,Z={},te=null,re=null;if(U!=null)for(q in U.ref!==void 0&&(re=U.ref),U.key!==void 0&&(te=""+U.key),U)k.call(U,q)&&!H.hasOwnProperty(q)&&(Z[q]=U[q]);var le=arguments.length-2;if(le===1)Z.children=Y;else if(1<le){for(var ie=Array(le),ue=0;ue<le;ue++)ie[ue]=arguments[ue+2];Z.children=ie}if($&&$.defaultProps)for(q in le=$.defaultProps,le)Z[q]===void 0&&(Z[q]=le[q]);return{$$typeof:n,type:$,key:te,ref:re,props:Z,_owner:j.current}}function M($,U){return{$$typeof:n,type:$.type,key:U,ref:$.ref,props:$.props,_owner:$._owner}}function K($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function Q($){var U={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Y){return U[Y]})}var z=/\/+/g;function P($,U){return typeof $=="object"&&$!==null&&$.key!=null?Q(""+$.key):U.toString(36)}function D($,U,Y,q,Z){var te=typeof $;(te==="undefined"||te==="boolean")&&($=null);var re=!1;if($===null)re=!0;else switch(te){case"string":case"number":re=!0;break;case"object":switch($.$$typeof){case n:case e:re=!0}}if(re)return re=$,Z=Z(re),$=q===""?"."+P(re,0):q,T(Z)?(Y="",$!=null&&(Y=$.replace(z,"$&/")+"/"),D(Z,U,Y,"",function(ue){return ue})):Z!=null&&(K(Z)&&(Z=M(Z,Y+(!Z.key||re&&re.key===Z.key?"":(""+Z.key).replace(z,"$&/")+"/")+$)),U.push(Z)),1;if(re=0,q=q===""?".":q+":",T($))for(var le=0;le<$.length;le++){te=$[le];var ie=q+P(te,le);re+=D(te,U,Y,ie,Z)}else if(ie=g($),typeof ie=="function")for($=ie.call($),le=0;!(te=$.next()).done;)te=te.value,ie=q+P(te,le++),re+=D(te,U,Y,ie,Z);else if(te==="object")throw U=String($),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return re}function w($,U,Y){if($==null)return $;var q=[],Z=0;return D($,q,"","",function(te){return U.call(Y,te,Z++)}),q}function x($){if($._status===-1){var U=$._result;U=U(),U.then(function(Y){($._status===0||$._status===-1)&&($._status=1,$._result=Y)},function(Y){($._status===0||$._status===-1)&&($._status=2,$._result=Y)}),$._status===-1&&($._status=0,$._result=U)}if($._status===1)return $._result.default;throw $._result}var B={current:null},C={transition:null},I={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:C,ReactCurrentOwner:j};function _(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:w,forEach:function($,U,Y){w($,function(){U.apply(this,arguments)},Y)},count:function($){var U=0;return w($,function(){U++}),U},toArray:function($){return w($,function(U){return U})||[]},only:function($){if(!K($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Me.Component=A,Me.Fragment=t,Me.Profiler=i,Me.PureComponent=R,Me.StrictMode=r,Me.Suspense=u,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,Me.act=_,Me.cloneElement=function($,U,Y){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var q=v({},$.props),Z=$.key,te=$.ref,re=$._owner;if(U!=null){if(U.ref!==void 0&&(te=U.ref,re=j.current),U.key!==void 0&&(Z=""+U.key),$.type&&$.type.defaultProps)var le=$.type.defaultProps;for(ie in U)k.call(U,ie)&&!H.hasOwnProperty(ie)&&(q[ie]=U[ie]===void 0&&le!==void 0?le[ie]:U[ie])}var ie=arguments.length-2;if(ie===1)q.children=Y;else if(1<ie){le=Array(ie);for(var ue=0;ue<ie;ue++)le[ue]=arguments[ue+2];q.children=le}return{$$typeof:n,type:$.type,key:Z,ref:te,props:q,_owner:re}},Me.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:s,_context:$},$.Consumer=$},Me.createElement=V,Me.createFactory=function($){var U=V.bind(null,$);return U.type=$,U},Me.createRef=function(){return{current:null}},Me.forwardRef=function($){return{$$typeof:c,render:$}},Me.isValidElement=K,Me.lazy=function($){return{$$typeof:d,_payload:{_status:-1,_result:$},_init:x}},Me.memo=function($,U){return{$$typeof:f,type:$,compare:U===void 0?null:U}},Me.startTransition=function($){var U=C.transition;C.transition={};try{$()}finally{C.transition=U}},Me.unstable_act=_,Me.useCallback=function($,U){return B.current.useCallback($,U)},Me.useContext=function($){return B.current.useContext($)},Me.useDebugValue=function(){},Me.useDeferredValue=function($){return B.current.useDeferredValue($)},Me.useEffect=function($,U){return B.current.useEffect($,U)},Me.useId=function(){return B.current.useId()},Me.useImperativeHandle=function($,U,Y){return B.current.useImperativeHandle($,U,Y)},Me.useInsertionEffect=function($,U){return B.current.useInsertionEffect($,U)},Me.useLayoutEffect=function($,U){return B.current.useLayoutEffect($,U)},Me.useMemo=function($,U){return B.current.useMemo($,U)},Me.useReducer=function($,U,Y){return B.current.useReducer($,U,Y)},Me.useRef=function($){return B.current.useRef($)},Me.useState=function($){return B.current.useState($)},Me.useSyncExternalStore=function($,U,Y){return B.current.useSyncExternalStore($,U,Y)},Me.useTransition=function(){return B.current.useTransition()},Me.version="18.3.1",Me}var d4;function WE(){return d4||(d4=1,lb.exports=XT()),lb.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p4;function ek(){if(p4)return vd;p4=1;var n=WE(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,f){var d,p={},g=null,m=null;f!==void 0&&(g=""+f),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(m=u.ref);for(d in u)r.call(u,d)&&!s.hasOwnProperty(d)&&(p[d]=u[d]);if(c&&c.defaultProps)for(d in u=c.defaultProps,u)p[d]===void 0&&(p[d]=u[d]);return{$$typeof:e,type:c,key:g,ref:m,props:p,_owner:i.current}}return vd.Fragment=t,vd.jsx=o,vd.jsxs=o,vd}var g4;function tk(){return g4||(g4=1,cb.exports=ek()),cb.exports}var ft=tk(),ll=WE();const nk=Jp(ll);var P0={},ub={exports:{}},ar={},fb={exports:{}},hb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y4;function rk(){return y4||(y4=1,(function(n){function e(C,I){var _=C.length;C.push(I);e:for(;0<_;){var $=_-1>>>1,U=C[$];if(0<i(U,I))C[$]=I,C[_]=U,_=$;else break e}}function t(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var I=C[0],_=C.pop();if(_!==I){C[0]=_;e:for(var $=0,U=C.length,Y=U>>>1;$<Y;){var q=2*($+1)-1,Z=C[q],te=q+1,re=C[te];if(0>i(Z,_))te<U&&0>i(re,Z)?(C[$]=re,C[te]=_,$=te):(C[$]=Z,C[q]=_,$=q);else if(te<U&&0>i(re,_))C[$]=re,C[te]=_,$=te;else break e}}return I}function i(C,I){var _=C.sortIndex-I.sortIndex;return _!==0?_:C.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],f=[],d=1,p=null,g=3,m=!1,v=!1,b=!1,A=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(C){for(var I=t(f);I!==null;){if(I.callback===null)r(f);else if(I.startTime<=C)r(f),I.sortIndex=I.expirationTime,e(u,I);else break;I=t(f)}}function T(C){if(b=!1,O(C),!v)if(t(u)!==null)v=!0,x(k);else{var I=t(f);I!==null&&B(T,I.startTime-C)}}function k(C,I){v=!1,b&&(b=!1,N(V),V=-1),m=!0;var _=g;try{for(O(I),p=t(u);p!==null&&(!(p.expirationTime>I)||C&&!Q());){var $=p.callback;if(typeof $=="function"){p.callback=null,g=p.priorityLevel;var U=$(p.expirationTime<=I);I=n.unstable_now(),typeof U=="function"?p.callback=U:p===t(u)&&r(u),O(I)}else r(u);p=t(u)}if(p!==null)var Y=!0;else{var q=t(f);q!==null&&B(T,q.startTime-I),Y=!1}return Y}finally{p=null,g=_,m=!1}}var j=!1,H=null,V=-1,M=5,K=-1;function Q(){return!(n.unstable_now()-K<M)}function z(){if(H!==null){var C=n.unstable_now();K=C;var I=!0;try{I=H(!0,C)}finally{I?P():(j=!1,H=null)}}else j=!1}var P;if(typeof R=="function")P=function(){R(z)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,w=D.port2;D.port1.onmessage=z,P=function(){w.postMessage(null)}}else P=function(){A(z,0)};function x(C){H=C,j||(j=!0,P())}function B(C,I){V=A(function(){C(n.unstable_now())},I)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(C){C.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,x(k))},n.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<C?Math.floor(1e3/C):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(C){switch(g){case 1:case 2:case 3:var I=3;break;default:I=g}var _=g;g=I;try{return C()}finally{g=_}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(C,I){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var _=g;g=C;try{return I()}finally{g=_}},n.unstable_scheduleCallback=function(C,I,_){var $=n.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?$+_:$):_=$,C){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=_+U,C={id:d++,callback:I,priorityLevel:C,startTime:_,expirationTime:U,sortIndex:-1},_>$?(C.sortIndex=_,e(f,C),t(u)===null&&C===t(f)&&(b?(N(V),V=-1):b=!0,B(T,_-$))):(C.sortIndex=U,e(u,C),v||m||(v=!0,x(k))),C},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(C){var I=g;return function(){var _=g;g=I;try{return C.apply(this,arguments)}finally{g=_}}}})(hb)),hb}var m4;function ik(){return m4||(m4=1,fb.exports=rk()),fb.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w4;function sk(){if(w4)return ar;w4=1;var n=WE(),e=ik();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function g(a){return u.call(p,a)?!0:u.call(d,a)?!1:f.test(a)?p[a]=!0:(d[a]=!0,!1)}function m(a,l,h,y){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function v(a,l,h,y){if(l===null||typeof l>"u"||m(a,l,h,y))return!0;if(y)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(a,l,h,y,E,S,L){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=E,this.mustUseProperty=h,this.propertyName=a,this.type=l,this.sanitizeURL=S,this.removeEmptyString=L}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){A[a]=new b(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];A[l]=new b(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){A[a]=new b(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){A[a]=new b(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){A[a]=new b(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){A[a]=new b(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){A[a]=new b(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){A[a]=new b(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){A[a]=new b(a,5,!1,a.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function R(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(N,R);A[l]=new b(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(N,R);A[l]=new b(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(N,R);A[l]=new b(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){A[a]=new b(a,1,!1,a.toLowerCase(),null,!1,!1)}),A.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){A[a]=new b(a,1,!1,a.toLowerCase(),null,!0,!0)});function O(a,l,h,y){var E=A.hasOwnProperty(l)?A[l]:null;(E!==null?E.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(v(l,h,E,y)&&(h=null),y||E===null?g(l)&&(h===null?a.removeAttribute(l):a.setAttribute(l,""+h)):E.mustUseProperty?a[E.propertyName]=h===null?E.type===3?!1:"":h:(l=E.attributeName,y=E.attributeNamespace,h===null?a.removeAttribute(l):(E=E.type,h=E===3||E===4&&h===!0?"":""+h,y?a.setAttributeNS(y,l,h):a.setAttribute(l,h))))}var T=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),j=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),Q=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),C=Symbol.iterator;function I(a){return a===null||typeof a!="object"?null:(a=C&&a[C]||a["@@iterator"],typeof a=="function"?a:null)}var _=Object.assign,$;function U(a){if($===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);$=l&&l[1]||""}return`
`+$+a}var Y=!1;function q(a,l){if(!a||Y)return"";Y=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ae){var y=ae}Reflect.construct(a,[],l)}else{try{l.call()}catch(ae){y=ae}a.call(l.prototype)}else{try{throw Error()}catch(ae){y=ae}a()}}catch(ae){if(ae&&y&&typeof ae.stack=="string"){for(var E=ae.stack.split(`
`),S=y.stack.split(`
`),L=E.length-1,W=S.length-1;1<=L&&0<=W&&E[L]!==S[W];)W--;for(;1<=L&&0<=W;L--,W--)if(E[L]!==S[W]){if(L!==1||W!==1)do if(L--,W--,0>W||E[L]!==S[W]){var J=`
`+E[L].replace(" at new "," at ");return a.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",a.displayName)),J}while(1<=L&&0<=W);break}}}finally{Y=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?U(a):""}function Z(a){switch(a.tag){case 5:return U(a.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return a=q(a.type,!1),a;case 11:return a=q(a.type.render,!1),a;case 1:return a=q(a.type,!0),a;default:return""}}function te(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case H:return"Fragment";case j:return"Portal";case M:return"Profiler";case V:return"StrictMode";case P:return"Suspense";case D:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Q:return(a.displayName||"Context")+".Consumer";case K:return(a._context.displayName||"Context")+".Provider";case z:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case w:return l=a.displayName||null,l!==null?l:te(a.type)||"Memo";case x:l=a._payload,a=a._init;try{return te(a(l))}catch{}}return null}function re(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(l);case 8:return l===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function le(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ie(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ue(a){var l=ie(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var E=h.get,S=h.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return E.call(this)},set:function(L){y=""+L,S.call(this,L)}}),Object.defineProperty(a,l,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(L){y=""+L},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Ne(a){a._valueTracker||(a._valueTracker=ue(a))}function Re(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var h=l.getValue(),y="";return a&&(y=ie(a)?a.checked?"true":"false":a.value),a=y,a!==h?(l.setValue(a),!0):!1}function Te(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ve(a,l){var h=l.checked;return _({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function Gt(a,l){var h=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;h=le(l.value!=null?l.value:h),a._wrapperState={initialChecked:y,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function on(a,l){l=l.checked,l!=null&&O(a,"checked",l,!1)}function bi(a,l){on(a,l);var h=le(l.value),y=l.type;if(h!=null)y==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?lu(a,l.type,h):l.hasOwnProperty("defaultValue")&&lu(a,l.type,le(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function ks(a,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,h||l===a.value||(a.value=l),a.defaultValue=l}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function lu(a,l,h){(l!=="number"||Te(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var Fo=Array.isArray;function es(a,l,h,y){if(a=a.options,l){l={};for(var E=0;E<h.length;E++)l["$"+h[E]]=!0;for(h=0;h<a.length;h++)E=l.hasOwnProperty("$"+a[h].value),a[h].selected!==E&&(a[h].selected=E),E&&y&&(a[h].defaultSelected=!0)}else{for(h=""+le(h),l=null,E=0;E<a.length;E++){if(a[E].value===h){a[E].selected=!0,y&&(a[E].defaultSelected=!0);return}l!==null||a[E].disabled||(l=a[E])}l!==null&&(l.selected=!0)}}function uu(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return _({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Nh(a,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(t(92));if(Fo(h)){if(1<h.length)throw Error(t(93));h=h[0]}l=h}l==null&&(l=""),h=l}a._wrapperState={initialValue:le(h)}}function Dh(a,l){var h=le(l.value),y=le(l.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),l.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),y!=null&&(a.defaultValue=""+y)}function $h(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Th(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kh(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Th(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var fu,vg=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,y,E){MSApp.execUnsafeLocalFunction(function(){return a(l,h,y,E)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(fu=fu||document.createElement("div"),fu.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=fu.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function Dc(a,l){if(l){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=l;return}}a.textContent=l}var Rh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e9=["Webkit","ms","Moz","O"];Object.keys(Rh).forEach(function(a){e9.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Rh[l]=Rh[a]})});function Ox(a,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||Rh.hasOwnProperty(a)&&Rh[a]?(""+l).trim():l+"px"}function Bx(a,l){a=a.style;for(var h in l)if(l.hasOwnProperty(h)){var y=h.indexOf("--")===0,E=Ox(h,l[h],y);h==="float"&&(h="cssFloat"),y?a.setProperty(h,E):a[h]=E}}var t9=_({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bw(a,l){if(l){if(t9[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function vw(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ew=null;function xw(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Aw=null,hu=null,du=null;function Px(a){if(a=id(a)){if(typeof Aw!="function")throw Error(t(280));var l=a.stateNode;l&&(l=Hg(l),Aw(a.stateNode,a.type,l))}}function Cx(a){hu?du?du.push(a):du=[a]:hu=a}function _x(){if(hu){var a=hu,l=du;if(du=hu=null,Px(a),l)for(a=0;a<l.length;a++)Px(l[a])}}function Nx(a,l){return a(l)}function Dx(){}var Sw=!1;function $x(a,l,h){if(Sw)return a(l,h);Sw=!0;try{return Nx(a,l,h)}finally{Sw=!1,(hu!==null||du!==null)&&(Dx(),_x())}}function Uh(a,l){var h=a.stateNode;if(h===null)return null;var y=Hg(h);if(y===null)return null;h=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(t(231,l,typeof h));return h}var Iw=!1;if(c)try{var Lh={};Object.defineProperty(Lh,"passive",{get:function(){Iw=!0}}),window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{Iw=!1}function n9(a,l,h,y,E,S,L,W,J){var ae=Array.prototype.slice.call(arguments,3);try{l.apply(h,ae)}catch(he){this.onError(he)}}var Fh=!1,Eg=null,xg=!1,Ow=null,r9={onError:function(a){Fh=!0,Eg=a}};function i9(a,l,h,y,E,S,L,W,J){Fh=!1,Eg=null,n9.apply(r9,arguments)}function s9(a,l,h,y,E,S,L,W,J){if(i9.apply(this,arguments),Fh){if(Fh){var ae=Eg;Fh=!1,Eg=null}else throw Error(t(198));xg||(xg=!0,Ow=ae)}}function $c(a){var l=a,h=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(h=l.return),a=l.return;while(a)}return l.tag===3?h:null}function Tx(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function kx(a){if($c(a)!==a)throw Error(t(188))}function o9(a){var l=a.alternate;if(!l){if(l=$c(a),l===null)throw Error(t(188));return l!==a?null:a}for(var h=a,y=l;;){var E=h.return;if(E===null)break;var S=E.alternate;if(S===null){if(y=E.return,y!==null){h=y;continue}break}if(E.child===S.child){for(S=E.child;S;){if(S===h)return kx(E),a;if(S===y)return kx(E),l;S=S.sibling}throw Error(t(188))}if(h.return!==y.return)h=E,y=S;else{for(var L=!1,W=E.child;W;){if(W===h){L=!0,h=E,y=S;break}if(W===y){L=!0,y=E,h=S;break}W=W.sibling}if(!L){for(W=S.child;W;){if(W===h){L=!0,h=S,y=E;break}if(W===y){L=!0,y=S,h=E;break}W=W.sibling}if(!L)throw Error(t(189))}}if(h.alternate!==y)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?a:l}function Rx(a){return a=o9(a),a!==null?Ux(a):null}function Ux(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Ux(a);if(l!==null)return l;a=a.sibling}return null}var Lx=e.unstable_scheduleCallback,Fx=e.unstable_cancelCallback,a9=e.unstable_shouldYield,c9=e.unstable_requestPaint,Pt=e.unstable_now,l9=e.unstable_getCurrentPriorityLevel,Bw=e.unstable_ImmediatePriority,Mx=e.unstable_UserBlockingPriority,Ag=e.unstable_NormalPriority,u9=e.unstable_LowPriority,jx=e.unstable_IdlePriority,Sg=null,ts=null;function f9(a){if(ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(Sg,a,void 0,(a.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:p9,h9=Math.log,d9=Math.LN2;function p9(a){return a>>>=0,a===0?32:31-(h9(a)/d9|0)|0}var Ig=64,Og=4194304;function Mh(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Bg(a,l){var h=a.pendingLanes;if(h===0)return 0;var y=0,E=a.suspendedLanes,S=a.pingedLanes,L=h&268435455;if(L!==0){var W=L&~E;W!==0?y=Mh(W):(S&=L,S!==0&&(y=Mh(S)))}else L=h&~E,L!==0?y=Mh(L):S!==0&&(y=Mh(S));if(y===0)return 0;if(l!==0&&l!==y&&(l&E)===0&&(E=y&-y,S=l&-l,E>=S||E===16&&(S&4194240)!==0))return l;if((y&4)!==0&&(y|=h&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=y;0<l;)h=31-vi(l),E=1<<h,y|=a[h],l&=~E;return y}function g9(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y9(a,l){for(var h=a.suspendedLanes,y=a.pingedLanes,E=a.expirationTimes,S=a.pendingLanes;0<S;){var L=31-vi(S),W=1<<L,J=E[L];J===-1?((W&h)===0||(W&y)!==0)&&(E[L]=g9(W,l)):J<=l&&(a.expiredLanes|=W),S&=~W}}function Pw(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function zx(){var a=Ig;return Ig<<=1,(Ig&4194240)===0&&(Ig=64),a}function Cw(a){for(var l=[],h=0;31>h;h++)l.push(a);return l}function jh(a,l,h){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-vi(l),a[l]=h}function m9(a,l){var h=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<h;){var E=31-vi(h),S=1<<E;l[E]=0,y[E]=-1,a[E]=-1,h&=~S}}function _w(a,l){var h=a.entangledLanes|=l;for(a=a.entanglements;h;){var y=31-vi(h),E=1<<y;E&l|a[y]&l&&(a[y]|=l),h&=~E}}var it=0;function Hx(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Vx,Nw,qx,Kx,Gx,Dw=!1,Pg=[],Mo=null,jo=null,zo=null,zh=new Map,Hh=new Map,Ho=[],w9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wx(a,l){switch(a){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":jo=null;break;case"mouseover":case"mouseout":zo=null;break;case"pointerover":case"pointerout":zh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hh.delete(l.pointerId)}}function Vh(a,l,h,y,E,S){return a===null||a.nativeEvent!==S?(a={blockedOn:l,domEventName:h,eventSystemFlags:y,nativeEvent:S,targetContainers:[E]},l!==null&&(l=id(l),l!==null&&Nw(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,E!==null&&l.indexOf(E)===-1&&l.push(E),a)}function b9(a,l,h,y,E){switch(l){case"focusin":return Mo=Vh(Mo,a,l,h,y,E),!0;case"dragenter":return jo=Vh(jo,a,l,h,y,E),!0;case"mouseover":return zo=Vh(zo,a,l,h,y,E),!0;case"pointerover":var S=E.pointerId;return zh.set(S,Vh(zh.get(S)||null,a,l,h,y,E)),!0;case"gotpointercapture":return S=E.pointerId,Hh.set(S,Vh(Hh.get(S)||null,a,l,h,y,E)),!0}return!1}function Qx(a){var l=Tc(a.target);if(l!==null){var h=$c(l);if(h!==null){if(l=h.tag,l===13){if(l=Tx(h),l!==null){a.blockedOn=l,Gx(a.priority,function(){qx(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Cg(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var h=Tw(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var y=new h.constructor(h.type,h);Ew=y,h.target.dispatchEvent(y),Ew=null}else return l=id(h),l!==null&&Nw(l),a.blockedOn=h,!1;l.shift()}return!0}function Zx(a,l,h){Cg(a)&&h.delete(l)}function v9(){Dw=!1,Mo!==null&&Cg(Mo)&&(Mo=null),jo!==null&&Cg(jo)&&(jo=null),zo!==null&&Cg(zo)&&(zo=null),zh.forEach(Zx),Hh.forEach(Zx)}function qh(a,l){a.blockedOn===l&&(a.blockedOn=null,Dw||(Dw=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,v9)))}function Kh(a){function l(E){return qh(E,a)}if(0<Pg.length){qh(Pg[0],a);for(var h=1;h<Pg.length;h++){var y=Pg[h];y.blockedOn===a&&(y.blockedOn=null)}}for(Mo!==null&&qh(Mo,a),jo!==null&&qh(jo,a),zo!==null&&qh(zo,a),zh.forEach(l),Hh.forEach(l),h=0;h<Ho.length;h++)y=Ho[h],y.blockedOn===a&&(y.blockedOn=null);for(;0<Ho.length&&(h=Ho[0],h.blockedOn===null);)Qx(h),h.blockedOn===null&&Ho.shift()}var pu=T.ReactCurrentBatchConfig,_g=!0;function E9(a,l,h,y){var E=it,S=pu.transition;pu.transition=null;try{it=1,$w(a,l,h,y)}finally{it=E,pu.transition=S}}function x9(a,l,h,y){var E=it,S=pu.transition;pu.transition=null;try{it=4,$w(a,l,h,y)}finally{it=E,pu.transition=S}}function $w(a,l,h,y){if(_g){var E=Tw(a,l,h,y);if(E===null)Jw(a,l,y,Ng,h),Wx(a,y);else if(b9(E,a,l,h,y))y.stopPropagation();else if(Wx(a,y),l&4&&-1<w9.indexOf(a)){for(;E!==null;){var S=id(E);if(S!==null&&Vx(S),S=Tw(a,l,h,y),S===null&&Jw(a,l,y,Ng,h),S===E)break;E=S}E!==null&&y.stopPropagation()}else Jw(a,l,y,null,h)}}var Ng=null;function Tw(a,l,h,y){if(Ng=null,a=xw(y),a=Tc(a),a!==null)if(l=$c(a),l===null)a=null;else if(h=l.tag,h===13){if(a=Tx(l),a!==null)return a;a=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Ng=a,null}function Jx(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l9()){case Bw:return 1;case Mx:return 4;case Ag:case u9:return 16;case jx:return 536870912;default:return 16}default:return 16}}var Vo=null,kw=null,Dg=null;function Yx(){if(Dg)return Dg;var a,l=kw,h=l.length,y,E="value"in Vo?Vo.value:Vo.textContent,S=E.length;for(a=0;a<h&&l[a]===E[a];a++);var L=h-a;for(y=1;y<=L&&l[h-y]===E[S-y];y++);return Dg=E.slice(a,1<y?1-y:void 0)}function $g(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Tg(){return!0}function Xx(){return!1}function Cr(a){function l(h,y,E,S,L){this._reactName=h,this._targetInst=E,this.type=y,this.nativeEvent=S,this.target=L,this.currentTarget=null;for(var W in a)a.hasOwnProperty(W)&&(h=a[W],this[W]=h?h(S):S[W]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Tg:Xx,this.isPropagationStopped=Xx,this}return _(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Tg)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Tg)},persist:function(){},isPersistent:Tg}),l}var gu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rw=Cr(gu),Gh=_({},gu,{view:0,detail:0}),A9=Cr(Gh),Uw,Lw,Wh,kg=_({},Gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mw,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Wh&&(Wh&&a.type==="mousemove"?(Uw=a.screenX-Wh.screenX,Lw=a.screenY-Wh.screenY):Lw=Uw=0,Wh=a),Uw)},movementY:function(a){return"movementY"in a?a.movementY:Lw}}),eA=Cr(kg),S9=_({},kg,{dataTransfer:0}),I9=Cr(S9),O9=_({},Gh,{relatedTarget:0}),Fw=Cr(O9),B9=_({},gu,{animationName:0,elapsedTime:0,pseudoElement:0}),P9=Cr(B9),C9=_({},gu,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),_9=Cr(C9),N9=_({},gu,{data:0}),tA=Cr(N9),D9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k9(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=T9[a])?!!l[a]:!1}function Mw(){return k9}var R9=_({},Gh,{key:function(a){if(a.key){var l=D9[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=$g(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?$9[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mw,charCode:function(a){return a.type==="keypress"?$g(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?$g(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),U9=Cr(R9),L9=_({},kg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nA=Cr(L9),F9=_({},Gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mw}),M9=Cr(F9),j9=_({},gu,{propertyName:0,elapsedTime:0,pseudoElement:0}),z9=Cr(j9),H9=_({},kg,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),V9=Cr(H9),q9=[9,13,27,32],jw=c&&"CompositionEvent"in window,Qh=null;c&&"documentMode"in document&&(Qh=document.documentMode);var K9=c&&"TextEvent"in window&&!Qh,rA=c&&(!jw||Qh&&8<Qh&&11>=Qh),iA=" ",sA=!1;function oA(a,l){switch(a){case"keyup":return q9.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aA(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var yu=!1;function G9(a,l){switch(a){case"compositionend":return aA(l);case"keypress":return l.which!==32?null:(sA=!0,iA);case"textInput":return a=l.data,a===iA&&sA?null:a;default:return null}}function W9(a,l){if(yu)return a==="compositionend"||!jw&&oA(a,l)?(a=Yx(),Dg=kw=Vo=null,yu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return rA&&l.locale!=="ko"?null:l.data;default:return null}}var Q9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cA(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!Q9[a.type]:l==="textarea"}function lA(a,l,h,y){Cx(y),l=Mg(l,"onChange"),0<l.length&&(h=new Rw("onChange","change",null,h,y),a.push({event:h,listeners:l}))}var Zh=null,Jh=null;function Z9(a){BA(a,0)}function Rg(a){var l=Eu(a);if(Re(l))return a}function J9(a,l){if(a==="change")return l}var uA=!1;if(c){var zw;if(c){var Hw="oninput"in document;if(!Hw){var fA=document.createElement("div");fA.setAttribute("oninput","return;"),Hw=typeof fA.oninput=="function"}zw=Hw}else zw=!1;uA=zw&&(!document.documentMode||9<document.documentMode)}function hA(){Zh&&(Zh.detachEvent("onpropertychange",dA),Jh=Zh=null)}function dA(a){if(a.propertyName==="value"&&Rg(Jh)){var l=[];lA(l,Jh,a,xw(a)),$x(Z9,l)}}function Y9(a,l,h){a==="focusin"?(hA(),Zh=l,Jh=h,Zh.attachEvent("onpropertychange",dA)):a==="focusout"&&hA()}function X9(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Rg(Jh)}function eT(a,l){if(a==="click")return Rg(l)}function tT(a,l){if(a==="input"||a==="change")return Rg(l)}function nT(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Ei=typeof Object.is=="function"?Object.is:nT;function Yh(a,l){if(Ei(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var h=Object.keys(a),y=Object.keys(l);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var E=h[y];if(!u.call(l,E)||!Ei(a[E],l[E]))return!1}return!0}function pA(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function gA(a,l){var h=pA(a);a=0;for(var y;h;){if(h.nodeType===3){if(y=a+h.textContent.length,a<=l&&y>=l)return{node:h,offset:l-a};a=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=pA(h)}}function yA(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?yA(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function mA(){for(var a=window,l=Te();l instanceof a.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)a=l.contentWindow;else break;l=Te(a.document)}return l}function Vw(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function rT(a){var l=mA(),h=a.focusedElem,y=a.selectionRange;if(l!==h&&h&&h.ownerDocument&&yA(h.ownerDocument.documentElement,h)){if(y!==null&&Vw(h)){if(l=y.start,a=y.end,a===void 0&&(a=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(a,h.value.length);else if(a=(l=h.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var E=h.textContent.length,S=Math.min(y.start,E);y=y.end===void 0?S:Math.min(y.end,E),!a.extend&&S>y&&(E=y,y=S,S=E),E=gA(h,S);var L=gA(h,y);E&&L&&(a.rangeCount!==1||a.anchorNode!==E.node||a.anchorOffset!==E.offset||a.focusNode!==L.node||a.focusOffset!==L.offset)&&(l=l.createRange(),l.setStart(E.node,E.offset),a.removeAllRanges(),S>y?(a.addRange(l),a.extend(L.node,L.offset)):(l.setEnd(L.node,L.offset),a.addRange(l)))}}for(l=[],a=h;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)a=l[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var iT=c&&"documentMode"in document&&11>=document.documentMode,mu=null,qw=null,Xh=null,Kw=!1;function wA(a,l,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Kw||mu==null||mu!==Te(y)||(y=mu,"selectionStart"in y&&Vw(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Xh&&Yh(Xh,y)||(Xh=y,y=Mg(qw,"onSelect"),0<y.length&&(l=new Rw("onSelect","select",null,l,h),a.push({event:l,listeners:y}),l.target=mu)))}function Ug(a,l){var h={};return h[a.toLowerCase()]=l.toLowerCase(),h["Webkit"+a]="webkit"+l,h["Moz"+a]="moz"+l,h}var wu={animationend:Ug("Animation","AnimationEnd"),animationiteration:Ug("Animation","AnimationIteration"),animationstart:Ug("Animation","AnimationStart"),transitionend:Ug("Transition","TransitionEnd")},Gw={},bA={};c&&(bA=document.createElement("div").style,"AnimationEvent"in window||(delete wu.animationend.animation,delete wu.animationiteration.animation,delete wu.animationstart.animation),"TransitionEvent"in window||delete wu.transitionend.transition);function Lg(a){if(Gw[a])return Gw[a];if(!wu[a])return a;var l=wu[a],h;for(h in l)if(l.hasOwnProperty(h)&&h in bA)return Gw[a]=l[h];return a}var vA=Lg("animationend"),EA=Lg("animationiteration"),xA=Lg("animationstart"),AA=Lg("transitionend"),SA=new Map,IA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qo(a,l){SA.set(a,l),s(l,[a])}for(var Ww=0;Ww<IA.length;Ww++){var Qw=IA[Ww],sT=Qw.toLowerCase(),oT=Qw[0].toUpperCase()+Qw.slice(1);qo(sT,"on"+oT)}qo(vA,"onAnimationEnd"),qo(EA,"onAnimationIteration"),qo(xA,"onAnimationStart"),qo("dblclick","onDoubleClick"),qo("focusin","onFocus"),qo("focusout","onBlur"),qo(AA,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ed));function OA(a,l,h){var y=a.type||"unknown-event";a.currentTarget=h,s9(y,l,void 0,a),a.currentTarget=null}function BA(a,l){l=(l&4)!==0;for(var h=0;h<a.length;h++){var y=a[h],E=y.event;y=y.listeners;e:{var S=void 0;if(l)for(var L=y.length-1;0<=L;L--){var W=y[L],J=W.instance,ae=W.currentTarget;if(W=W.listener,J!==S&&E.isPropagationStopped())break e;OA(E,W,ae),S=J}else for(L=0;L<y.length;L++){if(W=y[L],J=W.instance,ae=W.currentTarget,W=W.listener,J!==S&&E.isPropagationStopped())break e;OA(E,W,ae),S=J}}}if(xg)throw a=Ow,xg=!1,Ow=null,a}function gt(a,l){var h=l[r1];h===void 0&&(h=l[r1]=new Set);var y=a+"__bubble";h.has(y)||(PA(l,a,2,!1),h.add(y))}function Zw(a,l,h){var y=0;l&&(y|=4),PA(h,a,y,l)}var Fg="_reactListening"+Math.random().toString(36).slice(2);function td(a){if(!a[Fg]){a[Fg]=!0,r.forEach(function(h){h!=="selectionchange"&&(aT.has(h)||Zw(h,!1,a),Zw(h,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Fg]||(l[Fg]=!0,Zw("selectionchange",!1,l))}}function PA(a,l,h,y){switch(Jx(l)){case 1:var E=E9;break;case 4:E=x9;break;default:E=$w}h=E.bind(null,l,h,a),E=void 0,!Iw||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(E=!0),y?E!==void 0?a.addEventListener(l,h,{capture:!0,passive:E}):a.addEventListener(l,h,!0):E!==void 0?a.addEventListener(l,h,{passive:E}):a.addEventListener(l,h,!1)}function Jw(a,l,h,y,E){var S=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var L=y.tag;if(L===3||L===4){var W=y.stateNode.containerInfo;if(W===E||W.nodeType===8&&W.parentNode===E)break;if(L===4)for(L=y.return;L!==null;){var J=L.tag;if((J===3||J===4)&&(J=L.stateNode.containerInfo,J===E||J.nodeType===8&&J.parentNode===E))return;L=L.return}for(;W!==null;){if(L=Tc(W),L===null)return;if(J=L.tag,J===5||J===6){y=S=L;continue e}W=W.parentNode}}y=y.return}$x(function(){var ae=S,he=xw(h),ge=[];e:{var fe=SA.get(a);if(fe!==void 0){var Se=Rw,Pe=a;switch(a){case"keypress":if($g(h)===0)break e;case"keydown":case"keyup":Se=U9;break;case"focusin":Pe="focus",Se=Fw;break;case"focusout":Pe="blur",Se=Fw;break;case"beforeblur":case"afterblur":Se=Fw;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=eA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=I9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=M9;break;case vA:case EA:case xA:Se=P9;break;case AA:Se=z9;break;case"scroll":Se=A9;break;case"wheel":Se=V9;break;case"copy":case"cut":case"paste":Se=_9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=nA}var Ce=(l&4)!==0,Ct=!Ce&&a==="scroll",ne=Ce?fe!==null?fe+"Capture":null:fe;Ce=[];for(var X=ae,oe;X!==null;){oe=X;var ye=oe.stateNode;if(oe.tag===5&&ye!==null&&(oe=ye,ne!==null&&(ye=Uh(X,ne),ye!=null&&Ce.push(nd(X,ye,oe)))),Ct)break;X=X.return}0<Ce.length&&(fe=new Se(fe,Pe,null,h,he),ge.push({event:fe,listeners:Ce}))}}if((l&7)===0){e:{if(fe=a==="mouseover"||a==="pointerover",Se=a==="mouseout"||a==="pointerout",fe&&h!==Ew&&(Pe=h.relatedTarget||h.fromElement)&&(Tc(Pe)||Pe[Rs]))break e;if((Se||fe)&&(fe=he.window===he?he:(fe=he.ownerDocument)?fe.defaultView||fe.parentWindow:window,Se?(Pe=h.relatedTarget||h.toElement,Se=ae,Pe=Pe?Tc(Pe):null,Pe!==null&&(Ct=$c(Pe),Pe!==Ct||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(Se=null,Pe=ae),Se!==Pe)){if(Ce=eA,ye="onMouseLeave",ne="onMouseEnter",X="mouse",(a==="pointerout"||a==="pointerover")&&(Ce=nA,ye="onPointerLeave",ne="onPointerEnter",X="pointer"),Ct=Se==null?fe:Eu(Se),oe=Pe==null?fe:Eu(Pe),fe=new Ce(ye,X+"leave",Se,h,he),fe.target=Ct,fe.relatedTarget=oe,ye=null,Tc(he)===ae&&(Ce=new Ce(ne,X+"enter",Pe,h,he),Ce.target=oe,Ce.relatedTarget=Ct,ye=Ce),Ct=ye,Se&&Pe)t:{for(Ce=Se,ne=Pe,X=0,oe=Ce;oe;oe=bu(oe))X++;for(oe=0,ye=ne;ye;ye=bu(ye))oe++;for(;0<X-oe;)Ce=bu(Ce),X--;for(;0<oe-X;)ne=bu(ne),oe--;for(;X--;){if(Ce===ne||ne!==null&&Ce===ne.alternate)break t;Ce=bu(Ce),ne=bu(ne)}Ce=null}else Ce=null;Se!==null&&CA(ge,fe,Se,Ce,!1),Pe!==null&&Ct!==null&&CA(ge,Ct,Pe,Ce,!0)}}e:{if(fe=ae?Eu(ae):window,Se=fe.nodeName&&fe.nodeName.toLowerCase(),Se==="select"||Se==="input"&&fe.type==="file")var _e=J9;else if(cA(fe))if(uA)_e=tT;else{_e=X9;var De=Y9}else(Se=fe.nodeName)&&Se.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(_e=eT);if(_e&&(_e=_e(a,ae))){lA(ge,_e,h,he);break e}De&&De(a,fe,ae),a==="focusout"&&(De=fe._wrapperState)&&De.controlled&&fe.type==="number"&&lu(fe,"number",fe.value)}switch(De=ae?Eu(ae):window,a){case"focusin":(cA(De)||De.contentEditable==="true")&&(mu=De,qw=ae,Xh=null);break;case"focusout":Xh=qw=mu=null;break;case"mousedown":Kw=!0;break;case"contextmenu":case"mouseup":case"dragend":Kw=!1,wA(ge,h,he);break;case"selectionchange":if(iT)break;case"keydown":case"keyup":wA(ge,h,he)}var $e;if(jw)e:{switch(a){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else yu?oA(a,h)&&(Ue="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Ue="onCompositionStart");Ue&&(rA&&h.locale!=="ko"&&(yu||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&yu&&($e=Yx()):(Vo=he,kw="value"in Vo?Vo.value:Vo.textContent,yu=!0)),De=Mg(ae,Ue),0<De.length&&(Ue=new tA(Ue,a,null,h,he),ge.push({event:Ue,listeners:De}),$e?Ue.data=$e:($e=aA(h),$e!==null&&(Ue.data=$e)))),($e=K9?G9(a,h):W9(a,h))&&(ae=Mg(ae,"onBeforeInput"),0<ae.length&&(he=new tA("onBeforeInput","beforeinput",null,h,he),ge.push({event:he,listeners:ae}),he.data=$e))}BA(ge,l)})}function nd(a,l,h){return{instance:a,listener:l,currentTarget:h}}function Mg(a,l){for(var h=l+"Capture",y=[];a!==null;){var E=a,S=E.stateNode;E.tag===5&&S!==null&&(E=S,S=Uh(a,h),S!=null&&y.unshift(nd(a,S,E)),S=Uh(a,l),S!=null&&y.push(nd(a,S,E))),a=a.return}return y}function bu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function CA(a,l,h,y,E){for(var S=l._reactName,L=[];h!==null&&h!==y;){var W=h,J=W.alternate,ae=W.stateNode;if(J!==null&&J===y)break;W.tag===5&&ae!==null&&(W=ae,E?(J=Uh(h,S),J!=null&&L.unshift(nd(h,J,W))):E||(J=Uh(h,S),J!=null&&L.push(nd(h,J,W)))),h=h.return}L.length!==0&&a.push({event:l,listeners:L})}var cT=/\r\n?/g,lT=/\u0000|\uFFFD/g;function _A(a){return(typeof a=="string"?a:""+a).replace(cT,`
`).replace(lT,"")}function jg(a,l,h){if(l=_A(l),_A(a)!==l&&h)throw Error(t(425))}function zg(){}var Yw=null,Xw=null;function e1(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var t1=typeof setTimeout=="function"?setTimeout:void 0,uT=typeof clearTimeout=="function"?clearTimeout:void 0,NA=typeof Promise=="function"?Promise:void 0,fT=typeof queueMicrotask=="function"?queueMicrotask:typeof NA<"u"?function(a){return NA.resolve(null).then(a).catch(hT)}:t1;function hT(a){setTimeout(function(){throw a})}function n1(a,l){var h=l,y=0;do{var E=h.nextSibling;if(a.removeChild(h),E&&E.nodeType===8)if(h=E.data,h==="/$"){if(y===0){a.removeChild(E),Kh(l);return}y--}else h!=="$"&&h!=="$?"&&h!=="$!"||y++;h=E}while(h);Kh(l)}function Ko(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function DA(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return a;l--}else h==="/$"&&l++}a=a.previousSibling}return null}var vu=Math.random().toString(36).slice(2),ns="__reactFiber$"+vu,rd="__reactProps$"+vu,Rs="__reactContainer$"+vu,r1="__reactEvents$"+vu,dT="__reactListeners$"+vu,pT="__reactHandles$"+vu;function Tc(a){var l=a[ns];if(l)return l;for(var h=a.parentNode;h;){if(l=h[Rs]||h[ns]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(a=DA(a);a!==null;){if(h=a[ns])return h;a=DA(a)}return l}a=h,h=a.parentNode}return null}function id(a){return a=a[ns]||a[Rs],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Eu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Hg(a){return a[rd]||null}var i1=[],xu=-1;function Go(a){return{current:a}}function yt(a){0>xu||(a.current=i1[xu],i1[xu]=null,xu--)}function ht(a,l){xu++,i1[xu]=a.current,a.current=l}var Wo={},En=Go(Wo),nr=Go(!1),kc=Wo;function Au(a,l){var h=a.type.contextTypes;if(!h)return Wo;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var E={},S;for(S in h)E[S]=l[S];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=E),E}function rr(a){return a=a.childContextTypes,a!=null}function Vg(){yt(nr),yt(En)}function $A(a,l,h){if(En.current!==Wo)throw Error(t(168));ht(En,l),ht(nr,h)}function TA(a,l,h){var y=a.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return h;y=y.getChildContext();for(var E in y)if(!(E in l))throw Error(t(108,re(a)||"Unknown",E));return _({},h,y)}function qg(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Wo,kc=En.current,ht(En,a),ht(nr,nr.current),!0}function kA(a,l,h){var y=a.stateNode;if(!y)throw Error(t(169));h?(a=TA(a,l,kc),y.__reactInternalMemoizedMergedChildContext=a,yt(nr),yt(En),ht(En,a)):yt(nr),ht(nr,h)}var Us=null,Kg=!1,s1=!1;function RA(a){Us===null?Us=[a]:Us.push(a)}function gT(a){Kg=!0,RA(a)}function Qo(){if(!s1&&Us!==null){s1=!0;var a=0,l=it;try{var h=Us;for(it=1;a<h.length;a++){var y=h[a];do y=y(!0);while(y!==null)}Us=null,Kg=!1}catch(E){throw Us!==null&&(Us=Us.slice(a+1)),Lx(Bw,Qo),E}finally{it=l,s1=!1}}return null}var Su=[],Iu=0,Gg=null,Wg=0,Qr=[],Zr=0,Rc=null,Ls=1,Fs="";function Uc(a,l){Su[Iu++]=Wg,Su[Iu++]=Gg,Gg=a,Wg=l}function UA(a,l,h){Qr[Zr++]=Ls,Qr[Zr++]=Fs,Qr[Zr++]=Rc,Rc=a;var y=Ls;a=Fs;var E=32-vi(y)-1;y&=~(1<<E),h+=1;var S=32-vi(l)+E;if(30<S){var L=E-E%5;S=(y&(1<<L)-1).toString(32),y>>=L,E-=L,Ls=1<<32-vi(l)+E|h<<E|y,Fs=S+a}else Ls=1<<S|h<<E|y,Fs=a}function o1(a){a.return!==null&&(Uc(a,1),UA(a,1,0))}function a1(a){for(;a===Gg;)Gg=Su[--Iu],Su[Iu]=null,Wg=Su[--Iu],Su[Iu]=null;for(;a===Rc;)Rc=Qr[--Zr],Qr[Zr]=null,Fs=Qr[--Zr],Qr[Zr]=null,Ls=Qr[--Zr],Qr[Zr]=null}var _r=null,Nr=null,wt=!1,xi=null;function LA(a,l){var h=ei(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=a,l=a.deletions,l===null?(a.deletions=[h],a.flags|=16):l.push(h)}function FA(a,l){switch(a.tag){case 5:var h=a.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,_r=a,Nr=Ko(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,_r=a,Nr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=Rc!==null?{id:Ls,overflow:Fs}:null,a.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=ei(18,null,null,0),h.stateNode=l,h.return=a,a.child=h,_r=a,Nr=null,!0):!1;default:return!1}}function c1(a){return(a.mode&1)!==0&&(a.flags&128)===0}function l1(a){if(wt){var l=Nr;if(l){var h=l;if(!FA(a,l)){if(c1(a))throw Error(t(418));l=Ko(h.nextSibling);var y=_r;l&&FA(a,l)?LA(y,h):(a.flags=a.flags&-4097|2,wt=!1,_r=a)}}else{if(c1(a))throw Error(t(418));a.flags=a.flags&-4097|2,wt=!1,_r=a}}}function MA(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;_r=a}function Qg(a){if(a!==_r)return!1;if(!wt)return MA(a),wt=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!e1(a.type,a.memoizedProps)),l&&(l=Nr)){if(c1(a))throw jA(),Error(t(418));for(;l;)LA(a,l),l=Ko(l.nextSibling)}if(MA(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(l===0){Nr=Ko(a.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}a=a.nextSibling}Nr=null}}else Nr=_r?Ko(a.stateNode.nextSibling):null;return!0}function jA(){for(var a=Nr;a;)a=Ko(a.nextSibling)}function Ou(){Nr=_r=null,wt=!1}function u1(a){xi===null?xi=[a]:xi.push(a)}var yT=T.ReactCurrentBatchConfig;function sd(a,l,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var y=h.stateNode}if(!y)throw Error(t(147,a));var E=y,S=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===S?l.ref:(l=function(L){var W=E.refs;L===null?delete W[S]:W[S]=L},l._stringRef=S,l)}if(typeof a!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,a))}return a}function Zg(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function zA(a){var l=a._init;return l(a._payload)}function HA(a){function l(ne,X){if(a){var oe=ne.deletions;oe===null?(ne.deletions=[X],ne.flags|=16):oe.push(X)}}function h(ne,X){if(!a)return null;for(;X!==null;)l(ne,X),X=X.sibling;return null}function y(ne,X){for(ne=new Map;X!==null;)X.key!==null?ne.set(X.key,X):ne.set(X.index,X),X=X.sibling;return ne}function E(ne,X){return ne=ra(ne,X),ne.index=0,ne.sibling=null,ne}function S(ne,X,oe){return ne.index=oe,a?(oe=ne.alternate,oe!==null?(oe=oe.index,oe<X?(ne.flags|=2,X):oe):(ne.flags|=2,X)):(ne.flags|=1048576,X)}function L(ne){return a&&ne.alternate===null&&(ne.flags|=2),ne}function W(ne,X,oe,ye){return X===null||X.tag!==6?(X=tb(oe,ne.mode,ye),X.return=ne,X):(X=E(X,oe),X.return=ne,X)}function J(ne,X,oe,ye){var _e=oe.type;return _e===H?he(ne,X,oe.props.children,ye,oe.key):X!==null&&(X.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===x&&zA(_e)===X.type)?(ye=E(X,oe.props),ye.ref=sd(ne,X,oe),ye.return=ne,ye):(ye=v0(oe.type,oe.key,oe.props,null,ne.mode,ye),ye.ref=sd(ne,X,oe),ye.return=ne,ye)}function ae(ne,X,oe,ye){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=nb(oe,ne.mode,ye),X.return=ne,X):(X=E(X,oe.children||[]),X.return=ne,X)}function he(ne,X,oe,ye,_e){return X===null||X.tag!==7?(X=qc(oe,ne.mode,ye,_e),X.return=ne,X):(X=E(X,oe),X.return=ne,X)}function ge(ne,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number")return X=tb(""+X,ne.mode,oe),X.return=ne,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case k:return oe=v0(X.type,X.key,X.props,null,ne.mode,oe),oe.ref=sd(ne,null,X),oe.return=ne,oe;case j:return X=nb(X,ne.mode,oe),X.return=ne,X;case x:var ye=X._init;return ge(ne,ye(X._payload),oe)}if(Fo(X)||I(X))return X=qc(X,ne.mode,oe,null),X.return=ne,X;Zg(ne,X)}return null}function fe(ne,X,oe,ye){var _e=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return _e!==null?null:W(ne,X,""+oe,ye);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case k:return oe.key===_e?J(ne,X,oe,ye):null;case j:return oe.key===_e?ae(ne,X,oe,ye):null;case x:return _e=oe._init,fe(ne,X,_e(oe._payload),ye)}if(Fo(oe)||I(oe))return _e!==null?null:he(ne,X,oe,ye,null);Zg(ne,oe)}return null}function Se(ne,X,oe,ye,_e){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ne=ne.get(oe)||null,W(X,ne,""+ye,_e);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case k:return ne=ne.get(ye.key===null?oe:ye.key)||null,J(X,ne,ye,_e);case j:return ne=ne.get(ye.key===null?oe:ye.key)||null,ae(X,ne,ye,_e);case x:var De=ye._init;return Se(ne,X,oe,De(ye._payload),_e)}if(Fo(ye)||I(ye))return ne=ne.get(oe)||null,he(X,ne,ye,_e,null);Zg(X,ye)}return null}function Pe(ne,X,oe,ye){for(var _e=null,De=null,$e=X,Ue=X=0,Zt=null;$e!==null&&Ue<oe.length;Ue++){$e.index>Ue?(Zt=$e,$e=null):Zt=$e.sibling;var Ze=fe(ne,$e,oe[Ue],ye);if(Ze===null){$e===null&&($e=Zt);break}a&&$e&&Ze.alternate===null&&l(ne,$e),X=S(Ze,X,Ue),De===null?_e=Ze:De.sibling=Ze,De=Ze,$e=Zt}if(Ue===oe.length)return h(ne,$e),wt&&Uc(ne,Ue),_e;if($e===null){for(;Ue<oe.length;Ue++)$e=ge(ne,oe[Ue],ye),$e!==null&&(X=S($e,X,Ue),De===null?_e=$e:De.sibling=$e,De=$e);return wt&&Uc(ne,Ue),_e}for($e=y(ne,$e);Ue<oe.length;Ue++)Zt=Se($e,ne,Ue,oe[Ue],ye),Zt!==null&&(a&&Zt.alternate!==null&&$e.delete(Zt.key===null?Ue:Zt.key),X=S(Zt,X,Ue),De===null?_e=Zt:De.sibling=Zt,De=Zt);return a&&$e.forEach(function(ia){return l(ne,ia)}),wt&&Uc(ne,Ue),_e}function Ce(ne,X,oe,ye){var _e=I(oe);if(typeof _e!="function")throw Error(t(150));if(oe=_e.call(oe),oe==null)throw Error(t(151));for(var De=_e=null,$e=X,Ue=X=0,Zt=null,Ze=oe.next();$e!==null&&!Ze.done;Ue++,Ze=oe.next()){$e.index>Ue?(Zt=$e,$e=null):Zt=$e.sibling;var ia=fe(ne,$e,Ze.value,ye);if(ia===null){$e===null&&($e=Zt);break}a&&$e&&ia.alternate===null&&l(ne,$e),X=S(ia,X,Ue),De===null?_e=ia:De.sibling=ia,De=ia,$e=Zt}if(Ze.done)return h(ne,$e),wt&&Uc(ne,Ue),_e;if($e===null){for(;!Ze.done;Ue++,Ze=oe.next())Ze=ge(ne,Ze.value,ye),Ze!==null&&(X=S(Ze,X,Ue),De===null?_e=Ze:De.sibling=Ze,De=Ze);return wt&&Uc(ne,Ue),_e}for($e=y(ne,$e);!Ze.done;Ue++,Ze=oe.next())Ze=Se($e,ne,Ue,Ze.value,ye),Ze!==null&&(a&&Ze.alternate!==null&&$e.delete(Ze.key===null?Ue:Ze.key),X=S(Ze,X,Ue),De===null?_e=Ze:De.sibling=Ze,De=Ze);return a&&$e.forEach(function(QT){return l(ne,QT)}),wt&&Uc(ne,Ue),_e}function Ct(ne,X,oe,ye){if(typeof oe=="object"&&oe!==null&&oe.type===H&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case k:e:{for(var _e=oe.key,De=X;De!==null;){if(De.key===_e){if(_e=oe.type,_e===H){if(De.tag===7){h(ne,De.sibling),X=E(De,oe.props.children),X.return=ne,ne=X;break e}}else if(De.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===x&&zA(_e)===De.type){h(ne,De.sibling),X=E(De,oe.props),X.ref=sd(ne,De,oe),X.return=ne,ne=X;break e}h(ne,De);break}else l(ne,De);De=De.sibling}oe.type===H?(X=qc(oe.props.children,ne.mode,ye,oe.key),X.return=ne,ne=X):(ye=v0(oe.type,oe.key,oe.props,null,ne.mode,ye),ye.ref=sd(ne,X,oe),ye.return=ne,ne=ye)}return L(ne);case j:e:{for(De=oe.key;X!==null;){if(X.key===De)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){h(ne,X.sibling),X=E(X,oe.children||[]),X.return=ne,ne=X;break e}else{h(ne,X);break}else l(ne,X);X=X.sibling}X=nb(oe,ne.mode,ye),X.return=ne,ne=X}return L(ne);case x:return De=oe._init,Ct(ne,X,De(oe._payload),ye)}if(Fo(oe))return Pe(ne,X,oe,ye);if(I(oe))return Ce(ne,X,oe,ye);Zg(ne,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,X!==null&&X.tag===6?(h(ne,X.sibling),X=E(X,oe),X.return=ne,ne=X):(h(ne,X),X=tb(oe,ne.mode,ye),X.return=ne,ne=X),L(ne)):h(ne,X)}return Ct}var Bu=HA(!0),VA=HA(!1),Jg=Go(null),Yg=null,Pu=null,f1=null;function h1(){f1=Pu=Yg=null}function d1(a){var l=Jg.current;yt(Jg),a._currentValue=l}function p1(a,l,h){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===h)break;a=a.return}}function Cu(a,l){Yg=a,f1=Pu=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(ir=!0),a.firstContext=null)}function Jr(a){var l=a._currentValue;if(f1!==a)if(a={context:a,memoizedValue:l,next:null},Pu===null){if(Yg===null)throw Error(t(308));Pu=a,Yg.dependencies={lanes:0,firstContext:a}}else Pu=Pu.next=a;return l}var Lc=null;function g1(a){Lc===null?Lc=[a]:Lc.push(a)}function qA(a,l,h,y){var E=l.interleaved;return E===null?(h.next=h,g1(l)):(h.next=E.next,E.next=h),l.interleaved=h,Ms(a,y)}function Ms(a,l){a.lanes|=l;var h=a.alternate;for(h!==null&&(h.lanes|=l),h=a,a=a.return;a!==null;)a.childLanes|=l,h=a.alternate,h!==null&&(h.childLanes|=l),h=a,a=a.return;return h.tag===3?h.stateNode:null}var Zo=!1;function y1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KA(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function js(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Jo(a,l,h){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Qe&2)!==0){var E=y.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),y.pending=l,Ms(a,h)}return E=y.interleaved,E===null?(l.next=l,g1(y)):(l.next=E.next,E.next=l),y.interleaved=l,Ms(a,h)}function Xg(a,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var y=l.lanes;y&=a.pendingLanes,h|=y,l.lanes=h,_w(a,h)}}function GA(a,l){var h=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var E=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var L={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};S===null?E=S=L:S=S.next=L,h=h.next}while(h!==null);S===null?E=S=l:S=S.next=l}else E=S=l;h={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:S,shared:y.shared,effects:y.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=l:a.next=l,h.lastBaseUpdate=l}function e0(a,l,h,y){var E=a.updateQueue;Zo=!1;var S=E.firstBaseUpdate,L=E.lastBaseUpdate,W=E.shared.pending;if(W!==null){E.shared.pending=null;var J=W,ae=J.next;J.next=null,L===null?S=ae:L.next=ae,L=J;var he=a.alternate;he!==null&&(he=he.updateQueue,W=he.lastBaseUpdate,W!==L&&(W===null?he.firstBaseUpdate=ae:W.next=ae,he.lastBaseUpdate=J))}if(S!==null){var ge=E.baseState;L=0,he=ae=J=null,W=S;do{var fe=W.lane,Se=W.eventTime;if((y&fe)===fe){he!==null&&(he=he.next={eventTime:Se,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var Pe=a,Ce=W;switch(fe=l,Se=h,Ce.tag){case 1:if(Pe=Ce.payload,typeof Pe=="function"){ge=Pe.call(Se,ge,fe);break e}ge=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ce.payload,fe=typeof Pe=="function"?Pe.call(Se,ge,fe):Pe,fe==null)break e;ge=_({},ge,fe);break e;case 2:Zo=!0}}W.callback!==null&&W.lane!==0&&(a.flags|=64,fe=E.effects,fe===null?E.effects=[W]:fe.push(W))}else Se={eventTime:Se,lane:fe,tag:W.tag,payload:W.payload,callback:W.callback,next:null},he===null?(ae=he=Se,J=ge):he=he.next=Se,L|=fe;if(W=W.next,W===null){if(W=E.shared.pending,W===null)break;fe=W,W=fe.next,fe.next=null,E.lastBaseUpdate=fe,E.shared.pending=null}}while(!0);if(he===null&&(J=ge),E.baseState=J,E.firstBaseUpdate=ae,E.lastBaseUpdate=he,l=E.shared.interleaved,l!==null){E=l;do L|=E.lane,E=E.next;while(E!==l)}else S===null&&(E.shared.lanes=0);jc|=L,a.lanes=L,a.memoizedState=ge}}function WA(a,l,h){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var y=a[l],E=y.callback;if(E!==null){if(y.callback=null,y=h,typeof E!="function")throw Error(t(191,E));E.call(y)}}}var od={},rs=Go(od),ad=Go(od),cd=Go(od);function Fc(a){if(a===od)throw Error(t(174));return a}function m1(a,l){switch(ht(cd,l),ht(ad,a),ht(rs,od),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:kh(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=kh(l,a)}yt(rs),ht(rs,l)}function _u(){yt(rs),yt(ad),yt(cd)}function QA(a){Fc(cd.current);var l=Fc(rs.current),h=kh(l,a.type);l!==h&&(ht(ad,a),ht(rs,h))}function w1(a){ad.current===a&&(yt(rs),yt(ad))}var Et=Go(0);function t0(a){for(var l=a;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var b1=[];function v1(){for(var a=0;a<b1.length;a++)b1[a]._workInProgressVersionPrimary=null;b1.length=0}var n0=T.ReactCurrentDispatcher,E1=T.ReactCurrentBatchConfig,Mc=0,xt=null,Lt=null,Wt=null,r0=!1,ld=!1,ud=0,mT=0;function xn(){throw Error(t(321))}function x1(a,l){if(l===null)return!1;for(var h=0;h<l.length&&h<a.length;h++)if(!Ei(a[h],l[h]))return!1;return!0}function A1(a,l,h,y,E,S){if(Mc=S,xt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,n0.current=a===null||a.memoizedState===null?ET:xT,a=h(y,E),ld){S=0;do{if(ld=!1,ud=0,25<=S)throw Error(t(301));S+=1,Wt=Lt=null,l.updateQueue=null,n0.current=AT,a=h(y,E)}while(ld)}if(n0.current=o0,l=Lt!==null&&Lt.next!==null,Mc=0,Wt=Lt=xt=null,r0=!1,l)throw Error(t(300));return a}function S1(){var a=ud!==0;return ud=0,a}function is(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?xt.memoizedState=Wt=a:Wt=Wt.next=a,Wt}function Yr(){if(Lt===null){var a=xt.alternate;a=a!==null?a.memoizedState:null}else a=Lt.next;var l=Wt===null?xt.memoizedState:Wt.next;if(l!==null)Wt=l,Lt=a;else{if(a===null)throw Error(t(310));Lt=a,a={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Wt===null?xt.memoizedState=Wt=a:Wt=Wt.next=a}return Wt}function fd(a,l){return typeof l=="function"?l(a):l}function I1(a){var l=Yr(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=a;var y=Lt,E=y.baseQueue,S=h.pending;if(S!==null){if(E!==null){var L=E.next;E.next=S.next,S.next=L}y.baseQueue=E=S,h.pending=null}if(E!==null){S=E.next,y=y.baseState;var W=L=null,J=null,ae=S;do{var he=ae.lane;if((Mc&he)===he)J!==null&&(J=J.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),y=ae.hasEagerState?ae.eagerState:a(y,ae.action);else{var ge={lane:he,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};J===null?(W=J=ge,L=y):J=J.next=ge,xt.lanes|=he,jc|=he}ae=ae.next}while(ae!==null&&ae!==S);J===null?L=y:J.next=W,Ei(y,l.memoizedState)||(ir=!0),l.memoizedState=y,l.baseState=L,l.baseQueue=J,h.lastRenderedState=y}if(a=h.interleaved,a!==null){E=a;do S=E.lane,xt.lanes|=S,jc|=S,E=E.next;while(E!==a)}else E===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function O1(a){var l=Yr(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=a;var y=h.dispatch,E=h.pending,S=l.memoizedState;if(E!==null){h.pending=null;var L=E=E.next;do S=a(S,L.action),L=L.next;while(L!==E);Ei(S,l.memoizedState)||(ir=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),h.lastRenderedState=S}return[S,y]}function ZA(){}function JA(a,l){var h=xt,y=Yr(),E=l(),S=!Ei(y.memoizedState,E);if(S&&(y.memoizedState=E,ir=!0),y=y.queue,B1(e8.bind(null,h,y,a),[a]),y.getSnapshot!==l||S||Wt!==null&&Wt.memoizedState.tag&1){if(h.flags|=2048,hd(9,XA.bind(null,h,y,E,l),void 0,null),Qt===null)throw Error(t(349));(Mc&30)!==0||YA(h,l,E)}return E}function YA(a,l,h){a.flags|=16384,a={getSnapshot:l,value:h},l=xt.updateQueue,l===null?(l={lastEffect:null,stores:null},xt.updateQueue=l,l.stores=[a]):(h=l.stores,h===null?l.stores=[a]:h.push(a))}function XA(a,l,h,y){l.value=h,l.getSnapshot=y,t8(l)&&n8(a)}function e8(a,l,h){return h(function(){t8(l)&&n8(a)})}function t8(a){var l=a.getSnapshot;a=a.value;try{var h=l();return!Ei(a,h)}catch{return!0}}function n8(a){var l=Ms(a,1);l!==null&&Oi(l,a,1,-1)}function r8(a){var l=is();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fd,lastRenderedState:a},l.queue=a,a=a.dispatch=vT.bind(null,xt,a),[l.memoizedState,a]}function hd(a,l,h,y){return a={tag:a,create:l,destroy:h,deps:y,next:null},l=xt.updateQueue,l===null?(l={lastEffect:null,stores:null},xt.updateQueue=l,l.lastEffect=a.next=a):(h=l.lastEffect,h===null?l.lastEffect=a.next=a:(y=h.next,h.next=a,a.next=y,l.lastEffect=a)),a}function i8(){return Yr().memoizedState}function i0(a,l,h,y){var E=is();xt.flags|=a,E.memoizedState=hd(1|l,h,void 0,y===void 0?null:y)}function s0(a,l,h,y){var E=Yr();y=y===void 0?null:y;var S=void 0;if(Lt!==null){var L=Lt.memoizedState;if(S=L.destroy,y!==null&&x1(y,L.deps)){E.memoizedState=hd(l,h,S,y);return}}xt.flags|=a,E.memoizedState=hd(1|l,h,S,y)}function s8(a,l){return i0(8390656,8,a,l)}function B1(a,l){return s0(2048,8,a,l)}function o8(a,l){return s0(4,2,a,l)}function a8(a,l){return s0(4,4,a,l)}function c8(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function l8(a,l,h){return h=h!=null?h.concat([a]):null,s0(4,4,c8.bind(null,l,a),h)}function P1(){}function u8(a,l){var h=Yr();l=l===void 0?null:l;var y=h.memoizedState;return y!==null&&l!==null&&x1(l,y[1])?y[0]:(h.memoizedState=[a,l],a)}function f8(a,l){var h=Yr();l=l===void 0?null:l;var y=h.memoizedState;return y!==null&&l!==null&&x1(l,y[1])?y[0]:(a=a(),h.memoizedState=[a,l],a)}function h8(a,l,h){return(Mc&21)===0?(a.baseState&&(a.baseState=!1,ir=!0),a.memoizedState=h):(Ei(h,l)||(h=zx(),xt.lanes|=h,jc|=h,a.baseState=!0),l)}function wT(a,l){var h=it;it=h!==0&&4>h?h:4,a(!0);var y=E1.transition;E1.transition={};try{a(!1),l()}finally{it=h,E1.transition=y}}function d8(){return Yr().memoizedState}function bT(a,l,h){var y=ta(a);if(h={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null},p8(a))g8(l,h);else if(h=qA(a,l,h,y),h!==null){var E=Vn();Oi(h,a,y,E),y8(h,l,y)}}function vT(a,l,h){var y=ta(a),E={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null};if(p8(a))g8(l,E);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var L=l.lastRenderedState,W=S(L,h);if(E.hasEagerState=!0,E.eagerState=W,Ei(W,L)){var J=l.interleaved;J===null?(E.next=E,g1(l)):(E.next=J.next,J.next=E),l.interleaved=E;return}}catch{}finally{}h=qA(a,l,E,y),h!==null&&(E=Vn(),Oi(h,a,y,E),y8(h,l,y))}}function p8(a){var l=a.alternate;return a===xt||l!==null&&l===xt}function g8(a,l){ld=r0=!0;var h=a.pending;h===null?l.next=l:(l.next=h.next,h.next=l),a.pending=l}function y8(a,l,h){if((h&4194240)!==0){var y=l.lanes;y&=a.pendingLanes,h|=y,l.lanes=h,_w(a,h)}}var o0={readContext:Jr,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},ET={readContext:Jr,useCallback:function(a,l){return is().memoizedState=[a,l===void 0?null:l],a},useContext:Jr,useEffect:s8,useImperativeHandle:function(a,l,h){return h=h!=null?h.concat([a]):null,i0(4194308,4,c8.bind(null,l,a),h)},useLayoutEffect:function(a,l){return i0(4194308,4,a,l)},useInsertionEffect:function(a,l){return i0(4,2,a,l)},useMemo:function(a,l){var h=is();return l=l===void 0?null:l,a=a(),h.memoizedState=[a,l],a},useReducer:function(a,l,h){var y=is();return l=h!==void 0?h(l):l,y.memoizedState=y.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},y.queue=a,a=a.dispatch=bT.bind(null,xt,a),[y.memoizedState,a]},useRef:function(a){var l=is();return a={current:a},l.memoizedState=a},useState:r8,useDebugValue:P1,useDeferredValue:function(a){return is().memoizedState=a},useTransition:function(){var a=r8(!1),l=a[0];return a=wT.bind(null,a[1]),is().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,h){var y=xt,E=is();if(wt){if(h===void 0)throw Error(t(407));h=h()}else{if(h=l(),Qt===null)throw Error(t(349));(Mc&30)!==0||YA(y,l,h)}E.memoizedState=h;var S={value:h,getSnapshot:l};return E.queue=S,s8(e8.bind(null,y,S,a),[a]),y.flags|=2048,hd(9,XA.bind(null,y,S,h,l),void 0,null),h},useId:function(){var a=is(),l=Qt.identifierPrefix;if(wt){var h=Fs,y=Ls;h=(y&~(1<<32-vi(y)-1)).toString(32)+h,l=":"+l+"R"+h,h=ud++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=mT++,l=":"+l+"r"+h.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},xT={readContext:Jr,useCallback:u8,useContext:Jr,useEffect:B1,useImperativeHandle:l8,useInsertionEffect:o8,useLayoutEffect:a8,useMemo:f8,useReducer:I1,useRef:i8,useState:function(){return I1(fd)},useDebugValue:P1,useDeferredValue:function(a){var l=Yr();return h8(l,Lt.memoizedState,a)},useTransition:function(){var a=I1(fd)[0],l=Yr().memoizedState;return[a,l]},useMutableSource:ZA,useSyncExternalStore:JA,useId:d8,unstable_isNewReconciler:!1},AT={readContext:Jr,useCallback:u8,useContext:Jr,useEffect:B1,useImperativeHandle:l8,useInsertionEffect:o8,useLayoutEffect:a8,useMemo:f8,useReducer:O1,useRef:i8,useState:function(){return O1(fd)},useDebugValue:P1,useDeferredValue:function(a){var l=Yr();return Lt===null?l.memoizedState=a:h8(l,Lt.memoizedState,a)},useTransition:function(){var a=O1(fd)[0],l=Yr().memoizedState;return[a,l]},useMutableSource:ZA,useSyncExternalStore:JA,useId:d8,unstable_isNewReconciler:!1};function Ai(a,l){if(a&&a.defaultProps){l=_({},l),a=a.defaultProps;for(var h in a)l[h]===void 0&&(l[h]=a[h]);return l}return l}function C1(a,l,h,y){l=a.memoizedState,h=h(y,l),h=h==null?l:_({},l,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var a0={isMounted:function(a){return(a=a._reactInternals)?$c(a)===a:!1},enqueueSetState:function(a,l,h){a=a._reactInternals;var y=Vn(),E=ta(a),S=js(y,E);S.payload=l,h!=null&&(S.callback=h),l=Jo(a,S,E),l!==null&&(Oi(l,a,E,y),Xg(l,a,E))},enqueueReplaceState:function(a,l,h){a=a._reactInternals;var y=Vn(),E=ta(a),S=js(y,E);S.tag=1,S.payload=l,h!=null&&(S.callback=h),l=Jo(a,S,E),l!==null&&(Oi(l,a,E,y),Xg(l,a,E))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var h=Vn(),y=ta(a),E=js(h,y);E.tag=2,l!=null&&(E.callback=l),l=Jo(a,E,y),l!==null&&(Oi(l,a,y,h),Xg(l,a,y))}};function m8(a,l,h,y,E,S,L){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,S,L):l.prototype&&l.prototype.isPureReactComponent?!Yh(h,y)||!Yh(E,S):!0}function w8(a,l,h){var y=!1,E=Wo,S=l.contextType;return typeof S=="object"&&S!==null?S=Jr(S):(E=rr(l)?kc:En.current,y=l.contextTypes,S=(y=y!=null)?Au(a,E):Wo),l=new l(h,S),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=a0,a.stateNode=l,l._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=E,a.__reactInternalMemoizedMaskedChildContext=S),l}function b8(a,l,h,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,y),l.state!==a&&a0.enqueueReplaceState(l,l.state,null)}function _1(a,l,h,y){var E=a.stateNode;E.props=h,E.state=a.memoizedState,E.refs={},y1(a);var S=l.contextType;typeof S=="object"&&S!==null?E.context=Jr(S):(S=rr(l)?kc:En.current,E.context=Au(a,S)),E.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(C1(a,l,S,h),E.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(l=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),l!==E.state&&a0.enqueueReplaceState(E,E.state,null),e0(a,h,E,y),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308)}function Nu(a,l){try{var h="",y=l;do h+=Z(y),y=y.return;while(y);var E=h}catch(S){E=`
Error generating stack: `+S.message+`
`+S.stack}return{value:a,source:l,stack:E,digest:null}}function N1(a,l,h){return{value:a,source:null,stack:h??null,digest:l??null}}function D1(a,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var ST=typeof WeakMap=="function"?WeakMap:Map;function v8(a,l,h){h=js(-1,h),h.tag=3,h.payload={element:null};var y=l.value;return h.callback=function(){p0||(p0=!0,G1=y),D1(a,l)},h}function E8(a,l,h){h=js(-1,h),h.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var E=l.value;h.payload=function(){return y(E)},h.callback=function(){D1(a,l)}}var S=a.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(h.callback=function(){D1(a,l),typeof y!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var L=l.stack;this.componentDidCatch(l.value,{componentStack:L!==null?L:""})}),h}function x8(a,l,h){var y=a.pingCache;if(y===null){y=a.pingCache=new ST;var E=new Set;y.set(l,E)}else E=y.get(l),E===void 0&&(E=new Set,y.set(l,E));E.has(h)||(E.add(h),a=LT.bind(null,a,l,h),l.then(a,a))}function A8(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function S8(a,l,h,y,E){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=js(-1,1),l.tag=2,Jo(h,l,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=E,a)}var IT=T.ReactCurrentOwner,ir=!1;function Hn(a,l,h,y){l.child=a===null?VA(l,null,h,y):Bu(l,a.child,h,y)}function I8(a,l,h,y,E){h=h.render;var S=l.ref;return Cu(l,E),y=A1(a,l,h,y,S,E),h=S1(),a!==null&&!ir?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~E,zs(a,l,E)):(wt&&h&&o1(l),l.flags|=1,Hn(a,l,y,E),l.child)}function O8(a,l,h,y,E){if(a===null){var S=h.type;return typeof S=="function"&&!eb(S)&&S.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=S,B8(a,l,S,y,E)):(a=v0(h.type,null,y,l,l.mode,E),a.ref=l.ref,a.return=l,l.child=a)}if(S=a.child,(a.lanes&E)===0){var L=S.memoizedProps;if(h=h.compare,h=h!==null?h:Yh,h(L,y)&&a.ref===l.ref)return zs(a,l,E)}return l.flags|=1,a=ra(S,y),a.ref=l.ref,a.return=l,l.child=a}function B8(a,l,h,y,E){if(a!==null){var S=a.memoizedProps;if(Yh(S,y)&&a.ref===l.ref)if(ir=!1,l.pendingProps=y=S,(a.lanes&E)!==0)(a.flags&131072)!==0&&(ir=!0);else return l.lanes=a.lanes,zs(a,l,E)}return $1(a,l,h,y,E)}function P8(a,l,h){var y=l.pendingProps,E=y.children,S=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht($u,Dr),Dr|=h;else{if((h&1073741824)===0)return a=S!==null?S.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,ht($u,Dr),Dr|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=S!==null?S.baseLanes:h,ht($u,Dr),Dr|=y}else S!==null?(y=S.baseLanes|h,l.memoizedState=null):y=h,ht($u,Dr),Dr|=y;return Hn(a,l,E,h),l.child}function C8(a,l){var h=l.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function $1(a,l,h,y,E){var S=rr(h)?kc:En.current;return S=Au(l,S),Cu(l,E),h=A1(a,l,h,y,S,E),y=S1(),a!==null&&!ir?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~E,zs(a,l,E)):(wt&&y&&o1(l),l.flags|=1,Hn(a,l,h,E),l.child)}function _8(a,l,h,y,E){if(rr(h)){var S=!0;qg(l)}else S=!1;if(Cu(l,E),l.stateNode===null)l0(a,l),w8(l,h,y),_1(l,h,y,E),y=!0;else if(a===null){var L=l.stateNode,W=l.memoizedProps;L.props=W;var J=L.context,ae=h.contextType;typeof ae=="object"&&ae!==null?ae=Jr(ae):(ae=rr(h)?kc:En.current,ae=Au(l,ae));var he=h.getDerivedStateFromProps,ge=typeof he=="function"||typeof L.getSnapshotBeforeUpdate=="function";ge||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==y||J!==ae)&&b8(l,L,y,ae),Zo=!1;var fe=l.memoizedState;L.state=fe,e0(l,y,L,E),J=l.memoizedState,W!==y||fe!==J||nr.current||Zo?(typeof he=="function"&&(C1(l,h,he,y),J=l.memoizedState),(W=Zo||m8(l,h,W,y,fe,J,ae))?(ge||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(l.flags|=4194308)):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=J),L.props=y,L.state=J,L.context=ae,y=W):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{L=l.stateNode,KA(a,l),W=l.memoizedProps,ae=l.type===l.elementType?W:Ai(l.type,W),L.props=ae,ge=l.pendingProps,fe=L.context,J=h.contextType,typeof J=="object"&&J!==null?J=Jr(J):(J=rr(h)?kc:En.current,J=Au(l,J));var Se=h.getDerivedStateFromProps;(he=typeof Se=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==ge||fe!==J)&&b8(l,L,y,J),Zo=!1,fe=l.memoizedState,L.state=fe,e0(l,y,L,E);var Pe=l.memoizedState;W!==ge||fe!==Pe||nr.current||Zo?(typeof Se=="function"&&(C1(l,h,Se,y),Pe=l.memoizedState),(ae=Zo||m8(l,h,ae,y,fe,Pe,J)||!1)?(he||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(y,Pe,J),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(y,Pe,J)),typeof L.componentDidUpdate=="function"&&(l.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof L.componentDidUpdate!="function"||W===a.memoizedProps&&fe===a.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===a.memoizedProps&&fe===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Pe),L.props=y,L.state=Pe,L.context=J,y=ae):(typeof L.componentDidUpdate!="function"||W===a.memoizedProps&&fe===a.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===a.memoizedProps&&fe===a.memoizedState||(l.flags|=1024),y=!1)}return T1(a,l,h,y,S,E)}function T1(a,l,h,y,E,S){C8(a,l);var L=(l.flags&128)!==0;if(!y&&!L)return E&&kA(l,h,!1),zs(a,l,S);y=l.stateNode,IT.current=l;var W=L&&typeof h.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,a!==null&&L?(l.child=Bu(l,a.child,null,S),l.child=Bu(l,null,W,S)):Hn(a,l,W,S),l.memoizedState=y.state,E&&kA(l,h,!0),l.child}function N8(a){var l=a.stateNode;l.pendingContext?$A(a,l.pendingContext,l.pendingContext!==l.context):l.context&&$A(a,l.context,!1),m1(a,l.containerInfo)}function D8(a,l,h,y,E){return Ou(),u1(E),l.flags|=256,Hn(a,l,h,y),l.child}var k1={dehydrated:null,treeContext:null,retryLane:0};function R1(a){return{baseLanes:a,cachePool:null,transitions:null}}function $8(a,l,h){var y=l.pendingProps,E=Et.current,S=!1,L=(l.flags&128)!==0,W;if((W=L)||(W=a!==null&&a.memoizedState===null?!1:(E&2)!==0),W?(S=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(E|=1),ht(Et,E&1),a===null)return l1(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(L=y.children,a=y.fallback,S?(y=l.mode,S=l.child,L={mode:"hidden",children:L},(y&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=L):S=E0(L,y,0,null),a=qc(a,y,h,null),S.return=l,a.return=l,S.sibling=a,l.child=S,l.child.memoizedState=R1(h),l.memoizedState=k1,a):U1(l,L));if(E=a.memoizedState,E!==null&&(W=E.dehydrated,W!==null))return OT(a,l,L,y,W,E,h);if(S){S=y.fallback,L=l.mode,E=a.child,W=E.sibling;var J={mode:"hidden",children:y.children};return(L&1)===0&&l.child!==E?(y=l.child,y.childLanes=0,y.pendingProps=J,l.deletions=null):(y=ra(E,J),y.subtreeFlags=E.subtreeFlags&14680064),W!==null?S=ra(W,S):(S=qc(S,L,h,null),S.flags|=2),S.return=l,y.return=l,y.sibling=S,l.child=y,y=S,S=l.child,L=a.child.memoizedState,L=L===null?R1(h):{baseLanes:L.baseLanes|h,cachePool:null,transitions:L.transitions},S.memoizedState=L,S.childLanes=a.childLanes&~h,l.memoizedState=k1,y}return S=a.child,a=S.sibling,y=ra(S,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=h),y.return=l,y.sibling=null,a!==null&&(h=l.deletions,h===null?(l.deletions=[a],l.flags|=16):h.push(a)),l.child=y,l.memoizedState=null,y}function U1(a,l){return l=E0({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function c0(a,l,h,y){return y!==null&&u1(y),Bu(l,a.child,null,h),a=U1(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function OT(a,l,h,y,E,S,L){if(h)return l.flags&256?(l.flags&=-257,y=N1(Error(t(422))),c0(a,l,L,y)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(S=y.fallback,E=l.mode,y=E0({mode:"visible",children:y.children},E,0,null),S=qc(S,E,L,null),S.flags|=2,y.return=l,S.return=l,y.sibling=S,l.child=y,(l.mode&1)!==0&&Bu(l,a.child,null,L),l.child.memoizedState=R1(L),l.memoizedState=k1,S);if((l.mode&1)===0)return c0(a,l,L,null);if(E.data==="$!"){if(y=E.nextSibling&&E.nextSibling.dataset,y)var W=y.dgst;return y=W,S=Error(t(419)),y=N1(S,y,void 0),c0(a,l,L,y)}if(W=(L&a.childLanes)!==0,ir||W){if(y=Qt,y!==null){switch(L&-L){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(y.suspendedLanes|L))!==0?0:E,E!==0&&E!==S.retryLane&&(S.retryLane=E,Ms(a,E),Oi(y,a,E,-1))}return X1(),y=N1(Error(t(421))),c0(a,l,L,y)}return E.data==="$?"?(l.flags|=128,l.child=a.child,l=FT.bind(null,a),E._reactRetry=l,null):(a=S.treeContext,Nr=Ko(E.nextSibling),_r=l,wt=!0,xi=null,a!==null&&(Qr[Zr++]=Ls,Qr[Zr++]=Fs,Qr[Zr++]=Rc,Ls=a.id,Fs=a.overflow,Rc=l),l=U1(l,y.children),l.flags|=4096,l)}function T8(a,l,h){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),p1(a.return,l,h)}function L1(a,l,h,y,E){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:E}:(S.isBackwards=l,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=h,S.tailMode=E)}function k8(a,l,h){var y=l.pendingProps,E=y.revealOrder,S=y.tail;if(Hn(a,l,y.children,h),y=Et.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&T8(a,h,l);else if(a.tag===19)T8(a,h,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(ht(Et,y),(l.mode&1)===0)l.memoizedState=null;else switch(E){case"forwards":for(h=l.child,E=null;h!==null;)a=h.alternate,a!==null&&t0(a)===null&&(E=h),h=h.sibling;h=E,h===null?(E=l.child,l.child=null):(E=h.sibling,h.sibling=null),L1(l,!1,E,h,S);break;case"backwards":for(h=null,E=l.child,l.child=null;E!==null;){if(a=E.alternate,a!==null&&t0(a)===null){l.child=E;break}a=E.sibling,E.sibling=h,h=E,E=a}L1(l,!0,h,null,S);break;case"together":L1(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function l0(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function zs(a,l,h){if(a!==null&&(l.dependencies=a.dependencies),jc|=l.lanes,(h&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,h=ra(a,a.pendingProps),l.child=h,h.return=l;a.sibling!==null;)a=a.sibling,h=h.sibling=ra(a,a.pendingProps),h.return=l;h.sibling=null}return l.child}function BT(a,l,h){switch(l.tag){case 3:N8(l),Ou();break;case 5:QA(l);break;case 1:rr(l.type)&&qg(l);break;case 4:m1(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,E=l.memoizedProps.value;ht(Jg,y._currentValue),y._currentValue=E;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(ht(Et,Et.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?$8(a,l,h):(ht(Et,Et.current&1),a=zs(a,l,h),a!==null?a.sibling:null);ht(Et,Et.current&1);break;case 19:if(y=(h&l.childLanes)!==0,(a.flags&128)!==0){if(y)return k8(a,l,h);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ht(Et,Et.current),y)break;return null;case 22:case 23:return l.lanes=0,P8(a,l,h)}return zs(a,l,h)}var R8,F1,U8,L8;R8=function(a,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},F1=function(){},U8=function(a,l,h,y){var E=a.memoizedProps;if(E!==y){a=l.stateNode,Fc(rs.current);var S=null;switch(h){case"input":E=Ve(a,E),y=Ve(a,y),S=[];break;case"select":E=_({},E,{value:void 0}),y=_({},y,{value:void 0}),S=[];break;case"textarea":E=uu(a,E),y=uu(a,y),S=[];break;default:typeof E.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=zg)}bw(h,y);var L;h=null;for(ae in E)if(!y.hasOwnProperty(ae)&&E.hasOwnProperty(ae)&&E[ae]!=null)if(ae==="style"){var W=E[ae];for(L in W)W.hasOwnProperty(L)&&(h||(h={}),h[L]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(i.hasOwnProperty(ae)?S||(S=[]):(S=S||[]).push(ae,null));for(ae in y){var J=y[ae];if(W=E!=null?E[ae]:void 0,y.hasOwnProperty(ae)&&J!==W&&(J!=null||W!=null))if(ae==="style")if(W){for(L in W)!W.hasOwnProperty(L)||J&&J.hasOwnProperty(L)||(h||(h={}),h[L]="");for(L in J)J.hasOwnProperty(L)&&W[L]!==J[L]&&(h||(h={}),h[L]=J[L])}else h||(S||(S=[]),S.push(ae,h)),h=J;else ae==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,W=W?W.__html:void 0,J!=null&&W!==J&&(S=S||[]).push(ae,J)):ae==="children"?typeof J!="string"&&typeof J!="number"||(S=S||[]).push(ae,""+J):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(i.hasOwnProperty(ae)?(J!=null&&ae==="onScroll"&&gt("scroll",a),S||W===J||(S=[])):(S=S||[]).push(ae,J))}h&&(S=S||[]).push("style",h);var ae=S;(l.updateQueue=ae)&&(l.flags|=4)}},L8=function(a,l,h,y){h!==y&&(l.flags|=4)};function dd(a,l){if(!wt)switch(a.tailMode){case"hidden":l=a.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function An(a){var l=a.alternate!==null&&a.alternate.child===a.child,h=0,y=0;if(l)for(var E=a.child;E!==null;)h|=E.lanes|E.childLanes,y|=E.subtreeFlags&14680064,y|=E.flags&14680064,E.return=a,E=E.sibling;else for(E=a.child;E!==null;)h|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=a,E=E.sibling;return a.subtreeFlags|=y,a.childLanes=h,l}function PT(a,l,h){var y=l.pendingProps;switch(a1(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(l),null;case 1:return rr(l.type)&&Vg(),An(l),null;case 3:return y=l.stateNode,_u(),yt(nr),yt(En),v1(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(Qg(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,xi!==null&&(Z1(xi),xi=null))),F1(a,l),An(l),null;case 5:w1(l);var E=Fc(cd.current);if(h=l.type,a!==null&&l.stateNode!=null)U8(a,l,h,y,E),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return An(l),null}if(a=Fc(rs.current),Qg(l)){y=l.stateNode,h=l.type;var S=l.memoizedProps;switch(y[ns]=l,y[rd]=S,a=(l.mode&1)!==0,h){case"dialog":gt("cancel",y),gt("close",y);break;case"iframe":case"object":case"embed":gt("load",y);break;case"video":case"audio":for(E=0;E<ed.length;E++)gt(ed[E],y);break;case"source":gt("error",y);break;case"img":case"image":case"link":gt("error",y),gt("load",y);break;case"details":gt("toggle",y);break;case"input":Gt(y,S),gt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!S.multiple},gt("invalid",y);break;case"textarea":Nh(y,S),gt("invalid",y)}bw(h,S),E=null;for(var L in S)if(S.hasOwnProperty(L)){var W=S[L];L==="children"?typeof W=="string"?y.textContent!==W&&(S.suppressHydrationWarning!==!0&&jg(y.textContent,W,a),E=["children",W]):typeof W=="number"&&y.textContent!==""+W&&(S.suppressHydrationWarning!==!0&&jg(y.textContent,W,a),E=["children",""+W]):i.hasOwnProperty(L)&&W!=null&&L==="onScroll"&&gt("scroll",y)}switch(h){case"input":Ne(y),ks(y,S,!0);break;case"textarea":Ne(y),$h(y);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(y.onclick=zg)}y=E,l.updateQueue=y,y!==null&&(l.flags|=4)}else{L=E.nodeType===9?E:E.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Th(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=L.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=L.createElement(h,{is:y.is}):(a=L.createElement(h),h==="select"&&(L=a,y.multiple?L.multiple=!0:y.size&&(L.size=y.size))):a=L.createElementNS(a,h),a[ns]=l,a[rd]=y,R8(a,l,!1,!1),l.stateNode=a;e:{switch(L=vw(h,y),h){case"dialog":gt("cancel",a),gt("close",a),E=y;break;case"iframe":case"object":case"embed":gt("load",a),E=y;break;case"video":case"audio":for(E=0;E<ed.length;E++)gt(ed[E],a);E=y;break;case"source":gt("error",a),E=y;break;case"img":case"image":case"link":gt("error",a),gt("load",a),E=y;break;case"details":gt("toggle",a),E=y;break;case"input":Gt(a,y),E=Ve(a,y),gt("invalid",a);break;case"option":E=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},E=_({},y,{value:void 0}),gt("invalid",a);break;case"textarea":Nh(a,y),E=uu(a,y),gt("invalid",a);break;default:E=y}bw(h,E),W=E;for(S in W)if(W.hasOwnProperty(S)){var J=W[S];S==="style"?Bx(a,J):S==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&vg(a,J)):S==="children"?typeof J=="string"?(h!=="textarea"||J!=="")&&Dc(a,J):typeof J=="number"&&Dc(a,""+J):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?J!=null&&S==="onScroll"&&gt("scroll",a):J!=null&&O(a,S,J,L))}switch(h){case"input":Ne(a),ks(a,y,!1);break;case"textarea":Ne(a),$h(a);break;case"option":y.value!=null&&a.setAttribute("value",""+le(y.value));break;case"select":a.multiple=!!y.multiple,S=y.value,S!=null?es(a,!!y.multiple,S,!1):y.defaultValue!=null&&es(a,!!y.multiple,y.defaultValue,!0);break;default:typeof E.onClick=="function"&&(a.onclick=zg)}switch(h){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return An(l),null;case 6:if(a&&l.stateNode!=null)L8(a,l,a.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(h=Fc(cd.current),Fc(rs.current),Qg(l)){if(y=l.stateNode,h=l.memoizedProps,y[ns]=l,(S=y.nodeValue!==h)&&(a=_r,a!==null))switch(a.tag){case 3:jg(y.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&jg(y.nodeValue,h,(a.mode&1)!==0)}S&&(l.flags|=4)}else y=(h.nodeType===9?h:h.ownerDocument).createTextNode(y),y[ns]=l,l.stateNode=y}return An(l),null;case 13:if(yt(Et),y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(wt&&Nr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)jA(),Ou(),l.flags|=98560,S=!1;else if(S=Qg(l),y!==null&&y.dehydrated!==null){if(a===null){if(!S)throw Error(t(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[ns]=l}else Ou(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;An(l),S=!1}else xi!==null&&(Z1(xi),xi=null),S=!0;if(!S)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Et.current&1)!==0?Ft===0&&(Ft=3):X1())),l.updateQueue!==null&&(l.flags|=4),An(l),null);case 4:return _u(),F1(a,l),a===null&&td(l.stateNode.containerInfo),An(l),null;case 10:return d1(l.type._context),An(l),null;case 17:return rr(l.type)&&Vg(),An(l),null;case 19:if(yt(Et),S=l.memoizedState,S===null)return An(l),null;if(y=(l.flags&128)!==0,L=S.rendering,L===null)if(y)dd(S,!1);else{if(Ft!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(L=t0(a),L!==null){for(l.flags|=128,dd(S,!1),y=L.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=h,h=l.child;h!==null;)S=h,a=y,S.flags&=14680066,L=S.alternate,L===null?(S.childLanes=0,S.lanes=a,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=L.childLanes,S.lanes=L.lanes,S.child=L.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=L.memoizedProps,S.memoizedState=L.memoizedState,S.updateQueue=L.updateQueue,S.type=L.type,a=L.dependencies,S.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return ht(Et,Et.current&1|2),l.child}a=a.sibling}S.tail!==null&&Pt()>Tu&&(l.flags|=128,y=!0,dd(S,!1),l.lanes=4194304)}else{if(!y)if(a=t0(L),a!==null){if(l.flags|=128,y=!0,h=a.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),dd(S,!0),S.tail===null&&S.tailMode==="hidden"&&!L.alternate&&!wt)return An(l),null}else 2*Pt()-S.renderingStartTime>Tu&&h!==1073741824&&(l.flags|=128,y=!0,dd(S,!1),l.lanes=4194304);S.isBackwards?(L.sibling=l.child,l.child=L):(h=S.last,h!==null?h.sibling=L:l.child=L,S.last=L)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=Pt(),l.sibling=null,h=Et.current,ht(Et,y?h&1|2:h&1),l):(An(l),null);case 22:case 23:return Y1(),y=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(Dr&1073741824)!==0&&(An(l),l.subtreeFlags&6&&(l.flags|=8192)):An(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function CT(a,l){switch(a1(l),l.tag){case 1:return rr(l.type)&&Vg(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return _u(),yt(nr),yt(En),v1(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return w1(l),null;case 13:if(yt(Et),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Ou()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return yt(Et),null;case 4:return _u(),null;case 10:return d1(l.type._context),null;case 22:case 23:return Y1(),null;case 24:return null;default:return null}}var u0=!1,Sn=!1,_T=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Du(a,l){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(y){St(a,l,y)}else h.current=null}function M1(a,l,h){try{h()}catch(y){St(a,l,y)}}var F8=!1;function NT(a,l){if(Yw=_g,a=mA(),Vw(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var E=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var L=0,W=-1,J=-1,ae=0,he=0,ge=a,fe=null;t:for(;;){for(var Se;ge!==h||E!==0&&ge.nodeType!==3||(W=L+E),ge!==S||y!==0&&ge.nodeType!==3||(J=L+y),ge.nodeType===3&&(L+=ge.nodeValue.length),(Se=ge.firstChild)!==null;)fe=ge,ge=Se;for(;;){if(ge===a)break t;if(fe===h&&++ae===E&&(W=L),fe===S&&++he===y&&(J=L),(Se=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=Se}h=W===-1||J===-1?null:{start:W,end:J}}else h=null}h=h||{start:0,end:0}}else h=null;for(Xw={focusedElem:a,selectionRange:h},_g=!1,Ie=l;Ie!==null;)if(l=Ie,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Ie=a;else for(;Ie!==null;){l=Ie;try{var Pe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Ce=Pe.memoizedProps,Ct=Pe.memoizedState,ne=l.stateNode,X=ne.getSnapshotBeforeUpdate(l.elementType===l.type?Ce:Ai(l.type,Ce),Ct);ne.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var oe=l.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ye){St(l,l.return,ye)}if(a=l.sibling,a!==null){a.return=l.return,Ie=a;break}Ie=l.return}return Pe=F8,F8=!1,Pe}function pd(a,l,h){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var E=y=y.next;do{if((E.tag&a)===a){var S=E.destroy;E.destroy=void 0,S!==void 0&&M1(l,h,S)}E=E.next}while(E!==y)}}function f0(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&a)===a){var y=h.create;h.destroy=y()}h=h.next}while(h!==l)}}function j1(a){var l=a.ref;if(l!==null){var h=a.stateNode;switch(a.tag){case 5:a=h;break;default:a=h}typeof l=="function"?l(a):l.current=a}}function M8(a){var l=a.alternate;l!==null&&(a.alternate=null,M8(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[ns],delete l[rd],delete l[r1],delete l[dT],delete l[pT])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function j8(a){return a.tag===5||a.tag===3||a.tag===4}function z8(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||j8(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function z1(a,l,h){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(a,l):h.insertBefore(a,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(a,h)):(l=h,l.appendChild(a)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=zg));else if(y!==4&&(a=a.child,a!==null))for(z1(a,l,h),a=a.sibling;a!==null;)z1(a,l,h),a=a.sibling}function H1(a,l,h){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?h.insertBefore(a,l):h.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(H1(a,l,h),a=a.sibling;a!==null;)H1(a,l,h),a=a.sibling}var an=null,Si=!1;function Yo(a,l,h){for(h=h.child;h!==null;)H8(a,l,h),h=h.sibling}function H8(a,l,h){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(Sg,h)}catch{}switch(h.tag){case 5:Sn||Du(h,l);case 6:var y=an,E=Si;an=null,Yo(a,l,h),an=y,Si=E,an!==null&&(Si?(a=an,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):an.removeChild(h.stateNode));break;case 18:an!==null&&(Si?(a=an,h=h.stateNode,a.nodeType===8?n1(a.parentNode,h):a.nodeType===1&&n1(a,h),Kh(a)):n1(an,h.stateNode));break;case 4:y=an,E=Si,an=h.stateNode.containerInfo,Si=!0,Yo(a,l,h),an=y,Si=E;break;case 0:case 11:case 14:case 15:if(!Sn&&(y=h.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){E=y=y.next;do{var S=E,L=S.destroy;S=S.tag,L!==void 0&&((S&2)!==0||(S&4)!==0)&&M1(h,l,L),E=E.next}while(E!==y)}Yo(a,l,h);break;case 1:if(!Sn&&(Du(h,l),y=h.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=h.memoizedProps,y.state=h.memoizedState,y.componentWillUnmount()}catch(W){St(h,l,W)}Yo(a,l,h);break;case 21:Yo(a,l,h);break;case 22:h.mode&1?(Sn=(y=Sn)||h.memoizedState!==null,Yo(a,l,h),Sn=y):Yo(a,l,h);break;default:Yo(a,l,h)}}function V8(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new _T),l.forEach(function(y){var E=MT.bind(null,a,y);h.has(y)||(h.add(y),y.then(E,E))})}}function Ii(a,l){var h=l.deletions;if(h!==null)for(var y=0;y<h.length;y++){var E=h[y];try{var S=a,L=l,W=L;e:for(;W!==null;){switch(W.tag){case 5:an=W.stateNode,Si=!1;break e;case 3:an=W.stateNode.containerInfo,Si=!0;break e;case 4:an=W.stateNode.containerInfo,Si=!0;break e}W=W.return}if(an===null)throw Error(t(160));H8(S,L,E),an=null,Si=!1;var J=E.alternate;J!==null&&(J.return=null),E.return=null}catch(ae){St(E,l,ae)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)q8(l,a),l=l.sibling}function q8(a,l){var h=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Ii(l,a),ss(a),y&4){try{pd(3,a,a.return),f0(3,a)}catch(Ce){St(a,a.return,Ce)}try{pd(5,a,a.return)}catch(Ce){St(a,a.return,Ce)}}break;case 1:Ii(l,a),ss(a),y&512&&h!==null&&Du(h,h.return);break;case 5:if(Ii(l,a),ss(a),y&512&&h!==null&&Du(h,h.return),a.flags&32){var E=a.stateNode;try{Dc(E,"")}catch(Ce){St(a,a.return,Ce)}}if(y&4&&(E=a.stateNode,E!=null)){var S=a.memoizedProps,L=h!==null?h.memoizedProps:S,W=a.type,J=a.updateQueue;if(a.updateQueue=null,J!==null)try{W==="input"&&S.type==="radio"&&S.name!=null&&on(E,S),vw(W,L);var ae=vw(W,S);for(L=0;L<J.length;L+=2){var he=J[L],ge=J[L+1];he==="style"?Bx(E,ge):he==="dangerouslySetInnerHTML"?vg(E,ge):he==="children"?Dc(E,ge):O(E,he,ge,ae)}switch(W){case"input":bi(E,S);break;case"textarea":Dh(E,S);break;case"select":var fe=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!S.multiple;var Se=S.value;Se!=null?es(E,!!S.multiple,Se,!1):fe!==!!S.multiple&&(S.defaultValue!=null?es(E,!!S.multiple,S.defaultValue,!0):es(E,!!S.multiple,S.multiple?[]:"",!1))}E[rd]=S}catch(Ce){St(a,a.return,Ce)}}break;case 6:if(Ii(l,a),ss(a),y&4){if(a.stateNode===null)throw Error(t(162));E=a.stateNode,S=a.memoizedProps;try{E.nodeValue=S}catch(Ce){St(a,a.return,Ce)}}break;case 3:if(Ii(l,a),ss(a),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Kh(l.containerInfo)}catch(Ce){St(a,a.return,Ce)}break;case 4:Ii(l,a),ss(a);break;case 13:Ii(l,a),ss(a),E=a.child,E.flags&8192&&(S=E.memoizedState!==null,E.stateNode.isHidden=S,!S||E.alternate!==null&&E.alternate.memoizedState!==null||(K1=Pt())),y&4&&V8(a);break;case 22:if(he=h!==null&&h.memoizedState!==null,a.mode&1?(Sn=(ae=Sn)||he,Ii(l,a),Sn=ae):Ii(l,a),ss(a),y&8192){if(ae=a.memoizedState!==null,(a.stateNode.isHidden=ae)&&!he&&(a.mode&1)!==0)for(Ie=a,he=a.child;he!==null;){for(ge=Ie=he;Ie!==null;){switch(fe=Ie,Se=fe.child,fe.tag){case 0:case 11:case 14:case 15:pd(4,fe,fe.return);break;case 1:Du(fe,fe.return);var Pe=fe.stateNode;if(typeof Pe.componentWillUnmount=="function"){y=fe,h=fe.return;try{l=y,Pe.props=l.memoizedProps,Pe.state=l.memoizedState,Pe.componentWillUnmount()}catch(Ce){St(y,h,Ce)}}break;case 5:Du(fe,fe.return);break;case 22:if(fe.memoizedState!==null){W8(ge);continue}}Se!==null?(Se.return=fe,Ie=Se):W8(ge)}he=he.sibling}e:for(he=null,ge=a;;){if(ge.tag===5){if(he===null){he=ge;try{E=ge.stateNode,ae?(S=E.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(W=ge.stateNode,J=ge.memoizedProps.style,L=J!=null&&J.hasOwnProperty("display")?J.display:null,W.style.display=Ox("display",L))}catch(Ce){St(a,a.return,Ce)}}}else if(ge.tag===6){if(he===null)try{ge.stateNode.nodeValue=ae?"":ge.memoizedProps}catch(Ce){St(a,a.return,Ce)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===a)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===a)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===a)break e;he===ge&&(he=null),ge=ge.return}he===ge&&(he=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:Ii(l,a),ss(a),y&4&&V8(a);break;case 21:break;default:Ii(l,a),ss(a)}}function ss(a){var l=a.flags;if(l&2){try{e:{for(var h=a.return;h!==null;){if(j8(h)){var y=h;break e}h=h.return}throw Error(t(160))}switch(y.tag){case 5:var E=y.stateNode;y.flags&32&&(Dc(E,""),y.flags&=-33);var S=z8(a);H1(a,S,E);break;case 3:case 4:var L=y.stateNode.containerInfo,W=z8(a);z1(a,W,L);break;default:throw Error(t(161))}}catch(J){St(a,a.return,J)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function DT(a,l,h){Ie=a,K8(a)}function K8(a,l,h){for(var y=(a.mode&1)!==0;Ie!==null;){var E=Ie,S=E.child;if(E.tag===22&&y){var L=E.memoizedState!==null||u0;if(!L){var W=E.alternate,J=W!==null&&W.memoizedState!==null||Sn;W=u0;var ae=Sn;if(u0=L,(Sn=J)&&!ae)for(Ie=E;Ie!==null;)L=Ie,J=L.child,L.tag===22&&L.memoizedState!==null?Q8(E):J!==null?(J.return=L,Ie=J):Q8(E);for(;S!==null;)Ie=S,K8(S),S=S.sibling;Ie=E,u0=W,Sn=ae}G8(a)}else(E.subtreeFlags&8772)!==0&&S!==null?(S.return=E,Ie=S):G8(a)}}function G8(a){for(;Ie!==null;){var l=Ie;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Sn||f0(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Sn)if(h===null)y.componentDidMount();else{var E=l.elementType===l.type?h.memoizedProps:Ai(l.type,h.memoizedProps);y.componentDidUpdate(E,h.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var S=l.updateQueue;S!==null&&WA(l,S,y);break;case 3:var L=l.updateQueue;if(L!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}WA(l,L,h)}break;case 5:var W=l.stateNode;if(h===null&&l.flags&4){h=W;var J=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&h.focus();break;case"img":J.src&&(h.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ae=l.alternate;if(ae!==null){var he=ae.memoizedState;if(he!==null){var ge=he.dehydrated;ge!==null&&Kh(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Sn||l.flags&512&&j1(l)}catch(fe){St(l,l.return,fe)}}if(l===a){Ie=null;break}if(h=l.sibling,h!==null){h.return=l.return,Ie=h;break}Ie=l.return}}function W8(a){for(;Ie!==null;){var l=Ie;if(l===a){Ie=null;break}var h=l.sibling;if(h!==null){h.return=l.return,Ie=h;break}Ie=l.return}}function Q8(a){for(;Ie!==null;){var l=Ie;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{f0(4,l)}catch(J){St(l,h,J)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var E=l.return;try{y.componentDidMount()}catch(J){St(l,E,J)}}var S=l.return;try{j1(l)}catch(J){St(l,S,J)}break;case 5:var L=l.return;try{j1(l)}catch(J){St(l,L,J)}}}catch(J){St(l,l.return,J)}if(l===a){Ie=null;break}var W=l.sibling;if(W!==null){W.return=l.return,Ie=W;break}Ie=l.return}}var $T=Math.ceil,h0=T.ReactCurrentDispatcher,V1=T.ReactCurrentOwner,Xr=T.ReactCurrentBatchConfig,Qe=0,Qt=null,Tt=null,cn=0,Dr=0,$u=Go(0),Ft=0,gd=null,jc=0,d0=0,q1=0,yd=null,sr=null,K1=0,Tu=1/0,Hs=null,p0=!1,G1=null,Xo=null,g0=!1,ea=null,y0=0,md=0,W1=null,m0=-1,w0=0;function Vn(){return(Qe&6)!==0?Pt():m0!==-1?m0:m0=Pt()}function ta(a){return(a.mode&1)===0?1:(Qe&2)!==0&&cn!==0?cn&-cn:yT.transition!==null?(w0===0&&(w0=zx()),w0):(a=it,a!==0||(a=window.event,a=a===void 0?16:Jx(a.type)),a)}function Oi(a,l,h,y){if(50<md)throw md=0,W1=null,Error(t(185));jh(a,h,y),((Qe&2)===0||a!==Qt)&&(a===Qt&&((Qe&2)===0&&(d0|=h),Ft===4&&na(a,cn)),or(a,y),h===1&&Qe===0&&(l.mode&1)===0&&(Tu=Pt()+500,Kg&&Qo()))}function or(a,l){var h=a.callbackNode;y9(a,l);var y=Bg(a,a===Qt?cn:0);if(y===0)h!==null&&Fx(h),a.callbackNode=null,a.callbackPriority=0;else if(l=y&-y,a.callbackPriority!==l){if(h!=null&&Fx(h),l===1)a.tag===0?gT(J8.bind(null,a)):RA(J8.bind(null,a)),fT(function(){(Qe&6)===0&&Qo()}),h=null;else{switch(Hx(y)){case 1:h=Bw;break;case 4:h=Mx;break;case 16:h=Ag;break;case 536870912:h=jx;break;default:h=Ag}h=s4(h,Z8.bind(null,a))}a.callbackPriority=l,a.callbackNode=h}}function Z8(a,l){if(m0=-1,w0=0,(Qe&6)!==0)throw Error(t(327));var h=a.callbackNode;if(ku()&&a.callbackNode!==h)return null;var y=Bg(a,a===Qt?cn:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||l)l=b0(a,y);else{l=y;var E=Qe;Qe|=2;var S=X8();(Qt!==a||cn!==l)&&(Hs=null,Tu=Pt()+500,Hc(a,l));do try{RT();break}catch(W){Y8(a,W)}while(!0);h1(),h0.current=S,Qe=E,Tt!==null?l=0:(Qt=null,cn=0,l=Ft)}if(l!==0){if(l===2&&(E=Pw(a),E!==0&&(y=E,l=Q1(a,E))),l===1)throw h=gd,Hc(a,0),na(a,y),or(a,Pt()),h;if(l===6)na(a,y);else{if(E=a.current.alternate,(y&30)===0&&!TT(E)&&(l=b0(a,y),l===2&&(S=Pw(a),S!==0&&(y=S,l=Q1(a,S))),l===1))throw h=gd,Hc(a,0),na(a,y),or(a,Pt()),h;switch(a.finishedWork=E,a.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:Vc(a,sr,Hs);break;case 3:if(na(a,y),(y&130023424)===y&&(l=K1+500-Pt(),10<l)){if(Bg(a,0)!==0)break;if(E=a.suspendedLanes,(E&y)!==y){Vn(),a.pingedLanes|=a.suspendedLanes&E;break}a.timeoutHandle=t1(Vc.bind(null,a,sr,Hs),l);break}Vc(a,sr,Hs);break;case 4:if(na(a,y),(y&4194240)===y)break;for(l=a.eventTimes,E=-1;0<y;){var L=31-vi(y);S=1<<L,L=l[L],L>E&&(E=L),y&=~S}if(y=E,y=Pt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*$T(y/1960))-y,10<y){a.timeoutHandle=t1(Vc.bind(null,a,sr,Hs),y);break}Vc(a,sr,Hs);break;case 5:Vc(a,sr,Hs);break;default:throw Error(t(329))}}}return or(a,Pt()),a.callbackNode===h?Z8.bind(null,a):null}function Q1(a,l){var h=yd;return a.current.memoizedState.isDehydrated&&(Hc(a,l).flags|=256),a=b0(a,l),a!==2&&(l=sr,sr=h,l!==null&&Z1(l)),a}function Z1(a){sr===null?sr=a:sr.push.apply(sr,a)}function TT(a){for(var l=a;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var y=0;y<h.length;y++){var E=h[y],S=E.getSnapshot;E=E.value;try{if(!Ei(S(),E))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function na(a,l){for(l&=~q1,l&=~d0,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var h=31-vi(l),y=1<<h;a[h]=-1,l&=~y}}function J8(a){if((Qe&6)!==0)throw Error(t(327));ku();var l=Bg(a,0);if((l&1)===0)return or(a,Pt()),null;var h=b0(a,l);if(a.tag!==0&&h===2){var y=Pw(a);y!==0&&(l=y,h=Q1(a,y))}if(h===1)throw h=gd,Hc(a,0),na(a,l),or(a,Pt()),h;if(h===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Vc(a,sr,Hs),or(a,Pt()),null}function J1(a,l){var h=Qe;Qe|=1;try{return a(l)}finally{Qe=h,Qe===0&&(Tu=Pt()+500,Kg&&Qo())}}function zc(a){ea!==null&&ea.tag===0&&(Qe&6)===0&&ku();var l=Qe;Qe|=1;var h=Xr.transition,y=it;try{if(Xr.transition=null,it=1,a)return a()}finally{it=y,Xr.transition=h,Qe=l,(Qe&6)===0&&Qo()}}function Y1(){Dr=$u.current,yt($u)}function Hc(a,l){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,uT(h)),Tt!==null)for(h=Tt.return;h!==null;){var y=h;switch(a1(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Vg();break;case 3:_u(),yt(nr),yt(En),v1();break;case 5:w1(y);break;case 4:_u();break;case 13:yt(Et);break;case 19:yt(Et);break;case 10:d1(y.type._context);break;case 22:case 23:Y1()}h=h.return}if(Qt=a,Tt=a=ra(a.current,null),cn=Dr=l,Ft=0,gd=null,q1=d0=jc=0,sr=yd=null,Lc!==null){for(l=0;l<Lc.length;l++)if(h=Lc[l],y=h.interleaved,y!==null){h.interleaved=null;var E=y.next,S=h.pending;if(S!==null){var L=S.next;S.next=E,y.next=L}h.pending=y}Lc=null}return a}function Y8(a,l){do{var h=Tt;try{if(h1(),n0.current=o0,r0){for(var y=xt.memoizedState;y!==null;){var E=y.queue;E!==null&&(E.pending=null),y=y.next}r0=!1}if(Mc=0,Wt=Lt=xt=null,ld=!1,ud=0,V1.current=null,h===null||h.return===null){Ft=1,gd=l,Tt=null;break}e:{var S=a,L=h.return,W=h,J=l;if(l=cn,W.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var ae=J,he=W,ge=he.tag;if((he.mode&1)===0&&(ge===0||ge===11||ge===15)){var fe=he.alternate;fe?(he.updateQueue=fe.updateQueue,he.memoizedState=fe.memoizedState,he.lanes=fe.lanes):(he.updateQueue=null,he.memoizedState=null)}var Se=A8(L);if(Se!==null){Se.flags&=-257,S8(Se,L,W,S,l),Se.mode&1&&x8(S,ae,l),l=Se,J=ae;var Pe=l.updateQueue;if(Pe===null){var Ce=new Set;Ce.add(J),l.updateQueue=Ce}else Pe.add(J);break e}else{if((l&1)===0){x8(S,ae,l),X1();break e}J=Error(t(426))}}else if(wt&&W.mode&1){var Ct=A8(L);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),S8(Ct,L,W,S,l),u1(Nu(J,W));break e}}S=J=Nu(J,W),Ft!==4&&(Ft=2),yd===null?yd=[S]:yd.push(S),S=L;do{switch(S.tag){case 3:S.flags|=65536,l&=-l,S.lanes|=l;var ne=v8(S,J,l);GA(S,ne);break e;case 1:W=J;var X=S.type,oe=S.stateNode;if((S.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(Xo===null||!Xo.has(oe)))){S.flags|=65536,l&=-l,S.lanes|=l;var ye=E8(S,W,l);GA(S,ye);break e}}S=S.return}while(S!==null)}t4(h)}catch(_e){l=_e,Tt===h&&h!==null&&(Tt=h=h.return);continue}break}while(!0)}function X8(){var a=h0.current;return h0.current=o0,a===null?o0:a}function X1(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Qt===null||(jc&268435455)===0&&(d0&268435455)===0||na(Qt,cn)}function b0(a,l){var h=Qe;Qe|=2;var y=X8();(Qt!==a||cn!==l)&&(Hs=null,Hc(a,l));do try{kT();break}catch(E){Y8(a,E)}while(!0);if(h1(),Qe=h,h0.current=y,Tt!==null)throw Error(t(261));return Qt=null,cn=0,Ft}function kT(){for(;Tt!==null;)e4(Tt)}function RT(){for(;Tt!==null&&!a9();)e4(Tt)}function e4(a){var l=i4(a.alternate,a,Dr);a.memoizedProps=a.pendingProps,l===null?t4(a):Tt=l,V1.current=null}function t4(a){var l=a;do{var h=l.alternate;if(a=l.return,(l.flags&32768)===0){if(h=PT(h,l,Dr),h!==null){Tt=h;return}}else{if(h=CT(h,l),h!==null){h.flags&=32767,Tt=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Ft=6,Tt=null;return}}if(l=l.sibling,l!==null){Tt=l;return}Tt=l=a}while(l!==null);Ft===0&&(Ft=5)}function Vc(a,l,h){var y=it,E=Xr.transition;try{Xr.transition=null,it=1,UT(a,l,h,y)}finally{Xr.transition=E,it=y}return null}function UT(a,l,h,y){do ku();while(ea!==null);if((Qe&6)!==0)throw Error(t(327));h=a.finishedWork;var E=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var S=h.lanes|h.childLanes;if(m9(a,S),a===Qt&&(Tt=Qt=null,cn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||g0||(g0=!0,s4(Ag,function(){return ku(),null})),S=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||S){S=Xr.transition,Xr.transition=null;var L=it;it=1;var W=Qe;Qe|=4,V1.current=null,NT(a,h),q8(h,a),rT(Xw),_g=!!Yw,Xw=Yw=null,a.current=h,DT(h),c9(),Qe=W,it=L,Xr.transition=S}else a.current=h;if(g0&&(g0=!1,ea=a,y0=E),S=a.pendingLanes,S===0&&(Xo=null),f9(h.stateNode),or(a,Pt()),l!==null)for(y=a.onRecoverableError,h=0;h<l.length;h++)E=l[h],y(E.value,{componentStack:E.stack,digest:E.digest});if(p0)throw p0=!1,a=G1,G1=null,a;return(y0&1)!==0&&a.tag!==0&&ku(),S=a.pendingLanes,(S&1)!==0?a===W1?md++:(md=0,W1=a):md=0,Qo(),null}function ku(){if(ea!==null){var a=Hx(y0),l=Xr.transition,h=it;try{if(Xr.transition=null,it=16>a?16:a,ea===null)var y=!1;else{if(a=ea,ea=null,y0=0,(Qe&6)!==0)throw Error(t(331));var E=Qe;for(Qe|=4,Ie=a.current;Ie!==null;){var S=Ie,L=S.child;if((Ie.flags&16)!==0){var W=S.deletions;if(W!==null){for(var J=0;J<W.length;J++){var ae=W[J];for(Ie=ae;Ie!==null;){var he=Ie;switch(he.tag){case 0:case 11:case 15:pd(8,he,S)}var ge=he.child;if(ge!==null)ge.return=he,Ie=ge;else for(;Ie!==null;){he=Ie;var fe=he.sibling,Se=he.return;if(M8(he),he===ae){Ie=null;break}if(fe!==null){fe.return=Se,Ie=fe;break}Ie=Se}}}var Pe=S.alternate;if(Pe!==null){var Ce=Pe.child;if(Ce!==null){Pe.child=null;do{var Ct=Ce.sibling;Ce.sibling=null,Ce=Ct}while(Ce!==null)}}Ie=S}}if((S.subtreeFlags&2064)!==0&&L!==null)L.return=S,Ie=L;else e:for(;Ie!==null;){if(S=Ie,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:pd(9,S,S.return)}var ne=S.sibling;if(ne!==null){ne.return=S.return,Ie=ne;break e}Ie=S.return}}var X=a.current;for(Ie=X;Ie!==null;){L=Ie;var oe=L.child;if((L.subtreeFlags&2064)!==0&&oe!==null)oe.return=L,Ie=oe;else e:for(L=X;Ie!==null;){if(W=Ie,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:f0(9,W)}}catch(_e){St(W,W.return,_e)}if(W===L){Ie=null;break e}var ye=W.sibling;if(ye!==null){ye.return=W.return,Ie=ye;break e}Ie=W.return}}if(Qe=E,Qo(),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(Sg,a)}catch{}y=!0}return y}finally{it=h,Xr.transition=l}}return!1}function n4(a,l,h){l=Nu(h,l),l=v8(a,l,1),a=Jo(a,l,1),l=Vn(),a!==null&&(jh(a,1,l),or(a,l))}function St(a,l,h){if(a.tag===3)n4(a,a,h);else for(;l!==null;){if(l.tag===3){n4(l,a,h);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Xo===null||!Xo.has(y))){a=Nu(h,a),a=E8(l,a,1),l=Jo(l,a,1),a=Vn(),l!==null&&(jh(l,1,a),or(l,a));break}}l=l.return}}function LT(a,l,h){var y=a.pingCache;y!==null&&y.delete(l),l=Vn(),a.pingedLanes|=a.suspendedLanes&h,Qt===a&&(cn&h)===h&&(Ft===4||Ft===3&&(cn&130023424)===cn&&500>Pt()-K1?Hc(a,0):q1|=h),or(a,l)}function r4(a,l){l===0&&((a.mode&1)===0?l=1:(l=Og,Og<<=1,(Og&130023424)===0&&(Og=4194304)));var h=Vn();a=Ms(a,l),a!==null&&(jh(a,l,h),or(a,h))}function FT(a){var l=a.memoizedState,h=0;l!==null&&(h=l.retryLane),r4(a,h)}function MT(a,l){var h=0;switch(a.tag){case 13:var y=a.stateNode,E=a.memoizedState;E!==null&&(h=E.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),r4(a,h)}var i4;i4=function(a,l,h){if(a!==null)if(a.memoizedProps!==l.pendingProps||nr.current)ir=!0;else{if((a.lanes&h)===0&&(l.flags&128)===0)return ir=!1,BT(a,l,h);ir=(a.flags&131072)!==0}else ir=!1,wt&&(l.flags&1048576)!==0&&UA(l,Wg,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;l0(a,l),a=l.pendingProps;var E=Au(l,En.current);Cu(l,h),E=A1(null,l,y,a,E,h);var S=S1();return l.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,rr(y)?(S=!0,qg(l)):S=!1,l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,y1(l),E.updater=a0,l.stateNode=E,E._reactInternals=l,_1(l,y,a,h),l=T1(null,l,y,!0,S,h)):(l.tag=0,wt&&S&&o1(l),Hn(null,l,E,h),l=l.child),l;case 16:y=l.elementType;e:{switch(l0(a,l),a=l.pendingProps,E=y._init,y=E(y._payload),l.type=y,E=l.tag=zT(y),a=Ai(y,a),E){case 0:l=$1(null,l,y,a,h);break e;case 1:l=_8(null,l,y,a,h);break e;case 11:l=I8(null,l,y,a,h);break e;case 14:l=O8(null,l,y,Ai(y.type,a),h);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Ai(y,E),$1(a,l,y,E,h);case 1:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Ai(y,E),_8(a,l,y,E,h);case 3:e:{if(N8(l),a===null)throw Error(t(387));y=l.pendingProps,S=l.memoizedState,E=S.element,KA(a,l),e0(l,y,null,h);var L=l.memoizedState;if(y=L.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){E=Nu(Error(t(423)),l),l=D8(a,l,y,h,E);break e}else if(y!==E){E=Nu(Error(t(424)),l),l=D8(a,l,y,h,E);break e}else for(Nr=Ko(l.stateNode.containerInfo.firstChild),_r=l,wt=!0,xi=null,h=VA(l,null,y,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ou(),y===E){l=zs(a,l,h);break e}Hn(a,l,y,h)}l=l.child}return l;case 5:return QA(l),a===null&&l1(l),y=l.type,E=l.pendingProps,S=a!==null?a.memoizedProps:null,L=E.children,e1(y,E)?L=null:S!==null&&e1(y,S)&&(l.flags|=32),C8(a,l),Hn(a,l,L,h),l.child;case 6:return a===null&&l1(l),null;case 13:return $8(a,l,h);case 4:return m1(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=Bu(l,null,y,h):Hn(a,l,y,h),l.child;case 11:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Ai(y,E),I8(a,l,y,E,h);case 7:return Hn(a,l,l.pendingProps,h),l.child;case 8:return Hn(a,l,l.pendingProps.children,h),l.child;case 12:return Hn(a,l,l.pendingProps.children,h),l.child;case 10:e:{if(y=l.type._context,E=l.pendingProps,S=l.memoizedProps,L=E.value,ht(Jg,y._currentValue),y._currentValue=L,S!==null)if(Ei(S.value,L)){if(S.children===E.children&&!nr.current){l=zs(a,l,h);break e}}else for(S=l.child,S!==null&&(S.return=l);S!==null;){var W=S.dependencies;if(W!==null){L=S.child;for(var J=W.firstContext;J!==null;){if(J.context===y){if(S.tag===1){J=js(-1,h&-h),J.tag=2;var ae=S.updateQueue;if(ae!==null){ae=ae.shared;var he=ae.pending;he===null?J.next=J:(J.next=he.next,he.next=J),ae.pending=J}}S.lanes|=h,J=S.alternate,J!==null&&(J.lanes|=h),p1(S.return,h,l),W.lanes|=h;break}J=J.next}}else if(S.tag===10)L=S.type===l.type?null:S.child;else if(S.tag===18){if(L=S.return,L===null)throw Error(t(341));L.lanes|=h,W=L.alternate,W!==null&&(W.lanes|=h),p1(L,h,l),L=S.sibling}else L=S.child;if(L!==null)L.return=S;else for(L=S;L!==null;){if(L===l){L=null;break}if(S=L.sibling,S!==null){S.return=L.return,L=S;break}L=L.return}S=L}Hn(a,l,E.children,h),l=l.child}return l;case 9:return E=l.type,y=l.pendingProps.children,Cu(l,h),E=Jr(E),y=y(E),l.flags|=1,Hn(a,l,y,h),l.child;case 14:return y=l.type,E=Ai(y,l.pendingProps),E=Ai(y.type,E),O8(a,l,y,E,h);case 15:return B8(a,l,l.type,l.pendingProps,h);case 17:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Ai(y,E),l0(a,l),l.tag=1,rr(y)?(a=!0,qg(l)):a=!1,Cu(l,h),w8(l,y,E),_1(l,y,E,h),T1(null,l,y,!0,a,h);case 19:return k8(a,l,h);case 22:return P8(a,l,h)}throw Error(t(156,l.tag))};function s4(a,l){return Lx(a,l)}function jT(a,l,h,y){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(a,l,h,y){return new jT(a,l,h,y)}function eb(a){return a=a.prototype,!(!a||!a.isReactComponent)}function zT(a){if(typeof a=="function")return eb(a)?1:0;if(a!=null){if(a=a.$$typeof,a===z)return 11;if(a===w)return 14}return 2}function ra(a,l){var h=a.alternate;return h===null?(h=ei(a.tag,l,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=l,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,l=a.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function v0(a,l,h,y,E,S){var L=2;if(y=a,typeof a=="function")eb(a)&&(L=1);else if(typeof a=="string")L=5;else e:switch(a){case H:return qc(h.children,E,S,l);case V:L=8,E|=8;break;case M:return a=ei(12,h,l,E|2),a.elementType=M,a.lanes=S,a;case P:return a=ei(13,h,l,E),a.elementType=P,a.lanes=S,a;case D:return a=ei(19,h,l,E),a.elementType=D,a.lanes=S,a;case B:return E0(h,E,S,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case K:L=10;break e;case Q:L=9;break e;case z:L=11;break e;case w:L=14;break e;case x:L=16,y=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=ei(L,h,l,E),l.elementType=a,l.type=y,l.lanes=S,l}function qc(a,l,h,y){return a=ei(7,a,y,l),a.lanes=h,a}function E0(a,l,h,y){return a=ei(22,a,y,l),a.elementType=B,a.lanes=h,a.stateNode={isHidden:!1},a}function tb(a,l,h){return a=ei(6,a,null,l),a.lanes=h,a}function nb(a,l,h){return l=ei(4,a.children!==null?a.children:[],a.key,l),l.lanes=h,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function HT(a,l,h,y,E){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cw(0),this.expirationTimes=Cw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cw(0),this.identifierPrefix=y,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function rb(a,l,h,y,E,S,L,W,J){return a=new HT(a,l,h,W,J),l===1?(l=1,S===!0&&(l|=8)):l=0,S=ei(3,null,null,l),a.current=S,S.stateNode=a,S.memoizedState={element:y,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},y1(S),a}function VT(a,l,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:y==null?null:""+y,children:a,containerInfo:l,implementation:h}}function o4(a){if(!a)return Wo;a=a._reactInternals;e:{if($c(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(rr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var h=a.type;if(rr(h))return TA(a,h,l)}return l}function a4(a,l,h,y,E,S,L,W,J){return a=rb(h,y,!0,a,E,S,L,W,J),a.context=o4(null),h=a.current,y=Vn(),E=ta(h),S=js(y,E),S.callback=l??null,Jo(h,S,E),a.current.lanes=E,jh(a,E,y),or(a,y),a}function x0(a,l,h,y){var E=l.current,S=Vn(),L=ta(E);return h=o4(h),l.context===null?l.context=h:l.pendingContext=h,l=js(S,L),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=Jo(E,l,L),a!==null&&(Oi(a,E,L,S),Xg(a,E,L)),L}function A0(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function c4(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<l?h:l}}function ib(a,l){c4(a,l),(a=a.alternate)&&c4(a,l)}function qT(){return null}var l4=typeof reportError=="function"?reportError:function(a){console.error(a)};function sb(a){this._internalRoot=a}S0.prototype.render=sb.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));x0(a,l,null,null)},S0.prototype.unmount=sb.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;zc(function(){x0(null,a,null,null)}),l[Rs]=null}};function S0(a){this._internalRoot=a}S0.prototype.unstable_scheduleHydration=function(a){if(a){var l=Kx();a={blockedOn:null,target:a,priority:l};for(var h=0;h<Ho.length&&l!==0&&l<Ho[h].priority;h++);Ho.splice(h,0,a),h===0&&Qx(a)}};function ob(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function I0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function u4(){}function KT(a,l,h,y,E){if(E){if(typeof y=="function"){var S=y;y=function(){var ae=A0(L);S.call(ae)}}var L=a4(l,y,a,0,null,!1,!1,"",u4);return a._reactRootContainer=L,a[Rs]=L.current,td(a.nodeType===8?a.parentNode:a),zc(),L}for(;E=a.lastChild;)a.removeChild(E);if(typeof y=="function"){var W=y;y=function(){var ae=A0(J);W.call(ae)}}var J=rb(a,0,!1,null,null,!1,!1,"",u4);return a._reactRootContainer=J,a[Rs]=J.current,td(a.nodeType===8?a.parentNode:a),zc(function(){x0(l,J,h,y)}),J}function O0(a,l,h,y,E){var S=h._reactRootContainer;if(S){var L=S;if(typeof E=="function"){var W=E;E=function(){var J=A0(L);W.call(J)}}x0(l,L,a,E)}else L=KT(h,l,a,E,y);return A0(L)}Vx=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var h=Mh(l.pendingLanes);h!==0&&(_w(l,h|1),or(l,Pt()),(Qe&6)===0&&(Tu=Pt()+500,Qo()))}break;case 13:zc(function(){var y=Ms(a,1);if(y!==null){var E=Vn();Oi(y,a,1,E)}}),ib(a,1)}},Nw=function(a){if(a.tag===13){var l=Ms(a,134217728);if(l!==null){var h=Vn();Oi(l,a,134217728,h)}ib(a,134217728)}},qx=function(a){if(a.tag===13){var l=ta(a),h=Ms(a,l);if(h!==null){var y=Vn();Oi(h,a,l,y)}ib(a,l)}},Kx=function(){return it},Gx=function(a,l){var h=it;try{return it=a,l()}finally{it=h}},Aw=function(a,l,h){switch(l){case"input":if(bi(a,h),l=h.name,h.type==="radio"&&l!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var y=h[l];if(y!==a&&y.form===a.form){var E=Hg(y);if(!E)throw Error(t(90));Re(y),bi(y,E)}}}break;case"textarea":Dh(a,h);break;case"select":l=h.value,l!=null&&es(a,!!h.multiple,l,!1)}},Nx=J1,Dx=zc;var GT={usingClientEntryPoint:!1,Events:[id,Eu,Hg,Cx,_x,J1]},wd={findFiberByHostInstance:Tc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WT={bundleType:wd.bundleType,version:wd.version,rendererPackageName:wd.rendererPackageName,rendererConfig:wd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Rx(a),a===null?null:a.stateNode},findFiberByHostInstance:wd.findFiberByHostInstance||qT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var B0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!B0.isDisabled&&B0.supportsFiber)try{Sg=B0.inject(WT),ts=B0}catch{}}return ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GT,ar.createPortal=function(a,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ob(l))throw Error(t(200));return VT(a,l,null,h)},ar.createRoot=function(a,l){if(!ob(a))throw Error(t(299));var h=!1,y="",E=l4;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),l=rb(a,1,!1,null,null,h,!1,y,E),a[Rs]=l.current,td(a.nodeType===8?a.parentNode:a),new sb(l)},ar.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Rx(l),a=a===null?null:a.stateNode,a},ar.flushSync=function(a){return zc(a)},ar.hydrate=function(a,l,h){if(!I0(l))throw Error(t(200));return O0(null,a,l,!0,h)},ar.hydrateRoot=function(a,l,h){if(!ob(a))throw Error(t(405));var y=h!=null&&h.hydratedSources||null,E=!1,S="",L=l4;if(h!=null&&(h.unstable_strictMode===!0&&(E=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onRecoverableError!==void 0&&(L=h.onRecoverableError)),l=a4(l,null,a,1,h??null,E,!1,S,L),a[Rs]=l.current,td(a),y)for(a=0;a<y.length;a++)h=y[a],E=h._getVersion,E=E(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,E]:l.mutableSourceEagerHydrationData.push(h,E);return new S0(l)},ar.render=function(a,l,h){if(!I0(l))throw Error(t(200));return O0(null,a,l,!1,h)},ar.unmountComponentAtNode=function(a){if(!I0(a))throw Error(t(40));return a._reactRootContainer?(zc(function(){O0(null,null,a,!1,function(){a._reactRootContainer=null,a[Rs]=null})}),!0):!1},ar.unstable_batchedUpdates=J1,ar.unstable_renderSubtreeIntoContainer=function(a,l,h,y){if(!I0(h))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return O0(a,l,h,!1,y)},ar.version="18.3.1-next-f1338f8080-20240426",ar}var b4;function ok(){if(b4)return ub.exports;b4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ub.exports=sk(),ub.exports}var v4;function ak(){if(v4)return P0;v4=1;var n=ok();return P0.createRoot=n.createRoot,P0.hydrateRoot=n.hydrateRoot,P0}var ck=ak();const lk=Jp(ck),uk="6.15.0";function fk(n,e,t){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=n,i}async function Kn(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function ke(n,e,t){for(let r in e){let i=e[r];const s=t?t[r]:null;s&&fk(i,s,r),Object.defineProperty(n,r,{enumerable:!0,value:i,writable:!1})}}function tf(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>tf(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let i=0;i<n.length;i++)r+=t[n[i]>>4],r+=t[n[i]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return tf(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(r=>`${tf(r,e)}: ${tf(n[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function yn(n,e){return n&&n.code===e}function QE(n){return yn(n,"CALL_EXCEPTION")}function bt(n,e,t){let r=n;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${tf(t)}`);for(const o in t){if(o==="shortMessage")continue;const c=t[o];s.push(o+"="+tf(c))}}s.push(`code=${e}`),s.push(`version=${uk}`),s.length&&(n+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(n);break;default:i=new Error(n)}return ke(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&ke(i,{shortMessage:r}),i}function pe(n,e,t,r){if(!n)throw bt(e,t,r)}function ee(n,e,t,r){pe(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function iB(n,e,t){t==null&&(t=""),t&&(t=": "+t),pe(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),pe(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");n.push(e)}catch{}return n},[]);function Nm(n,e,t){if(t==null&&(t=""),n!==e){let r=t,i="new";t&&(r+=".",i+=" "+t),pe(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function sB(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(n.substring(i,i+2),16),i+=2;return r}ee(!1,"invalid BytesLike value",e||"value",n)}function ze(n,e){return sB(n,e,!1)}function Gn(n,e){return sB(n,e,!0)}function pt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function ZE(n){return pt(n,!0)||n instanceof Uint8Array}const E4="0123456789abcdef";function Ae(n){const e=ze(n);let t="0x";for(let r=0;r<e.length;r++){const i=e[r];t+=E4[(i&240)>>4]+E4[i&15]}return t}function Bt(n){return"0x"+n.map(e=>Ae(e).substring(2)).join("")}function hf(n){return pt(n,!0)?(n.length-2)/2:ze(n).length}function Ot(n,e,t){const r=ze(n);return t!=null&&t>r.length&&pe(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),Ae(r.slice(e??0,t??r.length))}function oB(n,e,t){const r=ze(n);pe(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(r,e-r.length):i.set(r,0),Ae(i)}function To(n,e){return oB(n,e,!0)}function hk(n,e){return oB(n,e,!1)}const Dm=BigInt(0),qi=BigInt(1),nf=9007199254740991;function dk(n,e){const t=$m(n,"value"),r=BigInt(He(e,"width"));if(pe(t>>r===Dm,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-qi){const i=(qi<<r)-qi;return-((~t&i)+qi)}return t}function aB(n,e){let t=Be(n,"value");const r=BigInt(He(e,"width")),i=qi<<r-qi;if(t<Dm){t=-t,pe(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const s=(qi<<r)-qi;return(~t&s)+qi}else pe(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function Kd(n,e){const t=$m(n,"value"),r=BigInt(He(e,"bits"));return t&(qi<<r)-qi}function Be(n,e){switch(typeof n){case"bigint":return n;case"number":return ee(Number.isInteger(n),"underflow",e||"value",n),ee(n>=-nf&&n<=nf,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){ee(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}ee(!1,"invalid BigNumberish value",e||"value",n)}function $m(n,e){const t=Be(n,e);return pe(t>=Dm,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const x4="0123456789abcdef";function JE(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=x4[t>>4],e+=x4[t&15];return BigInt(e)}return Be(n)}function He(n,e){switch(typeof n){case"bigint":return ee(n>=-nf&&n<=nf,"overflow",e||"value",n),Number(n);case"number":return ee(Number.isInteger(n),"underflow",e||"value",n),ee(n>=-nf&&n<=nf,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return He(BigInt(n),e)}catch(t){ee(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}ee(!1,"invalid numeric value",e||"value",n)}function pk(n){return He(JE(n))}function mc(n,e){let r=$m(n,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=He(e,"width");for(pe(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<i*2;)r="0"+r}return"0x"+r}function Kt(n){const e=$m(n,"value");if(e===Dm)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const r=new Uint8Array(t.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(t.substring(s,s+2),16)}return r}function Hi(n){let e=Ae(ZE(n)?n:Kt(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const A4="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const S4=BigInt(58);function gk(n){const e=ze(n);let t=JE(e),r="";for(;t;)r=A4[Number(t%S4)]+r,t/=S4;for(let i=0;i<e.length&&!e[i];i++)r=A4[0]+r;return r}function yk(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return ze(e)}function mk(n){const e=ze(n);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}var Sf;class cB{constructor(e,t,r){se(this,"filter");se(this,"emitter");ce(this,Sf);G(this,Sf,t),ke(this,{emitter:e,filter:r})}async removeListener(){F(this,Sf)!=null&&await this.emitter.off(this.filter,F(this,Sf))}}Sf=new WeakMap;function wk(n,e,t,r,i){ee(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function lB(n,e,t,r,i){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n==="OVERRUN"?t.length-e-1:0}function bk(n,e,t,r,i){return n==="OVERLONG"?(ee(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),lB(n,e,t))}const vk=Object.freeze({error:wk,ignore:lB,replace:bk});function Ek(n,e){e==null&&(e=vk.error);const t=ze(n,"bytes"),r=[];let i=0;for(;i<t.length;){const s=t[i++];if(s>>7===0){r.push(s);continue}let o=null,c=null;if((s&224)===192)o=1,c=127;else if((s&240)===224)o=2,c=2047;else if((s&248)===240)o=3,c=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,r):i+=e("BAD_PREFIX",i-1,t,r);continue}if(i-1+o>=t.length){i+=e("OVERRUN",i-1,t,r);continue}let u=s&(1<<8-o-1)-1;for(let f=0;f<o;f++){let d=t[i];if((d&192)!=128){i+=e("MISSING_CONTINUE",i,t,r),u=null;break}u=u<<6|d&63,i++}if(u!==null){if(u>1114111){i+=e("OUT_OF_RANGE",i-1-o,t,r,u);continue}if(u>=55296&&u<=57343){i+=e("UTF16_SURROGATE",i-1-o,t,r,u);continue}if(u<=c){i+=e("OVERLONG",i-1-o,t,r,u);continue}r.push(u)}}return r}function Co(n,e){ee(typeof n=="string","invalid string value","str",n);let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);ee(r<n.length&&(s&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function xk(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ky(n,e){return xk(Ek(n,e))}function uB(n){async function e(t,r){pe(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();pe(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),pe(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,c=setTimeout(()=>{s=bt("request timeout","TIMEOUT"),o.abort()},t.timeout);r&&r.addListener(()=>{s=bt("request cancelled","CANCELLED"),o.abort()});const u=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let f;try{f=await fetch(t.url,u)}catch(m){throw clearTimeout(c),s||m}clearTimeout(c);const d={};f.headers.forEach((m,v)=>{d[v.toLowerCase()]=m});const p=await f.arrayBuffer(),g=p==null?null:new Uint8Array(p);return{statusCode:f.status,statusMessage:f.statusText,headers:d,body:g}}return e}const Ak=12,Sk=250;let I4=uB();const Ik=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Ok=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let db=!1;async function fB(n,e){try{const t=n.match(Ik);if(!t)throw new Error("invalid data");return new dc(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?yk(t[3]):Pk(t[3]))}catch{return new dc(599,"BAD REQUEST (invalid data: URI)",{},null,new wc(n))}}function hB(n){async function e(t,r){try{const i=t.match(Ok);if(!i)throw new Error("invalid link");return new wc(`${n}${i[2]}`)}catch{return new dc(599,"BAD REQUEST (invalid IPFS URI)",{},null,new wc(t))}}return e}const C0={data:fB,ipfs:hB("https://gateway.ipfs.io/ipfs/")},dB=new WeakMap;var Sl,Qa;class Bk{constructor(e){ce(this,Sl);ce(this,Qa);G(this,Sl,[]),G(this,Qa,!1),dB.set(e,()=>{if(!F(this,Qa)){G(this,Qa,!0);for(const t of F(this,Sl))setTimeout(()=>{t()},0);G(this,Sl,[])}})}addListener(e){pe(!F(this,Qa),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),F(this,Sl).push(e)}get cancelled(){return F(this,Qa)}checkSignal(){pe(!this.cancelled,"cancelled","CANCELLED",{})}}Sl=new WeakMap,Qa=new WeakMap;function _0(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var If,Of,Li,fo,Bf,Pf,en,Lr,ho,Il,Ol,Bl,bs,Fi,Za,Pl,Gd;const Sm=class Sm{constructor(e){ce(this,Pl);ce(this,If);ce(this,Of);ce(this,Li);ce(this,fo);ce(this,Bf);ce(this,Pf);ce(this,en);ce(this,Lr);ce(this,ho);ce(this,Il);ce(this,Ol);ce(this,Bl);ce(this,bs);ce(this,Fi);ce(this,Za);G(this,Pf,String(e)),G(this,If,!1),G(this,Of,!0),G(this,Li,{}),G(this,fo,""),G(this,Bf,3e5),G(this,Fi,{slotInterval:Sk,maxAttempts:Ak}),G(this,Za,null)}get url(){return F(this,Pf)}set url(e){G(this,Pf,String(e))}get body(){return F(this,en)==null?null:new Uint8Array(F(this,en))}set body(e){if(e==null)G(this,en,void 0),G(this,Lr,void 0);else if(typeof e=="string")G(this,en,Co(e)),G(this,Lr,"text/plain");else if(e instanceof Uint8Array)G(this,en,e),G(this,Lr,"application/octet-stream");else if(typeof e=="object")G(this,en,Co(JSON.stringify(e))),G(this,Lr,"application/json");else throw new Error("invalid body")}hasBody(){return F(this,en)!=null}get method(){return F(this,fo)?F(this,fo):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),G(this,fo,String(e).toUpperCase())}get headers(){const e=Object.assign({},F(this,Li));return F(this,ho)&&(e.authorization=`Basic ${mk(Co(F(this,ho)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&F(this,Lr)&&(e["content-type"]=F(this,Lr)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){F(this,Li)[String(e).toLowerCase()]=String(t)}clearHeaders(){G(this,Li,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return F(this,ho)||null}setCredentials(e,t){ee(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),G(this,ho,`${e}:${t}`)}get allowGzip(){return F(this,Of)}set allowGzip(e){G(this,Of,!!e)}get allowInsecureAuthentication(){return!!F(this,If)}set allowInsecureAuthentication(e){G(this,If,!!e)}get timeout(){return F(this,Bf)}set timeout(e){ee(e>=0,"timeout must be non-zero","timeout",e),G(this,Bf,e)}get preflightFunc(){return F(this,Il)||null}set preflightFunc(e){G(this,Il,e)}get processFunc(){return F(this,Ol)||null}set processFunc(e){G(this,Ol,e)}get retryFunc(){return F(this,Bl)||null}set retryFunc(e){G(this,Bl,e)}get getUrlFunc(){return F(this,Za)||I4}set getUrlFunc(e){G(this,Za,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${F(this,en)?Ae(F(this,en)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(F(this,Fi).slotInterval=e.slotInterval),e.maxAttempts!=null&&(F(this,Fi).maxAttempts=e.maxAttempts)}send(){return pe(F(this,bs)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),G(this,bs,new Bk(this)),be(this,Pl,Gd).call(this,0,O4()+this.timeout,0,this,new dc(0,"",{},null,this))}cancel(){pe(F(this,bs)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=dB.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();pe(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Sm(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,G(i,Li,Object.assign({},F(this,Li))),F(this,en)&&G(i,en,new Uint8Array(F(this,en))),G(i,Lr,F(this,Lr)),i}clone(){const e=new Sm(this.url);return G(e,fo,F(this,fo)),F(this,en)&&G(e,en,F(this,en)),G(e,Lr,F(this,Lr)),G(e,Li,Object.assign({},F(this,Li))),G(e,ho,F(this,ho)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),G(e,Il,F(this,Il)),G(e,Ol,F(this,Ol)),G(e,Bl,F(this,Bl)),G(e,Fi,Object.assign({},F(this,Fi))),G(e,Za,F(this,Za)),e}static lockConfig(){db=!0}static getGateway(e){return C0[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(db)throw new Error("gateways locked");C0[e]=t}static registerGetUrl(e){if(db)throw new Error("gateways locked");I4=e}static createGetUrlFunc(e){return uB(e)}static createDataGateway(){return fB}static createIpfsGatewayFunc(e){return hB(e)}};If=new WeakMap,Of=new WeakMap,Li=new WeakMap,fo=new WeakMap,Bf=new WeakMap,Pf=new WeakMap,en=new WeakMap,Lr=new WeakMap,ho=new WeakMap,Il=new WeakMap,Ol=new WeakMap,Bl=new WeakMap,bs=new WeakMap,Fi=new WeakMap,Za=new WeakMap,Pl=new WeakSet,Gd=async function(e,t,r,i,s){var d,p,g;if(e>=F(this,Fi).maxAttempts)return s.makeServerError("exceeded maximum retry limit");pe(O4()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await Ck(r);let o=this.clone();const c=(o.url.split(":")[0]||"").toLowerCase();if(c in C0){const m=await C0[c](o.url,_0(F(i,bs)));if(m instanceof dc){let v=m;if(this.processFunc){_0(F(i,bs));try{v=await this.processFunc(o,v)}catch(b){(b.throttle==null||typeof b.stall!="number")&&v.makeServerError("error in post-processing function",b).assertOk()}}return v}o=m}this.preflightFunc&&(o=await this.preflightFunc(o));const u=await this.getUrlFunc(o,_0(F(i,bs)));let f=new dc(u.statusCode,u.statusMessage,u.headers,u.body,i);if(f.statusCode===301||f.statusCode===302){try{const m=f.headers.location||"";return be(d=o.redirect(m),Pl,Gd).call(d,e+1,t,0,i,f)}catch{}return f}else if(f.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,f,e))){const m=f.headers["retry-after"];let v=F(this,Fi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof m=="string"&&m.match(/^[1-9][0-9]*$/)&&(v=parseInt(m)),be(p=o.clone(),Pl,Gd).call(p,e+1,t,v,i,f)}if(this.processFunc){_0(F(i,bs));try{f=await this.processFunc(o,f)}catch(m){(m.throttle==null||typeof m.stall!="number")&&f.makeServerError("error in post-processing function",m).assertOk();let v=F(this,Fi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return m.stall>=0&&(v=m.stall),be(g=o.clone(),Pl,Gd).call(g,e+1,t,v,i,f)}}return f};let wc=Sm;var Fp,Mp,jp,Fr,Cf,Cl;const Ax=class Ax{constructor(e,t,r,i,s){ce(this,Fp);ce(this,Mp);ce(this,jp);ce(this,Fr);ce(this,Cf);ce(this,Cl);G(this,Fp,e),G(this,Mp,t),G(this,jp,Object.keys(r).reduce((o,c)=>(o[c.toLowerCase()]=String(r[c]),o),{})),G(this,Fr,i==null?null:new Uint8Array(i)),G(this,Cf,s||null),G(this,Cl,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${F(this,Fr)?Ae(F(this,Fr)):"null"}>`}get statusCode(){return F(this,Fp)}get statusMessage(){return F(this,Mp)}get headers(){return Object.assign({},F(this,jp))}get body(){return F(this,Fr)==null?null:new Uint8Array(F(this,Fr))}get bodyText(){try{return F(this,Fr)==null?"":ky(F(this,Fr))}catch{pe(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{pe(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new Ax(599,r,this.headers,this.body,F(this,Cf)||void 0);return G(i,Cl,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:ee(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw ke(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return F(this,Fr)!=null}get request(){return F(this,Cf)}ok(){return F(this,Cl).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=F(this,Cl);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{F(this,Fr)&&(i=ky(F(this,Fr)))}catch{}pe(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Fp=new WeakMap,Mp=new WeakMap,jp=new WeakMap,Fr=new WeakMap,Cf=new WeakMap,Cl=new WeakMap;let dc=Ax;function O4(){return new Date().getTime()}function Pk(n){return Co(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Ck(n){return new Promise(e=>setTimeout(e,n))}function _k(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function B4(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function P4(n,e,t,r){const i=[];for(;t<e+1+r;){const s=pB(n,t);i.push(s.result),t+=s.consumed,pe(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:i}}function pB(n,e){pe(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{pe(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const i=B4(n,e+1,r);return t(e+1+r+i),P4(n,e,e+1+r,r+i)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),P4(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const i=B4(n,e+1,r);t(e+1+r+i);const s=Ae(n.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const i=Ae(n.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:_k(n[e])}}function Yp(n){const e=ze(n,"data"),t=pB(e,0);return ee(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function C4(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function gB(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(gB(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=C4(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(ze(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=C4(e.length);return t.unshift(183+t.length),t.concat(e)}const _4="0123456789abcdef";function bc(n){let e="0x";for(const t of gB(n))e+=_4[t>>4],e+=_4[t&15];return e}const Wn=32,nv=new Uint8Array(Wn),Nk=["then"],N0={},yB=new WeakMap;function tl(n){return yB.get(n)}function N4(n,e){yB.set(n,e)}function Ed(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function rv(n,e,t){return n.indexOf(null)>=0?e.map((r,i)=>r instanceof uh?rv(tl(r),r,t):r):n.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(t&&o instanceof uh&&(o=rv(tl(o),o,t)),r[i]=o),r},{})}var _f;const lf=class lf extends Array{constructor(...t){const r=t[0];let i=t[1],s=(t[2]||[]).slice(),o=!0;r!==N0&&(i=t,s=[],o=!1);super(i.length);ce(this,_f);i.forEach((f,d)=>{this[d]=f});const c=s.reduce((f,d)=>(typeof d=="string"&&f.set(d,(f.get(d)||0)+1),f),new Map);if(N4(this,Object.freeze(i.map((f,d)=>{const p=s[d];return p!=null&&c.get(p)===1?p:null}))),G(this,_f,[]),F(this,_f)==null&&F(this,_f),!o)return;Object.freeze(this);const u=new Proxy(this,{get:(f,d,p)=>{if(typeof d=="string"){if(d.match(/^[0-9]+$/)){const m=He(d,"%index");if(m<0||m>=this.length)throw new RangeError("out of result range");const v=f[m];return v instanceof Error&&Ed(`index ${m}`,v),v}if(Nk.indexOf(d)>=0)return Reflect.get(f,d,p);const g=f[d];if(g instanceof Function)return function(...m){return g.apply(this===p?f:this,m)};if(!(d in f))return f.getValue.apply(this===p?f:this,[d])}return Reflect.get(f,d,p)}});return N4(u,tl(this)),u}toArray(t){const r=[];return this.forEach((i,s)=>{i instanceof Error&&Ed(`index ${s}`,i),t&&i instanceof lf&&(i=i.toArray(t)),r.push(i)}),r}toObject(t){const r=tl(this);return r.reduce((i,s,o)=>(pe(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),rv(r,this,t)),{})}slice(t,r){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=tl(this),s=[],o=[];for(let c=t;c<r;c++)s.push(this[c]),o.push(i[c]);return new lf(N0,s,o)}filter(t,r){const i=tl(this),s=[],o=[];for(let c=0;c<this.length;c++){const u=this[c];u instanceof Error&&Ed(`index ${c}`,u),t.call(r,u,c,this)&&(s.push(u),o.push(i[c]))}return new lf(N0,s,o)}map(t,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&Ed(`index ${s}`,o),i.push(t.call(r,o,s,this))}return i}getValue(t){const r=tl(this).indexOf(t);if(r===-1)return;const i=this[r];return i instanceof Error&&Ed(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,r){return new lf(N0,t,r)}};_f=new WeakMap;let uh=lf;function D4(n){let e=Kt(n);return pe(e.length<=Wn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Wn,offset:e.length}),e.length!==Wn&&(e=Gn(Bt([nv.slice(e.length%Wn),e]))),e}class Lo{constructor(e,t,r,i){se(this,"name");se(this,"type");se(this,"localName");se(this,"dynamic");ke(this,{name:e,type:t,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){ee(!1,e,this.localName,t)}}var po,_l,Nf,my;class iv{constructor(){ce(this,Nf);ce(this,po);ce(this,_l);G(this,po,[]),G(this,_l,0)}get data(){return Bt(F(this,po))}get length(){return F(this,_l)}appendWriter(e){return be(this,Nf,my).call(this,Gn(e.data))}writeBytes(e){let t=Gn(e);const r=t.length%Wn;return r&&(t=Gn(Bt([t,nv.slice(r)]))),be(this,Nf,my).call(this,t)}writeValue(e){return be(this,Nf,my).call(this,D4(e))}writeUpdatableValue(){const e=F(this,po).length;return F(this,po).push(nv),G(this,_l,F(this,_l)+Wn),t=>{F(this,po)[e]=D4(t)}}}po=new WeakMap,_l=new WeakMap,Nf=new WeakSet,my=function(e){return F(this,po).push(e),G(this,_l,F(this,_l)+e.length),e.length};var hr,Mr,Nl,Dl,Ja,tu,ov,mB;const Sx=class Sx{constructor(e,t,r){ce(this,tu);se(this,"allowLoose");ce(this,hr);ce(this,Mr);ce(this,Nl);ce(this,Dl);ce(this,Ja);ke(this,{allowLoose:!!t}),G(this,hr,Gn(e)),G(this,Nl,0),G(this,Dl,null),G(this,Ja,r??1024),G(this,Mr,0)}get data(){return Ae(F(this,hr))}get dataLength(){return F(this,hr).length}get consumed(){return F(this,Mr)}get bytes(){return new Uint8Array(F(this,hr))}subReader(e){const t=new Sx(F(this,hr).slice(F(this,Mr)+e),this.allowLoose,F(this,Ja));return G(t,Dl,this),t}readBytes(e,t){let r=be(this,tu,mB).call(this,0,e,!!t);return be(this,tu,ov).call(this,e),G(this,Mr,F(this,Mr)+r.length),r.slice(0,e)}readValue(){return JE(this.readBytes(Wn))}readIndex(){return pk(this.readBytes(Wn))}};hr=new WeakMap,Mr=new WeakMap,Nl=new WeakMap,Dl=new WeakMap,Ja=new WeakMap,tu=new WeakSet,ov=function(e){var t;if(F(this,Dl))return be(t=F(this,Dl),tu,ov).call(t,e);G(this,Nl,F(this,Nl)+e),pe(F(this,Ja)<1||F(this,Nl)<=F(this,Ja)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${F(this,Ja)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Gn(F(this,hr)),offset:F(this,Mr),length:e,info:{bytesRead:F(this,Nl),dataLength:this.dataLength}})},mB=function(e,t,r){let i=Math.ceil(t/Wn)*Wn;return F(this,Mr)+i>F(this,hr).length&&(this.allowLoose&&r&&F(this,Mr)+t<=F(this,hr).length?i=t:pe(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Gn(F(this,hr)),length:F(this,hr).length,offset:F(this,Mr)+i})),F(this,hr).slice(F(this,Mr),F(this,Mr)+i)};let sv=Sx;function $4(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function wB(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Ry(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function bB(n,e){wB(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dk=n=>n instanceof Uint8Array,$k=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),pb=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),os=(n,e)=>n<<32-e|n>>>e,Tk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Tk)throw new Error("Non little-endian hardware is not supported");function kk(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function YE(n){if(typeof n=="string"&&(n=kk(n)),!Dk(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}let vB=class{clone(){return this._cloneInto()}};function XE(n){const e=r=>n().update(YE(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Rk(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}let EB=class extends vB{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pb(this.buffer)}update(e){Ry(this);const{view:t,buffer:r,blockLen:i}=this;e=YE(e);const s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=pb(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ry(this),bB(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let p=o;p<i;p++)t[p]=0;Rk(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=pb(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)c.setUint32(4*p,d[p],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}};const Uk=(n,e,t)=>n&e^~n&t,Lk=(n,e,t)=>n&e^n&t^e&t,Fk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),oa=new Uint32Array(64);let Mk=class extends EB{constructor(){super(64,32,8,!1),this.A=sa[0]|0,this.B=sa[1]|0,this.C=sa[2]|0,this.D=sa[3]|0,this.E=sa[4]|0,this.F=sa[5]|0,this.G=sa[6]|0,this.H=sa[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let p=0;p<16;p++,t+=4)oa[p]=e.getUint32(t,!1);for(let p=16;p<64;p++){const g=oa[p-15],m=oa[p-2],v=os(g,7)^os(g,18)^g>>>3,b=os(m,17)^os(m,19)^m>>>10;oa[p]=b+oa[p-7]+v+oa[p-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:d}=this;for(let p=0;p<64;p++){const g=os(c,6)^os(c,11)^os(c,25),m=d+g+Uk(c,u,f)+Fk[p]+oa[p]|0,b=(os(r,2)^os(r,13)^os(r,22))+Lk(r,i,s)|0;d=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+b|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,i,s,o,c,u,f,d)}roundClean(){oa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const jk=XE(()=>new Mk),D0=BigInt(2**32-1),av=BigInt(32);function xB(n,e=!1){return e?{h:Number(n&D0),l:Number(n>>av&D0)}:{h:Number(n>>av&D0)|0,l:Number(n&D0)|0}}function AB(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=xB(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const zk=(n,e)=>BigInt(n>>>0)<<av|BigInt(e>>>0),Hk=(n,e,t)=>n>>>t,Vk=(n,e,t)=>n<<32-t|e>>>t,qk=(n,e,t)=>n>>>t|e<<32-t,Kk=(n,e,t)=>n<<32-t|e>>>t,Gk=(n,e,t)=>n<<64-t|e>>>t-32,Wk=(n,e,t)=>n>>>t-32|e<<64-t,Qk=(n,e)=>e,Zk=(n,e)=>n,SB=(n,e,t)=>n<<t|e>>>32-t,IB=(n,e,t)=>e<<t|n>>>32-t,OB=(n,e,t)=>e<<t-32|n>>>64-t,BB=(n,e,t)=>n<<t-32|e>>>64-t;function Jk(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const Yk=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Xk=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,eR=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),tR=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,nR=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),rR=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Le={fromBig:xB,split:AB,toBig:zk,shrSH:Hk,shrSL:Vk,rotrSH:qk,rotrSL:Kk,rotrBH:Gk,rotrBL:Wk,rotr32H:Qk,rotr32L:Zk,rotlSH:SB,rotlSL:IB,rotlBH:OB,rotlBL:BB,add:Jk,add3L:Yk,add3H:Xk,add4L:eR,add4H:tR,add5H:rR,add5L:nR},[iR,sR]=Le.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),aa=new Uint32Array(80),ca=new Uint32Array(80);class oR extends EB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:f,El:d,Fh:p,Fl:g,Gh:m,Gl:v,Hh:b,Hl:A}=this;return[e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=d|0,this.Fh=p|0,this.Fl=g|0,this.Gh=m|0,this.Gl=v|0,this.Hh=b|0,this.Hl=A|0}process(e,t){for(let O=0;O<16;O++,t+=4)aa[O]=e.getUint32(t),ca[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const T=aa[O-15]|0,k=ca[O-15]|0,j=Le.rotrSH(T,k,1)^Le.rotrSH(T,k,8)^Le.shrSH(T,k,7),H=Le.rotrSL(T,k,1)^Le.rotrSL(T,k,8)^Le.shrSL(T,k,7),V=aa[O-2]|0,M=ca[O-2]|0,K=Le.rotrSH(V,M,19)^Le.rotrBH(V,M,61)^Le.shrSH(V,M,6),Q=Le.rotrSL(V,M,19)^Le.rotrBL(V,M,61)^Le.shrSL(V,M,6),z=Le.add4L(H,Q,ca[O-7],ca[O-16]),P=Le.add4H(z,j,K,aa[O-7],aa[O-16]);aa[O]=P|0,ca[O]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:f,Dl:d,Eh:p,El:g,Fh:m,Fl:v,Gh:b,Gl:A,Hh:N,Hl:R}=this;for(let O=0;O<80;O++){const T=Le.rotrSH(p,g,14)^Le.rotrSH(p,g,18)^Le.rotrBH(p,g,41),k=Le.rotrSL(p,g,14)^Le.rotrSL(p,g,18)^Le.rotrBL(p,g,41),j=p&m^~p&b,H=g&v^~g&A,V=Le.add5L(R,k,H,sR[O],ca[O]),M=Le.add5H(V,N,T,j,iR[O],aa[O]),K=V|0,Q=Le.rotrSH(r,i,28)^Le.rotrBH(r,i,34)^Le.rotrBH(r,i,39),z=Le.rotrSL(r,i,28)^Le.rotrBL(r,i,34)^Le.rotrBL(r,i,39),P=r&s^r&c^s&c,D=i&o^i&u^o&u;N=b|0,R=A|0,b=m|0,A=v|0,m=p|0,v=g|0,{h:p,l:g}=Le.add(f|0,d|0,M|0,K|0),f=c|0,d=u|0,c=s|0,u=o|0,s=r|0,o=i|0;const w=Le.add3L(K,z,D);r=Le.add3H(w,M,Q,P),i=w|0}({h:r,l:i}=Le.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Le.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=Le.add(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:d}=Le.add(this.Dh|0,this.Dl|0,f|0,d|0),{h:p,l:g}=Le.add(this.Eh|0,this.El|0,p|0,g|0),{h:m,l:v}=Le.add(this.Fh|0,this.Fl|0,m|0,v|0),{h:b,l:A}=Le.add(this.Gh|0,this.Gl|0,b|0,A|0),{h:N,l:R}=Le.add(this.Hh|0,this.Hl|0,N|0,R|0),this.set(r,i,s,o,c,u,f,d,p,g,m,v,b,A,N,R)}roundClean(){aa.fill(0),ca.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const aR=XE(()=>new oR);function cR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const T4=cR();T4.crypto||T4.msCrypto;function lR(n){switch(n){case"sha256":return jk.create();case"sha512":return aR.create()}ee(!1,"invalid hashing algorithm name","algorithm",n)}const[PB,CB,_B]=[[],[],[]],uR=BigInt(0),xd=BigInt(1),fR=BigInt(2),hR=BigInt(7),dR=BigInt(256),pR=BigInt(113);for(let n=0,e=xd,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],PB.push(2*(5*r+t)),CB.push((n+1)*(n+2)/2%64);let i=uR;for(let s=0;s<7;s++)e=(e<<xd^(e>>hR)*pR)%dR,e&fR&&(i^=xd<<(xd<<BigInt(s))-xd);_B.push(i)}const[gR,yR]=AB(_B,!0),k4=(n,e,t)=>t>32?OB(n,e,t):SB(n,e,t),R4=(n,e,t)=>t>32?BB(n,e,t):IB(n,e,t);function mR(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=t[u],d=t[u+1],p=k4(f,d,1)^t[c],g=R4(f,d,1)^t[c+1];for(let m=0;m<50;m+=10)n[o+m]^=p,n[o+m+1]^=g}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=CB[o],u=k4(i,s,c),f=R4(i,s,c),d=PB[o];i=n[d],s=n[d+1],n[d]=u,n[d+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=gR[r],n[1]^=yR[r]}t.fill(0)}let wR=class NB extends vB{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,$4(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=$k(this.state)}keccak(){mR(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Ry(this);const{blockLen:t,state:r}=this;e=YE(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ry(this,!1),wB(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return $4(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(bB(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new NB(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const bR=(n,e,t)=>XE(()=>new wR(e,n,t)),vR=bR(1,136,256/8);let DB=!1;const $B=function(n){return vR(n)};let TB=$B;function Ut(n){const e=ze(n,"data");return Ae(TB(e))}Ut._=$B;Ut.lock=function(){DB=!0};Ut.register=function(n){if(DB)throw new TypeError("keccak256 is locked");TB=n};Object.freeze(Ut);const kB=function(n){return lR("sha256").update(n).digest()};let RB=kB,UB=!1;function Oh(n){const e=ze(n,"data");return Ae(RB(e))}Oh._=kB;Oh.lock=function(){UB=!0};Oh.register=function(n){if(UB)throw new Error("sha256 is locked");RB=n};Object.freeze(Oh);Object.freeze(Oh);function U4(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function LB(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function ER(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");U4(n.outputLen),U4(n.blockLen)}function Uy(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function xR(n,e){LB(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const gb=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const FB=n=>n instanceof Uint8Array,yb=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),as=(n,e)=>n<<32-e|n>>>e,AR=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!AR)throw new Error("Non little-endian hardware is not supported");function SR(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function e3(n){if(typeof n=="string"&&(n=SR(n)),!FB(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function IR(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!FB(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}let MB=class{clone(){return this._cloneInto()}};function OR(n){const e=r=>n().update(e3(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function BR(n=32){if(gb&&typeof gb.getRandomValues=="function")return gb.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function PR(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}class CR extends MB{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=yb(this.buffer)}update(e){Uy(this);const{view:t,buffer:r,blockLen:i}=this;e=e3(e);const s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=yb(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Uy(this),xR(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let p=o;p<i;p++)t[p]=0;PR(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=yb(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)c.setUint32(4*p,d[p],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const _R=(n,e,t)=>n&e^~n&t,NR=(n,e,t)=>n&e^n&t^e&t,DR=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),la=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ua=new Uint32Array(64);let $R=class extends CR{constructor(){super(64,32,8,!1),this.A=la[0]|0,this.B=la[1]|0,this.C=la[2]|0,this.D=la[3]|0,this.E=la[4]|0,this.F=la[5]|0,this.G=la[6]|0,this.H=la[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let p=0;p<16;p++,t+=4)ua[p]=e.getUint32(t,!1);for(let p=16;p<64;p++){const g=ua[p-15],m=ua[p-2],v=as(g,7)^as(g,18)^g>>>3,b=as(m,17)^as(m,19)^m>>>10;ua[p]=b+ua[p-7]+v+ua[p-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:d}=this;for(let p=0;p<64;p++){const g=as(c,6)^as(c,11)^as(c,25),m=d+g+_R(c,u,f)+DR[p]+ua[p]|0,b=(as(r,2)^as(r,13)^as(r,22))+NR(r,i,s)|0;d=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+b|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,i,s,o,c,u,f,d)}roundClean(){ua.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const TR=OR(()=>new $R);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jB=BigInt(0),Tm=BigInt(1),kR=BigInt(2),km=n=>n instanceof Uint8Array,RR=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function fh(n){if(!km(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=RR[n[t]];return e}function zB(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function t3(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function hh(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const i=r*2,s=n.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function Vl(n){return t3(fh(n))}function n3(n){if(!km(n))throw new Error("Uint8Array expected");return t3(fh(Uint8Array.from(n).reverse()))}function dh(n,e){return hh(n.toString(16).padStart(e*2,"0"))}function r3(n,e){return dh(n,e).reverse()}function UR(n){return hh(zB(n))}function Ui(n,e,t){let r;if(typeof e=="string")try{r=hh(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(km(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function mp(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!km(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function LR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function FR(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function MR(n){let e;for(e=0;n>jB;n>>=Tm,e+=1);return e}function jR(n,e){return n>>BigInt(e)&Tm}const zR=(n,e,t)=>n|(t?Tm:jB)<<BigInt(e),i3=n=>(kR<<BigInt(n-1))-Tm,mb=n=>new Uint8Array(n),L4=n=>Uint8Array.from(n);function HB(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=mb(n),i=mb(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},c=(...p)=>t(i,r,...p),u=(p=mb())=>{i=c(L4([0]),p),r=c(),p.length!==0&&(i=c(L4([1]),p),r=c())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const g=[];for(;p<e;){r=c();const m=r.slice();g.push(m),p+=r.length}return mp(...g)};return(p,g)=>{o(),u(p);let m;for(;!(m=g(f()));)u();return o(),m}}const HR={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Xp(n,e,t={}){const r=(i,s,o)=>{const c=HR[s];if(typeof c!="function")throw new Error(`Invalid validator "${s}", expected function`);const u=n[i];if(!(o&&u===void 0)&&!c(u,n))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const VR=Object.freeze(Object.defineProperty({__proto__:null,bitGet:jR,bitLen:MR,bitMask:i3,bitSet:zR,bytesToHex:fh,bytesToNumberBE:Vl,bytesToNumberLE:n3,concatBytes:mp,createHmacDrbg:HB,ensureBytes:Ui,equalBytes:LR,hexToBytes:hh,hexToNumber:t3,numberToBytesBE:dh,numberToBytesLE:r3,numberToHexUnpadded:zB,numberToVarBytesBE:UR,utf8ToBytes:FR,validateObject:Xp},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rn=BigInt(0),Dt=BigInt(1),nl=BigInt(2),qR=BigInt(3),cv=BigInt(4),F4=BigInt(5),M4=BigInt(8);BigInt(9);BigInt(16);function pr(n,e){const t=n%e;return t>=rn?t:e+t}function KR(n,e,t){if(t<=rn||e<rn)throw new Error("Expected power/modulo > 0");if(t===Dt)return rn;let r=Dt;for(;e>rn;)e&Dt&&(r=r*n%t),n=n*n%t,e>>=Dt;return r}function ti(n,e,t){let r=n;for(;e-- >rn;)r*=r,r%=t;return r}function lv(n,e){if(n===rn||e<=rn)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=pr(n,e),r=e,i=rn,s=Dt;for(;t!==rn;){const c=r/t,u=r%t,f=i-s*c;r=t,t=u,i=s,s=f}if(r!==Dt)throw new Error("invert: does not exist");return pr(i,e)}function GR(n){const e=(n-Dt)/nl;let t,r,i;for(t=n-Dt,r=0;t%nl===rn;t/=nl,r++);for(i=nl;i<n&&KR(i,e,n)!==n-Dt;i++);if(r===1){const o=(n+Dt)/cv;return function(u,f){const d=u.pow(f,o);if(!u.eql(u.sqr(d),f))throw new Error("Cannot find square root");return d}}const s=(t+Dt)/nl;return function(c,u){if(c.pow(u,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let f=r,d=c.pow(c.mul(c.ONE,i),t),p=c.pow(u,s),g=c.pow(u,t);for(;!c.eql(g,c.ONE);){if(c.eql(g,c.ZERO))return c.ZERO;let m=1;for(let b=c.sqr(g);m<f&&!c.eql(b,c.ONE);m++)b=c.sqr(b);const v=c.pow(d,Dt<<BigInt(f-m-1));d=c.sqr(v),p=c.mul(p,v),g=c.mul(g,d),f=m}return p}}function WR(n){if(n%cv===qR){const e=(n+Dt)/cv;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%M4===F4){const e=(n-F4)/M4;return function(r,i){const s=r.mul(i,nl),o=r.pow(s,e),c=r.mul(i,o),u=r.mul(r.mul(c,nl),o),f=r.mul(c,r.sub(u,r.ONE));if(!r.eql(r.sqr(f),i))throw new Error("Cannot find square root");return f}}return GR(n)}const QR=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ZR(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=QR.reduce((r,i)=>(r[i]="function",r),e);return Xp(n,t)}function JR(n,e,t){if(t<rn)throw new Error("Expected power > 0");if(t===rn)return n.ONE;if(t===Dt)return e;let r=n.ONE,i=e;for(;t>rn;)t&Dt&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Dt;return r}function YR(n,e){const t=new Array(e.length),r=e.reduce((s,o,c)=>n.is0(o)?s:(t[c]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,c)=>n.is0(o)?s:(t[c]=n.mul(s,t[c]),n.mul(s,o)),i),t}function VB(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function XR(n,e,t=!1,r={}){if(n<=rn)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=VB(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=WR(n),c=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:i3(i),ZERO:rn,ONE:Dt,create:u=>pr(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return rn<=u&&u<n},is0:u=>u===rn,isOdd:u=>(u&Dt)===Dt,neg:u=>pr(-u,n),eql:(u,f)=>u===f,sqr:u=>pr(u*u,n),add:(u,f)=>pr(u+f,n),sub:(u,f)=>pr(u-f,n),mul:(u,f)=>pr(u*f,n),pow:(u,f)=>JR(c,u,f),div:(u,f)=>pr(u*lv(f,n),n),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>lv(u,n),sqrt:r.sqrt||(u=>o(c,u)),invertBatch:u=>YR(c,u),cmov:(u,f,d)=>d?f:u,toBytes:u=>t?r3(u,s):dh(u,s),fromBytes:u=>{if(u.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${u.length}`);return t?n3(u):Vl(u)}});return Object.freeze(c)}function qB(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function KB(n){const e=qB(n);return e+Math.ceil(e/2)}function e7(n,e,t=!1){const r=n.length,i=qB(e),s=KB(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=t?Vl(n):n3(n),c=pr(o,e-Dt)+Dt;return t?r3(c,i):dh(c,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t7=BigInt(0),wb=BigInt(1);function n7(n,e){const t=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=n.ZERO,c=i;for(;s>t7;)s&wb&&(o=o.add(c)),c=c.double(),s>>=wb;return o},precomputeWindow(i,s){const{windows:o,windowSize:c}=r(s),u=[];let f=i,d=f;for(let p=0;p<o;p++){d=f,u.push(d);for(let g=1;g<c;g++)d=d.add(f),u.push(d);f=d.double()}return u},wNAF(i,s,o){const{windows:c,windowSize:u}=r(i);let f=n.ZERO,d=n.BASE;const p=BigInt(2**i-1),g=2**i,m=BigInt(i);for(let v=0;v<c;v++){const b=v*u;let A=Number(o&p);o>>=m,A>u&&(A-=g,o+=wb);const N=b,R=b+Math.abs(A)-1,O=v%2!==0,T=A<0;A===0?d=d.add(t(O,s[N])):f=f.add(t(T,s[R]))}return{p:f,f:d}},wNAFCached(i,s,o,c){const u=i._WINDOW_SIZE||1;let f=s.get(i);return f||(f=this.precomputeWindow(i,u),u!==1&&s.set(i,c(f))),this.wNAF(u,f,o)}}}function GB(n){return ZR(n.Fp),Xp(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...VB(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function r7(n){const e=GB(n);Xp(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:i7,hexToBytes:s7}=VR,ul={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=ul;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:i7(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=ul,t=typeof n=="string"?s7(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=ul._parseInt(t.subarray(2)),{d:o,l:c}=ul._parseInt(s);if(c.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(n){const e=f=>Number.parseInt(f[0],16)&8?"00"+f:f,t=f=>{const d=f.toString(16);return d.length&1?`0${d}`:d},r=e(t(n.s)),i=e(t(n.r)),s=r.length/2,o=i.length/2,c=t(s),u=t(o);return`30${t(o+s+4)}02${u}${i}02${c}${r}`}},Ao=BigInt(0),pi=BigInt(1);BigInt(2);const j4=BigInt(3);BigInt(4);function o7(n){const e=r7(n),{Fp:t}=e,r=e.toBytes||((v,b,A)=>{const N=b.toAffine();return mp(Uint8Array.from([4]),t.toBytes(N.x),t.toBytes(N.y))}),i=e.fromBytes||(v=>{const b=v.subarray(1),A=t.fromBytes(b.subarray(0,t.BYTES)),N=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:A,y:N}});function s(v){const{a:b,b:A}=e,N=t.sqr(v),R=t.mul(N,v);return t.add(t.add(R,t.mul(v,b)),A)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(v){return typeof v=="bigint"&&Ao<v&&v<e.n}function c(v){if(!o(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(v){const{allowedPrivateKeyLengths:b,nByteLength:A,wrapPrivateKey:N,n:R}=e;if(b&&typeof v!="bigint"){if(v instanceof Uint8Array&&(v=fh(v)),typeof v!="string"||!b.includes(v.length))throw new Error("Invalid key");v=v.padStart(A*2,"0")}let O;try{O=typeof v=="bigint"?v:Vl(Ui("private key",v,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof v}`)}return N&&(O=pr(O,R)),c(O),O}const f=new Map;function d(v){if(!(v instanceof p))throw new Error("ProjectivePoint expected")}class p{constructor(b,A,N){if(this.px=b,this.py=A,this.pz=N,b==null||!t.isValid(b))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(N==null||!t.isValid(N))throw new Error("z required")}static fromAffine(b){const{x:A,y:N}=b||{};if(!b||!t.isValid(A)||!t.isValid(N))throw new Error("invalid affine point");if(b instanceof p)throw new Error("projective point not allowed");const R=O=>t.eql(O,t.ZERO);return R(A)&&R(N)?p.ZERO:new p(A,N,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const A=t.invertBatch(b.map(N=>N.pz));return b.map((N,R)=>N.toAffine(A[R])).map(p.fromAffine)}static fromHex(b){const A=p.fromAffine(i(Ui("pointHex",b)));return A.assertValidity(),A}static fromPrivateKey(b){return p.BASE.multiply(u(b))}_setWindowSize(b){this._WINDOW_SIZE=b,f.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:b,y:A}=this.toAffine();if(!t.isValid(b)||!t.isValid(A))throw new Error("bad point: x or y not FE");const N=t.sqr(A),R=s(b);if(!t.eql(N,R))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){d(b);const{px:A,py:N,pz:R}=this,{px:O,py:T,pz:k}=b,j=t.eql(t.mul(A,k),t.mul(O,R)),H=t.eql(t.mul(N,k),t.mul(T,R));return j&&H}negate(){return new p(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:A}=e,N=t.mul(A,j4),{px:R,py:O,pz:T}=this;let k=t.ZERO,j=t.ZERO,H=t.ZERO,V=t.mul(R,R),M=t.mul(O,O),K=t.mul(T,T),Q=t.mul(R,O);return Q=t.add(Q,Q),H=t.mul(R,T),H=t.add(H,H),k=t.mul(b,H),j=t.mul(N,K),j=t.add(k,j),k=t.sub(M,j),j=t.add(M,j),j=t.mul(k,j),k=t.mul(Q,k),H=t.mul(N,H),K=t.mul(b,K),Q=t.sub(V,K),Q=t.mul(b,Q),Q=t.add(Q,H),H=t.add(V,V),V=t.add(H,V),V=t.add(V,K),V=t.mul(V,Q),j=t.add(j,V),K=t.mul(O,T),K=t.add(K,K),V=t.mul(K,Q),k=t.sub(k,V),H=t.mul(K,M),H=t.add(H,H),H=t.add(H,H),new p(k,j,H)}add(b){d(b);const{px:A,py:N,pz:R}=this,{px:O,py:T,pz:k}=b;let j=t.ZERO,H=t.ZERO,V=t.ZERO;const M=e.a,K=t.mul(e.b,j4);let Q=t.mul(A,O),z=t.mul(N,T),P=t.mul(R,k),D=t.add(A,N),w=t.add(O,T);D=t.mul(D,w),w=t.add(Q,z),D=t.sub(D,w),w=t.add(A,R);let x=t.add(O,k);return w=t.mul(w,x),x=t.add(Q,P),w=t.sub(w,x),x=t.add(N,R),j=t.add(T,k),x=t.mul(x,j),j=t.add(z,P),x=t.sub(x,j),V=t.mul(M,w),j=t.mul(K,P),V=t.add(j,V),j=t.sub(z,V),V=t.add(z,V),H=t.mul(j,V),z=t.add(Q,Q),z=t.add(z,Q),P=t.mul(M,P),w=t.mul(K,w),z=t.add(z,P),P=t.sub(Q,P),P=t.mul(M,P),w=t.add(w,P),Q=t.mul(z,w),H=t.add(H,Q),Q=t.mul(x,w),j=t.mul(D,j),j=t.sub(j,Q),Q=t.mul(D,z),V=t.mul(x,V),V=t.add(V,Q),new p(j,H,V)}subtract(b){return this.add(b.negate())}is0(){return this.equals(p.ZERO)}wNAF(b){return m.wNAFCached(this,f,b,A=>{const N=t.invertBatch(A.map(R=>R.pz));return A.map((R,O)=>R.toAffine(N[O])).map(p.fromAffine)})}multiplyUnsafe(b){const A=p.ZERO;if(b===Ao)return A;if(c(b),b===pi)return this;const{endo:N}=e;if(!N)return m.unsafeLadder(this,b);let{k1neg:R,k1:O,k2neg:T,k2:k}=N.splitScalar(b),j=A,H=A,V=this;for(;O>Ao||k>Ao;)O&pi&&(j=j.add(V)),k&pi&&(H=H.add(V)),V=V.double(),O>>=pi,k>>=pi;return R&&(j=j.negate()),T&&(H=H.negate()),H=new p(t.mul(H.px,N.beta),H.py,H.pz),j.add(H)}multiply(b){c(b);let A=b,N,R;const{endo:O}=e;if(O){const{k1neg:T,k1:k,k2neg:j,k2:H}=O.splitScalar(A);let{p:V,f:M}=this.wNAF(k),{p:K,f:Q}=this.wNAF(H);V=m.constTimeNegate(T,V),K=m.constTimeNegate(j,K),K=new p(t.mul(K.px,O.beta),K.py,K.pz),N=V.add(K),R=M.add(Q)}else{const{p:T,f:k}=this.wNAF(A);N=T,R=k}return p.normalizeZ([N,R])[0]}multiplyAndAddUnsafe(b,A,N){const R=p.BASE,O=(k,j)=>j===Ao||j===pi||!k.equals(R)?k.multiplyUnsafe(j):k.multiply(j),T=O(this,A).add(O(b,N));return T.is0()?void 0:T}toAffine(b){const{px:A,py:N,pz:R}=this,O=this.is0();b==null&&(b=O?t.ONE:t.inv(R));const T=t.mul(A,b),k=t.mul(N,b),j=t.mul(R,b);if(O)return{x:t.ZERO,y:t.ZERO};if(!t.eql(j,t.ONE))throw new Error("invZ was invalid");return{x:T,y:k}}isTorsionFree(){const{h:b,isTorsionFree:A}=e;if(b===pi)return!0;if(A)return A(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:A}=e;return b===pi?this:A?A(p,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),r(p,this,b)}toHex(b=!0){return fh(this.toRawBytes(b))}}p.BASE=new p(e.Gx,e.Gy,t.ONE),p.ZERO=new p(t.ZERO,t.ONE,t.ZERO);const g=e.nBitLength,m=n7(p,e.endo?Math.ceil(g/2):g);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:o}}function a7(n){const e=GB(n);return Xp(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function c7(n){const e=a7(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(w){return Ao<w&&w<t.ORDER}function c(w){return pr(w,r)}function u(w){return lv(w,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:d,weierstrassEquation:p,isWithinCurveOrder:g}=o7({...e,toBytes(w,x,B){const C=x.toAffine(),I=t.toBytes(C.x),_=mp;return B?_(Uint8Array.from([x.hasEvenY()?2:3]),I):_(Uint8Array.from([4]),I,t.toBytes(C.y))},fromBytes(w){const x=w.length,B=w[0],C=w.subarray(1);if(x===i&&(B===2||B===3)){const I=Vl(C);if(!o(I))throw new Error("Point is not on curve");const _=p(I);let $=t.sqrt(_);const U=($&pi)===pi;return(B&1)===1!==U&&($=t.neg($)),{x:I,y:$}}else if(x===s&&B===4){const I=t.fromBytes(C.subarray(0,t.BYTES)),_=t.fromBytes(C.subarray(t.BYTES,2*t.BYTES));return{x:I,y:_}}else throw new Error(`Point of length ${x} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),m=w=>fh(dh(w,e.nByteLength));function v(w){const x=r>>pi;return w>x}function b(w){return v(w)?c(-w):w}const A=(w,x,B)=>Vl(w.slice(x,B));class N{constructor(x,B,C){this.r=x,this.s=B,this.recovery=C,this.assertValidity()}static fromCompact(x){const B=e.nByteLength;return x=Ui("compactSignature",x,B*2),new N(A(x,0,B),A(x,B,2*B))}static fromDER(x){const{r:B,s:C}=ul.toSig(Ui("DER",x));return new N(B,C)}assertValidity(){if(!g(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!g(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(x){return new N(this.r,this.s,x)}recoverPublicKey(x){const{r:B,s:C,recovery:I}=this,_=H(Ui("msgHash",x));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");const $=I===2||I===3?B+e.n:B;if($>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const U=(I&1)===0?"02":"03",Y=f.fromHex(U+m($)),q=u($),Z=c(-_*q),te=c(C*q),re=f.BASE.multiplyAndAddUnsafe(Y,Z,te);if(!re)throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return hh(this.toDERHex())}toDERHex(){return ul.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hh(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const R={isValidPrivateKey(w){try{return d(w),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const w=KB(e.n);return e7(e.randomBytes(w),e.n)},precompute(w=8,x=f.BASE){return x._setWindowSize(w),x.multiply(BigInt(3)),x}};function O(w,x=!0){return f.fromPrivateKey(w).toRawBytes(x)}function T(w){const x=w instanceof Uint8Array,B=typeof w=="string",C=(x||B)&&w.length;return x?C===i||C===s:B?C===2*i||C===2*s:w instanceof f}function k(w,x,B=!0){if(T(w))throw new Error("first arg must be private key");if(!T(x))throw new Error("second arg must be public key");return f.fromHex(x).multiply(d(w)).toRawBytes(B)}const j=e.bits2int||function(w){const x=Vl(w),B=w.length*8-e.nBitLength;return B>0?x>>BigInt(B):x},H=e.bits2int_modN||function(w){return c(j(w))},V=i3(e.nBitLength);function M(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(Ao<=w&&w<V))throw new Error(`bigint expected < 2^${e.nBitLength}`);return dh(w,e.nByteLength)}function K(w,x,B=Q){if(["recovered","canonical"].some(ie=>ie in B))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:I}=e;let{lowS:_,prehash:$,extraEntropy:U}=B;_==null&&(_=!0),w=Ui("msgHash",w),$&&(w=Ui("prehashed msgHash",C(w)));const Y=H(w),q=d(x),Z=[M(q),M(Y)];if(U!=null){const ie=U===!0?I(t.BYTES):U;Z.push(Ui("extraEntropy",ie))}const te=mp(...Z),re=Y;function le(ie){const ue=j(ie);if(!g(ue))return;const Ne=u(ue),Re=f.BASE.multiply(ue).toAffine(),Te=c(Re.x);if(Te===Ao)return;const Ve=c(Ne*c(re+Te*q));if(Ve===Ao)return;let Gt=(Re.x===Te?0:2)|Number(Re.y&pi),on=Ve;return _&&v(Ve)&&(on=b(Ve),Gt^=1),new N(Te,on,Gt)}return{seed:te,k2sig:le}}const Q={lowS:e.lowS,prehash:!1},z={lowS:e.lowS,prehash:!1};function P(w,x,B=Q){const{seed:C,k2sig:I}=K(w,x,B),_=e;return HB(_.hash.outputLen,_.nByteLength,_.hmac)(C,I)}f.BASE._setWindowSize(8);function D(w,x,B,C=z){var Re;const I=w;if(x=Ui("msgHash",x),B=Ui("publicKey",B),"strict"in C)throw new Error("options.strict was renamed to lowS");const{lowS:_,prehash:$}=C;let U,Y;try{if(typeof I=="string"||I instanceof Uint8Array)try{U=N.fromDER(I)}catch(Te){if(!(Te instanceof ul.Err))throw Te;U=N.fromCompact(I)}else if(typeof I=="object"&&typeof I.r=="bigint"&&typeof I.s=="bigint"){const{r:Te,s:Ve}=I;U=new N(Te,Ve)}else throw new Error("PARSE");Y=f.fromHex(B)}catch(Te){if(Te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(_&&U.hasHighS())return!1;$&&(x=e.hash(x));const{r:q,s:Z}=U,te=H(x),re=u(Z),le=c(te*re),ie=c(q*re),ue=(Re=f.BASE.multiplyAndAddUnsafe(Y,le,ie))==null?void 0:Re.toAffine();return ue?c(ue.x)===q:!1}return{CURVE:e,getPublicKey:O,getSharedSecret:k,sign:P,verify:D,ProjectivePoint:f,Signature:N,utils:R}}let WB=class extends MB{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ER(e);const r=e3(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Uy(this),this.iHash.update(e),this}digestInto(e){Uy(this),LB(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const QB=(n,e,t)=>new WB(n,e).update(t).digest();QB.create=(n,e)=>new WB(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function l7(n){return{hash:n,hmac:(e,...t)=>QB(n,e,IR(...t)),randomBytes:BR}}function u7(n,e){const t=r=>c7({...n,...l7(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ZB=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),z4=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),f7=BigInt(1),uv=BigInt(2),H4=(n,e)=>(n+e/uv)/e;function h7(n){const e=ZB,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),c=BigInt(44),u=BigInt(88),f=n*n*n%e,d=f*f*n%e,p=ti(d,t,e)*d%e,g=ti(p,t,e)*d%e,m=ti(g,uv,e)*f%e,v=ti(m,i,e)*m%e,b=ti(v,s,e)*v%e,A=ti(b,c,e)*b%e,N=ti(A,u,e)*A%e,R=ti(N,c,e)*b%e,O=ti(R,t,e)*d%e,T=ti(O,o,e)*v%e,k=ti(T,r,e)*f%e,j=ti(k,uv,e);if(!fv.eql(fv.sqr(j),n))throw new Error("Cannot find square root");return j}const fv=XR(ZB,void 0,void 0,{sqrt:h7}),$a=u7({a:BigInt(0),b:BigInt(7),Fp:fv,n:z4,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=z4,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-f7*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),c=H4(s*n,e),u=H4(-r*n,e);let f=pr(n-c*t-u*i,e),d=pr(-c*r-u*s,e);const p=f>o,g=d>o;if(p&&(f=e-f),g&&(d=e-d),f>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:p,k1:f,k2neg:g,k2:d}}}},TR);BigInt(0);$a.ProjectivePoint;const wp="0x0000000000000000000000000000000000000000",V4="0x0000000000000000000000000000000000000000000000000000000000000000",q4=BigInt(0),K4=BigInt(1),G4=BigInt(2),W4=BigInt(27),Q4=BigInt(28),$0=BigInt(35),Ru={};function Z4(n){return To(Kt(n),32)}var Df,vs,$f,$l;const Ri=class Ri{constructor(e,t,r,i){ce(this,Df);ce(this,vs);ce(this,$f);ce(this,$l);Nm(e,Ru,"Signature"),G(this,Df,t),G(this,vs,r),G(this,$f,i),G(this,$l,null)}get r(){return F(this,Df)}set r(e){ee(hf(e)===32,"invalid r","value",e),G(this,Df,Ae(e))}get s(){return ee(parseInt(F(this,vs).substring(0,3))<8,"non-canonical s; use ._s","s",F(this,vs)),F(this,vs)}set s(e){ee(hf(e)===32,"invalid s","value",e),G(this,vs,Ae(e))}get _s(){return F(this,vs)}isValid(){return parseInt(F(this,vs).substring(0,3))<8}get v(){return F(this,$f)}set v(e){const t=He(e,"value");ee(t===27||t===28,"invalid v","v",e),G(this,$f,t)}get networkV(){return F(this,$l)}get legacyChainId(){const e=this.networkV;return e==null?null:Ri.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=ze(this.s);return this.yParity&&(e[0]|=128),Ae(e)}get compactSerialized(){return Bt([this.r,this.yParityAndS])}get serialized(){return Bt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Ri(Ru,this.r,this._s,this.v);return this.networkV&&G(e,$l,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=Be(e,"v");return t==W4||t==Q4?q4:(ee(t>=$0,"invalid EIP-155 v","v",e),(t-$0)/G4)}static getChainIdV(e,t){return Be(e)*G4+BigInt(35+t-27)}static getNormalizedV(e){const t=Be(e);return t===q4||t===W4?27:t===K4||t===Q4?28:(ee(t>=$0,"invalid v","v",e),t&K4?27:28)}static from(e){function t(f,d){ee(f,d,"signature",e)}if(e==null)return new Ri(Ru,V4,V4,27);if(typeof e=="string"){const f=ze(e,"signature");if(f.length===64){const d=Ae(f.slice(0,32)),p=f.slice(32,64),g=p[0]&128?28:27;return p[0]&=127,new Ri(Ru,d,Ae(p),g)}if(f.length===65){const d=Ae(f.slice(0,32)),p=Ae(f.slice(32,64)),g=Ri.getNormalizedV(f[64]);return new Ri(Ru,d,p,g)}t(!1,"invalid raw signature length")}if(e instanceof Ri)return e.clone();const r=e.r;t(r!=null,"missing r");const i=Z4(r),s=(function(f,d){if(f!=null)return Z4(f);if(d!=null){t(pt(d,32),"invalid yParityAndS");const p=ze(d);return p[0]&=127,Ae(p)}t(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:c}=(function(f,d,p){if(f!=null){const g=Be(f);return{networkV:g>=$0?g:void 0,v:Ri.getNormalizedV(g)}}if(d!=null)return t(pt(d,32),"invalid yParityAndS"),{v:ze(d)[0]&128?28:27};if(p!=null){switch(He(p,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),u=new Ri(Ru,i,s,c);return o&&G(u,$l,o),t(e.yParity==null||He(e.yParity,"sig.yParity")===u.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===u.yParityAndS,"yParityAndS mismatch"),u}};Df=new WeakMap,vs=new WeakMap,$f=new WeakMap,$l=new WeakMap;let Ir=Ri;var go;const ol=class ol{constructor(e){ce(this,go);ee(hf(e)===32,"invalid private key","privateKey","[REDACTED]"),G(this,go,Ae(e))}get privateKey(){return F(this,go)}get publicKey(){return ol.computePublicKey(F(this,go))}get compressedPublicKey(){return ol.computePublicKey(F(this,go),!0)}sign(e){ee(hf(e)===32,"invalid digest length","digest",e);const t=$a.sign(Gn(e),Gn(F(this,go)),{lowS:!0});return Ir.from({r:mc(t.r,32),s:mc(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=ol.computePublicKey(e);return Ae($a.getSharedSecret(Gn(F(this,go)),ze(t),!1))}static computePublicKey(e,t){let r=ze(e,"key");if(r.length===32){const s=$a.getPublicKey(r,!!t);return Ae(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=$a.ProjectivePoint.fromHex(r);return Ae(i.toRawBytes(t))}static recoverPublicKey(e,t){ee(hf(e)===32,"invalid digest length","digest",e);const r=Ir.from(t);let i=$a.Signature.fromCompact(Gn(Bt([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(Gn(e));return ee(s!=null,"invalid signature for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,r){const i=$a.ProjectivePoint.fromHex(ol.computePublicKey(e).substring(2)),s=$a.ProjectivePoint.fromHex(ol.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!r)}};go=new WeakMap;let bp=ol;const d7=BigInt(0),p7=BigInt(36);function J4(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=ze(Ut(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const s3={};for(let n=0;n<10;n++)s3[String(n)]=String(n);for(let n=0;n<26;n++)s3[String.fromCharCode(65+n)]=String(10+n);const Y4=15;function g7(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>s3[r]).join("");for(;e.length>=Y4;){let r=e.substring(0,Y4);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const y7=(function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n})();function m7(n){n=n.toLowerCase();let e=d7;for(let t=0;t<n.length;t++)e=e*p7+y7[n[t]];return e}function rt(n){if(ee(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=J4(n);return ee(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ee(n.substring(2,4)===g7(n),"bad icap checksum","address",n);let e=m7(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return J4("0x"+e)}ee(!1,"invalid address","address",n)}function w7(n){const e=rt(n.from);let r=Be(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,rt(Ot(Ut(bc([e,r])),12))}function JB(n){return n&&typeof n.getAddress=="function"}async function bb(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(pe(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),ee(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),rt(t)}function Qn(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?rt(n):(pe(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),bb(n,e.resolveName(n)));if(JB(n))return bb(n,n.getAddress());if(n&&typeof n.then=="function")return bb(n,n);ee(!1,"unsupported addressable value","target",n)}const ro={};function Oe(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new zn(ro,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function Je(n,e){return new zn(ro,`bytes${e||""}`,n,{size:e})}const X4=Symbol.for("_ethers_typed");var Tl;const so=class so{constructor(e,t,r,i){se(this,"type");se(this,"value");ce(this,Tl);se(this,"_typedSymbol");i==null&&(i=null),Nm(ro,e,"Typed"),ke(this,{_typedSymbol:X4,type:t,value:r}),G(this,Tl,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return F(this,Tl)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return F(this,Tl)===!0?-1:F(this,Tl)===!1?this.value.length:null}static from(e,t){return new so(ro,e,t)}static uint8(e){return Oe(e,8)}static uint16(e){return Oe(e,16)}static uint24(e){return Oe(e,24)}static uint32(e){return Oe(e,32)}static uint40(e){return Oe(e,40)}static uint48(e){return Oe(e,48)}static uint56(e){return Oe(e,56)}static uint64(e){return Oe(e,64)}static uint72(e){return Oe(e,72)}static uint80(e){return Oe(e,80)}static uint88(e){return Oe(e,88)}static uint96(e){return Oe(e,96)}static uint104(e){return Oe(e,104)}static uint112(e){return Oe(e,112)}static uint120(e){return Oe(e,120)}static uint128(e){return Oe(e,128)}static uint136(e){return Oe(e,136)}static uint144(e){return Oe(e,144)}static uint152(e){return Oe(e,152)}static uint160(e){return Oe(e,160)}static uint168(e){return Oe(e,168)}static uint176(e){return Oe(e,176)}static uint184(e){return Oe(e,184)}static uint192(e){return Oe(e,192)}static uint200(e){return Oe(e,200)}static uint208(e){return Oe(e,208)}static uint216(e){return Oe(e,216)}static uint224(e){return Oe(e,224)}static uint232(e){return Oe(e,232)}static uint240(e){return Oe(e,240)}static uint248(e){return Oe(e,248)}static uint256(e){return Oe(e,256)}static uint(e){return Oe(e,256)}static int8(e){return Oe(e,-8)}static int16(e){return Oe(e,-16)}static int24(e){return Oe(e,-24)}static int32(e){return Oe(e,-32)}static int40(e){return Oe(e,-40)}static int48(e){return Oe(e,-48)}static int56(e){return Oe(e,-56)}static int64(e){return Oe(e,-64)}static int72(e){return Oe(e,-72)}static int80(e){return Oe(e,-80)}static int88(e){return Oe(e,-88)}static int96(e){return Oe(e,-96)}static int104(e){return Oe(e,-104)}static int112(e){return Oe(e,-112)}static int120(e){return Oe(e,-120)}static int128(e){return Oe(e,-128)}static int136(e){return Oe(e,-136)}static int144(e){return Oe(e,-144)}static int152(e){return Oe(e,-152)}static int160(e){return Oe(e,-160)}static int168(e){return Oe(e,-168)}static int176(e){return Oe(e,-176)}static int184(e){return Oe(e,-184)}static int192(e){return Oe(e,-192)}static int200(e){return Oe(e,-200)}static int208(e){return Oe(e,-208)}static int216(e){return Oe(e,-216)}static int224(e){return Oe(e,-224)}static int232(e){return Oe(e,-232)}static int240(e){return Oe(e,-240)}static int248(e){return Oe(e,-248)}static int256(e){return Oe(e,-256)}static int(e){return Oe(e,-256)}static bytes1(e){return Je(e,1)}static bytes2(e){return Je(e,2)}static bytes3(e){return Je(e,3)}static bytes4(e){return Je(e,4)}static bytes5(e){return Je(e,5)}static bytes6(e){return Je(e,6)}static bytes7(e){return Je(e,7)}static bytes8(e){return Je(e,8)}static bytes9(e){return Je(e,9)}static bytes10(e){return Je(e,10)}static bytes11(e){return Je(e,11)}static bytes12(e){return Je(e,12)}static bytes13(e){return Je(e,13)}static bytes14(e){return Je(e,14)}static bytes15(e){return Je(e,15)}static bytes16(e){return Je(e,16)}static bytes17(e){return Je(e,17)}static bytes18(e){return Je(e,18)}static bytes19(e){return Je(e,19)}static bytes20(e){return Je(e,20)}static bytes21(e){return Je(e,21)}static bytes22(e){return Je(e,22)}static bytes23(e){return Je(e,23)}static bytes24(e){return Je(e,24)}static bytes25(e){return Je(e,25)}static bytes26(e){return Je(e,26)}static bytes27(e){return Je(e,27)}static bytes28(e){return Je(e,28)}static bytes29(e){return Je(e,29)}static bytes30(e){return Je(e,30)}static bytes31(e){return Je(e,31)}static bytes32(e){return Je(e,32)}static address(e){return new so(ro,"address",e)}static bool(e){return new so(ro,"bool",!!e)}static bytes(e){return new so(ro,"bytes",e)}static string(e){return new so(ro,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new so(ro,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===X4}static dereference(e,t){if(so.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Tl=new WeakMap;let zn=so;class b7 extends Lo{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=zn.dereference(t,"string");try{r=rt(r)}catch(i){return this._throwError(i.message,t)}return e.writeValue(r)}decode(e){return rt(mc(e.readValue(),20))}}class v7 extends Lo{constructor(t){super(t.name,t.type,"_",t.dynamic);se(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,r){return this.coder.encode(t,r)}decode(t){return this.coder.decode(t)}}function YB(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let u={};r=e.map(f=>{const d=f.localName;return pe(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:t}),pe(!u[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:t}),u[d]=!0,t[d]})}else ee(!1,"invalid tuple value","tuple",t);ee(e.length===r.length,"types/value length mismatch","tuple",t);let i=new iv,s=new iv,o=[];e.forEach((u,f)=>{let d=r[f];if(u.dynamic){let p=s.length;u.encode(s,d);let g=i.writeUpdatableValue();o.push(m=>{g(m+p)})}else u.encode(i,d)}),o.forEach(u=>{u(i.length)});let c=n.appendWriter(i);return c+=n.appendWriter(s),c}function XB(n,e){let t=[],r=[],i=n.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let c=n.readIndex(),u=i.subReader(c);try{o=s.decode(u)}catch(f){if(yn(f,"BUFFER_OVERRUN"))throw f;o=f,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(c){if(yn(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");t.push(o),r.push(s.localName||null)}),uh.fromItems(t,r)}class E7 extends Lo{constructor(t,r,i){const s=t.type+"["+(r>=0?r:"")+"]",o=r===-1||t.dynamic;super("array",s,i,o);se(this,"coder");se(this,"length");ke(this,{coder:t,length:r})}defaultValue(){const t=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(t);return r}encode(t,r){const i=zn.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,t.writeValue(i.length)),iB(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let c=0;c<i.length;c++)o.push(this.coder);return YB(t,o,i)}decode(t){let r=this.length;r===-1&&(r=t.readIndex(),pe(r*Wn<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:r*Wn,length:t.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new v7(this.coder));return XB(t,i)}}class x7 extends Lo{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=zn.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class eP extends Lo{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Gn(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class A7 extends eP{constructor(e){super("bytes",e)}decode(e){return Ae(super.decode(e))}}class S7 extends Lo{constructor(t,r){let i="bytes"+String(t);super(i,i,r,!1);se(this,"size");ke(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,r){let i=Gn(zn.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),t.writeBytes(i)}decode(t){return Ae(t.readBytes(this.size))}}const I7=new Uint8Array([]);class O7 extends Lo{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(I7)}decode(e){return e.readBytes(0),null}}const B7=BigInt(0),P7=BigInt(1),C7=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class _7 extends Lo{constructor(t,r,i){const s=(r?"int":"uint")+t*8;super(s,s,i,!1);se(this,"size");se(this,"signed");ke(this,{size:t,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,r){let i=Be(zn.dereference(r,this.type)),s=Kd(C7,Wn*8);if(this.signed){let o=Kd(s,this.size*8-1);(i>o||i<-(o+P7))&&this._throwError("value out-of-bounds",r),i=aB(i,8*Wn)}else(i<B7||i>Kd(s,this.size*8))&&this._throwError("value out-of-bounds",r);return t.writeValue(i)}decode(t){let r=Kd(t.readValue(),this.size*8);return this.signed&&(r=dk(r,this.size*8)),r}}class N7 extends eP{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Co(zn.dereference(t,"string")))}decode(e){return ky(super.decode(e))}}class T0 extends Lo{constructor(t,r){let i=!1;const s=[];t.forEach(c=>{c.dynamic&&(i=!0),s.push(c.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);se(this,"coders");ke(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),t[o]==null&&(t[o]=t[s]))}),Object.freeze(t)}encode(t,r){const i=zn.dereference(r,"tuple");return YB(t,this.coders,i)}decode(t){return XB(t,this.coders)}}function vb(n,e){return{address:rt(n),storageKeys:e.map((t,r)=>(ee(pt(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function nu(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(ee(t.length===2,"invalid slot set",`value[${r}]`,t),vb(t[0],t[1])):(ee(t!=null&&typeof t=="object","invalid address-slot set","value",n),vb(t.address,t.storageKeys)));ee(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return vb(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function tP(n){return{address:rt(n.address),nonce:Be(n.nonce!=null?n.nonce:0),chainId:Be(n.chainId!=null?n.chainId:0),signature:Ir.from(n.signature)}}function D7(n){let e;return typeof n=="string"?e=bp.computePublicKey(n,!1):e=n.publicKey,rt(Ut("0x"+e.substring(4)).substring(26))}function $7(n,e){return D7(bp.recoverPublicKey(n,e))}const nn=BigInt(0),T7=BigInt(2),k7=BigInt(27),R7=BigInt(28),U7=BigInt(35),L7=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Eb=4096*32;function F7(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return ze(n.blobToKzgCommitment(Ae(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return ze(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return ze(n.blobToKZGCommitment(Ae(r)));ee(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return ze(n.computeBlobProof(Ae(r),Ae(i)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return ze(n.computeBlobKZGProof(Ae(r),Ae(i)));ee(!1,"unsupported KZG library","kzg",n)}}}function eS(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=Oh(e).substring(4),"0x"+t}function Bh(n){return n==="0x"?null:rt(n)}function Rm(n,e){try{return nu(n)}catch(t){ee(!1,t.message,e,n)}}function M7(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let r=0;r<n.length;r++){const i=n[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);t.push({address:Bh(i[1]),nonce:ot(i[2],"nonce"),chainId:ot(i[0],"chainId"),signature:Ir.from({yParity:ru(i[3],"yParity"),r:To(i[4],32),s:To(i[5],32)})})}return t}catch(t){ee(!1,t.message,e,n)}}function ru(n,e){return n==="0x"?0:He(n,e)}function ot(n,e){if(n==="0x")return nn;const t=Be(n,e);return ee(t<=L7,"value exceeds uint size",e,t),t}function We(n,e){const t=Be(n,"value"),r=Kt(t);return ee(r.length<=32,"value too large",`tx.${e}`,t),r}function Um(n){return nu(n).map(e=>[e.address,e.storageKeys])}function j7(n){return n.map(e=>[We(e.chainId,"chainId"),e.address,We(e.nonce,"nonce"),We(e.signature.yParity,"yParity"),Kt(e.signature.r),Kt(e.signature.s)])}function z7(n,e){ee(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)ee(pt(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function H7(n){const e=Yp(n);ee(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:ru(e[0],"nonce"),gasPrice:ot(e[1],"gasPrice"),gasLimit:ot(e[2],"gasLimit"),to:Bh(e[3]),value:ot(e[4],"value"),data:Ae(e[5]),chainId:nn};if(e.length===6)return t;const r=ot(e[6],"v"),i=ot(e[7],"r"),s=ot(e[8],"s");if(i===nn&&s===nn)t.chainId=r;else{let o=(r-U7)/T7;o<nn&&(o=nn),t.chainId=o,ee(o!==nn||r===k7||r===R7,"non-canonical legacy v","v",e[6]),t.signature=Ir.from({r:To(e[7],32),s:To(e[8],32),v:r})}return t}function V7(n,e){const t=[We(n.nonce,"nonce"),We(n.gasPrice||0,"gasPrice"),We(n.gasLimit,"gasLimit"),n.to||"0x",We(n.value,"value"),n.data];let r=nn;if(n.chainId!=nn)r=Be(n.chainId,"tx.chainId"),ee(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const s=n.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==nn&&(t.push(Kt(r)),t.push("0x"),t.push("0x")),bc(t);let i=BigInt(27+e.yParity);return r!==nn?i=Ir.getChainIdV(r,e.v):BigInt(e.v)!==i&&ee(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Kt(i)),t.push(Kt(e.r)),t.push(Kt(e.s)),bc(t)}function Lm(n,e){let t;try{if(t=ru(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{ee(!1,"invalid yParity","yParity",e[0])}const r=To(e[1],32),i=To(e[2],32),s=Ir.from({r,s:i,yParity:t});n.signature=s}function q7(n){const e=Yp(ze(n).slice(1));ee(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ae(n));const t={type:2,chainId:ot(e[0],"chainId"),nonce:ru(e[1],"nonce"),maxPriorityFeePerGas:ot(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ot(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ot(e[4],"gasLimit"),to:Bh(e[5]),value:ot(e[6],"value"),data:Ae(e[7]),accessList:Rm(e[8],"accessList")};return e.length===9||Lm(t,e.slice(9)),t}function K7(n,e){const t=[We(n.chainId,"chainId"),We(n.nonce,"nonce"),We(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),We(n.maxFeePerGas||0,"maxFeePerGas"),We(n.gasLimit,"gasLimit"),n.to||"0x",We(n.value,"value"),n.data,Um(n.accessList||[])];return e&&(t.push(We(e.yParity,"yParity")),t.push(Kt(e.r)),t.push(Kt(e.s))),Bt(["0x02",bc(t)])}function G7(n){const e=Yp(ze(n).slice(1));ee(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ae(n));const t={type:1,chainId:ot(e[0],"chainId"),nonce:ru(e[1],"nonce"),gasPrice:ot(e[2],"gasPrice"),gasLimit:ot(e[3],"gasLimit"),to:Bh(e[4]),value:ot(e[5],"value"),data:Ae(e[6]),accessList:Rm(e[7],"accessList")};return e.length===8||Lm(t,e.slice(8)),t}function W7(n,e){const t=[We(n.chainId,"chainId"),We(n.nonce,"nonce"),We(n.gasPrice||0,"gasPrice"),We(n.gasLimit,"gasLimit"),n.to||"0x",We(n.value,"value"),n.data,Um(n.accessList||[])];return e&&(t.push(We(e.yParity,"recoveryParam")),t.push(Kt(e.r)),t.push(Kt(e.s))),Bt(["0x01",bc(t)])}function Q7(n){let e=Yp(ze(n).slice(1)),t="3",r=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const s=e[1],o=e[2],c=e[3];ee(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),ee(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),ee(Array.isArray(c),"invalid network format: proofs not an array","fields[3]",c),ee(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),ee(s.length===c.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let u=0;u<e[1].length;u++)r.push({data:s[u],commitment:o[u],proof:c[u]});e=e[0]}ee(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",Ae(n));const i={type:3,chainId:ot(e[0],"chainId"),nonce:ru(e[1],"nonce"),maxPriorityFeePerGas:ot(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ot(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ot(e[4],"gasLimit"),to:Bh(e[5]),value:ot(e[6],"value"),data:Ae(e[7]),accessList:Rm(e[8],"accessList"),maxFeePerBlobGas:ot(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),ee(i.to!=null,`invalid address for transaction type: ${t}`,"data",n),ee(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let s=0;s<i.blobVersionedHashes.length;s++)ee(pt(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",n);return e.length===11||Lm(i,e.slice(11)),i}function Z7(n,e,t){const r=[We(n.chainId,"chainId"),We(n.nonce,"nonce"),We(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),We(n.maxFeePerGas||0,"maxFeePerGas"),We(n.gasLimit,"gasLimit"),n.to||wp,We(n.value,"value"),n.data,Um(n.accessList||[]),We(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),z7(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(We(e.yParity,"yParity")),r.push(Kt(e.r)),r.push(Kt(e.s)),t)?Bt(["0x03",bc([r,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):Bt(["0x03",bc(r)])}function J7(n){const e=Yp(ze(n).slice(1));ee(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Ae(n));const t={type:4,chainId:ot(e[0],"chainId"),nonce:ru(e[1],"nonce"),maxPriorityFeePerGas:ot(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ot(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ot(e[4],"gasLimit"),to:Bh(e[5]),value:ot(e[6],"value"),data:Ae(e[7]),accessList:Rm(e[8],"accessList"),authorizationList:M7(e[9],"authorizationList")};return e.length===10||Lm(t,e.slice(10)),t}function Y7(n,e){const t=[We(n.chainId,"chainId"),We(n.nonce,"nonce"),We(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),We(n.maxFeePerGas||0,"maxFeePerGas"),We(n.gasLimit,"gasLimit"),n.to||"0x",We(n.value,"value"),n.data,Um(n.accessList||[]),j7(n.authorizationList||[])];return e&&(t.push(We(e.yParity,"yParity")),t.push(Kt(e.r)),t.push(Kt(e.s))),Bt(["0x04",bc(t)])}var Mi,Tf,kf,Rf,Uf,Lf,Ff,Mf,jf,zf,Hf,Vf,kl,Ya,Es,Xa,qf,Kf,wy;const ws=class ws{constructor(){ce(this,Kf);ce(this,Mi);ce(this,Tf);ce(this,kf);ce(this,Rf);ce(this,Uf);ce(this,Lf);ce(this,Ff);ce(this,Mf);ce(this,jf);ce(this,zf);ce(this,Hf);ce(this,Vf);ce(this,kl);ce(this,Ya);ce(this,Es);ce(this,Xa);ce(this,qf);G(this,Mi,null),G(this,Tf,null),G(this,Rf,0),G(this,Uf,nn),G(this,Lf,null),G(this,Ff,null),G(this,Mf,null),G(this,kf,"0x"),G(this,jf,nn),G(this,zf,nn),G(this,Hf,null),G(this,Vf,null),G(this,kl,null),G(this,Ya,null),G(this,Es,null),G(this,Xa,null),G(this,qf,null)}get type(){return F(this,Mi)}set type(e){switch(e){case null:G(this,Mi,null);break;case 0:case"legacy":G(this,Mi,0);break;case 1:case"berlin":case"eip-2930":G(this,Mi,1);break;case 2:case"london":case"eip-1559":G(this,Mi,2);break;case 3:case"cancun":case"eip-4844":G(this,Mi,3);break;case 4:case"pectra":case"eip-7702":G(this,Mi,4);break;default:ee(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=F(this,Tf);return e==null&&this.type===3?wp:e}set to(e){G(this,Tf,e==null?null:rt(e))}get nonce(){return F(this,Rf)}set nonce(e){G(this,Rf,He(e,"value"))}get gasLimit(){return F(this,Uf)}set gasLimit(e){G(this,Uf,Be(e))}get gasPrice(){const e=F(this,Lf);return e==null&&(this.type===0||this.type===1)?nn:e}set gasPrice(e){G(this,Lf,e==null?null:Be(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=F(this,Ff);return e??(this.type===2||this.type===3?nn:null)}set maxPriorityFeePerGas(e){G(this,Ff,e==null?null:Be(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=F(this,Mf);return e??(this.type===2||this.type===3?nn:null)}set maxFeePerGas(e){G(this,Mf,e==null?null:Be(e,"maxFeePerGas"))}get data(){return F(this,kf)}set data(e){G(this,kf,Ae(e))}get value(){return F(this,jf)}set value(e){G(this,jf,Be(e,"value"))}get chainId(){return F(this,zf)}set chainId(e){G(this,zf,Be(e))}get signature(){return F(this,Hf)||null}set signature(e){G(this,Hf,e==null?null:Ir.from(e))}get accessList(){const e=F(this,Vf)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){G(this,Vf,e==null?null:nu(e))}get authorizationList(){const e=F(this,qf)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){G(this,qf,e==null?null:e.map(t=>tP(t)))}get maxFeePerBlobGas(){const e=F(this,kl);return e==null&&this.type===3?nn:e}set maxFeePerBlobGas(e){G(this,kl,e==null?null:Be(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=F(this,Ya);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ee(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)ee(pt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}G(this,Ya,e)}get blobs(){return F(this,Xa)==null?null:F(this,Xa).map(e=>Object.assign({},e))}set blobs(e){if(e==null){G(this,Xa,null);return}const t=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(ZE(s)){pe(F(this,Es),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ze(s);if(ee(o.length<=Eb,"blob is too large",`blobs[${i}]`,s),o.length!==Eb){const f=new Uint8Array(Eb);f.set(o),o=f}const c=F(this,Es).blobToKzgCommitment(o),u=Ae(F(this,Es).computeBlobKzgProof(o,c));t.push({data:Ae(o),commitment:Ae(c),proof:u}),r.push(eS(1,c))}else{const o=Ae(s.commitment);t.push({data:Ae(s.data),commitment:o,proof:Ae(s.proof)}),r.push(eS(1,o))}}G(this,Xa,t),G(this,Ya,r)}get kzg(){return F(this,Es)}set kzg(e){e==null?G(this,Es,null):G(this,Es,F7(e))}get hash(){return this.signature==null?null:Ut(be(this,Kf,wy).call(this,!0,!1))}get unsignedHash(){return Ut(this.unsignedSerialized)}get from(){return this.signature==null?null:$7(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:bp.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return be(this,Kf,wy).call(this,!0,!0)}get unsignedSerialized(){return be(this,Kf,wy).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=F(this,kl)!=null||F(this,Ya);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&pe(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),pe(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),pe(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return ws.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new ws;if(typeof e=="string"){const r=ze(e);if(r[0]>=127)return ws.from(H7(r));switch(r[0]){case 1:return ws.from(G7(r));case 2:return ws.from(q7(r));case 3:return ws.from(Q7(r));case 4:return ws.from(J7(r))}pe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new ws;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Ir.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(ee(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ee(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ee(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ee(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Mi=new WeakMap,Tf=new WeakMap,kf=new WeakMap,Rf=new WeakMap,Uf=new WeakMap,Lf=new WeakMap,Ff=new WeakMap,Mf=new WeakMap,jf=new WeakMap,zf=new WeakMap,Hf=new WeakMap,Vf=new WeakMap,kl=new WeakMap,Ya=new WeakMap,Es=new WeakMap,Xa=new WeakMap,qf=new WeakMap,Kf=new WeakSet,wy=function(e,t){pe(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return V7(this,r);case 1:return W7(this,r);case 2:return K7(this,r);case 3:return Z7(this,r,t?this.blobs:null);case 4:return Y7(this,r)}pe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Ly=ws;function Wl(n){return Ut(Co(n))}var X7="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const tS=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),nS=4;function eU(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let k=1;k<r;k++)s.push(i+=t());let o=t(),c=e;e+=o;let u=0,f=0;function d(){return u==0&&(f=f<<8|n[e++],u=8),f>>--u&1}const p=31,g=2**p,m=g>>>1,v=m>>1,b=g-1;let A=0;for(let k=0;k<p;k++)A=A<<1|d();let N=[],R=0,O=g;for(;;){let k=Math.floor(((A-R+1)*i-1)/O),j=0,H=r;for(;H-j>1;){let K=j+H>>>1;k<s[K]?H=K:j=K}if(j==0)break;N.push(j);let V=R+Math.floor(O*s[j]/i),M=R+Math.floor(O*s[j+1]/i)-1;for(;((V^M)&m)==0;)A=A<<1&b|d(),V=V<<1&b,M=M<<1&b|1;for(;V&~M&v;)A=A&m|A<<1&b>>>1|d(),V=V<<1^m,M=(M^m)<<1|m|1;R=V,O=1+M-V}let T=r-4;return N.map(k=>{switch(k-T){case 3:return T+65792+(n[c++]<<16|n[c++]<<8|n[c++]);case 2:return T+256+(n[c++]<<8|n[c++]);case 1:return T+n[c++];default:return k-1}})}function tU(n){let e=0;return()=>n[e++]}function nP(n){return tU(eU(nU(n)))}function nU(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=n.length,r=new Uint8Array(6*t>>3);for(let i=0,s=0,o=0,c=0;i<t;i++)c=c<<6|e[n.charCodeAt(i)],o+=6,o>=8&&(r[s++]=c>>(o-=8));return r}function rU(n){return n&1?~n>>1:n>>1}function iU(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=rU(e());return t}function vp(n,e=0){let t=[];for(;;){let r=n(),i=n();if(!i)break;e+=r;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function rP(n){return Ep(()=>{let e=vp(n);if(e.length)return e})}function iP(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(sU(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(oU(t,n))}return e.flat()}function Ep(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function sP(n,e,t){let r=Array(n).fill().map(()=>[]);for(let i=0;i<e;i++)iU(n,t).forEach((s,o)=>r[o].push(s));return r}function sU(n,e){let t=1+e(),r=e(),i=Ep(e);return sP(i.length,1+n,e).flatMap((o,c)=>{let[u,...f]=o;return Array(i[c]).fill().map((d,p)=>{let g=p*r;return[u+p*t,f.map(m=>m+g)]})})}function oU(n,e){let t=1+e();return sP(t,1+n,e).map(i=>[i[0],i.slice(1)])}function aU(n){let e=[],t=vp(n);return i(r([]),[]),e;function r(s){let o=n(),c=Ep(()=>{let u=vp(n).map(f=>t[f]);if(u.length)return r(u)});return{S:o,B:c,Q:s}}function i({S:s,B:o},c,u){if(!(s&4&&u===c[c.length-1])){s&2&&(u=c[c.length-1]),s&1&&e.push(c);for(let f of o)for(let d of f.Q)i(f,[...c,d],u)}}}function cU(n){return n.toString(16).toUpperCase().padStart(2,"0")}function oP(n){return`{${cU(n)}}`}function lU(n){let e=[];for(let t=0,r=n.length;t<r;){let i=n.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function ph(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...n.slice(i,i+=4096)));return r.join("")}function uU(n,e){let t=n.length,r=t-e.length;for(let i=0;r==0&&i<t;i++)r=n[i]-e[i];return r}var fU="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const xp=44032,Fy=4352,My=4449,jy=4519,aP=19,cP=21,gh=28,zy=cP*gh,hU=aP*zy,dU=xp+hU,pU=Fy+aP,gU=My+cP,yU=jy+gh;function Wd(n){return n>>24&255}function lP(n){return n&16777215}let hv,rS,dv,by;function mU(){let n=nP(fU);hv=new Map(rP(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),rS=new Set(vp(n)),dv=new Map,by=new Map;for(let[e,t]of iP(n)){if(!rS.has(e)&&t.length==2){let[r,i]=t,s=by.get(r);s||(s=new Map,by.set(r,s)),s.set(i,e)}dv.set(e,t.reverse())}}function uP(n){return n>=xp&&n<dU}function wU(n,e){if(n>=Fy&&n<pU&&e>=My&&e<gU)return xp+(n-Fy)*zy+(e-My)*gh;if(uP(n)&&e>jy&&e<yU&&(n-xp)%gh==0)return n+(e-jy);{let t=by.get(n);return t&&(t=t.get(e),t)?t:-1}}function fP(n){hv||mU();let e=[],t=[],r=!1;function i(s){let o=hv.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of n)for(;;){if(s<128)e.push(s);else if(uP(s)){let o=s-xp,c=o/zy|0,u=o%zy/gh|0,f=o%gh;i(Fy+c),i(My+u),f>0&&i(jy+f)}else{let o=dv.get(s);o?t.push(...o):i(s)}if(!t.length)break;s=t.pop()}if(r&&e.length>1){let s=Wd(e[0]);for(let o=1;o<e.length;o++){let c=Wd(e[o]);if(c==0||s<=c){s=c;continue}let u=o-1;for(;;){let f=e[u+1];if(e[u+1]=e[u],e[u]=f,!u||(s=Wd(e[--u]),s<=c))break}s=Wd(e[o])}}return e}function bU(n){let e=[],t=[],r=-1,i=0;for(let s of n){let o=Wd(s),c=lP(s);if(r==-1)o==0?r=c:e.push(c);else if(i>0&&i>=o)o==0?(e.push(r,...t),t.length=0,r=c):t.push(c),i=o;else{let u=wU(r,c);u>=0?r=u:i==0&&o==0?(e.push(r),r=c):(t.push(c),i=o)}}return r>=0&&e.push(r,...t),e}function hP(n){return fP(n).map(lP)}function vU(n){return bU(fP(n))}const iS=45,dP=".",pP=65039,gP=1,Hy=n=>Array.from(n);function Ap(n,e){return n.P.has(e)||n.Q.has(e)}class EU extends Array{get is_emoji(){return!0}}let pv,yP,fl,gv,mP,df,xb,Ju,Yc,sS,yv;function o3(){if(pv)return;let n=nP(X7);const e=()=>vp(n),t=()=>new Set(e()),r=(d,p)=>p.forEach(g=>d.add(g));pv=new Map(iP(n)),yP=t(),fl=e(),gv=new Set(e().map(d=>fl[d])),fl=new Set(fl),mP=t(),t();let i=rP(n),s=n();const o=()=>{let d=new Set;return e().forEach(p=>r(d,i[p])),r(d,e()),d};df=Ep(d=>{let p=Ep(n).map(g=>g+96);if(p.length){let g=d>=s;p[0]-=32,p=ph(p),g&&(p=`Restricted[${p}]`);let m=o(),v=o(),b=!n();return{N:p,P:m,Q:v,M:b,R:g}}}),xb=t(),Ju=new Map;let c=e().concat(Hy(xb)).sort((d,p)=>d-p);c.forEach((d,p)=>{let g=n(),m=c[p]=g?c[p-g]:{V:[],M:new Map};m.V.push(d),xb.has(d)||Ju.set(d,m)});for(let{V:d,M:p}of new Set(Ju.values())){let g=[];for(let v of d){let b=df.filter(N=>Ap(N,v)),A=g.find(({G:N})=>b.some(R=>N.has(R)));A||(A={G:new Set,V:[]},g.push(A)),A.V.push(v),r(A.G,b)}let m=g.flatMap(v=>Hy(v.G));for(let{G:v,V:b}of g){let A=new Set(m.filter(N=>!v.has(N)));for(let N of b)p.set(N,A)}}Yc=new Set;let u=new Set;const f=d=>Yc.has(d)?u.add(d):Yc.add(d);for(let d of df){for(let p of d.P)f(p);for(let p of d.Q)f(p)}for(let d of Yc)!Ju.has(d)&&!u.has(d)&&Ju.set(d,gP);r(Yc,hP(Yc)),sS=aU(n).map(d=>EU.from(d)).sort(uU),yv=new Map;for(let d of sS){let p=[yv];for(let g of d){let m=p.map(v=>{let b=v.get(g);return b||(b=new Map,v.set(g,b)),b});g===pP?p.push(...m):p=m}for(let g of p)g.V=d}}function a3(n){return(wP(n)?"":`${c3(Fm([n]))} `)+oP(n)}function c3(n){return`"${n}"‎`}function xU(n){if(n.length>=4&&n[2]==iS&&n[3]==iS)throw new Error(`invalid label extension: "${ph(n.slice(0,4))}"`)}function AU(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function SU(n){let e=n[0],t=tS.get(e);if(t)throw op(`leading ${t}`);let r=n.length,i=-1;for(let s=1;s<r;s++){e=n[s];let o=tS.get(e);if(o){if(i==s)throw op(`${t} + ${o}`);i=s+1,t=o}}if(i==r)throw op(`trailing ${t}`)}function Fm(n,e=1/0,t=oP){let r=[];IU(n[0])&&r.push("◌"),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let i=0,s=n.length;for(let o=0;o<s;o++){let c=n[o];wP(c)&&(r.push(ph(n.slice(i,o))),r.push(t(c)),i=o+1)}return r.push(ph(n.slice(i,s))),r.join("")}function IU(n){return o3(),fl.has(n)}function wP(n){return o3(),mP.has(n)}function OU(n){return _U(BU(n,vU,$U))}function BU(n,e,t){if(!n)return[];o3();let r=0;return n.split(dP).map(i=>{let s=lU(i),o={input:s,offset:r};r+=s.length+1;try{let c=o.tokens=DU(s,e,t),u=c.length,f;if(!u)throw new Error("empty label");let d=o.output=c.flat();if(AU(d),!(o.emoji=u>1||c[0].is_emoji)&&d.every(g=>g<128))xU(d),f="ASCII";else{let g=c.flatMap(m=>m.is_emoji?[]:m);if(!g.length)f="Emoji";else{if(fl.has(d[0]))throw op("leading combining mark");for(let b=1;b<u;b++){let A=c[b];if(!A.is_emoji&&fl.has(A[0]))throw op(`emoji + combining mark: "${ph(c[b-1])} + ${Fm([A[0]])}"`)}SU(d);let m=Hy(new Set(g)),[v]=CU(m);NU(v,g),PU(v,m),f=v.N}}o.type=f}catch(c){o.error=c}return o})}function PU(n,e){let t,r=[];for(let i of e){let s=Ju.get(i);if(s===gP)return;if(s){let o=s.M.get(i);if(t=t?t.filter(c=>o.has(c)):Hy(o),!t.length)return}else r.push(i)}if(t){for(let i of t)if(r.every(s=>Ap(i,s)))throw new Error(`whole-script confusable: ${n.N}/${i.N}`)}}function CU(n){let e=df;for(let t of n){let r=e.filter(i=>Ap(i,t));if(!r.length)throw df.some(i=>Ap(i,t))?vP(e[0],t):bP(t);if(e=r,r.length==1)break}return e}function _U(n){return n.map(({input:e,error:t,output:r})=>{if(t){let i=t.message;throw new Error(n.length==1?i:`Invalid label ${c3(Fm(e,63))}: ${i}`)}return ph(r)}).join(dP)}function bP(n){return new Error(`disallowed character: ${a3(n)}`)}function vP(n,e){let t=a3(e),r=df.find(i=>i.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function op(n){return new Error(`illegal placement: ${n}`)}function NU(n,e){for(let t of e)if(!Ap(n,t))throw vP(n,t);if(n.M){let t=hP(e);for(let r=1,i=t.length;r<i;r++)if(gv.has(t[r])){let s=r+1;for(let o;s<i&&gv.has(o=t[s]);s++)for(let c=r;c<s;c++)if(t[c]==o)throw new Error(`duplicate non-spacing marks: ${a3(o)}`);if(s-r>nS)throw new Error(`excessive non-spacing marks: ${c3(Fm(t.slice(r-1,s)))} (${s-r}/${nS})`);r=s}}}function DU(n,e,t){let r=[],i=[];for(n=n.slice().reverse();n.length;){let s=TU(n);if(s)i.length&&(r.push(e(i)),i=[]),r.push(t(s));else{let o=n.pop();if(Yc.has(o))i.push(o);else{let c=pv.get(o);if(c)i.push(...c);else if(!yP.has(o))throw bP(o)}}}return i.length&&r.push(e(i)),r}function $U(n){return n.filter(e=>e!=pP)}function TU(n,e){let t=yv,r,i=n.length;for(;i&&(t=t.get(n[--i]),!!t);){let{V:s}=t;s&&(r=s,n.length=i)}return r}const EP=new Uint8Array(32);EP.fill(0);function oS(n){return ee(n.length!==0,"invalid ENS name; empty component","comp",n),n}function xP(n){const e=Co(kU(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(oS(e.slice(r,i))),r=i+1);return ee(r<e.length,"invalid ENS name; empty component","name",n),t.push(oS(e.slice(r))),t}function kU(n){try{if(n.length===0)throw new Error("empty label");return OU(n)}catch(e){ee(!1,`invalid ENS name (${e.message})`,"name",n)}}function mv(n){ee(typeof n=="string","invalid ENS name; not a string","name",n),ee(n.length,"invalid ENS name (empty label)","name",n);let e=EP;const t=xP(n);for(;t.length;)e=Ut(Bt([e,Ut(t.pop())]));return Ae(e)}function RU(n,e){const t=e;return ee(t<=255,"DNS encoded label cannot exceed 255","length",t),Ae(Bt(xP(n).map(r=>{ee(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}const AP=new Uint8Array(32);AP.fill(0);const UU=BigInt(-1),SP=BigInt(0),IP=BigInt(1),LU=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function FU(n){const e=ze(n),t=e.length%32;return t?Bt([e,AP.slice(t)]):Ae(e)}const MU=mc(IP,32),jU=mc(SP,32),aS={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ab=["name","version","chainId","verifyingContract","salt"];function cS(n){return function(e){return ee(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const zU={name:cS("name"),version:cS("version"),chainId:function(n){const e=Be(n,"domain.chainId");return ee(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Hi(e)},verifyingContract:function(n){try{return rt(n).toLowerCase()}catch{}ee(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=ze(n,"domain.salt");return ee(e.length===32,'invalid domain value "salt"',"domain.salt",n),Ae(e)}};function Sb(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);ee(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const i=Kd(LU,t?r-1:r),s=t?(i+IP)*UU:SP;return function(o){const c=Be(o,"value");return ee(c>=s&&c<=i,`value out-of-bounds for ${n}`,"value",c),mc(t?aB(c,256):c,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return ee(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const i=ze(r);return ee(i.length===t,`invalid length for ${n}`,"value",r),FU(r)}}}switch(n){case"address":return function(e){return To(rt(e),32)};case"bool":return function(e){return e?MU:jU};case"bytes":return function(e){return Ut(e)};case"string":return function(e){return Wl(e)}}return null}function lS(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function k0(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var zp,yo,Gf,Im,OP;const ai=class ai{constructor(e){ce(this,Im);se(this,"primaryType");ce(this,zp);ce(this,yo);ce(this,Gf);G(this,yo,new Map),G(this,Gf,new Map);const t=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(u=>{s[u]=e[u].map(({name:f,type:d})=>{let{base:p,index:g}=k0(d);return p==="int"&&!e.int&&(p="int256"),p==="uint"&&!e.uint&&(p="uint256"),{name:f,type:p+(g||"")}}),t.set(u,new Set),r.set(u,[]),i.set(u,new Set)}),G(this,zp,JSON.stringify(s));for(const u in s){const f=new Set;for(const d of s[u]){ee(!f.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(u)}`,"types",e),f.add(d.name);const p=k0(d.type).base;ee(p!==u,`circular type reference to ${JSON.stringify(p)}`,"types",e),!Sb(p)&&(ee(r.has(p),`unknown type ${JSON.stringify(p)}`,"types",e),r.get(p).push(u),t.get(u).add(p))}}const o=Array.from(r.keys()).filter(u=>r.get(u).length===0);ee(o.length!==0,"missing primary type","types",e),ee(o.length===1,`ambiguous primary types or unused types: ${o.map(u=>JSON.stringify(u)).join(", ")}`,"types",e),ke(this,{primaryType:o[0]});function c(u,f){ee(!f.has(u),`circular type reference to ${JSON.stringify(u)}`,"types",e),f.add(u);for(const d of t.get(u))if(r.has(d)){c(d,f);for(const p of f)i.get(p).add(d)}f.delete(u)}c(this.primaryType,new Set);for(const[u,f]of i){const d=Array.from(f);d.sort(),F(this,yo).set(u,lS(u,s[u])+d.map(p=>lS(p,s[p])).join(""))}}get types(){return JSON.parse(F(this,zp))}getEncoder(e){let t=F(this,Gf).get(e);return t||(t=be(this,Im,OP).call(this,e),F(this,Gf).set(e,t)),t}encodeType(e){const t=F(this,yo).get(e);return ee(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Ut(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Sb(e))return r(e,t);const i=k0(e).array;if(i)return ee(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:c,type:u})=>(o[c]=this._visit(u,t[c],r),o),{});ee(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new ai(e)}static getPrimaryType(e){return ai.from(e).primaryType}static hashStruct(e,t,r){return ai.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const i=aS[r];ee(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Ab.indexOf(r.name)-Ab.indexOf(i.name)),ai.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Bt(["0x1901",ai.hashDomain(e),ai.from(t).hash(r)])}static hash(e,t,r){return Ut(ai.encode(e,t,r))}static async resolveNames(e,t,r,i){e=Object.assign({},e);for(const c in e)e[c]==null&&delete e[c];const s={};e.verifyingContract&&!pt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=ai.from(t);o.visit(r,(c,u)=>(c==="address"&&!pt(u,20)&&(s[u]="0x"),u));for(const c in s)s[c]=await i(c);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(c,u)=>c==="address"&&s[u]?s[u]:u),{domain:e,value:r}}static getPayload(e,t,r){ai.hashDomain(e);const i={},s=[];Ab.forEach(u=>{const f=e[u];f!=null&&(i[u]=zU[u](f),s.push({name:u,type:aS[u]}))});const o=ai.from(t);t=o.types;const c=Object.assign({},t);return ee(c.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),c.EIP712Domain=s,o.encode(r),{types:c,domain:i,primaryType:o.primaryType,message:o.visit(r,(u,f)=>{if(u.match(/^bytes(\d*)/))return Ae(ze(f));if(u.match(/^u?int/))return Be(f).toString();switch(u){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return ee(typeof f=="string","invalid string","value",f),f}ee(!1,"unsupported type","type",u)})}}};zp=new WeakMap,yo=new WeakMap,Gf=new WeakMap,Im=new WeakSet,OP=function(e){{const i=Sb(e);if(i)return i}const t=k0(e).array;if(t){const i=t.prefix,s=this.getEncoder(i);return o=>{ee(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let c=o.map(s);return F(this,yo).has(i)&&(c=c.map(Ut)),Ut(Bt(c))}}const r=this.types[e];if(r){const i=Wl(F(this,yo).get(e));return s=>{const o=r.map(({name:c,type:u})=>{const f=this.getEncoder(u)(s[c]);return F(this,yo).has(u)?Ut(f):f});return o.unshift(i),Bt(o)}}ee(!1,`unknown type: ${e}`,"type",e)};let Vy=ai;function Zn(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const HU="external public payable override",VU=Zn(HU.split(" ")),BP="constant external internal payable private public pure view override",qU=Zn(BP.split(" ")),PP="constructor error event fallback function receive struct",CP=Zn(PP.split(" ")),_P="calldata memory storage payable indexed",KU=Zn(_P.split(" ")),GU="tuple returns",WU=[PP,_P,GU,BP].join(" "),QU=Zn(WU.split(" ")),ZU={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},JU=new RegExp("^(\\s*)"),YU=new RegExp("^([0-9]+)"),XU=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),NP=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),DP=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var pn,ji,Hp,wv;const Om=class Om{constructor(e){ce(this,Hp);ce(this,pn);ce(this,ji);G(this,pn,0),G(this,ji,e.slice())}get offset(){return F(this,pn)}get length(){return F(this,ji).length-F(this,pn)}clone(){return new Om(F(this,ji))}reset(){G(this,pn,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=be(this,Hp,wv).call(this,F(this,pn)+1,e.match+1);return G(this,pn,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;F(this,pn)<e.match-1;){const r=this.peek().linkNext;t.push(be(this,Hp,wv).call(this,F(this,pn)+1,r)),G(this,pn,r)}return G(this,pn,e.match+1),t}peek(){if(F(this,pn)>=F(this,ji).length)throw new Error("out-of-bounds");return F(this,ji)[F(this,pn)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return bd(this,pn)._++,e}toString(){const e=[];for(let t=F(this,pn);t<F(this,ji).length;t++){const r=F(this,ji)[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};pn=new WeakMap,ji=new WeakMap,Hp=new WeakSet,wv=function(e=0,t=0){return new Om(F(this,ji).slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Gi=Om;function Bc(n){const e=[],t=o=>{const c=s<n.length?JSON.stringify(n[s]):"$EOI";throw new Error(`invalid token ${c} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<n.length;){let o=n.substring(s),c=o.match(JU);c&&(s+=c[1].length,o=n.substring(s));const u={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(u);let f=ZU[o[0]]||"";if(f){if(u.type=f,u.text=o[0],s++,f==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(f=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),u.match=r.pop(),e[u.match].match=e.length-1,u.depth--,u.linkBack=i.pop(),e[u.linkBack].linkNext=e.length-1;else if(f==="COMMA")u.linkBack=i.pop(),e[u.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(f==="OPEN_BRACKET")u.type="BRACKET";else if(f==="CLOSE_BRACKET"){let d=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const p=e.pop().text;d=p+d,e[e.length-1].value=He(p)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=d}continue}if(c=o.match(XU),c){if(u.text=c[1],s+=u.text.length,QU.has(u.text)){u.type="KEYWORD";continue}if(u.text.match(DP)){u.type="TYPE";continue}u.type="ID";continue}if(c=o.match(YU),c){u.text=c[1],u.type="NUMBER",s+=u.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new Gi(e.map(o=>Object.freeze(o)))}function uS(n,e){let t=[];for(const r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Mm(n,e){if(e.peekKeyword(CP)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function ko(n,e){const t=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function $P(n){let e=ko(n,qU);return uS(e,Zn("constant payable nonpayable".split(" "))),uS(e,Zn("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function _o(n,e){return n.popParams().map(t=>mn.from(t,e))}function TP(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return Be(n.pop().text);throw new Error("invalid gas")}return null}function Ql(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const eL=new RegExp(/^(.*)\[([0-9]*)\]$/);function fS(n){const e=n.match(DP);if(ee(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);ee(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);ee(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const At={},Br=Symbol.for("_ethers_internal"),hS="_ParamTypeInternal",dS="_ErrorInternal",pS="_EventInternal",gS="_ConstructorInternal",yS="_FallbackInternal",mS="_FunctionInternal",wS="_StructInternal";var Wf,vy;const ci=class ci{constructor(e,t,r,i,s,o,c,u){ce(this,Wf);se(this,"name");se(this,"type");se(this,"baseType");se(this,"indexed");se(this,"components");se(this,"arrayLength");se(this,"arrayChildren");if(Nm(e,At,"ParamType"),Object.defineProperty(this,Br,{value:hS}),o&&(o=Object.freeze(o.slice())),i==="array"){if(c==null||u==null)throw new Error("")}else if(c!=null||u!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");ke(this,{name:t,type:r,baseType:i,indexed:s,components:o,arrayLength:c,arrayChildren:u})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const r=[],i=[e];return be(this,Wf,vy).call(this,r,e,t,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,t){if(ci.isParamType(e))return e;if(typeof e=="string")try{return ci.from(Bc(e),t)}catch{ee(!1,"invalid param type","obj",e)}else if(e instanceof Gi){let c="",u="",f=null;ko(e,Zn(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(u="tuple",f=e.popParams().map(b=>ci.from(b)),c=`tuple(${f.map(b=>b.format()).join(",")})`):(c=fS(e.popType("TYPE")),u=c);let d=null,p=null;for(;e.length&&e.peekType("BRACKET");){const b=e.pop();d=new ci(At,"",c,u,null,f,p,d),p=b.value,c+=b.text,u="array",f=null}let g=null;if(ko(e,KU).has("indexed")){if(!t)throw new Error("");g=!0}const v=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new ci(At,v,c,u,g,f,p,d)}const r=e.name;ee(!r||typeof r=="string"&&r.match(NP),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(ee(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(eL);if(o){const c=parseInt(o[2]||"-1"),u=ci.from({type:o[1],components:e.components});return new ci(At,r||"",s,"array",i,null,c,u)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const c=e.components!=null?e.components.map(f=>ci.from(f)):null;return new ci(At,r||"",s,"tuple",i,c,null,null)}return s=fS(e.type),new ci(At,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[Br]===hS}};Wf=new WeakSet,vy=function(e,t,r,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,c=t.slice();c.forEach((u,f)=>{var d;be(d=o,Wf,vy).call(d,e,u,r,p=>{c[f]=p})}),i(c);return}if(this.isTuple()){const o=this.components;let c;if(Array.isArray(t))c=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");c=o.map(u=>{if(!u.name)throw new Error("cannot use object value with unnamed components");if(!(u.name in t))throw new Error(`missing value for component ${u.name}`);return t[u.name]})}if(c.length!==this.components.length)throw new Error("array is wrong length");c.forEach((u,f)=>{var d;be(d=o[f],Wf,vy).call(d,e,u,r,p=>{c[f]=p})}),i(c);return}const s=r(this.type,t);s.then?e.push((async function(){i(await s)})()):i(s)};let mn=ci;class Zl{constructor(e,t,r){se(this,"type");se(this,"inputs");Nm(e,At,"Fragment"),r=Object.freeze(r.slice()),ke(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{Zl.from(JSON.parse(e))}catch{}return Zl.from(Bc(e))}if(e instanceof Gi)switch(e.peekKeyword(CP)){case"constructor":return Io.from(e);case"error":return vr.from(e);case"event":return Cs.from(e);case"fallback":case"receive":return oo.from(e);case"function":return _s.from(e);case"struct":return ql.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Io.from(e);case"error":return vr.from(e);case"event":return Cs.from(e);case"fallback":case"receive":return oo.from(e);case"function":return _s.from(e);case"struct":return ql.from(e)}pe(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ee(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Io.isFragment(e)}static isError(e){return vr.isFragment(e)}static isEvent(e){return Cs.isFragment(e)}static isFunction(e){return _s.isFragment(e)}static isStruct(e){return ql.isFragment(e)}}class jm extends Zl{constructor(t,r,i,s){super(t,r,s);se(this,"name");ee(typeof i=="string"&&i.match(NP),"invalid identifier","name",i),s=Object.freeze(s.slice()),ke(this,{name:i})}}function Sp(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class vr extends jm{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,Br,{value:dS})}get selector(){return Wl(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+Sp(e,this.inputs)),t.join(" ")}static from(e){if(vr.isFragment(e))return e;if(typeof e=="string")return vr.from(Bc(e));if(e instanceof Gi){const t=Mm("error",e),r=_o(e);return Ql(e),new vr(At,t,r)}return new vr(At,e.name,e.inputs?e.inputs.map(mn.from):[])}static isFragment(e){return e&&e[Br]===dS}}class Cs extends jm{constructor(t,r,i,s){super(t,"event",r,i);se(this,"anonymous");Object.defineProperty(this,Br,{value:pS}),ke(this,{anonymous:s})}get topicHash(){return Wl(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("event"),r.push(this.name+Sp(t,this.inputs)),t!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(t,r){return r=(r||[]).map(s=>mn.from(s)),new Cs(At,t,r,!1).topicHash}static from(t){if(Cs.isFragment(t))return t;if(typeof t=="string")try{return Cs.from(Bc(t))}catch{ee(!1,"invalid event fragment","obj",t)}else if(t instanceof Gi){const r=Mm("event",t),i=_o(t,!0),s=!!ko(t,Zn(["anonymous"])).has("anonymous");return Ql(t),new Cs(At,r,i,s)}return new Cs(At,t.name,t.inputs?t.inputs.map(r=>mn.from(r,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[Br]===pS}}class Io extends Zl{constructor(t,r,i,s,o){super(t,r,i);se(this,"payable");se(this,"gas");Object.defineProperty(this,Br,{value:gS}),ke(this,{payable:s,gas:o})}format(t){if(pe(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[`constructor${Sp(t,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(t){if(Io.isFragment(t))return t;if(typeof t=="string")try{return Io.from(Bc(t))}catch{ee(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Gi){ko(t,Zn(["constructor"]));const r=_o(t),i=!!ko(t,VU).has("payable"),s=TP(t);return Ql(t),new Io(At,"constructor",r,i,s)}return new Io(At,"constructor",t.inputs?t.inputs.map(mn.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Br]===gS}}class oo extends Zl{constructor(t,r,i){super(t,"fallback",r);se(this,"payable");Object.defineProperty(this,Br,{value:yS}),ke(this,{payable:i})}format(t){const r=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(t){if(oo.isFragment(t))return t;if(typeof t=="string")try{return oo.from(Bc(t))}catch{ee(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Gi){const r=t.toString(),i=t.peekKeyword(Zn(["fallback","receive"]));if(ee(i,"type must be fallback or receive","obj",r),t.popKeyword(Zn(["fallback","receive"]))==="receive"){const u=_o(t);return ee(u.length===0,"receive cannot have arguments","obj.inputs",u),ko(t,Zn(["payable"])),Ql(t),new oo(At,[],!0)}let o=_o(t);o.length?ee(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(u=>u.format("minimal")).join(", ")):o=[mn.from("bytes")];const c=$P(t);if(ee(c==="nonpayable"||c==="payable","fallback cannot be constants","obj.stateMutability",c),ko(t,Zn(["returns"])).has("returns")){const u=_o(t);ee(u.length===1&&u[0].type==="bytes","invalid fallback outputs","obj.outputs",u.map(f=>f.format("minimal")).join(", "))}return Ql(t),new oo(At,o,c==="payable")}if(t.type==="receive")return new oo(At,[],!0);if(t.type==="fallback"){const r=[mn.from("bytes")],i=t.stateMutability==="payable";return new oo(At,r,i)}ee(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[Br]===yS}}class _s extends jm{constructor(t,r,i,s,o,c){super(t,"function",r,s);se(this,"constant");se(this,"outputs");se(this,"stateMutability");se(this,"payable");se(this,"gas");Object.defineProperty(this,Br,{value:mS}),o=Object.freeze(o.slice()),ke(this,{constant:i==="view"||i==="pure",gas:c,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return Wl(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("function"),r.push(this.name+Sp(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Sp(t,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(t,r){return r=(r||[]).map(s=>mn.from(s)),new _s(At,t,"view",r,[],null).selector}static from(t){if(_s.isFragment(t))return t;if(typeof t=="string")try{return _s.from(Bc(t))}catch{ee(!1,"invalid function fragment","obj",t)}else if(t instanceof Gi){const i=Mm("function",t),s=_o(t),o=$P(t);let c=[];ko(t,Zn(["returns"])).has("returns")&&(c=_o(t));const u=TP(t);return Ql(t),new _s(At,i,o,s,c,u)}let r=t.stateMutability;return r==null&&(r="payable",typeof t.constant=="boolean"?(r="view",t.constant||(r="payable",typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable")),new _s(At,t.name,r,t.inputs?t.inputs.map(mn.from):[],t.outputs?t.outputs.map(mn.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Br]===mS}}class ql extends jm{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,Br,{value:wS})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return ql.from(Bc(e))}catch{ee(!1,"invalid struct fragment","obj",e)}else if(e instanceof Gi){const t=Mm("struct",e),r=_o(e);return Ql(e),new ql(At,t,r)}return new ql(At,e.name,e.inputs?e.inputs.map(mn.from):[])}static isFragment(e){return e&&e[Br]===wS}}const Xi=new Map;Xi.set(0,"GENERIC_PANIC");Xi.set(1,"ASSERT_FALSE");Xi.set(17,"OVERFLOW");Xi.set(18,"DIVIDE_BY_ZERO");Xi.set(33,"ENUM_RANGE_ERROR");Xi.set(34,"BAD_STORAGE_DATA");Xi.set(49,"STACK_UNDERFLOW");Xi.set(50,"ARRAY_RANGE_ERROR");Xi.set(65,"OUT_OF_MEMORY");Xi.set(81,"UNINITIALIZED_FUNCTION_CALL");const tL=new RegExp(/^bytes([0-9]*)$/),nL=new RegExp(/^(u?int)([0-9]*)$/);let Ib=null,bS=1024;function rL(n,e,t,r){let i="missing revert data",s=null;const o=null;let c=null;if(t){i="execution reverted";const f=ze(t);if(t=Ae(t),f.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(f.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Ae(f.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],f.slice(4))[0],c={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Ae(f.slice(0,4))==="0x4e487b71")try{const d=Number(r.decode(["uint256"],f.slice(4))[0]);c={signature:"Panic(uint256)",name:"Panic",args:[d]},s=`Panic due to ${Xi.get(d)||"UNKNOWN"}(${d})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const u={to:e.to?rt(e.to):null,data:e.data||"0x"};return e.from&&(u.from=rt(e.from)),bt(i,"CALL_EXCEPTION",{action:n,data:t,reason:s,transaction:u,invocation:o,revert:c})}var ec,Yu;const Bm=class Bm{constructor(){ce(this,ec)}getDefaultValue(e){const t=e.map(i=>be(this,ec,Yu).call(this,mn.from(i)));return new T0(t,"_").defaultValue()}encode(e,t){iB(t.length,e.length,"types/values length mismatch");const r=e.map(o=>be(this,ec,Yu).call(this,mn.from(o))),i=new T0(r,"_"),s=new iv;return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>be(this,ec,Yu).call(this,mn.from(o)));return new T0(i,"_").decode(new sv(t,r,bS))}static _setDefaultMaxInflation(e){ee(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),bS=e}static defaultAbiCoder(){return Ib==null&&(Ib=new Bm),Ib}static getBuiltinCallException(e,t,r){return rL(e,t,r,Bm.defaultAbiCoder())}};ec=new WeakSet,Yu=function(e){if(e.isArray())return new E7(be(this,ec,Yu).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new T0(e.components.map(r=>be(this,ec,Yu).call(this,r)),e.name);switch(e.baseType){case"address":return new b7(e.name);case"bool":return new x7(e.name);case"string":return new N7(e.name);case"bytes":return new A7(e.name);case"":return new O7(e.name)}let t=e.type.match(nL);if(t){let r=parseInt(t[2]||"256");return ee(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new _7(r/8,t[1]==="int",e.name)}if(t=e.type.match(tL),t){let r=parseInt(t[1]);return ee(r!==0&&r<=32,"invalid bytes length","param",e),new S7(r,e.name)}ee(!1,"invalid type","type",e.type)};let Ip=Bm;class iL{constructor(e,t,r){se(this,"fragment");se(this,"name");se(this,"signature");se(this,"topic");se(this,"args");const i=e.name,s=e.format();ke(this,{fragment:e,name:i,signature:s,topic:t,args:r})}}class sL{constructor(e,t,r,i){se(this,"fragment");se(this,"name");se(this,"args");se(this,"signature");se(this,"selector");se(this,"value");const s=e.name,o=e.format();ke(this,{fragment:e,name:s,args:r,signature:o,selector:t,value:i})}}class oL{constructor(e,t,r){se(this,"fragment");se(this,"name");se(this,"args");se(this,"signature");se(this,"selector");const i=e.name,s=e.format();ke(this,{fragment:e,name:i,args:r,signature:s,selector:t})}}class vS{constructor(e){se(this,"hash");se(this,"_isIndexed");ke(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const ES={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},xS={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&ES[n.toString()]&&(e=ES[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};var xs,As,Ss,Rn,$s,Ey,xy;const al=class al{constructor(e){ce(this,$s);se(this,"fragments");se(this,"deploy");se(this,"fallback");se(this,"receive");ce(this,xs);ce(this,As);ce(this,Ss);ce(this,Rn);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,G(this,Ss,new Map),G(this,xs,new Map),G(this,As,new Map);const r=[];for(const o of t)try{r.push(Zl.from(o))}catch(c){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,c.message)}ke(this,{fragments:Object.freeze(r)});let i=null,s=!1;G(this,Rn,this.getAbiCoder()),this.fragments.forEach((o,c)=>{let u;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}ke(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(ee(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${c}]`,o),i=o,s=i.payable);return;case"function":u=F(this,Ss);break;case"event":u=F(this,As);break;case"error":u=F(this,xs);break;default:return}const f=o.format();u.has(f)||u.set(f,o)}),this.deploy||ke(this,{deploy:Io.from("constructor()")}),ke(this,{fallback:i,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return Ip.defaultAbiCoder()}getFunctionName(e){const t=be(this,$s,Ey).call(this,e,null,!1);return ee(t,"no matching function","key",e),t.name}hasFunction(e){return!!be(this,$s,Ey).call(this,e,null,!1)}getFunction(e,t){return be(this,$s,Ey).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(F(this,Ss).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(F(this,Ss).get(i),r)}}getEventName(e){const t=be(this,$s,xy).call(this,e,null,!1);return ee(t,"no matching event","key",e),t.name}hasEvent(e){return!!be(this,$s,xy).call(this,e,null,!1)}getEvent(e,t){return be(this,$s,xy).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(F(this,As).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(F(this,As).get(i),r)}}getError(e,t){if(pt(e)){const i=e.toLowerCase();if(xS[i])return vr.from(xS[i].signature);for(const s of F(this,xs).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of F(this,xs))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?vr.from("error Error(string)"):e==="Panic"?vr.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");ee(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=vr.from(e).format(),e==="Error(string)")return vr.from("error Error(string)");if(e==="Panic(uint256)")return vr.from("error Panic(uint256)");const r=F(this,xs).get(e);return r||null}forEachError(e){const t=Array.from(F(this,xs).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(F(this,xs).get(i),r)}}_decodeParams(e,t){return F(this,Rn).decode(e,t)}_encodeParams(e,t){return F(this,Rn).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);ee(r,"unknown error","fragment",e),e=r}return ee(Ot(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Ot(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);ee(r,"unknown error","fragment",e),e=r}return Bt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);ee(r,"unknown function","fragment",e),e=r}return ee(Ot(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Ot(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);ee(r,"unknown function","fragment",e),e=r}return Bt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);ee(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=Gn(t);if(i.length%32===0)try{return F(this,Rn).decode(e.outputs,i)}catch{r="could not decode result data"}pe(!1,r,"BAD_DATA",{value:Ae(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=ze(e,"data"),i=Ip.getBuiltinCallException("call",t,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const c=Ae(r.slice(0,4)),u=this.getError(c);if(u)try{const f=F(this,Rn).decode(u.inputs,r.slice(4));i.revert={name:u.name,signature:u.format(),args:f},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);ee(r,"unknown function","fragment",e),e=r}return Ae(F(this,Rn).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const s=this.getEvent(e);ee(s,"unknown event","eventFragment",e),e=s}pe(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?Wl(o):s.type==="bytes"?Ut(Ae(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=mc(o):s.type.match(/^bytes/)?o=hk(o,32):s.type==="address"&&F(this,Rn).encode(["address"],[o]),To(Ae(o),32));for(t.forEach((s,o)=>{const c=e.inputs[o];if(!c.indexed){ee(s==null,"cannot filter non-indexed parameters; must be null","contract."+c.name,s);return}s==null?r.push(null):c.baseType==="array"||c.baseType==="tuple"?ee(!1,"filtering with tuples or arrays not supported","contract."+c.name,s):Array.isArray(s)?r.push(s.map(u=>i(c,u))):r.push(i(c,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);ee(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),ee(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,c)=>{const u=t[c];if(o.indexed)if(o.type==="string")r.push(Wl(u));else if(o.type==="bytes")r.push(Ut(u));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(F(this,Rn).encode([o.type],[u]))}else i.push(o),s.push(u)}),{data:F(this,Rn).encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){const m=this.getEvent(e);ee(m,"unknown event","eventFragment",e),e=m}if(r!=null&&!e.anonymous){const m=e.topicHash;ee(pt(r[0],32)&&r[0].toLowerCase()===m,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((m,v)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(i.push(mn.from({type:"bytes32",name:m.name})),o.push(!0)):(i.push(m),o.push(!1)):(s.push(m),o.push(!1))});const c=r!=null?F(this,Rn).decode(i,Bt(r)):null,u=F(this,Rn).decode(s,t,!0),f=[],d=[];let p=0,g=0;return e.inputs.forEach((m,v)=>{let b=null;if(m.indexed)if(c==null)b=new vS(null);else if(o[v])b=new vS(c[g++]);else try{b=c[g++]}catch(A){b=A}else try{b=u[p++]}catch(A){b=A}f.push(b),d.push(m.name||null)}),uh.fromItems(f,d)}parseTransaction(e){const t=ze(e.data,"tx.data"),r=Be(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(Ae(t.slice(0,4)));if(!i)return null;const s=F(this,Rn).decode(i.inputs,t.slice(4));return new sL(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new iL(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Ae(e),r=this.getError(Ot(t,0,4));if(!r)return null;const i=F(this,Rn).decode(r.inputs,Ot(t,4));return new oL(r,r.selector,i)}static from(e){return e instanceof al?e:typeof e=="string"?new al(JSON.parse(e)):typeof e.formatJson=="function"?new al(e.formatJson()):typeof e.format=="function"?new al(e.format("json")):new al(e)}};xs=new WeakMap,As=new WeakMap,Ss=new WeakMap,Rn=new WeakMap,$s=new WeakSet,Ey=function(e,t,r){if(pt(e)){const s=e.toLowerCase();for(const o of F(this,Ss).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,c]of F(this,Ss))o.split("(")[0]===e&&s.push(c);if(t){const o=t.length>0?t[t.length-1]:null;let c=t.length,u=!0;zn.isTyped(o)&&o.type==="overrides"&&(u=!1,c--);for(let f=s.length-1;f>=0;f--){const d=s[f].inputs.length;d!==c&&(!u||d!==c-1)&&s.splice(f,1)}for(let f=s.length-1;f>=0;f--){const d=s[f].inputs;for(let p=0;p<t.length;p++)if(zn.isTyped(t[p])){if(p>=d.length){if(t[p].type==="overrides")continue;s.splice(f,1);break}if(t[p].type!==d[p].baseType){s.splice(f,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(c=>JSON.stringify(c.format())).join(", ");ee(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=F(this,Ss).get(_s.from(e).format());return i||null},xy=function(e,t,r){if(pt(e)){const s=e.toLowerCase();for(const o of F(this,As).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,c]of F(this,As))o.split("(")[0]===e&&s.push(c);if(t){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<t.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const c=s[o].inputs;for(let u=0;u<t.length;u++)if(zn.isTyped(t[u])&&t[u].type!==c[u].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(c=>JSON.stringify(c.format())).join(", ");ee(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=F(this,As).get(Cs.from(e).format());return i||null};let bv=al;const kP=BigInt(0);function pf(n){return n??null}function Nt(n){return n==null?null:n.toString()}class AS{constructor(e,t,r){se(this,"gasPrice");se(this,"maxFeePerGas");se(this,"maxPriorityFeePerGas");ke(this,{gasPrice:pf(e),maxFeePerGas:pf(t),maxPriorityFeePerGas:pf(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Nt(e),maxFeePerGas:Nt(t),maxPriorityFeePerGas:Nt(r)}}}function qy(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=Ae(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in n)||n[i]==null||(e[i]=Be(n[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in n)||n[i]==null||(e[i]=He(n[i],`request.${i}`));return n.accessList&&(e.accessList=nu(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(i=>ZE(i)?Ae(i):Object.assign({},i))),e}var mo;class aL{constructor(e,t){se(this,"provider");se(this,"number");se(this,"hash");se(this,"timestamp");se(this,"parentHash");se(this,"parentBeaconBlockRoot");se(this,"nonce");se(this,"difficulty");se(this,"gasLimit");se(this,"gasUsed");se(this,"stateRoot");se(this,"receiptsRoot");se(this,"blobGasUsed");se(this,"excessBlobGas");se(this,"miner");se(this,"prevRandao");se(this,"extraData");se(this,"baseFeePerGas");ce(this,mo);G(this,mo,e.transactions.map(r=>typeof r!="string"?new Op(r,t):r)),ke(this,{provider:t,hash:pf(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:pf(e.prevRandao),extraData:e.extraData,baseFeePerGas:pf(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return F(this,mo).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=F(this,mo).slice();return e.length===0?[]:(pe(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:c,prevRandao:u,nonce:f,number:d,parentHash:p,parentBeaconBlockRoot:g,stateRoot:m,receiptsRoot:v,timestamp:b,transactions:A}=this;return{_type:"Block",baseFeePerGas:Nt(e),difficulty:Nt(t),extraData:r,gasLimit:Nt(i),gasUsed:Nt(s),blobGasUsed:Nt(this.blobGasUsed),excessBlobGas:Nt(this.excessBlobGas),hash:o,miner:c,prevRandao:u,nonce:f,number:d,parentHash:p,timestamp:b,parentBeaconBlockRoot:g,stateRoot:m,receiptsRoot:v,transactions:A}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return F(this,mo).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=F(this,mo)[e];else{const r=e.toLowerCase();for(const i of F(this,mo))if(typeof i=="string"){if(i!==r)continue;t=i;break}else{if(i.hash!==r)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;ee(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return cL(this)}}mo=new WeakMap;class eg{constructor(e,t){se(this,"provider");se(this,"transactionHash");se(this,"blockHash");se(this,"blockNumber");se(this,"removed");se(this,"address");se(this,"data");se(this,"topics");se(this,"index");se(this,"transactionIndex");this.provider=t;const r=Object.freeze(e.topics.slice());ke(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:i,index:s,removed:o,topics:c,transactionHash:u,transactionIndex:f}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:i,index:s,removed:o,topics:c,transactionHash:u,transactionIndex:f}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return pe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return pe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return pe(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return lL(this)}}var Vp;class RP{constructor(e,t){se(this,"provider");se(this,"to");se(this,"from");se(this,"contractAddress");se(this,"hash");se(this,"index");se(this,"blockHash");se(this,"blockNumber");se(this,"logsBloom");se(this,"gasUsed");se(this,"blobGasUsed");se(this,"cumulativeGasUsed");se(this,"gasPrice");se(this,"blobGasPrice");se(this,"type");se(this,"status");se(this,"root");ce(this,Vp);G(this,Vp,Object.freeze(e.logs.map(i=>new eg(i,t))));let r=kP;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),ke(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return F(this,Vp)}toJSON(){const{to:e,from:t,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:c,logsBloom:u,logs:f,status:d,root:p}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:c,contractAddress:r,cumulativeGasUsed:Nt(this.cumulativeGasUsed),from:t,gasPrice:Nt(this.gasPrice),blobGasUsed:Nt(this.blobGasUsed),blobGasPrice:Nt(this.blobGasPrice),gasUsed:Nt(this.gasUsed),hash:i,index:s,logs:f,logsBloom:u,root:p,status:d,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return LP(this)}reorderedEvent(e){return pe(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),UP(this,e)}}Vp=new WeakMap;var tc;const Ix=class Ix{constructor(e,t){se(this,"provider");se(this,"blockNumber");se(this,"blockHash");se(this,"index");se(this,"hash");se(this,"type");se(this,"to");se(this,"from");se(this,"nonce");se(this,"gasLimit");se(this,"gasPrice");se(this,"maxPriorityFeePerGas");se(this,"maxFeePerGas");se(this,"maxFeePerBlobGas");se(this,"data");se(this,"value");se(this,"chainId");se(this,"signature");se(this,"accessList");se(this,"blobVersionedHashes");se(this,"authorizationList");ce(this,tc);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,G(this,tc,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:i,type:s,to:o,from:c,nonce:u,data:f,signature:d,accessList:p,blobVersionedHashes:g}=this;return{_type:"TransactionResponse",accessList:p,blockNumber:e,blockHash:t,blobVersionedHashes:g,chainId:Nt(this.chainId),data:f,from:c,gasLimit:Nt(this.gasLimit),gasPrice:Nt(this.gasPrice),hash:i,maxFeePerGas:Nt(this.maxFeePerGas),maxPriorityFeePerGas:Nt(this.maxPriorityFeePerGas),maxFeePerBlobGas:Nt(this.maxFeePerBlobGas),nonce:u,signature:d,to:o,index:r,type:s,value:Nt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:r}=await Kn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=e??1,i=t??0;let s=F(this,tc),o=-1,c=s===-1;const u=async()=>{if(c)return null;const{blockNumber:g,nonce:m}=await Kn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(m<this.nonce){s=g;return}if(c)return null;const v=await this.getTransaction();if(!(v&&v.blockNumber!=null))for(o===-1&&(o=s-3,o<F(this,tc)&&(o=F(this,tc)));o<=g;){if(c)return null;const b=await this.provider.getBlock(o,!0);if(b==null)return;for(const A of b)if(A===this.hash)return;for(let A=0;A<b.length;A++){const N=await b.getTransaction(A);if(N.from===this.from&&N.nonce===this.nonce){if(c)return null;const R=await this.provider.getTransactionReceipt(N.hash);if(R==null||g-R.blockNumber+1<r)return;let O="replaced";N.data===this.data&&N.to===this.to&&N.value===this.value?O="repriced":N.data==="0x"&&N.from===N.to&&N.value===kP&&(O="cancelled"),pe(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:O==="replaced"||O==="cancelled",reason:O,replacement:N.replaceableTransaction(s),hash:N.hash,receipt:R})}}o++}},f=g=>{if(g==null||g.status!==0)return g;pe(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:g.to,from:g.from,data:""},receipt:g})},d=await this.provider.getTransactionReceipt(this.hash);if(r===0)return f(d);if(d){if(r===1||await d.confirmations()>=r)return f(d)}else if(await u(),r===0)return null;return await new Promise((g,m)=>{const v=[],b=()=>{v.forEach(N=>N())};if(v.push(()=>{c=!0}),i>0){const N=setTimeout(()=>{b(),m(bt("wait for transaction timeout","TIMEOUT"))},i);v.push(()=>{clearTimeout(N)})}const A=async N=>{if(await N.confirmations()>=r){b();try{g(f(N))}catch(R){m(R)}}};if(v.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),s>=0){const N=async()=>{try{await u()}catch(R){if(yn(R,"TRANSACTION_REPLACED")){b(),m(R);return}}c||this.provider.once("block",N)};v.push(()=>{this.provider.off("block",N)}),this.provider.once("block",N)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return pe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),LP(this)}reorderedEvent(e){return pe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),pe(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),UP(this,e)}replaceableTransaction(e){ee(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Ix(this,this.provider);return G(t,tc,e),t}};tc=new WeakMap;let Op=Ix;function cL(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function UP(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function LP(n){return{orphan:"drop-transaction",tx:n}}function lL(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class l3 extends eg{constructor(t,r,i){super(t,t.provider);se(this,"interface");se(this,"fragment");se(this,"args");const s=r.decodeEventLog(i,t.data,t.topics);ke(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class FP extends eg{constructor(t,r){super(t,t.provider);se(this,"error");ke(this,{error:r})}}var Qf;class uL extends RP{constructor(t,r,i){super(i,r);ce(this,Qf);G(this,Qf,t)}get logs(){return super.logs.map(t=>{const r=t.topics.length?F(this,Qf).getEvent(t.topics[0]):null;if(r)try{return new l3(t,F(this,Qf),r)}catch(i){return new FP(t,i)}return t})}}Qf=new WeakMap;var qp;class u3 extends Op{constructor(t,r,i){super(i,r);ce(this,qp);G(this,qp,t)}async wait(t,r){const i=await super.wait(t,r);return i==null?null:new uL(F(this,qp),this.provider,i)}}qp=new WeakMap;class MP extends cB{constructor(t,r,i,s){super(t,r,i);se(this,"log");ke(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class fL extends MP{constructor(e,t,r,i,s){super(e,t,r,new l3(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);ke(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const SS=BigInt(0);function jP(n){return n&&typeof n.call=="function"}function zP(n){return n&&typeof n.estimateGas=="function"}function zm(n){return n&&typeof n.resolveName=="function"}function HP(n){return n&&typeof n.sendTransaction=="function"}function VP(n){if(n!=null){if(zm(n))return n;if(n.provider)return n.provider}}var Kp;class hL{constructor(e,t,r){ce(this,Kp);se(this,"fragment");if(ke(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const i=Jl(e.runner,"resolveName"),s=zm(i)?i:null;G(this,Kp,(async function(){const o=await Promise.all(t.inputs.map((c,u)=>r[u]==null?null:c.walkAsync(r[u],(d,p)=>d==="address"?Array.isArray(p)?Promise.all(p.map(g=>Qn(g,s))):Qn(p,s):p)));return e.interface.encodeFilterTopics(t,o)})())}getTopicFilter(){return F(this,Kp)}}Kp=new WeakMap;function Jl(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function hl(n){return n==null?null:n.provider||null}async function qP(n,e){const t=zn.dereference(n,"overrides");ee(typeof t=="object","invalid overrides parameter","overrides",n);const r=qy(t);return ee(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),ee(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function dL(n,e,t){const r=Jl(n,"resolveName"),i=zm(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(t[o],(c,u)=>(u=zn.dereference(u,c),c==="address"?Qn(u,i):u))))}function pL(n){const e=async function(o){const c=await qP(o,["data"]);c.to=await n.getAddress(),c.from&&(c.from=await Qn(c.from,VP(n.runner)));const u=n.interface,f=Be(c.value||SS,"overrides.value")===SS,d=(c.data||"0x")==="0x";u.fallback&&!u.fallback.payable&&u.receive&&!d&&!f&&ee(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),ee(u.fallback||d,"cannot send data to receive-only contract","overrides.data",c.data);const p=u.receive||u.fallback&&u.fallback.payable;return ee(p||f,"cannot send value to non-payable fallback","overrides.value",c.value),ee(u.fallback||d,"cannot send data to receive-only contract","overrides.data",c.data),c},t=async function(o){const c=Jl(n.runner,"call");pe(jP(c),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const u=await e(o);try{return await c.call(u)}catch(f){throw QE(f)&&f.data?n.interface.makeError(f.data,u):f}},r=async function(o){const c=n.runner;pe(HP(c),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const u=await c.sendTransaction(await e(o)),f=hl(n.runner);return new u3(n.interface,f,u)},i=async function(o){const c=Jl(n.runner,"estimateGas");return pe(zP(c),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await c.estimateGas(await e(o))},s=async o=>await r(o);return ke(s,{_contract:n,estimateGas:i,populateTransaction:e,send:r,staticCall:t}),s}function gL(n,e){const t=function(...f){const d=n.interface.getFunction(e,f);return pe(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:f}}),d},r=async function(...f){const d=t(...f);let p={};if(d.inputs.length+1===f.length&&(p=await qP(f.pop()),p.from&&(p.from=await Qn(p.from,VP(n.runner)))),d.inputs.length!==f.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const g=await dL(n.runner,d.inputs,f);return Object.assign({},p,await Kn({to:n.getAddress(),data:n.interface.encodeFunctionData(d,g)}))},i=async function(...f){const d=await c(...f);return d.length===1?d[0]:d},s=async function(...f){const d=n.runner;pe(HP(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const p=await d.sendTransaction(await r(...f)),g=hl(n.runner);return new u3(n.interface,g,p)},o=async function(...f){const d=Jl(n.runner,"estimateGas");return pe(zP(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await r(...f))},c=async function(...f){const d=Jl(n.runner,"call");pe(jP(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const p=await r(...f);let g="0x";try{g=await d.call(p)}catch(v){throw QE(v)&&v.data?n.interface.makeError(v.data,p):v}const m=t(...f);return n.interface.decodeFunctionResult(m,g)},u=async(...f)=>t(...f).constant?await i(...f):await s(...f);return ke(u,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:c}),Object.defineProperty(u,"fragment",{configurable:!1,enumerable:!0,get:()=>{const f=n.interface.getFunction(e);return pe(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),f}}),u}function yL(n,e){const t=function(...i){const s=n.interface.getEvent(e,i);return pe(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new hL(n,t(...i),i)};return ke(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=n.interface.getEvent(e);return pe(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const Ky=Symbol.for("_ethersInternal_contract"),KP=new WeakMap;function mL(n,e){KP.set(n[Ky],e)}function Ur(n){return KP.get(n[Ky])}function wL(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function f3(n,e){let t,r=null;if(Array.isArray(e)){const s=function(o){if(pt(o,32))return o;const c=n.interface.getEvent(o);return ee(c,"unknown fragment","name",o),c.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?t=[null]:typeof e=="string"?pt(e,32)?t=[e]:(r=n.interface.getEvent(e),ee(r,"unknown fragment","event",e),t=[r.topicHash]):wL(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):ee(!1,"unknown event name","event",e);t=t.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(c=>c.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=t.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:t}}async function Qd(n,e){const{subs:t}=Ur(n);return t.get((await f3(n,e)).tag)||null}async function IS(n,e,t){const r=hl(n.runner);pe(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await f3(n,t),{addr:c,subs:u}=Ur(n);let f=u.get(s);if(!f){const p={address:c||n,topics:o},g=A=>{let N=i;if(N==null)try{N=n.interface.getEvent(A.topics[0])}catch{}if(N){const R=N,O=i?n.interface.decodeEventLog(i,A.data,A.topics):[];Ev(n,t,O,T=>new fL(n,T,t,R,A))}else Ev(n,t,[],R=>new MP(n,R,t,A))};let m=[];f={tag:s,listeners:[],start:()=>{m.length||m.push(r.on(p,g))},stop:async()=>{if(m.length==0)return;let A=m;m=[],await Promise.all(A),r.off(p,g)}},u.set(s,f)}return f}let vv=Promise.resolve();async function bL(n,e,t,r){await vv;const i=await Qd(n,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:c})=>{const u=Array.from(t);r&&u.push(r(c?null:o));try{o.call(n,...u)}catch{}return!c}),i.listeners.length===0&&(i.stop(),Ur(n).subs.delete(i.tag)),s>0}async function Ev(n,e,t,r){try{await vv}catch{}const i=bL(n,e,t,r);return vv=i,await i}const R0=["then"];var rB;rB=Ky;const yp=class yp{constructor(e,t,r,i){se(this,"target");se(this,"interface");se(this,"runner");se(this,"filters");se(this,rB);se(this,"fallback");ee(typeof e=="string"||JB(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=bv.from(t);ke(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,Ky,{value:{}});let o,c=null,u=null;if(i){const p=hl(r);u=new u3(this.interface,p,i)}let f=new Map;if(typeof e=="string")if(pt(e))c=e,o=Promise.resolve(e);else{const p=Jl(r,"resolveName");if(!zm(p))throw bt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=p.resolveName(e).then(g=>{if(g==null)throw bt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Ur(this).addr=g,g})}else o=e.getAddress().then(p=>{if(p==null)throw new Error("TODO");return Ur(this).addr=p,p});mL(this,{addrPromise:o,addr:c,deployTx:u,subs:f});const d=new Proxy({},{get:(p,g,m)=>{if(typeof g=="symbol"||R0.indexOf(g)>=0)return Reflect.get(p,g,m);try{return this.getEvent(g)}catch(v){if(!yn(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(p,g)=>R0.indexOf(g)>=0?Reflect.has(p,g):Reflect.has(p,g)||this.interface.hasEvent(String(g))});return ke(this,{filters:d}),ke(this,{fallback:s.receive||s.fallback?pL(this):null}),new Proxy(this,{get:(p,g,m)=>{if(typeof g=="symbol"||g in p||R0.indexOf(g)>=0)return Reflect.get(p,g,m);try{return p.getFunction(g)}catch(v){if(!yn(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(p,g)=>typeof g=="symbol"||g in p||R0.indexOf(g)>=0?Reflect.has(p,g):p.interface.hasFunction(g)})}connect(e){return new yp(this.target,this.interface,e)}attach(e){return new yp(e,this.interface,this.runner)}async getAddress(){return await Ur(this).addrPromise}async getDeployedCode(){const e=hl(this.runner);pe(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=hl(this.runner);return pe(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(c){s(c)}};o()})}deploymentTransaction(){return Ur(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),gL(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),yL(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Ur(this),o=i||await s,{fragment:c,topics:u}=await f3(this,e),f={address:o,topics:u,fromBlock:t,toBlock:r},d=hl(this.runner);return pe(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(f)).map(p=>{let g=c;if(g==null)try{g=this.interface.getEvent(p.topics[0])}catch{}if(g)try{return new l3(p,this.interface,g)}catch(m){return new FP(p,m)}return new eg(p,d)})}async on(e,t){const r=await IS(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await IS(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await Ev(this,e,t,null)}async listenerCount(e){if(e){const i=await Qd(this,e);return i?i.listeners.length:0}const{subs:t}=Ur(this);let r=0;for(const{listeners:i}of t.values())r+=i.length;return r}async listeners(e){if(e){const i=await Qd(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:t}=Ur(this);let r=[];for(const{listeners:i}of t.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,t){const r=await Qd(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(t==null||r.listeners.length===0)&&(r.stop(),Ur(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await Qd(this,e);if(!t)return this;t.stop(),Ur(this).subs.delete(t.tag)}else{const{subs:t}=Ur(this);for(const{tag:r,stop:i}of t.values())i(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends yp{constructor(i,s=null){super(i,e,s)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}};let xv=yp;function vL(){return xv}class ap extends vL(){}function Ob(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):ee(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class EL{constructor(e){se(this,"name");ke(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const GP=new RegExp("^(ipfs)://(.*)$","i"),OS=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),GP,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var nc,Rl,rc,Xu,Pm,WP;const uf=class uf{constructor(e,t,r){ce(this,rc);se(this,"provider");se(this,"address");se(this,"name");ce(this,nc);ce(this,Rl);ke(this,{provider:e,address:t,name:r}),G(this,nc,null),G(this,Rl,new ap(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return F(this,nc)==null&&G(this,nc,(async()=>{try{return await F(this,Rl).supportsInterface("0x9061b923")}catch(e){if(yn(e,"CALL_EXCEPTION"))return!1;throw G(this,nc,null),e}})()),await F(this,nc)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await be(this,rc,Xu).call(this,"addr(bytes32)");return s==null||s===wp?null:s}catch(s){if(yn(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await be(this,rc,Xu).call(this,"addr(bytes32,uint)",[s]);if(pt(o,20))return rt(o)}let t=null;for(const s of this.provider.plugins)if(s instanceof EL&&s.supportsCoinType(e)){t=s;break}if(t==null)return null;const r=await be(this,rc,Xu).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await t.decodeAddress(e,r);if(i!=null)return i;pe(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await be(this,rc,Xu).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await be(this,rc,Xu).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===s*2)return`${i}://${gk("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;pe(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<OS.length;r++){const i=t.match(OS[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=Ob(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:t});const c=await this.getAddress();if(c==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const u=(i[2]||"").split("/");if(u.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const f=u[1],d=new ap(u[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const b=await d.ownerOf(f);if(c!==b)return e.push({type:"!owner",value:b}),{url:null,linkage:e};e.push({type:"owner",value:b})}else if(s==="erc1155"){const b=await d.balanceOf(c,f);if(!b)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:b.toString()})}let p=await d[o](f);if(p==null||p==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:p}),s==="erc1155"&&(p=p.replace("{id}",mc(f,32).substring(2)),e.push({type:"metadata-url-expanded",value:p})),p.match(/^ipfs:/i)&&(p=Ob(p)),e.push({type:"metadata-url",value:p});let g={};const m=await new wc(p).send();m.assertOk();try{g=m.bodyJson}catch{try{e.push({type:"!metadata",value:m.bodyText})}catch{const N=m.body;return N&&e.push({type:"!metadata",value:Ae(N)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!g)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(g)});let v=g.image;if(typeof v!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!v.match(/^(https:\/\/|data:)/i)){if(v.match(GP)==null)return e.push({type:"!imageUrl-ipfs",value:v}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:v}),v=Ob(v)}return e.push({type:"url",value:v}),{linkage:e,url:v}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return pe(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async fromName(e,t){var i;let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const s=await be(i=uf,Pm,WP).call(i,e,r);if(s!=null){const o=new uf(e,s,t);return r!==t&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};nc=new WeakMap,Rl=new WeakMap,rc=new WeakSet,Xu=async function(e,t){t=(t||[]).slice();const r=F(this,Rl).interface;t.unshift(mv(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),pe(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[RU(this.name,255),r.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await F(this,Rl)[e](...t);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!yn(s,"CALL_EXCEPTION"))throw s}return null},Pm=new WeakSet,WP=async function(e,t){const r=await uf.getEnsAddress(e);try{const s=await new ap(r,["function resolver(bytes32) view returns (address)"],e).resolver(mv(t),{enableCcipRead:!0});return s===wp?null:s}catch(i){throw i}return null},ce(uf,Pm);let Gy=uf;const BS=BigInt(0);function Ge(n,e){return(function(t){return t==null?e:n(t)})}function Bp(n,e){return(t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))})}function tg(n,e){return(t=>{const r={};for(const i in n){let s=i;if(e&&i in e&&!(s in t)){for(const o of e[i])if(o in t){s=o;break}}try{const o=n[i](t[s]);o!==void 0&&(r[i]=o)}catch(o){const c=o instanceof Error?o.message:"not-an-error";pe(!1,`invalid value for value.${i} (${c})`,"BAD_DATA",{value:t})}}return r})}function xL(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}ee(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function yh(n){return ee(pt(n,!0),"invalid data","value",n),n}function gn(n){return ee(pt(n,32),"invalid hash","value",n),n}const AL=tg({address:rt,blockHash:gn,blockNumber:He,data:yh,index:He,removed:Ge(xL,!1),topics:Bp(gn),transactionHash:gn,transactionIndex:He},{index:["logIndex"]});function SL(n){return AL(n)}const IL=tg({hash:Ge(gn),parentHash:gn,parentBeaconBlockRoot:Ge(gn,null),number:He,timestamp:He,nonce:Ge(yh),difficulty:Be,gasLimit:Be,gasUsed:Be,stateRoot:Ge(gn,null),receiptsRoot:Ge(gn,null),blobGasUsed:Ge(Be,null),excessBlobGas:Ge(Be,null),miner:Ge(rt),prevRandao:Ge(gn,null),extraData:yh,baseFeePerGas:Ge(Be)},{prevRandao:["mixHash"]});function OL(n){const e=IL(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:QP(t)),e}const BL=tg({transactionIndex:He,blockNumber:He,transactionHash:gn,address:rt,topics:Bp(gn),data:yh,index:He,blockHash:gn},{index:["logIndex"]});function PL(n){return BL(n)}const CL=tg({to:Ge(rt,null),from:Ge(rt,null),contractAddress:Ge(rt,null),index:He,root:Ge(Ae),gasUsed:Be,blobGasUsed:Ge(Be,null),logsBloom:Ge(yh),blockHash:gn,hash:gn,logs:Bp(PL),blockNumber:He,cumulativeGasUsed:Be,effectiveGasPrice:Ge(Be),blobGasPrice:Ge(Be,null),status:Ge(He),type:Ge(He,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function _L(n){return CL(n)}function QP(n){n.to&&Be(n.to)===BS&&(n.to="0x0000000000000000000000000000000000000000");const e=tg({hash:gn,index:Ge(He,void 0),type:t=>t==="0x"||t==null?0:He(t),accessList:Ge(nu,null),blobVersionedHashes:Ge(Bp(gn,!0),null),authorizationList:Ge(Bp(t=>{let r;if(t.signature)r=t.signature;else{let i=t.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},t,{yParity:i})}return{address:rt(t.address),chainId:Be(t.chainId),nonce:Be(t.nonce),signature:Ir.from(r)}},!1),null),blockHash:Ge(gn,null),blockNumber:Ge(He,null),transactionIndex:Ge(He,null),from:rt,gasPrice:Ge(Be),maxPriorityFeePerGas:Ge(Be),maxFeePerGas:Ge(Be),maxFeePerBlobGas:Ge(Be,null),gasLimit:Be,to:Ge(rt,null),value:Be,nonce:He,data:yh,creates:Ge(rt,null),chainId:Ge(Be,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=w7(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=Ir.from(n.signature):e.signature=Ir.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Be(e.blockHash)===BS&&(e.blockHash=null),e}const NL="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class ng{constructor(e){se(this,"name");ke(this,{name:e})}clone(){return new ng(this.name)}}class Hm extends ng{constructor(t,r){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);se(this,"effectiveBlock");se(this,"txBase");se(this,"txCreate");se(this,"txDataZero");se(this,"txDataNonzero");se(this,"txAccessListStorageKey");se(this,"txAccessListAddress");const i={effectiveBlock:t};function s(o,c){let u=(r||{})[o];u==null&&(u=c),ee(typeof u=="number",`invalud value for ${o}`,"costs",r),i[o]=u}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),ke(this,i)}clone(){return new Hm(this.effectiveBlock,this)}}class Vm extends ng{constructor(t,r){super("org.ethers.plugins.network.Ens");se(this,"address");se(this,"targetNetwork");ke(this,{address:t||NL,targetNetwork:r??1})}clone(){return new Vm(this.address,this.targetNetwork)}}var Gp,Wp;class DL extends ng{constructor(t,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");ce(this,Gp);ce(this,Wp);G(this,Gp,t),G(this,Wp,r)}get url(){return F(this,Gp)}get processFunc(){return F(this,Wp)}clone(){return this}}Gp=new WeakMap,Wp=new WeakMap;const Bb=new Map;var Zf,Jf,ic;const ff=class ff{constructor(e,t){ce(this,Zf);ce(this,Jf);ce(this,ic);G(this,Zf,e),G(this,Jf,Be(t)),G(this,ic,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return F(this,Zf)}set name(e){G(this,Zf,e)}get chainId(){return F(this,Jf)}set chainId(e){G(this,Jf,Be(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Be(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Be(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Be(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(F(this,ic).values())}attachPlugin(e){if(F(this,ic).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return F(this,ic).set(e.name,e.clone()),this}getPlugin(e){return F(this,ic).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new ff(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Hm;let r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const i=nu(e.accessList);for(const s in i)r+=t.txAccessListAddress+t.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if($L(),e==null)return ff.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Bb.get(e);if(t)return t();if(typeof e=="bigint")return new ff("unknown",e);ee(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){ee(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new ff(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Vm(e.ensAddress,e.ensNetwork)),t}ee(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const r=Bb.get(e);r&&ee(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Bb.set(e,t)}};Zf=new WeakMap,Jf=new WeakMap,ic=new WeakMap;let Ns=ff;function PS(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function CS(n){return new DL(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const c=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:PS(c.maxFee,9),maxPriorityFeePerGas:PS(c.maxPriorityFee,9)}}catch(s){pe(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let _S=!1;function $L(){if(_S)return;_S=!0;function n(e,t,r){const i=function(){const s=new Ns(e,t);return r.ensNetwork!=null&&s.attachPlugin(new Vm(null,r.ensNetwork)),s.attachPlugin(new Hm),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Ns.register(e,i),Ns.register(t,i),r.altNames&&r.altNames.forEach(s=>{Ns.register(s,i)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[CS("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[CS("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function Av(n){return JSON.parse(JSON.stringify(n))}var wo,ui,sc,Is,Yf,Ay;class TL{constructor(e){ce(this,Yf);ce(this,wo);ce(this,ui);ce(this,sc);ce(this,Is);G(this,wo,e),G(this,ui,null),G(this,sc,4e3),G(this,Is,-2)}get pollingInterval(){return F(this,sc)}set pollingInterval(e){G(this,sc,e)}start(){F(this,ui)||(G(this,ui,F(this,wo)._setTimeout(be(this,Yf,Ay).bind(this),F(this,sc))),be(this,Yf,Ay).call(this))}stop(){F(this,ui)&&(F(this,wo)._clearTimeout(F(this,ui)),G(this,ui,null))}pause(e){this.stop(),e&&G(this,Is,-2)}resume(){this.start()}}wo=new WeakMap,ui=new WeakMap,sc=new WeakMap,Is=new WeakMap,Yf=new WeakSet,Ay=async function(){try{const e=await F(this,wo).getBlockNumber();if(F(this,Is)===-2){G(this,Is,e);return}if(e!==F(this,Is)){for(let t=F(this,Is)+1;t<=e;t++){if(F(this,ui)==null)return;await F(this,wo).emit("block",t)}G(this,Is,e)}}catch{}F(this,ui)!=null&&G(this,ui,F(this,wo)._setTimeout(be(this,Yf,Ay).bind(this),F(this,sc)))};var Ul,Ll,oc;class h3{constructor(e){ce(this,Ul);ce(this,Ll);ce(this,oc);G(this,Ul,e),G(this,oc,!1),G(this,Ll,t=>{this._poll(t,F(this,Ul))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){F(this,oc)||(G(this,oc,!0),F(this,Ll).call(this,-2),F(this,Ul).on("block",F(this,Ll)))}stop(){F(this,oc)&&(G(this,oc,!1),F(this,Ul).off("block",F(this,Ll)))}pause(e){this.stop()}resume(){this.start()}}Ul=new WeakMap,Ll=new WeakMap,oc=new WeakMap;var Xf,bo;class kL extends h3{constructor(t,r){super(t);ce(this,Xf);ce(this,bo);G(this,Xf,r),G(this,bo,-2)}pause(t){t&&G(this,bo,-2),super.pause(t)}async _poll(t,r){const i=await r.getBlock(F(this,Xf));i!=null&&(F(this,bo)===-2?G(this,bo,i.number):i.number>F(this,bo)&&(r.emit(F(this,Xf),i.number),G(this,bo,i.number)))}}Xf=new WeakMap,bo=new WeakMap;var Cm;class RL extends h3{constructor(t,r){super(t);ce(this,Cm);G(this,Cm,Av(r))}async _poll(t,r){throw new Error("@TODO")}}Cm=new WeakMap;var eh;class UL extends h3{constructor(t,r){super(t);ce(this,eh);G(this,eh,r)}async _poll(t,r){const i=await r.getTransactionReceipt(F(this,eh));i&&r.emit(F(this,eh),i)}}eh=new WeakMap;var vo,th,nh,ac,fi,_m,ZP;class d3{constructor(e,t){ce(this,_m);ce(this,vo);ce(this,th);ce(this,nh);ce(this,ac);ce(this,fi);G(this,vo,e),G(this,th,Av(t)),G(this,nh,be(this,_m,ZP).bind(this)),G(this,ac,!1),G(this,fi,-2)}start(){F(this,ac)||(G(this,ac,!0),F(this,fi)===-2&&F(this,vo).getBlockNumber().then(e=>{G(this,fi,e)}),F(this,vo).on("block",F(this,nh)))}stop(){F(this,ac)&&(G(this,ac,!1),F(this,vo).off("block",F(this,nh)))}pause(e){this.stop(),e&&G(this,fi,-2)}resume(){this.start()}}vo=new WeakMap,th=new WeakMap,nh=new WeakMap,ac=new WeakMap,fi=new WeakMap,_m=new WeakSet,ZP=async function(e){if(F(this,fi)===-2)return;const t=Av(F(this,th));t.fromBlock=F(this,fi)+1,t.toBlock=e;const r=await F(this,vo).getLogs(t);if(r.length===0){F(this,fi)<e-60&&G(this,fi,e-60);return}for(const i of r)F(this,vo).emit(F(this,th),i),G(this,fi,i.blockNumber)};const LL=BigInt(2),FL=10;function U0(n){return n&&typeof n.then=="function"}function Sy(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class JP{constructor(e){se(this,"name");ke(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function ML(n){return JSON.parse(JSON.stringify(n))}function Sv(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function Pb(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(pt(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:Sy("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:Sy("orphan",t),filter:ML(t)}}if(n.address||n.topics){const t=n,r={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?Sv(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],s=[],o=c=>{pt(c)?i.push(c):s.push((async()=>{i.push(await Qn(c,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),s.length&&await Promise.all(s),r.address=Sv(i.map(c=>c.toLowerCase()))}return{filter:r,tag:Sy("event",r),type:"event"}}ee(!1,"unknown ProviderEvent","event",n)}function Cb(){return new Date().getTime()}const jL={cacheTimeout:250,pollingInterval:4e3};var Un,cc,Ln,rh,jr,Fl,lc,Eo,Qp,hi,ih,sh,je,kr,Iv,Ov,Zd,Bv,Jd,Iy;class zL{constructor(e,t){ce(this,je);ce(this,Un);ce(this,cc);ce(this,Ln);ce(this,rh);ce(this,jr);ce(this,Fl);ce(this,lc);ce(this,Eo);ce(this,Qp);ce(this,hi);ce(this,ih);ce(this,sh);if(G(this,sh,Object.assign({},jL,t||{})),e==="any")G(this,Fl,!0),G(this,jr,null);else if(e){const r=Ns.from(e);G(this,Fl,!1),G(this,jr,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else G(this,Fl,!1),G(this,jr,null);G(this,Eo,-1),G(this,lc,new Map),G(this,Un,new Map),G(this,cc,new Map),G(this,Ln,null),G(this,rh,!1),G(this,Qp,1),G(this,hi,new Map),G(this,ih,!1)}get pollingInterval(){return F(this,sh).pollingInterval}get provider(){return this}get plugins(){return Array.from(F(this,cc).values())}attachPlugin(e){if(F(this,cc).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return F(this,cc).set(e.name,e.connect(this)),this}getPlugin(e){return F(this,cc).get(e)||null}get disableCcipRead(){return F(this,ih)}set disableCcipRead(e){G(this,ih,!!e)}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let c=0;c<r.length;c++){const u=r[c],f=u.replace("{sender}",i).replace("{data}",s),d=new wc(f);u.indexOf("{data}")===-1&&(d.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:c,urls:r});let p="unknown error",g;try{g=await d.send()}catch(m){o.push(m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:m}});continue}try{const m=g.bodyJson;if(m.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:m}),m.data;m.message&&(p=m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:m})}catch{}pe(g.statusCode<400||g.statusCode>=500,`response not found during CCIP fetch: ${p}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:u,errorMessage:p}}),o.push(p)}pe(!1,`error encountered during CCIP fetch: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,t){return new aL(OL(e),this)}_wrapLog(e,t){return new eg(SL(e),this)}_wrapTransactionReceipt(e,t){return new RP(_L(e),this)}_wrapTransactionResponse(e,t){return new Op(QP(e),this)}_detectNetwork(){pe(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){pe(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=He(await be(this,je,kr).call(this,{method:"getBlockNumber"}),"%response");return F(this,Eo)>=0&&G(this,Eo,e),e}_getAddress(e){return Qn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(pt(e))return pt(e,32)?e:Hi(e);if(typeof e=="bigint"&&(e=He(e,"blockTag")),typeof e=="number")return e>=0?Hi(e):F(this,Eo)>=0?Hi(F(this,Eo)+e):this.getBlockNumber().then(t=>Hi(t+e));ee(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(u=>u==null?null:Array.isArray(u)?Sv(u.map(f=>f.toLowerCase())):u.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(u,f,d)=>{let p;switch(u.length){case 0:break;case 1:p=u[0];break;default:u.sort(),p=u}if(r&&(f!=null||d!=null))throw new Error("invalid filter");const g={};return p&&(g.address=p),t.length&&(g.topics=t),f&&(g.fromBlock=f),d&&(g.toBlock=d),r&&(g.blockHash=r),g};let s=[];if(e.address)if(Array.isArray(e.address))for(const u of e.address)s.push(this._getAddress(u));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let c;return"toBlock"in e&&(c=this._getBlockTag(e.toBlock)),s.filter(u=>typeof u!="string").length||o!=null&&typeof o!="string"||c!=null&&typeof c!="string"?Promise.all([Promise.all(s),o,c]).then(u=>i(u[0],u[1],u[2])):i(s,o,c)}_getTransactionRequest(e){const t=qy(e),r=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const s=Qn(t[i],this);U0(s)?r.push((async function(){t[i]=await s})()):t[i]=s}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);U0(i)?r.push((async function(){t.blockTag=await i})()):t.blockTag=i}return r.length?(async function(){return await Promise.all(r),t})():t}async getNetwork(){if(F(this,jr)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw F(this,jr)===i&&G(this,jr,null),s}})();return G(this,jr,i),(await i).clone()}const e=F(this,jr),[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(F(this,Fl)?(this.emit("network",r,t),F(this,jr)===e&&G(this,jr,Promise.resolve(r))):pe(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await Kn({_block:be(this,je,Bv).call(this,"latest",!1),gasPrice:(async()=>{try{const d=await be(this,je,kr).call(this,{method:"getGasPrice"});return Be(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await be(this,je,kr).call(this,{method:"getPriorityFee"});return Be(d,"%response")}catch{}return null})()});let c=null,u=null;const f=this._wrapBlock(i,e);return f&&f.baseFeePerGas&&(u=o??BigInt("1000000000"),c=f.baseFeePerGas*LL+u),new AS(s,c,u)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new wc(r.url),s=await r.processFunc(t,this,i);return new AS(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return U0(t)&&(t=await t),Be(await be(this,je,kr).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:r}=await Kn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await be(this,je,Ov).call(this,be(this,je,Iv).call(this,t,r,e.enableCcipRead?0:-1))}async getBalance(e,t){return Be(await be(this,je,Zd).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return He(await be(this,je,Zd).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Ae(await be(this,je,Zd).call(this,{method:"getCode"},e,t))}async getStorage(e,t,r){const i=Be(t,"position");return Ae(await be(this,je,Zd).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:i}=await Kn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=Ly.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(t)}async getBlock(e,t){const{network:r,params:i}=await Kn({network:this.getNetwork(),params:be(this,je,Bv).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:t,params:r}=await Kn({network:this.getNetwork(),params:be(this,je,kr).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await Kn({network:this.getNetwork(),params:be(this,je,kr).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await be(this,je,kr).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await Kn({network:this.getNetwork(),result:be(this,je,kr).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:Ae(t)}async getLogs(e){let t=this._getFilter(e);U0(t)&&(t=await t);const{network:r,params:i}=await Kn({network:this.getNetwork(),params:be(this,je,kr).call(this,{method:"getLogs",filter:t})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){pe(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Gy.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=rt(e);const t=mv(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await Gy.getEnsAddress(this),s=await new ap(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(s==null||s===wp)return null;const c=await new ap(s,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(c)!==e?null:c}catch(r){if(yn(r,"BAD_DATA")&&r.value==="0x"||yn(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let c=null;const u=(async f=>{try{const d=await this.getTransactionReceipt(e);if(d!=null&&f-d.blockNumber+1>=i){s(d),c&&(clearTimeout(c),c=null);return}}catch(d){console.log("EEE",d)}this.once("block",u)});r!=null&&(c=setTimeout(()=>{c!=null&&(c=null,this.off("block",u),o(bt("timeout","TIMEOUT",{reason:"timeout"})))},r)),u(await this.getBlockNumber())})}async waitForBlock(e){pe(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=F(this,hi).get(e);t&&(t.timer&&clearTimeout(t.timer),F(this,hi).delete(e))}_setTimeout(e,t){t==null&&(t=0);const r=bd(this,Qp)._++,i=()=>{F(this,hi).delete(r),e()};if(this.paused)F(this,hi).set(r,{timer:null,func:i,time:t});else{const s=setTimeout(i,t);F(this,hi).set(r,{timer:s,func:i,time:Cb()})}return r}_forEachSubscriber(e){for(const t of F(this,Un).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new JP(e.type);case"block":{const t=new TL(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new kL(this,e.type);case"event":return new d3(this,e.filter);case"transaction":return new UL(this,e.hash);case"orphan":return new RL(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of F(this,Un).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),F(this,Ln)!=null&&t.pause(F(this,Ln));break}}async on(e,t){const r=await be(this,je,Iy).call(this,e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,F(this,Ln)!=null&&r.subscriber.pause(F(this,Ln))),this}async once(e,t){const r=await be(this,je,Iy).call(this,e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,F(this,Ln)!=null&&r.subscriber.pause(F(this,Ln))),this}async emit(e,...t){const r=await be(this,je,Jd).call(this,e,t);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const c=new cB(this,o?null:s,e);try{s.call(this,...t,c)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),F(this,Un).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await be(this,je,Jd).call(this,e);return r?r.listeners.length:0}let t=0;for(const{listeners:r}of F(this,Un).values())t+=r.length;return t}async listeners(e){if(e){const r=await be(this,je,Jd).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:r}of F(this,Un).values())t=t.concat(r.map(({listener:i})=>i));return t}async off(e,t){const r=await be(this,je,Jd).call(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),F(this,Un).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:i}=await be(this,je,Iy).call(this,e);r&&i.stop(),F(this,Un).delete(t)}else for(const[t,{started:r,subscriber:i}]of F(this,Un))r&&i.stop(),F(this,Un).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return F(this,rh)}destroy(){this.removeAllListeners();for(const e of F(this,hi).keys())this._clearTimeout(e);G(this,rh,!0)}get paused(){return F(this,Ln)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(G(this,Eo,-1),F(this,Ln)!=null){if(F(this,Ln)==!!e)return;pe(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),G(this,Ln,!!e);for(const t of F(this,hi).values())t.timer&&clearTimeout(t.timer),t.time=Cb()-t.time}resume(){if(F(this,Ln)!=null){this._forEachSubscriber(e=>e.resume()),G(this,Ln,null);for(const e of F(this,hi).values()){let t=e.time;t<0&&(t=0),e.time=Cb(),setTimeout(e.func,t)}}}}Un=new WeakMap,cc=new WeakMap,Ln=new WeakMap,rh=new WeakMap,jr=new WeakMap,Fl=new WeakMap,lc=new WeakMap,Eo=new WeakMap,Qp=new WeakMap,hi=new WeakMap,ih=new WeakMap,sh=new WeakMap,je=new WeakSet,kr=async function(e){const t=F(this,sh).cacheTimeout;if(t<0)return await this._perform(e);const r=Sy(e.method,e);let i=F(this,lc).get(r);return i||(i=this._perform(e),F(this,lc).set(r,i),setTimeout(()=>{F(this,lc).get(r)===i&&F(this,lc).delete(r)},t)),await i},Iv=async function(e,t,r){pe(r<FL,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=qy(e);try{return Ae(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(s){if(!this.disableCcipRead&&QE(s)&&s.data&&r>=0&&t==="latest"&&i.to!=null&&Ot(s.data,0,4)==="0x556f1830"){const o=s.data,c=await Qn(i.to,this);let u;try{u=GL(Ot(s.data,4))}catch(p){pe(!1,p.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}pe(u.sender.toLowerCase()===c.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:u.errorArgs}});const f=await this.ccipReadFetch(i,u.calldata,u.urls);pe(f!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:u.errorArgs}});const d={to:c,data:Bt([u.selector,KL([f,u.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const p=await be(this,je,Iv).call(this,d,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:p}),p}catch(p){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:p}),p}}throw s}},Ov=async function(e){const{value:t}=await Kn({network:this.getNetwork(),value:e});return t},Zd=async function(e,t,r){let i=this._getAddress(t),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await be(this,je,Ov).call(this,be(this,je,kr).call(this,Object.assign(e,{address:i,blockTag:s})))},Bv=async function(e,t){if(pt(e,32))return await be(this,je,kr).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await be(this,je,kr).call(this,{method:"getBlock",blockTag:r,includeTransactions:t})},Jd=async function(e,t){let r=await Pb(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await Pb({orphan:"drop-log",log:t[0]},this)),F(this,Un).get(r.tag)||null},Iy=async function(e){const t=await Pb(e,this),r=t.tag;let i=F(this,Un).get(r);return i||(i={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},F(this,Un).set(r,i)),i};function HL(n,e){try{const t=Pv(n,e);if(t)return ky(t)}catch{}return null}function Pv(n,e){if(n==="0x")return null;try{const t=He(Ot(n,e,e+32)),r=He(Ot(n,t,t+32));return Ot(n,t+32,t+32+r)}catch{}return null}function NS(n){const e=Kt(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function VL(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const qL=new Uint8Array([]);function KL(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(qL),t+=32;for(let r=0;r<n.length;r++){const i=ze(n[r]);e[r]=NS(t),e.push(NS(i.length)),e.push(VL(i)),t+=32+Math.ceil(i.length/32)*32}return Bt(e)}const DS="0x0000000000000000000000000000000000000000000000000000000000000000";function GL(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};pe(hf(n)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Ot(n,0,32);pe(Ot(t,0,12)===Ot(DS,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Ot(t,12);try{const r=[],i=He(Ot(n,32,64)),s=He(Ot(n,i,i+32)),o=Ot(n,i+32);for(let c=0;c<s;c++){const u=HL(o,c*32);if(u==null)throw new Error("abort");r.push(u)}e.urls=r}catch{pe(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Pv(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{pe(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}pe(Ot(n,100,128)===Ot(DS,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Ot(n,96,100);try{const r=Pv(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{pe(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Kc(n,e){if(n.provider)return n.provider;pe(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function $S(n,e){let t=qy(e);if(t.to!=null&&(t.to=Qn(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),Qn(r,n)]).then(([i,s])=>(ee(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else t.from=n.getAddress();return await Kn(t)}class WL{constructor(e){se(this,"provider");ke(this,{provider:e||null})}async getNonce(e){return Kc(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await $S(this,e)}async populateTransaction(e){const t=Kc(this,"populateTransaction"),r=await $S(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=Be(r.chainId);ee(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?ee(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&ee(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await t.getFeeData();pe(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const c=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=c,r.maxPriorityFeePerGas=c}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(pe(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):pe(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Kn(r)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Kc(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Kc(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Kc(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Kc(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Kc(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=Ly.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){pe(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function QL(n){return JSON.parse(JSON.stringify(n))}var qn,Os,Ml,uc,jl,oh,Oc,Cv,_v;class YP{constructor(e){ce(this,Oc);ce(this,qn);ce(this,Os);ce(this,Ml);ce(this,uc);ce(this,jl);ce(this,oh);G(this,qn,e),G(this,Os,null),G(this,Ml,be(this,Oc,Cv).bind(this)),G(this,uc,!1),G(this,jl,null),G(this,oh,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){F(this,uc)||(G(this,uc,!0),be(this,Oc,Cv).call(this,-2))}stop(){F(this,uc)&&(G(this,uc,!1),G(this,oh,!0),be(this,Oc,_v).call(this),F(this,qn).off("block",F(this,Ml)))}pause(e){e&&be(this,Oc,_v).call(this),F(this,qn).off("block",F(this,Ml))}resume(){this.start()}}qn=new WeakMap,Os=new WeakMap,Ml=new WeakMap,uc=new WeakMap,jl=new WeakMap,oh=new WeakMap,Oc=new WeakSet,Cv=async function(e){try{F(this,Os)==null&&G(this,Os,this._subscribe(F(this,qn)));let t=null;try{t=await F(this,Os)}catch(s){if(!yn(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(t==null){G(this,Os,null),F(this,qn)._recoverSubscriber(this,this._recover(F(this,qn)));return}const r=await F(this,qn).getNetwork();if(F(this,jl)||G(this,jl,r),F(this,jl).chainId!==r.chainId)throw new Error("chaid changed");if(F(this,oh))return;const i=await F(this,qn).send("eth_getFilterChanges",[t]);await this._emitResults(F(this,qn),i)}catch(t){console.log("@TODO",t)}F(this,qn).once("block",F(this,Ml))},_v=function(){const e=F(this,Os);e&&(G(this,Os,null),e.then(t=>{F(this,qn).destroyed||F(this,qn).send("eth_uninstallFilter",[t])}))};var zl;class ZL extends YP{constructor(t,r){super(t);ce(this,zl);G(this,zl,QL(r))}_recover(t){return new d3(t,F(this,zl))}async _subscribe(t){return await t.send("eth_newFilter",[F(this,zl)])}async _emitResults(t,r){for(const i of r)t.emit(F(this,zl),t._wrapLog(i,t._network))}}zl=new WeakMap;class JL extends YP{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const YL="bigint,boolean,function,number,string,symbol".split(/,/g);function Oy(n){if(n==null||YL.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(Oy);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function XL(n){return new Promise(e=>{setTimeout(e,n)})}function Uu(n){return n&&n.toLowerCase()}function TS(n){return n&&typeof n.pollingInterval=="number"}const XP={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class _b extends WL{constructor(t,r){super(t);se(this,"address");r=rt(r),ke(this,{address:r})}connect(t){pe(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const r=Oy(t),i=[];if(r.from){const o=r.from;i.push((async()=>{const c=await Qn(o,this.provider);ee(c!=null&&c.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=c})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await Qn(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(t){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((s,o)=>{const c=[1e3,100];let u=0;const f=async()=>{try{const d=await this.provider.getTransaction(i);if(d!=null){s(d.replaceableTransaction(r));return}}catch(d){if(yn(d,"CANCELLED")||yn(d,"BAD_DATA")||yn(d,"NETWORK_ERROR")||yn(d,"UNSUPPORTED_OPERATION")){d.info==null&&(d.info={}),d.info.sendTransactionHash=i,o(d);return}if(yn(d,"INVALID_ARGUMENT")&&(u++,d.info==null&&(d.info={}),d.info.sendTransactionHash=i,u>10)){o(d);return}this.provider.emit("error",bt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:d}))}this.provider._setTimeout(()=>{f()},c.pop()||4e3)};f()})}async signTransaction(t){const r=Oy(t);if(r.from){const s=await Qn(r.from,this.provider);ee(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const r=typeof t=="string"?Co(t):t;return await this.provider.send("personal_sign",[Ae(r),this.address.toLowerCase()])}async signTypedData(t,r,i){const s=Oy(i),o=await Vy.resolveNames(t,r,s,async c=>{const u=await Qn(c);return ee(u!=null,"TypedData does not support null address","value",c),u});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Vy.getPayload(o.domain,r,o.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const r=typeof t=="string"?Co(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ae(r)])}}var Hl,ah,xo,Bs,zi,di,dr,Zp,Nv;class eF extends zL{constructor(t,r){super(t,r);ce(this,Zp);ce(this,Hl);ce(this,ah);ce(this,xo);ce(this,Bs);ce(this,zi);ce(this,di);ce(this,dr);G(this,ah,1),G(this,Hl,Object.assign({},XP,r||{})),G(this,xo,[]),G(this,Bs,null),G(this,di,null),G(this,dr,null);{let s=null;const o=new Promise(c=>{s=c});G(this,zi,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(ee(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&t!=null&&G(this,di,Ns.from(t))):i&&(ee(t==null||i.matches(t),"staticNetwork MUST match network object","options",r),G(this,di,i))}_getOption(t){return F(this,Hl)[t]}get _network(){return pe(F(this,di),"network is not available yet","NETWORK_ERROR"),F(this,di)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&Be(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(t);return r!=null?await this.send(r.method,r.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(F(this,di))return F(this,di)}else return t;return F(this,dr)?await F(this,dr):this.ready?(G(this,dr,(async()=>{try{const r=Ns.from(Be(await this.send("eth_chainId",[])));return G(this,dr,null),r}catch(r){throw G(this,dr,null),r}})()),await F(this,dr)):(G(this,dr,(async()=>{const r={id:bd(this,ah)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],G(this,dr,null)}catch(s){throw G(this,dr,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Ns.from(Be(i.result));throw this.getRpcError(r,i)})()),await F(this,dr))}_start(){F(this,zi)==null||F(this,zi).resolve==null||(F(this,zi).resolve(),G(this,zi,null),(async()=>{for(;F(this,di)==null&&!this.destroyed;)try{G(this,di,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",bt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await XL(1e3)}be(this,Zp,Nv).call(this)})())}async _waitUntilReady(){if(F(this,zi)!=null)return await F(this,zi).promise}_getSubscriber(t){return t.type==="pending"?new JL(this):t.type==="event"?this._getOption("polling")?new d3(this,t.filter):new ZL(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new JP("orphan"):super._getSubscriber(t)}get ready(){return F(this,zi)==null}getRpcTransaction(t){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=Hi(Be(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(r[i]=Ae(t[i]))}),t.accessList&&(r.accessList=nu(t.accessList)),t.blobVersionedHashes&&(r.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),t.authorizationList&&(r.authorizationList=t.authorizationList.map(i=>{const s=tP(i);return{address:s.address,nonce:Hi(s.nonce),chainId:Hi(s.chainId),yParity:Hi(s.signature.yParity),r:Hi(s.signature.r),s:Hi(s.signature.s)}})),r}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Uu(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Uu(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[Uu(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Uu(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(Uu):t.filter.address=Uu(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,r){const{method:i}=t,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const u=s.message;if(!u.match(/revert/i)&&u.match(/insufficient funds/i))return bt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:s}});if(u.match(/nonce/i)&&u.match(/too low/i))return bt("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const u=Dv(s),f=Ip.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],u?u.data:null);return f.info={error:s,payload:t},f}const o=JSON.stringify(nF(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return bt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const u=t.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return bt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:u,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return bt("nonce has already been used","NONCE_EXPIRED",{transaction:u,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return bt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:u,info:{error:s}});if(o.match(/only replay-protected/i))return bt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:u,info:{error:s}}})}let c=!!o.match(/the method .* does not exist/i);return c||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(c=!0),c?bt("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:s,payload:t}}):bt("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:t})}send(t,r){if(this.destroyed)return Promise.reject(bt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=bd(this,ah)._++,s=new Promise((o,c)=>{F(this,xo).push({resolve:o,reject:c,payload:{method:t,params:r,id:i,jsonrpc:"2.0"}})});return be(this,Zp,Nv).call(this),s}async getSigner(t){t==null&&(t=0);const r=this.send("eth_accounts",[]);if(typeof t=="number"){const s=await r;if(t>=s.length)throw new Error("no such account");return new _b(this,s[t])}const{accounts:i}=await Kn({network:this.getNetwork(),accounts:r});t=rt(t);for(const s of i)if(rt(s)===t)return new _b(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new _b(this,r))}destroy(){F(this,Bs)&&(clearTimeout(F(this,Bs)),G(this,Bs,null));for(const{payload:t,reject:r}of F(this,xo))r(bt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));G(this,xo,[]),super.destroy()}}Hl=new WeakMap,ah=new WeakMap,xo=new WeakMap,Bs=new WeakMap,zi=new WeakMap,di=new WeakMap,dr=new WeakMap,Zp=new WeakSet,Nv=function(){if(F(this,Bs))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");G(this,Bs,setTimeout(()=>{G(this,Bs,null);const r=F(this,xo);for(G(this,xo,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==F(this,Hl).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>F(this,Hl).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:c,reject:u,payload:f}of i){if(this.destroyed){u(bt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:f.method}));continue}const d=o.filter(p=>p.id===f.id)[0];if(d==null){const p=bt("missing response for request","BAD_DATA",{value:o,info:{payload:f}});this.emit("error",p),u(p);continue}if("error"in d){u(this.getRpcError(f,d));continue}c(d.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:c}of i)c(o)}})()}},t))};var fc;class tF extends eF{constructor(t,r){super(t,r);ce(this,fc);let i=this._getOption("pollingInterval");i==null&&(i=XP.pollingInterval),G(this,fc,i)}_getSubscriber(t){const r=super._getSubscriber(t);return TS(r)&&(r.pollingInterval=F(this,fc)),r}get pollingInterval(){return F(this,fc)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");G(this,fc,t),this._forEachSubscriber(r=>{TS(r)&&(r.pollingInterval=F(this,fc))})}}fc=new WeakMap;function Dv(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&pt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=Dv(n[e]);if(t)return t}return null}if(typeof n=="string")try{return Dv(JSON.parse(n))}catch{}return null}function $v(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)$v(n[t],e);if(typeof n=="string")try{return $v(JSON.parse(n),e)}catch{}}}function nF(n){const e=[];return $v(n,e),e}var ch,lh;const cl=class cl extends tF{constructor(t,r,i){const s=Object.assign({},i??{},{batchMaxCount:1});ee(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(r,s);ce(this,ch);ce(this,lh);G(this,lh,null),i&&i.providerInfo&&G(this,lh,i.providerInfo),G(this,ch,async(o,c)=>{const u={method:o,params:c};this.emit("debug",{action:"sendEip1193Request",payload:u});try{const f=await t.request(u);return this.emit("debug",{action:"receiveEip1193Result",result:f}),f}catch(f){const d=new Error(f.message);throw d.code=f.code,d.data=f.data,d.payload=u,this.emit("debug",{action:"receiveEip1193Error",error:d}),d}})}get providerInfo(){return F(this,lh)}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){ee(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const r=await F(this,ch).call(this,t.method,t.params||[]);return[{id:t.id,result:r}]}catch(r){return[{id:t.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(t,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(t,r)}async hasSigner(t){t==null&&(t=0);const r=await this.send("eth_accounts",[]);return typeof t=="number"?r.length>t:(t=t.toLowerCase(),r.filter(i=>i.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await F(this,ch).call(this,"eth_requestAccounts",[])}catch(r){const i=r.payload;throw this.getRpcError(i,{id:i.id,error:r})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new cl(t.provider);const r=t.window?t.window:typeof window<"u"?window:null;if(r==null)return null;const i=t.anyProvider;if(i&&r.ethereum)return new cl(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const s=t.timeout?t.timeout:300;return s===0?null:await new Promise((o,c)=>{let u=[];const f=g=>{u.push(g.detail),i&&d()},d=()=>{if(clearTimeout(p),u.length)if(t&&t.filter){const g=t.filter(u.map(m=>Object.assign({},m.info)));if(g==null)o(null);else if(g instanceof cl)o(g);else{let m=null;if(g.uuid&&(m=u.filter(b=>g.uuid===b.info.uuid)[0]),m){const{provider:v,info:b}=m;o(new cl(v,void 0,{providerInfo:b}))}else c(bt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:g}))}}else{const{provider:g,info:m}=u[0];o(new cl(g,void 0,{providerInfo:m}))}else o(null);r.removeEventListener("eip6963:announceProvider",f)},p=setTimeout(()=>{d()},s);r.addEventListener("eip6963:announceProvider",f),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};ch=new WeakMap,lh=new WeakMap;let Wy=cl;const rF="modulepreload",iF=function(n){return"/"+n},kS={},sF=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=o(t.map(f=>{if(f=iF(f),f in kS)return;kS[f]=!0;const d=f.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":rF,d||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),d)return new Promise((m,v)=>{g.addEventListener("load",m),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};var L0={exports:{}},RS;function oF(){if(RS)return L0.exports;RS=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(k,j,H){return Function.prototype.apply.call(k,j,H)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:t=function(k){return Object.getOwnPropertyNames(k)};function r(T){console&&console.warn&&console.warn(T)}var i=Number.isNaN||function(k){return k!==k};function s(){s.init.call(this)}L0.exports=s,L0.exports.once=N,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function c(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||i(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function u(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(k){for(var j=[],H=1;H<arguments.length;H++)j.push(arguments[H]);var V=k==="error",M=this._events;if(M!==void 0)V=V&&M.error===void 0;else if(!V)return!1;if(V){var K;if(j.length>0&&(K=j[0]),K instanceof Error)throw K;var Q=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw Q.context=K,Q}var z=M[k];if(z===void 0)return!1;if(typeof z=="function")e(z,this,j);else for(var P=z.length,D=v(z,P),H=0;H<P;++H)e(D[H],this,j);return!0};function f(T,k,j,H){var V,M,K;if(c(j),M=T._events,M===void 0?(M=T._events=Object.create(null),T._eventsCount=0):(M.newListener!==void 0&&(T.emit("newListener",k,j.listener?j.listener:j),M=T._events),K=M[k]),K===void 0)K=M[k]=j,++T._eventsCount;else if(typeof K=="function"?K=M[k]=H?[j,K]:[K,j]:H?K.unshift(j):K.push(j),V=u(T),V>0&&K.length>V&&!K.warned){K.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=T,Q.type=k,Q.count=K.length,r(Q)}return T}s.prototype.addListener=function(k,j){return f(this,k,j,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(k,j){return f(this,k,j,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(T,k,j){var H={fired:!1,wrapFn:void 0,target:T,type:k,listener:j},V=d.bind(H);return V.listener=j,H.wrapFn=V,V}s.prototype.once=function(k,j){return c(j),this.on(k,p(this,k,j)),this},s.prototype.prependOnceListener=function(k,j){return c(j),this.prependListener(k,p(this,k,j)),this},s.prototype.removeListener=function(k,j){var H,V,M,K,Q;if(c(j),V=this._events,V===void 0)return this;if(H=V[k],H===void 0)return this;if(H===j||H.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete V[k],V.removeListener&&this.emit("removeListener",k,H.listener||j));else if(typeof H!="function"){for(M=-1,K=H.length-1;K>=0;K--)if(H[K]===j||H[K].listener===j){Q=H[K].listener,M=K;break}if(M<0)return this;M===0?H.shift():b(H,M),H.length===1&&(V[k]=H[0]),V.removeListener!==void 0&&this.emit("removeListener",k,Q||j)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(k){var j,H,V;if(H=this._events,H===void 0)return this;if(H.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):H[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete H[k]),this;if(arguments.length===0){var M=Object.keys(H),K;for(V=0;V<M.length;++V)K=M[V],K!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=H[k],typeof j=="function")this.removeListener(k,j);else if(j!==void 0)for(V=j.length-1;V>=0;V--)this.removeListener(k,j[V]);return this};function g(T,k,j){var H=T._events;if(H===void 0)return[];var V=H[k];return V===void 0?[]:typeof V=="function"?j?[V.listener||V]:[V]:j?A(V):v(V,V.length)}s.prototype.listeners=function(k){return g(this,k,!0)},s.prototype.rawListeners=function(k){return g(this,k,!1)},s.listenerCount=function(T,k){return typeof T.listenerCount=="function"?T.listenerCount(k):m.call(T,k)},s.prototype.listenerCount=m;function m(T){var k=this._events;if(k!==void 0){var j=k[T];if(typeof j=="function")return 1;if(j!==void 0)return j.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function v(T,k){for(var j=new Array(k),H=0;H<k;++H)j[H]=T[H];return j}function b(T,k){for(;k+1<T.length;k++)T[k]=T[k+1];T.pop()}function A(T){for(var k=new Array(T.length),j=0;j<k.length;++j)k[j]=T[j].listener||T[j];return k}function N(T,k){return new Promise(function(j,H){function V(K){T.removeListener(k,M),H(K)}function M(){typeof T.removeListener=="function"&&T.removeListener("error",V),j([].slice.call(arguments))}O(T,k,M,{once:!0}),k!=="error"&&R(T,V,{once:!0})})}function R(T,k,j){typeof T.on=="function"&&O(T,"error",k,j)}function O(T,k,j,H){if(typeof T.on=="function")H.once?T.once(k,j):T.on(k,j);else if(typeof T.addEventListener=="function")T.addEventListener(k,function V(M){H.once&&T.removeEventListener(k,V),j(M)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return L0.exports}var Gr=oF();const p3=Jp(Gr);var Nb={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Tv=function(n,e){return Tv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Tv(n,e)};function aF(n,e){Tv(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var kv=function(){return kv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},kv.apply(this,arguments)};function cF(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function lF(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function uF(n,e){return function(t,r){e(t,r,n)}}function fF(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function hF(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(d){try{f(r.next(d))}catch(p){o(p)}}function u(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?s(d.value):i(d.value).then(c,u)}f((r=r.apply(n,e||[])).next())})}function dF(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(f){return function(d){return u([f,d])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function pF(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function gF(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Rv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eC(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function yF(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(eC(arguments[e]));return n}function mF(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,c=s.length;o<c;o++,i++)r[i]=s[o];return r}function Pp(n){return this instanceof Pp?(this.v=n,this):new Pp(n)}function wF(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(g){r[g]&&(i[g]=function(m){return new Promise(function(v,b){s.push([g,m,v,b])>1||c(g,m)})})}function c(g,m){try{u(r[g](m))}catch(v){p(s[0][3],v)}}function u(g){g.value instanceof Pp?Promise.resolve(g.value.v).then(f,d):p(s[0][2],g)}function f(g){c("next",g)}function d(g){c("throw",g)}function p(g,m){g(m),s.shift(),s.length&&c(s[0][0],s[0][1])}}function bF(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Pp(n[i](o)),done:i==="return"}:s?s(o):o}:s}}function vF(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Rv=="function"?Rv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(c,u){o=n[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(f){s({value:f,done:c})},o)}}function EF(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function xF(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function AF(n){return n&&n.__esModule?n:{default:n}}function SF(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function IF(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const OF=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return kv},__asyncDelegator:bF,__asyncGenerator:wF,__asyncValues:vF,__await:Pp,__awaiter:hF,__classPrivateFieldGet:SF,__classPrivateFieldSet:IF,__createBinding:pF,__decorate:lF,__exportStar:gF,__extends:aF,__generator:dF,__importDefault:AF,__importStar:xF,__makeTemplateObject:EF,__metadata:fF,__param:uF,__read:eC,__rest:cF,__spread:yF,__spreadArrays:mF,__values:Rv},Symbol.toStringTag,{value:"Module"})),rg=YT(OF);var Db={},Ad={},US;function BF(){if(US)return Ad;US=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Ad.delay=n,Ad}var Gc={},$b={},Wc={},LS;function PF(){return LS||(LS=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.ONE_THOUSAND=Wc.ONE_HUNDRED=void 0,Wc.ONE_HUNDRED=100,Wc.ONE_THOUSAND=1e3),Wc}var Tb={},FS;function CF(){return FS||(FS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365})(Tb)),Tb}var MS;function tC(){return MS||(MS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=rg;e.__exportStar(PF(),n),e.__exportStar(CF(),n)})($b)),$b}var jS;function _F(){if(jS)return Gc;jS=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.fromMiliseconds=Gc.toMiliseconds=void 0;const n=tC();function e(r){return r*n.ONE_THOUSAND}Gc.toMiliseconds=e;function t(r){return Math.floor(r/n.ONE_THOUSAND)}return Gc.fromMiliseconds=t,Gc}var zS;function NF(){return zS||(zS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=rg;e.__exportStar(BF(),n),e.__exportStar(_F(),n)})(Db)),Db}var Lu={},HS;function DF(){if(HS)return Lu;HS=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:i})}get(t){const r=this.timestamps.get(t);if(typeof r>"u")throw new Error(`No timestamp found for label: ${t}`);return r}elapsed(t){const r=this.get(t);return r.elapsed||Date.now()-r.started}}return Lu.Watch=n,Lu.default=n,Lu}var kb={},Sd={},VS;function $F(){if(VS)return Sd;VS=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.IWatch=void 0;class n{}return Sd.IWatch=n,Sd}var qS;function TF(){return qS||(qS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),rg.__exportStar($F(),n)})(kb)),kb}var KS;function kF(){return KS||(KS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=rg;e.__exportStar(NF(),n),e.__exportStar(DF(),n),e.__exportStar(TF(),n),e.__exportStar(tC(),n)})(Nb)),Nb}var me=kF(),at={},GS;function nC(){if(GS)return at;GS=1,Object.defineProperty(at,"__esModule",{value:!0}),at.getLocalStorage=at.getLocalStorageOrThrow=at.getCrypto=at.getCryptoOrThrow=at.getLocation=at.getLocationOrThrow=at.getNavigator=at.getNavigatorOrThrow=at.getDocument=at.getDocumentOrThrow=at.getFromWindowOrThrow=at.getFromWindow=void 0;function n(g){let m;return typeof window<"u"&&typeof window[g]<"u"&&(m=window[g]),m}at.getFromWindow=n;function e(g){const m=n(g);if(!m)throw new Error(`${g} is not defined in Window`);return m}at.getFromWindowOrThrow=e;function t(){return e("document")}at.getDocumentOrThrow=t;function r(){return n("document")}at.getDocument=r;function i(){return e("navigator")}at.getNavigatorOrThrow=i;function s(){return n("navigator")}at.getNavigator=s;function o(){return e("location")}at.getLocationOrThrow=o;function c(){return n("location")}at.getLocation=c;function u(){return e("crypto")}at.getCryptoOrThrow=u;function f(){return n("crypto")}at.getCrypto=f;function d(){return e("localStorage")}at.getLocalStorageOrThrow=d;function p(){return n("localStorage")}return at.getLocalStorage=p,at}nC();var Id={},WS;function RF(){if(WS)return Id;WS=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.getWindowMetadata=void 0;const n=nC();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function i(){const m=t.getElementsByTagName("link"),v=[];for(let b=0;b<m.length;b++){const A=m[b],N=A.getAttribute("rel");if(N&&N.toLowerCase().indexOf("icon")>-1){const R=A.getAttribute("href");if(R)if(R.toLowerCase().indexOf("https:")===-1&&R.toLowerCase().indexOf("http:")===-1&&R.indexOf("//")!==0){let O=r.protocol+"//"+r.host;if(R.indexOf("/")===0)O+=R;else{const T=r.pathname.split("/");T.pop();const k=T.join("/");O+=k+"/"+R}v.push(O)}else if(R.indexOf("//")===0){const O=r.protocol+R;v.push(O)}else v.push(R)}}return v}function s(...m){const v=t.getElementsByTagName("meta");for(let b=0;b<v.length;b++){const A=v[b],N=["itemprop","property","name"].map(R=>A.getAttribute(R)).filter(R=>R?m.includes(R):!1);if(N.length&&N){const R=A.getAttribute("content");if(R)return R}}return""}function o(){let m=s("name","og:site_name","og:title","twitter:title");return m||(m=t.title),m}function c(){return s("description","og:description","twitter:description","keywords")}const u=o(),f=c(),d=r.origin,p=i();return{description:f,url:d,icons:p,name:u}}return Id.getWindowMetadata=e,Id}RF();/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function UF(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function rC(n,e){return Array.isArray(e)?e.length===0?!0:n?e.every(t=>typeof t=="string"):e.every(t=>Number.isSafeInteger(t)):!1}function Qy(n,e){if(typeof e!="string")throw new Error(`${n}: string expected`);return!0}function g3(n){if(!Number.isSafeInteger(n))throw new Error(`invalid integer: ${n}`)}function Uv(n){if(!Array.isArray(n))throw new Error("array expected")}function Zy(n,e){if(!rC(!0,e))throw new Error(`${n}: array of strings expected`)}function LF(n,e){if(!rC(!1,e))throw new Error(`${n}: array of numbers expected`)}function FF(...n){const e=s=>s,t=(s,o)=>c=>s(o(c)),r=n.map(s=>s.encode).reduceRight(t,e),i=n.map(s=>s.decode).reduce(t,e);return{encode:r,decode:i}}function MF(n){const e=typeof n=="string"?n.split(""):n,t=e.length;Zy("alphabet",e);const r=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(Uv(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=t)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${n}`);return e[s]})),decode:i=>(Uv(i),i.map(s=>{Qy("alphabet.decode",s);const o=r.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${n}`);return o}))}}function jF(n=""){return Qy("join",n),{encode:e=>(Zy("join.decode",e),e.join(n)),decode:e=>(Qy("join.decode",e),e.split(n))}}function zF(n,e="="){return g3(n),Qy("padding",e),{encode(t){for(Zy("padding.encode",t);t.length*n%8;)t.push(e);return t},decode(t){Zy("padding.decode",t);let r=t.length;if(r*n%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&t[r-1]===e;r--)if((r-1)*n%8===0)throw new Error("padding: invalid, string has too much padding");return t.slice(0,r)}}}const iC=(n,e)=>e===0?n:iC(e,n%e),Jy=(n,e)=>n+(e-iC(n,e)),Rb=(()=>{let n=[];for(let e=0;e<40;e++)n.push(2**e);return n})();function QS(n,e,t,r){if(Uv(n),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(Jy(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${Jy(e,t)}`);let i=0,s=0;const o=Rb[e],c=Rb[t]-1,u=[];for(const f of n){if(g3(f),f>=o)throw new Error(`convertRadix2: invalid data word=${f} from=${e}`);if(i=i<<e|f,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=t;s-=t)u.push((i>>s-t&c)>>>0);const d=Rb[s];if(d===void 0)throw new Error("invalid carry");i&=d-1}if(i=i<<t-s&c,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&u.push(i>>>0),u}function HF(n,e=!1){if(g3(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(Jy(8,n)>32||Jy(n,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!UF(t))throw new Error("radix2.encode input should be Uint8Array");return QS(Array.from(t),8,n,!e)},decode:t=>(LF("radix2.decode",t),Uint8Array.from(QS(t,n,8,e)))}}const VF=FF(HF(5),MF("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),zF(5),jF(""));function qF(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<n.length;f++){const d=n.charAt(f),p=d.charCodeAt(0);if(e[p]!==255)throw new TypeError(d+" is ambiguous");e[p]=f}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let d=0,p=0,g=0;const m=f.length;for(;g!==m&&f[g]===0;)g++,d++;const v=(m-g)*s+1>>>0,b=new Uint8Array(v);for(;g!==m;){let R=f[g],O=0;for(let T=v-1;(R!==0||O<p)&&T!==-1;T--,O++)R+=256*b[T]>>>0,b[T]=R%t>>>0,R=R/t>>>0;if(R!==0)throw new Error("Non-zero carry");p=O,g++}let A=v-p;for(;A!==v&&b[A]===0;)A++;let N=r.repeat(d);for(;A<v;++A)N+=n.charAt(b[A]);return N}function c(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let d=0,p=0,g=0;for(;f[d]===r;)p++,d++;const m=(f.length-d)*i+1>>>0,v=new Uint8Array(m);for(;d<f.length;){const R=f.charCodeAt(d);if(R>255)return;let O=e[R];if(O===255)return;let T=0;for(let k=m-1;(O!==0||T<g)&&k!==-1;k--,T++)O+=t*v[k]>>>0,v[k]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");g=T,d++}let b=m-g;for(;b!==m&&v[b]===0;)b++;const A=new Uint8Array(p+(m-b));let N=p;for(;b!==m;)A[N++]=v[b++];return A}function u(f){const d=c(f);if(d)return d;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:c,decode:u}}var KF="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";qF(KF);function GF(n){const e=n.length;let t=0,r=0;for(;r<e;){let i=n.charCodeAt(r++);if((i&4294967168)===0){t++;continue}else if((i&4294965248)===0)t+=2;else{if(i>=55296&&i<=56319&&r<e){const s=n.charCodeAt(r);(s&64512)===56320&&(++r,i=((i&1023)<<10)+(s&1023)+65536)}(i&4294901760)===0?t+=3:t+=4}}return t}function WF(n,e,t){const r=n.length;let i=t,s=0;for(;s<r;){let o=n.charCodeAt(s++);if((o&4294967168)===0){e[i++]=o;continue}else if((o&4294965248)===0)e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<r){const c=n.charCodeAt(s);(c&64512)===56320&&(++s,o=((o&1023)<<10)+(c&1023)+65536)}(o&4294901760)===0?(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128):(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128)}e[i++]=o&63|128}}const QF=new TextEncoder,ZF=50;function JF(n,e,t){QF.encodeInto(n,e.subarray(t))}function YF(n,e,t){n.length>ZF?JF(n,e,t):WF(n,e,t)}const XF=4096;function sC(n,e,t){let r=e;const i=r+t,s=[];let o="";for(;r<i;){const c=n[r++];if((c&128)===0)s.push(c);else if((c&224)===192){const u=n[r++]&63;s.push((c&31)<<6|u)}else if((c&240)===224){const u=n[r++]&63,f=n[r++]&63;s.push((c&31)<<12|u<<6|f)}else if((c&248)===240){const u=n[r++]&63,f=n[r++]&63,d=n[r++]&63;let p=(c&7)<<18|u<<12|f<<6|d;p>65535&&(p-=65536,s.push(p>>>10&1023|55296),p=56320|p&1023),s.push(p)}else s.push(c);s.length>=XF&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}const eM=new TextDecoder,tM=200;function nM(n,e,t){const r=n.subarray(e,e+t);return eM.decode(r)}function rM(n,e,t){return t>tM?nM(n,e,t):sC(n,e,t)}class F0{constructor(e,t){this.type=e,this.data=t}}class zr extends Error{constructor(e){super(e);const t=Object.create(zr.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:zr.name})}}const Od=4294967295;function iM(n,e,t){const r=t/4294967296,i=t;n.setUint32(e,r),n.setUint32(e+4,i)}function oC(n,e,t){const r=Math.floor(t/4294967296),i=t;n.setUint32(e,r),n.setUint32(e+4,i)}function aC(n,e){const t=n.getInt32(e),r=n.getUint32(e+4);return t*4294967296+r}function sM(n,e){const t=n.getUint32(e),r=n.getUint32(e+4);return t*4294967296+r}const oM=-1,aM=4294967296-1,cM=17179869184-1;function lM({sec:n,nsec:e}){if(n>=0&&e>=0&&n<=cM)if(e===0&&n<=aM){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,n),t}else{const t=n/4294967296,r=n&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|t&3),s.setUint32(4,r),i}else{const t=new Uint8Array(12),r=new DataView(t.buffer);return r.setUint32(0,e),oC(r,4,n),t}}function uM(n){const e=n.getTime(),t=Math.floor(e/1e3),r=(e-t*1e3)*1e6,i=Math.floor(r/1e9);return{sec:t+i,nsec:r-i*1e9}}function fM(n){if(n instanceof Date){const e=uM(n);return lM(e)}else return null}function hM(n){const e=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const t=e.getUint32(0),r=e.getUint32(4),i=(t&3)*4294967296+r,s=t>>>2;return{sec:i,nsec:s}}case 12:{const t=aC(e,4),r=e.getUint32(0);return{sec:t,nsec:r}}default:throw new zr(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${n.length}`)}}function dM(n){const e=hM(n);return new Date(e.sec*1e3+e.nsec/1e6)}const pM={type:oM,encode:fM,decode:dM};class Yy{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(pM)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{const i=-1-e;this.builtInEncoders[i]=t,this.builtInDecoders[i]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const s=i(e,t);if(s!=null){const o=-1-r;return new F0(o,s)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const s=i(e,t);if(s!=null){const o=r;return new F0(o,s)}}}return e instanceof F0?e:null}decode(e,t,r){const i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,r):new F0(t,e)}}Yy.defaultCodec=new Yy;function gM(n){return n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer}function Lv(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):gM(n)?new Uint8Array(n):Uint8Array.from(n)}const yM=100,mM=2048;let wM=class cC{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Yy.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??yM,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??mM,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new cC({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){const t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(e){const t=new ArrayBuffer(e),r=new Uint8Array(t),i=new DataView(t);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=GF(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),YF(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,t){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);const r=Lv(e);this.writeU8a(r)}encodeArray(e,t){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of e)this.doEncode(i,t+1)}countWithoutUndefined(e,t){let r=0;for(const i of t)e[i]!==void 0&&r++;return r}encodeMap(e,t){const r=Object.keys(e);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const s of r){const o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,t+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(r);return}const t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),iM(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),oC(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function bM(n,e){return new wM(e).encodeSharedRef(n)}function Ub(n){return`${n<0?"-":""}0x${Math.abs(n).toString(16).padStart(2,"0")}`}const vM=16,EM=16;class xM{constructor(e=vM,t=EM){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,r){const i=this.caches[r-1];e:for(const s of i){const o=s.bytes;for(let c=0;c<r;c++)if(o[c]!==e[t+c])continue e;return s.str}return null}store(e,t){const r=this.caches[e.length-1],i={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(e,t,r){const i=this.find(e,t,r);if(i!=null)return this.hit++,i;this.miss++;const s=sC(e,t,r),o=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(o,s),s}}const Fv="array",cp="map_key",lC="map_value",AM=n=>{if(typeof n=="string"||typeof n=="number")return n;throw new zr("The type of key must be string or number but "+typeof n)};class SM{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const t=this.getUninitializedStateFromPool();t.type=Fv,t.position=0,t.size=e,t.array=new Array(e)}pushMapState(e){const t=this.getUninitializedStateFromPool();t.type=cp,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Fv){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===cp||e.type===lC){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Bd=-1,y3=new DataView(new ArrayBuffer(0)),IM=new Uint8Array(y3.buffer);try{y3.getInt8(0)}catch(n){if(!(n instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const ZS=new RangeError("Insufficient data"),OM=new xM;let BM=class uC{constructor(e){this.totalPos=0,this.pos=0,this.view=y3,this.bytes=IM,this.headByte=Bd,this.stack=new SM,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Yy.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??Od,this.maxBinLength=(e==null?void 0:e.maxBinLength)??Od,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??Od,this.maxMapLength=(e==null?void 0:e.maxMapLength)??Od,this.maxExtLength=(e==null?void 0:e.maxExtLength)??Od,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:OM,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??AM}clone(){return new uC({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Bd,this.stack.reset()}setBuffer(e){const t=Lv(e);this.bytes=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Bd&&!this.hasRemaining(1))this.setBuffer(e);else{const t=this.bytes.subarray(this.pos),r=Lv(e),i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:t,pos:r}=this;return new RangeError(`Extra ${t.byteLength-r} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let t=!1,r;for await(const c of e){if(t)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{r=this.doDecodeSync(),t=!0}catch(u){if(!(u instanceof RangeError))throw u}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Ub(i)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,t){if(this.entered){yield*this.clone().decodeMultiAsync(e,t);return}try{this.entered=!0;let r=t,i=-1;for await(const s of e){if(t&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){const i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e<160){const i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else{const i=e-160;t=this.decodeString(i,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)this.useBigInt64?t=this.readU64AsBigInt():t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)this.useBigInt64?t=this.readI64AsBigInt():t=this.readI64();else if(e===217){const i=this.lookU8();t=this.decodeString(i,1)}else if(e===218){const i=this.lookU16();t=this.decodeString(i,2)}else if(e===219){const i=this.lookU32();t=this.decodeString(i,4)}else if(e===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else if(e===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else if(e===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e===196){const i=this.lookU8();t=this.decodeBinary(i,1)}else if(e===197){const i=this.lookU16();t=this.decodeBinary(i,2)}else if(e===198){const i=this.lookU32();t=this.decodeBinary(i,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){const i=this.lookU8();t=this.decodeExtension(i,1)}else if(e===200){const i=this.lookU16();t=this.decodeExtension(i,2)}else if(e===201){const i=this.lookU32();t=this.decodeExtension(i,4)}else throw new zr(`Unrecognized type byte: ${Ub(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===Fv)if(i.array[i.position]=t,i.position++,i.position===i.size)t=i.array,r.release(i);else continue e;else if(i.type===cp){if(t==="__proto__")throw new zr("The key __proto__ is not allowed");i.key=this.mapKeyConverter(t),i.type=lC;continue e}else if(i.map[i.key]=t,i.readCount++,i.readCount===i.size)t=i.map,r.release(i);else{i.key=null,i.type=cp;continue e}}return t}}readHeadByte(){return this.headByte===Bd&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Bd}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new zr(`Unrecognized array type byte: ${Ub(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new zr(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new zr(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,t){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,t):this.decodeBinary(e,t)}decodeUtf8String(e,t){var s;if(e>this.maxStrLength)throw new zr(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw ZS;const r=this.pos+t;let i;return this.stateIsMapKey()&&((s=this.keyDecoder)!=null&&s.canBeCached(e))?i=this.keyDecoder.decode(this.bytes,r,e):i=rM(this.bytes,r,e),this.pos+=t+e,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===cp:!1}decodeBinary(e,t){if(e>this.maxBinLength)throw new zr(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw ZS;const r=this.pos+t,i=this.bytes.subarray(r,r+e);return this.pos+=t+e,i}decodeExtension(e,t){if(e>this.maxExtLength)throw new zr(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+t),i=this.decodeBinary(e,t+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=sM(this.view,this.pos);return this.pos+=8,e}readI64(){const e=aC(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function PM(n,e){return new BM(e).decode(n)}const CM=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),_M=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function NM(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return _M(n)}catch{return n}}function DM(n){return typeof n=="string"?n:CM(n)||""}function $M(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function fC(n,...e){if(!$M(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function JS(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function TM(n,e){fC(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const Fu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lb=n=>new DataView(n.buffer,n.byteOffset,n.byteLength);function kM(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function hC(n){return typeof n=="string"&&(n=kM(n)),fC(n),n}let RM=class{clone(){return this._cloneInto()}};function UM(n){const e=r=>n().update(hC(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function dC(n=32){if(Fu&&typeof Fu.getRandomValues=="function")return Fu.getRandomValues(new Uint8Array(n));if(Fu&&typeof Fu.randomBytes=="function")return Fu.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function LM(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}let FM=class extends RM{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Lb(this.buffer)}update(e){JS(this);const{view:t,buffer:r,blockLen:i}=this;e=hC(e);const s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=Lb(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){JS(this),TM(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let p=o;p<i;p++)t[p]=0;LM(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=Lb(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)c.setUint32(4*p,d[p],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}};const M0=BigInt(2**32-1),Mv=BigInt(32);function pC(n,e=!1){return e?{h:Number(n&M0),l:Number(n>>Mv&M0)}:{h:Number(n>>Mv&M0)|0,l:Number(n&M0)|0}}function MM(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=pC(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const jM=(n,e)=>BigInt(n>>>0)<<Mv|BigInt(e>>>0),zM=(n,e,t)=>n>>>t,HM=(n,e,t)=>n<<32-t|e>>>t,VM=(n,e,t)=>n>>>t|e<<32-t,qM=(n,e,t)=>n<<32-t|e>>>t,KM=(n,e,t)=>n<<64-t|e>>>t-32,GM=(n,e,t)=>n>>>t-32|e<<64-t,WM=(n,e)=>e,QM=(n,e)=>n,ZM=(n,e,t)=>n<<t|e>>>32-t,JM=(n,e,t)=>e<<t|n>>>32-t,YM=(n,e,t)=>e<<t-32|n>>>64-t,XM=(n,e,t)=>n<<t-32|e>>>64-t;function ej(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const tj=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),nj=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,rj=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),ij=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,sj=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),oj=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Fe={fromBig:pC,split:MM,toBig:jM,shrSH:zM,shrSL:HM,rotrSH:VM,rotrSL:qM,rotrBH:KM,rotrBL:GM,rotr32H:WM,rotr32L:QM,rotlSH:ZM,rotlSL:JM,rotlBH:YM,rotlBL:XM,add:ej,add3L:tj,add3H:nj,add4L:rj,add4H:ij,add5H:oj,add5L:sj},[aj,cj]=Fe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),fa=new Uint32Array(80),ha=new Uint32Array(80);let lj=class extends FM{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:f,El:d,Fh:p,Fl:g,Gh:m,Gl:v,Hh:b,Hl:A}=this;return[e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=d|0,this.Fh=p|0,this.Fl=g|0,this.Gh=m|0,this.Gl=v|0,this.Hh=b|0,this.Hl=A|0}process(e,t){for(let O=0;O<16;O++,t+=4)fa[O]=e.getUint32(t),ha[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const T=fa[O-15]|0,k=ha[O-15]|0,j=Fe.rotrSH(T,k,1)^Fe.rotrSH(T,k,8)^Fe.shrSH(T,k,7),H=Fe.rotrSL(T,k,1)^Fe.rotrSL(T,k,8)^Fe.shrSL(T,k,7),V=fa[O-2]|0,M=ha[O-2]|0,K=Fe.rotrSH(V,M,19)^Fe.rotrBH(V,M,61)^Fe.shrSH(V,M,6),Q=Fe.rotrSL(V,M,19)^Fe.rotrBL(V,M,61)^Fe.shrSL(V,M,6),z=Fe.add4L(H,Q,ha[O-7],ha[O-16]),P=Fe.add4H(z,j,K,fa[O-7],fa[O-16]);fa[O]=P|0,ha[O]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:f,Dl:d,Eh:p,El:g,Fh:m,Fl:v,Gh:b,Gl:A,Hh:N,Hl:R}=this;for(let O=0;O<80;O++){const T=Fe.rotrSH(p,g,14)^Fe.rotrSH(p,g,18)^Fe.rotrBH(p,g,41),k=Fe.rotrSL(p,g,14)^Fe.rotrSL(p,g,18)^Fe.rotrBL(p,g,41),j=p&m^~p&b,H=g&v^~g&A,V=Fe.add5L(R,k,H,cj[O],ha[O]),M=Fe.add5H(V,N,T,j,aj[O],fa[O]),K=V|0,Q=Fe.rotrSH(r,i,28)^Fe.rotrBH(r,i,34)^Fe.rotrBH(r,i,39),z=Fe.rotrSL(r,i,28)^Fe.rotrBL(r,i,34)^Fe.rotrBL(r,i,39),P=r&s^r&c^s&c,D=i&o^i&u^o&u;N=b|0,R=A|0,b=m|0,A=v|0,m=p|0,v=g|0,{h:p,l:g}=Fe.add(f|0,d|0,M|0,K|0),f=c|0,d=u|0,c=s|0,u=o|0,s=r|0,o=i|0;const w=Fe.add3L(K,z,D);r=Fe.add3H(w,M,Q,P),i=w|0}({h:r,l:i}=Fe.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Fe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=Fe.add(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:d}=Fe.add(this.Dh|0,this.Dl|0,f|0,d|0),{h:p,l:g}=Fe.add(this.Eh|0,this.El|0,p|0,g|0),{h:m,l:v}=Fe.add(this.Fh|0,this.Fl|0,m|0,v|0),{h:b,l:A}=Fe.add(this.Gh|0,this.Gl|0,b|0,A|0),{h:N,l:R}=Fe.add(this.Hh|0,this.Hl|0,N|0,R|0),this.set(r,i,s,o,c,u,f,d,p,g,m,v,b,A,N,R)}roundClean(){fa.fill(0),ha.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const uj=UM(()=>new lj);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const m3=BigInt(0),gC=BigInt(1),fj=BigInt(2);function w3(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function b3(n){if(!w3(n))throw new Error("Uint8Array expected")}function Fb(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const hj=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function v3(n){b3(n);let e="";for(let t=0;t<n.length;t++)e+=hj[n[t]];return e}function yC(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?m3:BigInt("0x"+n)}const Vs={_0:48,_9:57,A:65,F:70,a:97,f:102};function YS(n){if(n>=Vs._0&&n<=Vs._9)return n-Vs._0;if(n>=Vs.A&&n<=Vs.F)return n-(Vs.A-10);if(n>=Vs.a&&n<=Vs.f)return n-(Vs.a-10)}function mC(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=YS(n.charCodeAt(s)),c=YS(n.charCodeAt(s+1));if(o===void 0||c===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+c}return r}function dj(n){return yC(v3(n))}function By(n){return b3(n),yC(v3(Uint8Array.from(n).reverse()))}function wC(n,e){return mC(n.toString(16).padStart(e*2,"0"))}function jv(n,e){return wC(n,e).reverse()}function qs(n,e,t){let r;if(typeof e=="string")try{r=mC(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(w3(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function XS(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];b3(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}const Mb=n=>typeof n=="bigint"&&m3<=n;function pj(n,e,t){return Mb(n)&&Mb(e)&&Mb(t)&&e<=n&&n<t}function Pd(n,e,t,r){if(!pj(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function gj(n){let e;for(e=0;n>m3;n>>=gC,e+=1);return e}const yj=n=>(fj<<BigInt(n-1))-gC,mj={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||w3(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function E3(n,e,t={}){const r=(i,s,o)=>{const c=mj[s];if(typeof c!="function")throw new Error("invalid validator function");const u=n[i];if(!(o&&u===void 0)&&!c(u,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}function eI(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const sn=BigInt(0),$t=BigInt(1),rl=BigInt(2),wj=BigInt(3),zv=BigInt(4),tI=BigInt(5),nI=BigInt(8);function Vt(n,e){const t=n%e;return t>=sn?t:e+t}function bj(n,e,t){if(e<sn)throw new Error("invalid exponent, negatives unsupported");if(t<=sn)throw new Error("invalid modulus");if(t===$t)return sn;let r=$t;for(;e>sn;)e&$t&&(r=r*n%t),n=n*n%t,e>>=$t;return r}function cs(n,e,t){let r=n;for(;e-- >sn;)r*=r,r%=t;return r}function rI(n,e){if(n===sn)throw new Error("invert: expected non-zero number");if(e<=sn)throw new Error("invert: expected positive modulus, got "+e);let t=Vt(n,e),r=e,i=sn,s=$t;for(;t!==sn;){const o=r/t,c=r%t,u=i-s*o;r=t,t=c,i=s,s=u}if(r!==$t)throw new Error("invert: does not exist");return Vt(i,e)}function vj(n){const e=(n-$t)/rl;let t,r,i;for(t=n-$t,r=0;t%rl===sn;t/=rl,r++);for(i=rl;i<n&&bj(i,e,n)!==n-$t;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+$t)/zv;return function(c,u){const f=c.pow(u,o);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+$t)/rl;return function(o,c){if(o.pow(c,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=r,f=o.pow(o.mul(o.ONE,i),t),d=o.pow(c,s),p=o.pow(c,t);for(;!o.eql(p,o.ONE);){if(o.eql(p,o.ZERO))return o.ZERO;let g=1;for(let v=o.sqr(p);g<u&&!o.eql(v,o.ONE);g++)v=o.sqr(v);const m=o.pow(f,$t<<BigInt(u-g-1));f=o.sqr(m),d=o.mul(d,m),p=o.mul(p,f),u=g}return d}}function Ej(n){if(n%zv===wj){const e=(n+$t)/zv;return function(t,r){const i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw new Error("Cannot find square root");return i}}if(n%nI===tI){const e=(n-tI)/nI;return function(t,r){const i=t.mul(r,rl),s=t.pow(i,e),o=t.mul(r,s),c=t.mul(t.mul(o,rl),s),u=t.mul(o,t.sub(c,t.ONE));if(!t.eql(t.sqr(u),r))throw new Error("Cannot find square root");return u}}return vj(n)}const xj=(n,e)=>(Vt(n,e)&$t)===$t,Aj=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Sj(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Aj.reduce((r,i)=>(r[i]="function",r),e);return E3(n,t)}function Ij(n,e,t){if(t<sn)throw new Error("invalid exponent, negatives unsupported");if(t===sn)return n.ONE;if(t===$t)return e;let r=n.ONE,i=e;for(;t>sn;)t&$t&&(r=n.mul(r,i)),i=n.sqr(i),t>>=$t;return r}function Oj(n,e){const t=new Array(e.length),r=e.reduce((s,o,c)=>n.is0(o)?s:(t[c]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,c)=>n.is0(o)?s:(t[c]=n.mul(s,t[c]),n.mul(s,o)),i),t}function bC(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function vC(n,e,t=!1,r={}){if(n<=sn)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:s}=bC(n,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const c=Object.freeze({ORDER:n,isLE:t,BITS:i,BYTES:s,MASK:yj(i),ZERO:sn,ONE:$t,create:u=>Vt(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return sn<=u&&u<n},is0:u=>u===sn,isOdd:u=>(u&$t)===$t,neg:u=>Vt(-u,n),eql:(u,f)=>u===f,sqr:u=>Vt(u*u,n),add:(u,f)=>Vt(u+f,n),sub:(u,f)=>Vt(u-f,n),mul:(u,f)=>Vt(u*f,n),pow:(u,f)=>Ij(c,u,f),div:(u,f)=>Vt(u*rI(f,n),n),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>rI(u,n),sqrt:r.sqrt||(u=>(o||(o=Ej(n)),o(c,u))),invertBatch:u=>Oj(c,u),cmov:(u,f,d)=>d?f:u,toBytes:u=>t?jv(u,s):wC(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return t?By(u):dj(u)}});return Object.freeze(c)}const iI=BigInt(0),j0=BigInt(1);function jb(n,e){const t=e.negate();return n?t:e}function EC(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function zb(n,e){EC(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function Bj(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function Pj(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const Hb=new WeakMap,xC=new WeakMap;function Vb(n){return xC.get(n)||1}function Cj(n,e){return{constTimeNegate:jb,hasPrecomputes(t){return Vb(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>iI;)r&j0&&(i=i.add(s)),s=s.double(),r>>=j0;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=zb(r,e),o=[];let c=t,u=c;for(let f=0;f<i;f++){u=c,o.push(u);for(let d=1;d<s;d++)u=u.add(c),o.push(u);c=u.double()}return o},wNAF(t,r,i){const{windows:s,windowSize:o}=zb(t,e);let c=n.ZERO,u=n.BASE;const f=BigInt(2**t-1),d=2**t,p=BigInt(t);for(let g=0;g<s;g++){const m=g*o;let v=Number(i&f);i>>=p,v>o&&(v-=d,i+=j0);const b=m,A=m+Math.abs(v)-1,N=g%2!==0,R=v<0;v===0?u=u.add(jb(N,r[b])):c=c.add(jb(R,r[A]))}return{p:c,f:u}},wNAFUnsafe(t,r,i,s=n.ZERO){const{windows:o,windowSize:c}=zb(t,e),u=BigInt(2**t-1),f=2**t,d=BigInt(t);for(let p=0;p<o;p++){const g=p*c;if(i===iI)break;let m=Number(i&u);if(i>>=d,m>c&&(m-=f,i+=j0),m===0)continue;let v=r[g+Math.abs(m)-1];m<0&&(v=v.negate()),s=s.add(v)}return s},getPrecomputes(t,r,i){let s=Hb.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&Hb.set(r,i(s))),s},wNAFCached(t,r,i){const s=Vb(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const o=Vb(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),r,s)},setWindowSize(t,r){EC(r,e),xC.set(t,r),Hb.delete(t)}}}function _j(n,e,t,r){if(Bj(t,n),Pj(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=n.ZERO,s=gj(BigInt(t.length)),o=s>12?s-3:s>4?s-2:s?2:1,c=(1<<o)-1,u=new Array(c+1).fill(i),f=Math.floor((e.BITS-1)/o)*o;let d=i;for(let p=f;p>=0;p-=o){u.fill(i);for(let m=0;m<r.length;m++){const v=r[m],b=Number(v>>BigInt(p)&BigInt(c));u[b]=u[b].add(t[m])}let g=i;for(let m=u.length-1,v=i;m>0;m--)v=v.add(u[m]),g=g.add(v);if(d=d.add(g),p!==0)for(let m=0;m<o;m++)d=d.double()}return d}function Nj(n){return Sj(n.Fp),E3(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...bC(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const Bi=BigInt(0),cr=BigInt(1),z0=BigInt(2),Dj=BigInt(8),$j={zip215:!0};function Tj(n){const e=Nj(n);return E3(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function kj(n){const e=Tj(n),{Fp:t,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:c,h:u}=e,f=z0<<BigInt(c*8)-cr,d=t.create,p=vC(e.n,e.nBitLength),g=e.uvRatio||((w,x)=>{try{return{isValid:!0,value:t.sqrt(w*t.inv(x))}}catch{return{isValid:!1,value:Bi}}}),m=e.adjustScalarBytes||(w=>w),v=e.domain||((w,x,B)=>{if(Fb("phflag",B),x.length||B)throw new Error("Contexts/pre-hash are not supported");return w});function b(w,x){Pd("coordinate "+w,x,Bi,f)}function A(w){if(!(w instanceof O))throw new Error("ExtendedPoint expected")}const N=eI((w,x)=>{const{ex:B,ey:C,ez:I}=w,_=w.is0();x==null&&(x=_?Dj:t.inv(I));const $=d(B*x),U=d(C*x),Y=d(I*x);if(_)return{x:Bi,y:cr};if(Y!==cr)throw new Error("invZ was invalid");return{x:$,y:U}}),R=eI(w=>{const{a:x,d:B}=e;if(w.is0())throw new Error("bad point: ZERO");const{ex:C,ey:I,ez:_,et:$}=w,U=d(C*C),Y=d(I*I),q=d(_*_),Z=d(q*q),te=d(U*x),re=d(q*d(te+Y)),le=d(Z+d(B*d(U*Y)));if(re!==le)throw new Error("bad point: equation left != right (1)");const ie=d(C*I),ue=d(_*$);if(ie!==ue)throw new Error("bad point: equation left != right (2)");return!0});class O{constructor(x,B,C,I){this.ex=x,this.ey=B,this.ez=C,this.et=I,b("x",x),b("y",B),b("z",C),b("t",I),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof O)throw new Error("extended point not allowed");const{x:B,y:C}=x||{};return b("x",B),b("y",C),new O(B,C,cr,d(B*C))}static normalizeZ(x){const B=t.invertBatch(x.map(C=>C.ez));return x.map((C,I)=>C.toAffine(B[I])).map(O.fromAffine)}static msm(x,B){return _j(O,p,x,B)}_setWindowSize(x){j.setWindowSize(this,x)}assertValidity(){R(this)}equals(x){A(x);const{ex:B,ey:C,ez:I}=this,{ex:_,ey:$,ez:U}=x,Y=d(B*U),q=d(_*I),Z=d(C*U),te=d($*I);return Y===q&&Z===te}is0(){return this.equals(O.ZERO)}negate(){return new O(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){const{a:x}=e,{ex:B,ey:C,ez:I}=this,_=d(B*B),$=d(C*C),U=d(z0*d(I*I)),Y=d(x*_),q=B+C,Z=d(d(q*q)-_-$),te=Y+$,re=te-U,le=Y-$,ie=d(Z*re),ue=d(te*le),Ne=d(Z*le),Re=d(re*te);return new O(ie,ue,Re,Ne)}add(x){A(x);const{a:B,d:C}=e,{ex:I,ey:_,ez:$,et:U}=this,{ex:Y,ey:q,ez:Z,et:te}=x;if(B===BigInt(-1)){const lu=d((_-I)*(q+Y)),Fo=d((_+I)*(q-Y)),es=d(Fo-lu);if(es===Bi)return this.double();const uu=d($*z0*te),Nh=d(U*z0*Z),Dh=Nh+uu,$h=Fo+lu,Th=Nh-uu,kh=d(Dh*es),fu=d($h*Th),vg=d(Dh*Th),Dc=d(es*$h);return new O(kh,fu,Dc,vg)}const re=d(I*Y),le=d(_*q),ie=d(U*C*te),ue=d($*Z),Ne=d((I+_)*(Y+q)-re-le),Re=ue-ie,Te=ue+ie,Ve=d(le-B*re),Gt=d(Ne*Re),on=d(Te*Ve),bi=d(Ne*Ve),ks=d(Re*Te);return new O(Gt,on,ks,bi)}subtract(x){return this.add(x.negate())}wNAF(x){return j.wNAFCached(this,x,O.normalizeZ)}multiply(x){const B=x;Pd("scalar",B,cr,r);const{p:C,f:I}=this.wNAF(B);return O.normalizeZ([C,I])[0]}multiplyUnsafe(x,B=O.ZERO){const C=x;return Pd("scalar",C,Bi,r),C===Bi?k:this.is0()||C===cr?this:j.wNAFCachedUnsafe(this,C,O.normalizeZ,B)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return j.unsafeLadder(this,r).is0()}toAffine(x){return N(this,x)}clearCofactor(){const{h:x}=e;return x===cr?this:this.multiplyUnsafe(x)}static fromHex(x,B=!1){const{d:C,a:I}=e,_=t.BYTES;x=qs("pointHex",x,_),Fb("zip215",B);const $=x.slice(),U=x[_-1];$[_-1]=U&-129;const Y=By($),q=B?f:t.ORDER;Pd("pointHex.y",Y,Bi,q);const Z=d(Y*Y),te=d(Z-cr),re=d(C*Z-I);let{isValid:le,value:ie}=g(te,re);if(!le)throw new Error("Point.fromHex: invalid y coordinate");const ue=(ie&cr)===cr,Ne=(U&128)!==0;if(!B&&ie===Bi&&Ne)throw new Error("Point.fromHex: x=0 and x_0=1");return Ne!==ue&&(ie=d(-ie)),O.fromAffine({x:ie,y:Y})}static fromPrivateKey(x){return M(x).point}toRawBytes(){const{x,y:B}=this.toAffine(),C=jv(B,t.BYTES);return C[C.length-1]|=x&cr?128:0,C}toHex(){return v3(this.toRawBytes())}}O.BASE=new O(e.Gx,e.Gy,cr,d(e.Gx*e.Gy)),O.ZERO=new O(Bi,cr,cr,Bi);const{BASE:T,ZERO:k}=O,j=Cj(O,c*8);function H(w){return Vt(w,r)}function V(w){return H(By(w))}function M(w){const x=t.BYTES;w=qs("private key",w,x);const B=qs("hashed private key",s(w),2*x),C=m(B.slice(0,x)),I=B.slice(x,2*x),_=V(C),$=T.multiply(_),U=$.toRawBytes();return{head:C,prefix:I,scalar:_,point:$,pointBytes:U}}function K(w){return M(w).pointBytes}function Q(w=new Uint8Array,...x){const B=XS(...x);return V(s(v(B,qs("context",w),!!i)))}function z(w,x,B={}){w=qs("message",w),i&&(w=i(w));const{prefix:C,scalar:I,pointBytes:_}=M(x),$=Q(B.context,C,w),U=T.multiply($).toRawBytes(),Y=Q(B.context,U,_,w),q=H($+Y*I);Pd("signature.s",q,Bi,r);const Z=XS(U,jv(q,t.BYTES));return qs("result",Z,t.BYTES*2)}const P=$j;function D(w,x,B,C=P){const{context:I,zip215:_}=C,$=t.BYTES;w=qs("signature",w,2*$),x=qs("message",x),B=qs("publicKey",B,$),_!==void 0&&Fb("zip215",_),i&&(x=i(x));const U=By(w.slice($,2*$));let Y,q,Z;try{Y=O.fromHex(B,_),q=O.fromHex(w.slice(0,$),_),Z=T.multiplyUnsafe(U)}catch{return!1}if(!_&&Y.isSmallOrder())return!1;const te=Q(I,q.toRawBytes(),Y.toRawBytes(),x);return q.add(Y.multiplyUnsafe(te)).subtract(Z).clearCofactor().equals(O.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:K,sign:z,verify:D,ExtendedPoint:O,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>o(t.BYTES),precompute(w=8,x=O.BASE){return x._setWindowSize(w),x.multiply(BigInt(3)),x}}}}BigInt(0),BigInt(1);const x3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),sI=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Rj=BigInt(1),oI=BigInt(2);BigInt(3);const Uj=BigInt(5),Lj=BigInt(8);function Fj(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=x3,o=n*n%s*n%s,c=cs(o,oI,s)*o%s,u=cs(c,Rj,s)*n%s,f=cs(u,Uj,s)*u%s,d=cs(f,e,s)*f%s,p=cs(d,t,s)*d%s,g=cs(p,r,s)*p%s,m=cs(g,i,s)*g%s,v=cs(m,i,s)*g%s,b=cs(v,e,s)*f%s;return{pow_p_5_8:cs(b,oI,s)*n%s,b2:o}}function Mj(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function jj(n,e){const t=x3,r=Vt(e*e*e,t),i=Vt(r*r*e,t),s=Fj(n*i).pow_p_5_8;let o=Vt(n*r*s,t);const c=Vt(e*o*o,t),u=o,f=Vt(o*sI,t),d=c===n,p=c===Vt(-n,t),g=c===Vt(-n*sI,t);return d&&(o=u),(p||g)&&(o=f),xj(o,t)&&(o=Vt(-o,t)),{isValid:d||p,value:o}}const zj=vC(x3,void 0,!0),Hj={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:zj,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Lj,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:uj,randomBytes:dC,adjustScalarBytes:Mj,uvRatio:jj},AC=kj(Hj),Vj="EdDSA",qj="JWT",Xy=".",qm="base64url",SC="utf8",IC="utf8",Kj=":",Gj="did",Wj="key",aI="base58btc",Qj="z",Zj="K36",Jj=32;function A3(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function OC(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?A3(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function BC(n,e){e||(e=n.reduce((i,s)=>i+s.length,0));const t=OC(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return A3(t)}function Yj(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var c=n.length,u=n.charAt(0),f=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function p(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var b=0,A=0,N=0,R=v.length;N!==R&&v[N]===0;)N++,b++;for(var O=(R-N)*d+1>>>0,T=new Uint8Array(O);N!==R;){for(var k=v[N],j=0,H=O-1;(k!==0||j<A)&&H!==-1;H--,j++)k+=256*T[H]>>>0,T[H]=k%c>>>0,k=k/c>>>0;if(k!==0)throw new Error("Non-zero carry");A=j,N++}for(var V=O-A;V!==O&&T[V]===0;)V++;for(var M=u.repeat(b);V<O;++V)M+=n.charAt(T[V]);return M}function g(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var b=0;if(v[b]!==" "){for(var A=0,N=0;v[b]===u;)A++,b++;for(var R=(v.length-b)*f+1>>>0,O=new Uint8Array(R);v[b];){var T=t[v.charCodeAt(b)];if(T===255)return;for(var k=0,j=R-1;(T!==0||k<N)&&j!==-1;j--,k++)T+=c*O[j]>>>0,O[j]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");N=k,b++}if(v[b]!==" "){for(var H=R-N;H!==R&&O[H]===0;)H++;for(var V=new Uint8Array(A+(R-H)),M=A;H!==R;)V[M++]=O[H++];return V}}}function m(v){var b=g(v);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:g,decode:m}}var Xj=Yj,ez=Xj;const PC=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},tz=n=>new TextEncoder().encode(n),nz=n=>new TextDecoder().decode(n);let rz=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},iz=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return CC(this,e)}},sz=class{constructor(e){this.decoders=e}or(e){return CC(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const CC=(n,e)=>new sz({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});let oz=class{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new rz(e,t,r),this.decoder=new iz(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Km=({name:n,prefix:e,encode:t,decode:r})=>new oz(n,e,t,r),ig=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=ez(t,e);return Km({prefix:n,name:e,encode:r,decode:s=>PC(i(s))})},az=(n,e,t,r)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=n.length;for(;n[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let c=0,u=0,f=0;for(let d=0;d<s;++d){const p=i[n[d]];if(p===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<t|p,c+=t,c>=8&&(c-=8,o[f++]=255&u>>c)}if(c>=t||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return o},cz=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let s="",o=0,c=0;for(let u=0;u<n.length;++u)for(c=c<<8|n[u],o+=8;o>t;)o-=t,s+=e[i&c>>o];if(o&&(s+=e[i&c<<t-o]),r)for(;s.length*t&7;)s+="=";return s},wn=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>Km({prefix:e,name:n,encode(i){return cz(i,r,t)},decode(i){return az(i,r,t,n)}}),lz=Km({prefix:"\0",name:"identity",encode:n=>nz(n),decode:n=>tz(n)});var uz=Object.freeze({__proto__:null,identity:lz});const fz=wn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var hz=Object.freeze({__proto__:null,base2:fz});const dz=wn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var pz=Object.freeze({__proto__:null,base8:dz});const gz=ig({prefix:"9",name:"base10",alphabet:"0123456789"});var yz=Object.freeze({__proto__:null,base10:gz});const mz=wn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wz=wn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var bz=Object.freeze({__proto__:null,base16:mz,base16upper:wz});const vz=wn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ez=wn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xz=wn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Az=wn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Sz=wn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Iz=wn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Oz=wn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Bz=wn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Pz=wn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Cz=Object.freeze({__proto__:null,base32:vz,base32upper:Ez,base32pad:xz,base32padupper:Az,base32hex:Sz,base32hexupper:Iz,base32hexpad:Oz,base32hexpadupper:Bz,base32z:Pz});const _z=ig({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Nz=ig({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Dz=Object.freeze({__proto__:null,base36:_z,base36upper:Nz});const $z=ig({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Tz=ig({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var kz=Object.freeze({__proto__:null,base58btc:$z,base58flickr:Tz});const Rz=wn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Uz=wn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lz=wn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fz=wn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Mz=Object.freeze({__proto__:null,base64:Rz,base64pad:Uz,base64url:Lz,base64urlpad:Fz});const _C=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),jz=_C.reduce((n,e,t)=>(n[t]=e,n),[]),zz=_C.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function Hz(n){return n.reduce((e,t)=>(e+=jz[t],e),"")}function Vz(n){const e=[];for(const t of n){const r=zz[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const qz=Km({prefix:"🚀",name:"base256emoji",encode:Hz,decode:Vz});var Kz=Object.freeze({__proto__:null,base256emoji:qz}),Gz=NC,cI=128,Wz=-128,Qz=Math.pow(2,31);function NC(n,e,t){e=e||[],t=t||0;for(var r=t;n>=Qz;)e[t++]=n&255|cI,n/=128;for(;n&Wz;)e[t++]=n&255|cI,n>>>=7;return e[t]=n|0,NC.bytes=t-r+1,e}var Zz=Hv,Jz=128,lI=127;function Hv(n,r){var t=0,r=r||0,i=0,s=r,o,c=n.length;do{if(s>=c)throw Hv.bytes=0,new RangeError("Could not decode varint");o=n[s++],t+=i<28?(o&lI)<<i:(o&lI)*Math.pow(2,i),i+=7}while(o>=Jz);return Hv.bytes=s-r,t}var Yz=Math.pow(2,7),Xz=Math.pow(2,14),eH=Math.pow(2,21),tH=Math.pow(2,28),nH=Math.pow(2,35),rH=Math.pow(2,42),iH=Math.pow(2,49),sH=Math.pow(2,56),oH=Math.pow(2,63),aH=function(n){return n<Yz?1:n<Xz?2:n<eH?3:n<tH?4:n<nH?5:n<rH?6:n<iH?7:n<sH?8:n<oH?9:10},cH={encode:Gz,decode:Zz,encodingLength:aH},DC=cH;const uI=(n,e,t=0)=>(DC.encode(n,e,t),e),fI=n=>DC.encodingLength(n),Vv=(n,e)=>{const t=e.byteLength,r=fI(n),i=r+fI(t),s=new Uint8Array(i+t);return uI(n,s,0),uI(t,s,r),s.set(e,i),new lH(n,t,e,s)};let lH=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};const $C=({name:n,code:e,encode:t})=>new uH(n,e,t);let uH=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Vv(this.code,t):t.then(r=>Vv(this.code,r))}else throw Error("Unknown type, must be binary type")}};const TC=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),fH=$C({name:"sha2-256",code:18,encode:TC("SHA-256")}),hH=$C({name:"sha2-512",code:19,encode:TC("SHA-512")});var dH=Object.freeze({__proto__:null,sha256:fH,sha512:hH});const kC=0,pH="identity",RC=PC,gH=n=>Vv(kC,RC(n)),yH={code:kC,name:pH,encode:RC,digest:gH};var mH=Object.freeze({__proto__:null,identity:yH});new TextEncoder,new TextDecoder;const hI={...uz,...hz,...pz,...yz,...bz,...Cz,...Dz,...kz,...Mz,...Kz};({...dH,...mH});function UC(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const dI=UC("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),qb=UC("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=OC(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),LC={utf8:dI,"utf-8":dI,hex:hI.base16,latin1:qb,ascii:qb,binary:qb,...hI};function Gm(n,e="utf8"){const t=LC[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}function Ph(n,e="utf8"){const t=LC[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?A3(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function pI(n){return NM(Gm(Ph(n,qm),SC))}function em(n){return Gm(Ph(DM(n),SC),qm)}function FC(n){const e=Ph(Zj,aI),t=Qj+Gm(BC([e,n]),aI);return[Gj,Wj,t].join(Kj)}function wH(n){return Gm(n,qm)}function bH(n){return Ph(n,qm)}function vH(n){return Ph([em(n.header),em(n.payload)].join(Xy),IC)}function EH(n){return[em(n.header),em(n.payload),wH(n.signature)].join(Xy)}function qv(n){const e=n.split(Xy),t=pI(e[0]),r=pI(e[1]),i=bH(e[2]),s=Ph(e.slice(0,2).join(Xy),IC);return{header:t,payload:r,signature:i,data:s}}function gI(n=dC(Jj)){const e=AC.getPublicKey(n);return{secretKey:BC([n,e]),publicKey:e}}async function xH(n,e,t,r,i=me.fromMiliseconds(Date.now())){const s={alg:Vj,typ:qj},o=FC(r.publicKey),c=i+t,u={iss:o,sub:n,aud:e,iat:i,exp:c},f=vH({header:s,payload:u}),d=AC.sign(f,r.secretKey.slice(0,32));return EH({header:s,payload:u,signature:d})}function S3(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function MC(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?S3(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function lp(n,e){e||(e=n.reduce((i,s)=>i+s.length,0));const t=MC(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return S3(t)}function AH(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var c=n.length,u=n.charAt(0),f=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function p(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var b=0,A=0,N=0,R=v.length;N!==R&&v[N]===0;)N++,b++;for(var O=(R-N)*d+1>>>0,T=new Uint8Array(O);N!==R;){for(var k=v[N],j=0,H=O-1;(k!==0||j<A)&&H!==-1;H--,j++)k+=256*T[H]>>>0,T[H]=k%c>>>0,k=k/c>>>0;if(k!==0)throw new Error("Non-zero carry");A=j,N++}for(var V=O-A;V!==O&&T[V]===0;)V++;for(var M=u.repeat(b);V<O;++V)M+=n.charAt(T[V]);return M}function g(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var b=0;if(v[b]!==" "){for(var A=0,N=0;v[b]===u;)A++,b++;for(var R=(v.length-b)*f+1>>>0,O=new Uint8Array(R);v[b];){var T=t[v.charCodeAt(b)];if(T===255)return;for(var k=0,j=R-1;(T!==0||k<N)&&j!==-1;j--,k++)T+=c*O[j]>>>0,O[j]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");N=k,b++}if(v[b]!==" "){for(var H=R-N;H!==R&&O[H]===0;)H++;for(var V=new Uint8Array(A+(R-H)),M=A;H!==R;)V[M++]=O[H++];return V}}}function m(v){var b=g(v);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:g,decode:m}}var SH=AH,IH=SH;const OH=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},BH=n=>new TextEncoder().encode(n),PH=n=>new TextDecoder().decode(n);class CH{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class _H{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jC(this,e)}}class NH{constructor(e){this.decoders=e}or(e){return jC(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const jC=(n,e)=>new NH({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class DH{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new CH(e,t,r),this.decoder=new _H(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Wm=({name:n,prefix:e,encode:t,decode:r})=>new DH(n,e,t,r),sg=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=IH(t,e);return Wm({prefix:n,name:e,encode:r,decode:s=>OH(i(s))})},$H=(n,e,t,r)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=n.length;for(;n[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let c=0,u=0,f=0;for(let d=0;d<s;++d){const p=i[n[d]];if(p===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<t|p,c+=t,c>=8&&(c-=8,o[f++]=255&u>>c)}if(c>=t||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return o},TH=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let s="",o=0,c=0;for(let u=0;u<n.length;++u)for(c=c<<8|n[u],o+=8;o>t;)o-=t,s+=e[i&c>>o];if(o&&(s+=e[i&c<<t-o]),r)for(;s.length*t&7;)s+="=";return s},bn=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>Wm({prefix:e,name:n,encode(i){return TH(i,r,t)},decode(i){return $H(i,r,t,n)}}),kH=Wm({prefix:"\0",name:"identity",encode:n=>PH(n),decode:n=>BH(n)}),RH=Object.freeze(Object.defineProperty({__proto__:null,identity:kH},Symbol.toStringTag,{value:"Module"})),UH=bn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),LH=Object.freeze(Object.defineProperty({__proto__:null,base2:UH},Symbol.toStringTag,{value:"Module"})),FH=bn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),MH=Object.freeze(Object.defineProperty({__proto__:null,base8:FH},Symbol.toStringTag,{value:"Module"})),jH=sg({prefix:"9",name:"base10",alphabet:"0123456789"}),zH=Object.freeze(Object.defineProperty({__proto__:null,base10:jH},Symbol.toStringTag,{value:"Module"})),HH=bn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),VH=bn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),qH=Object.freeze(Object.defineProperty({__proto__:null,base16:HH,base16upper:VH},Symbol.toStringTag,{value:"Module"})),KH=bn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),GH=bn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),WH=bn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),QH=bn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ZH=bn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),JH=bn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),YH=bn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),XH=bn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eV=bn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),tV=Object.freeze(Object.defineProperty({__proto__:null,base32:KH,base32hex:ZH,base32hexpad:YH,base32hexpadupper:XH,base32hexupper:JH,base32pad:WH,base32padupper:QH,base32upper:GH,base32z:eV},Symbol.toStringTag,{value:"Module"})),nV=sg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rV=sg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),iV=Object.freeze(Object.defineProperty({__proto__:null,base36:nV,base36upper:rV},Symbol.toStringTag,{value:"Module"})),sV=sg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),oV=sg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),aV=Object.freeze(Object.defineProperty({__proto__:null,base58btc:sV,base58flickr:oV},Symbol.toStringTag,{value:"Module"})),cV=bn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),lV=bn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uV=bn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),fV=bn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),hV=Object.freeze(Object.defineProperty({__proto__:null,base64:cV,base64pad:lV,base64url:uV,base64urlpad:fV},Symbol.toStringTag,{value:"Module"})),zC=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),dV=zC.reduce((n,e,t)=>(n[t]=e,n),[]),pV=zC.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function gV(n){return n.reduce((e,t)=>(e+=dV[t],e),"")}function yV(n){const e=[];for(const t of n){const r=pV[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const mV=Wm({prefix:"🚀",name:"base256emoji",encode:gV,decode:yV}),wV=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:mV},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const yI={...RH,...LH,...MH,...zH,...qH,...tV,...iV,...aV,...hV,...wV};function HC(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const mI=HC("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Kb=HC("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=MC(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),VC={utf8:mI,"utf-8":mI,hex:yI.base16,latin1:Kb,ascii:Kb,binary:Kb,...yI};function mi(n,e="utf8"){const t=VC[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?S3(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function Or(n,e="utf8"){const t=VC[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}const bV={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Gb,wI;function qC(){if(wI)return Gb;wI=1;const n="Input must be an string, Buffer or Uint8Array";function e(o){let c;if(o instanceof Uint8Array)c=o;else if(typeof o=="string")c=new TextEncoder().encode(o);else throw new Error(n);return c}function t(o){return Array.prototype.map.call(o,function(c){return(c<16?"0":"")+c.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function i(o,c,u){let f=`
`+o+" = ";for(let d=0;d<c.length;d+=2){if(u===32)f+=r(c[d]).toUpperCase(),f+=" ",f+=r(c[d+1]).toUpperCase();else if(u===64)f+=r(c[d+1]).toUpperCase(),f+=r(c[d]).toUpperCase();else throw new Error("Invalid size "+u);d%6===4?f+=`
`+new Array(o.length+4).join(" "):d<c.length-2&&(f+=" ")}console.log(f)}function s(o,c,u){let f=new Date().getTime();const d=new Uint8Array(c);for(let g=0;g<c;g++)d[g]=g%256;const p=new Date().getTime();console.log("Generated random input in "+(p-f)+"ms"),f=p;for(let g=0;g<u;g++){const m=o(d),v=new Date().getTime(),b=v-f;f=v,console.log("Hashed in "+b+"ms: "+m.substring(0,20)+"..."),console.log(Math.round(c/(1<<20)/(b/1e3)*100)/100+" MB PER SECOND")}}return Gb={normalizeInput:e,toHex:t,debugPrint:i,testSpeed:s},Gb}var Wb,bI;function vV(){if(bI)return Wb;bI=1;const n=qC();function e(N,R,O){const T=N[R]+N[O];let k=N[R+1]+N[O+1];T>=4294967296&&k++,N[R]=T,N[R+1]=k}function t(N,R,O,T){let k=N[R]+O;O<0&&(k+=4294967296);let j=N[R+1]+T;k>=4294967296&&j++,N[R]=k,N[R+1]=j}function r(N,R){return N[R]^N[R+1]<<8^N[R+2]<<16^N[R+3]<<24}function i(N,R,O,T,k,j){const H=f[k],V=f[k+1],M=f[j],K=f[j+1];e(u,N,R),t(u,N,H,V);let Q=u[T]^u[N],z=u[T+1]^u[N+1];u[T]=z,u[T+1]=Q,e(u,O,T),Q=u[R]^u[O],z=u[R+1]^u[O+1],u[R]=Q>>>24^z<<8,u[R+1]=z>>>24^Q<<8,e(u,N,R),t(u,N,M,K),Q=u[T]^u[N],z=u[T+1]^u[N+1],u[T]=Q>>>16^z<<16,u[T+1]=z>>>16^Q<<16,e(u,O,T),Q=u[R]^u[O],z=u[R+1]^u[O+1],u[R]=z>>>31^Q<<1,u[R+1]=Q>>>31^z<<1}const s=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],c=new Uint8Array(o.map(function(N){return N*2})),u=new Uint32Array(32),f=new Uint32Array(32);function d(N,R){let O=0;for(O=0;O<16;O++)u[O]=N.h[O],u[O+16]=s[O];for(u[24]=u[24]^N.t,u[25]=u[25]^N.t/4294967296,R&&(u[28]=~u[28],u[29]=~u[29]),O=0;O<32;O++)f[O]=r(N.b,4*O);for(O=0;O<12;O++)i(0,8,16,24,c[O*16+0],c[O*16+1]),i(2,10,18,26,c[O*16+2],c[O*16+3]),i(4,12,20,28,c[O*16+4],c[O*16+5]),i(6,14,22,30,c[O*16+6],c[O*16+7]),i(0,10,20,30,c[O*16+8],c[O*16+9]),i(2,12,22,24,c[O*16+10],c[O*16+11]),i(4,14,16,26,c[O*16+12],c[O*16+13]),i(6,8,18,28,c[O*16+14],c[O*16+15]);for(O=0;O<16;O++)N.h[O]=N.h[O]^u[O]^u[O+16]}const p=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function g(N,R,O,T){if(N===0||N>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(R&&R.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(O&&O.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(T&&T.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const k={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:N};p.fill(0),p[0]=N,R&&(p[1]=R.length),p[2]=1,p[3]=1,O&&p.set(O,32),T&&p.set(T,48);for(let j=0;j<16;j++)k.h[j]=s[j]^r(p,j*4);return R&&(m(k,R),k.c=128),k}function m(N,R){for(let O=0;O<R.length;O++)N.c===128&&(N.t+=N.c,d(N,!1),N.c=0),N.b[N.c++]=R[O]}function v(N){for(N.t+=N.c;N.c<128;)N.b[N.c++]=0;d(N,!0);const R=new Uint8Array(N.outlen);for(let O=0;O<N.outlen;O++)R[O]=N.h[O>>2]>>8*(O&3);return R}function b(N,R,O,T,k){O=O||64,N=n.normalizeInput(N),T&&(T=n.normalizeInput(T)),k&&(k=n.normalizeInput(k));const j=g(O,R,T,k);return m(j,N),v(j)}function A(N,R,O,T,k){const j=b(N,R,O,T,k);return n.toHex(j)}return Wb={blake2b:b,blake2bHex:A,blake2bInit:g,blake2bUpdate:m,blake2bFinal:v},Wb}var Qb,vI;function EV(){if(vI)return Qb;vI=1;const n=qC();function e(v,b){return v[b]^v[b+1]<<8^v[b+2]<<16^v[b+3]<<24}function t(v,b,A,N,R,O){o[v]=o[v]+o[b]+R,o[N]=r(o[N]^o[v],16),o[A]=o[A]+o[N],o[b]=r(o[b]^o[A],12),o[v]=o[v]+o[b]+O,o[N]=r(o[N]^o[v],8),o[A]=o[A]+o[N],o[b]=r(o[b]^o[A],7)}function r(v,b){return v>>>b^v<<32-b}const i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),s=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),c=new Uint32Array(16);function u(v,b){let A=0;for(A=0;A<8;A++)o[A]=v.h[A],o[A+8]=i[A];for(o[12]^=v.t,o[13]^=v.t/4294967296,b&&(o[14]=~o[14]),A=0;A<16;A++)c[A]=e(v.b,4*A);for(A=0;A<10;A++)t(0,4,8,12,c[s[A*16+0]],c[s[A*16+1]]),t(1,5,9,13,c[s[A*16+2]],c[s[A*16+3]]),t(2,6,10,14,c[s[A*16+4]],c[s[A*16+5]]),t(3,7,11,15,c[s[A*16+6]],c[s[A*16+7]]),t(0,5,10,15,c[s[A*16+8]],c[s[A*16+9]]),t(1,6,11,12,c[s[A*16+10]],c[s[A*16+11]]),t(2,7,8,13,c[s[A*16+12]],c[s[A*16+13]]),t(3,4,9,14,c[s[A*16+14]],c[s[A*16+15]]);for(A=0;A<8;A++)v.h[A]^=o[A]^o[A+8]}function f(v,b){if(!(v>0&&v<=32))throw new Error("Incorrect output length, should be in [1, 32]");const A=b?b.length:0;if(b&&!(A>0&&A<=32))throw new Error("Incorrect key length, should be in [1, 32]");const N={h:new Uint32Array(i),b:new Uint8Array(64),c:0,t:0,outlen:v};return N.h[0]^=16842752^A<<8^v,A>0&&(d(N,b),N.c=64),N}function d(v,b){for(let A=0;A<b.length;A++)v.c===64&&(v.t+=v.c,u(v,!1),v.c=0),v.b[v.c++]=b[A]}function p(v){for(v.t+=v.c;v.c<64;)v.b[v.c++]=0;u(v,!0);const b=new Uint8Array(v.outlen);for(let A=0;A<v.outlen;A++)b[A]=v.h[A>>2]>>8*(A&3)&255;return b}function g(v,b,A){A=A||32,v=n.normalizeInput(v);const N=f(A,b);return d(N,v),p(N)}function m(v,b,A){const N=g(v,b,A);return n.toHex(N)}return Qb={blake2s:g,blake2sHex:m,blake2sInit:f,blake2sUpdate:d,blake2sFinal:p},Qb}var Zb,EI;function xV(){if(EI)return Zb;EI=1;const n=vV(),e=EV();return Zb={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},Zb}var AV=xV(),Cd={exports:{}},Jb,xI;function SV(){if(xI)return Jb;xI=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Jb=e;function e(t,r,i){var s=i&&i.stringify||n,o=1;if(typeof t=="object"&&t!==null){var c=r.length+o;if(c===1)return t;var u=new Array(c);u[0]=s(t);for(var f=1;f<c;f++)u[f]=s(r[f]);return u.join(" ")}if(typeof t!="string")return t;var d=r.length;if(d===0)return t;for(var p="",g=1-o,m=-1,v=t&&t.length||0,b=0;b<v;){if(t.charCodeAt(b)===37&&b+1<v){switch(m=m>-1?m:0,t.charCodeAt(b+1)){case 100:case 102:if(g>=d||r[g]==null)break;m<b&&(p+=t.slice(m,b)),p+=Number(r[g]),m=b+2,b++;break;case 105:if(g>=d||r[g]==null)break;m<b&&(p+=t.slice(m,b)),p+=Math.floor(Number(r[g])),m=b+2,b++;break;case 79:case 111:case 106:if(g>=d||r[g]===void 0)break;m<b&&(p+=t.slice(m,b));var A=typeof r[g];if(A==="string"){p+="'"+r[g]+"'",m=b+2,b++;break}if(A==="function"){p+=r[g].name||"<anonymous>",m=b+2,b++;break}p+=s(r[g]),m=b+2,b++;break;case 115:if(g>=d)break;m<b&&(p+=t.slice(m,b)),p+=String(r[g]),m=b+2,b++;break;case 37:m<b&&(p+=t.slice(m,b)),p+="%",m=b+2,b++,g--;break}++g}++b}return m===-1?t:(m<v&&(p+=t.slice(m)),p)}return Jb}var AI;function IV(){if(AI)return Cd.exports;AI=1;const n=SV();Cd.exports=d;const e=D().console||{},t={mapHttpRequest:H,mapHttpResponse:H,wrapRequestSerializer:V,wrapResponseSerializer:V,wrapErrorSerializer:V,req:H,res:H,err:k,errWithCause:k};function r(w,x){return w==="silent"?1/0:x.levels.values[w]}const i=Symbol("pino.logFuncs"),s=Symbol("pino.hierarchy"),o={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(w,x){const B={logger:x,parent:w[s]};x[s]=B}function u(w,x,B){const C={};x.forEach(I=>{C[I]=B[I]?B[I]:e[I]||e[o[I]||"log"]||M}),w[i]=C}function f(w,x){return Array.isArray(w)?w.filter(function(C){return C!=="!stdSerializers.err"}):w===!0?Object.keys(x):!1}function d(w){w=w||{},w.browser=w.browser||{};const x=w.browser.transmit;if(x&&typeof x.send!="function")throw Error("pino: transmit option must have a send function");const B=w.browser.write||e;w.browser.write&&(w.browser.asObject=!0);const C=w.serializers||{},I=f(w.browser.serialize,C);let _=w.browser.serialize;Array.isArray(w.browser.serialize)&&w.browser.serialize.indexOf("!stdSerializers.err")>-1&&(_=!1);const $=Object.keys(w.customLevels||{}),U=["error","fatal","warn","info","debug","trace"].concat($);typeof B=="function"&&U.forEach(function(ue){B[ue]=B}),(w.enabled===!1||w.browser.disabled)&&(w.level="silent");const Y=w.level||"info",q=Object.create(B);q.log||(q.log=M),u(q,U,B),c({},q),Object.defineProperty(q,"levelVal",{get:te}),Object.defineProperty(q,"level",{get:re,set:le});const Z={transmit:x,serialize:I,asObject:w.browser.asObject,asObjectBindingsOnly:w.browser.asObjectBindingsOnly,formatters:w.browser.formatters,levels:U,timestamp:j(w),messageKey:w.messageKey||"msg",onChild:w.onChild||M};q.levels=p(w),q.level=Y,q.isLevelEnabled=function(ue){return this.levels.values[ue]?this.levels.values[ue]>=this.levels.values[this.level]:!1},q.setMaxListeners=q.getMaxListeners=q.emit=q.addListener=q.on=q.prependListener=q.once=q.prependOnceListener=q.removeListener=q.removeAllListeners=q.listeners=q.listenerCount=q.eventNames=q.write=q.flush=M,q.serializers=C,q._serialize=I,q._stdErrSerialize=_,q.child=function(...ue){return ie.call(this,Z,...ue)},x&&(q._logEvent=T());function te(){return r(this.level,this)}function re(){return this._level}function le(ue){if(ue!=="silent"&&!this.levels.values[ue])throw Error("unknown level "+ue);this._level=ue,v(this,Z,q,"error"),v(this,Z,q,"fatal"),v(this,Z,q,"warn"),v(this,Z,q,"info"),v(this,Z,q,"debug"),v(this,Z,q,"trace"),$.forEach(Ne=>{v(this,Z,q,Ne)})}function ie(ue,Ne,Re){if(!Ne)throw new Error("missing bindings for child Pino");Re=Re||{},I&&Ne.serializers&&(Re.serializers=Ne.serializers);const Te=Re.serializers;if(I&&Te){var Ve=Object.assign({},C,Te),Gt=w.browser.serialize===!0?Object.keys(Ve):I;delete Ne.serializers,R([Ne],Gt,Ve,this._stdErrSerialize)}function on(ks){this._childLevel=(ks._childLevel|0)+1,this.bindings=Ne,Ve&&(this.serializers=Ve,this._serialize=Gt),x&&(this._logEvent=T([].concat(ks._logEvent.bindings,Ne)))}on.prototype=this;const bi=new on(this);return c(this,bi),bi.child=function(...ks){return ie.call(this,ue,...ks)},bi.level=Re.level||this.level,ue.onChild(bi),bi}return q}function p(w){const x=w.customLevels||{},B=Object.assign({},d.levels.values,x),C=Object.assign({},d.levels.labels,g(x));return{values:B,labels:C}}function g(w){const x={};return Object.keys(w).forEach(function(B){x[w[B]]=B}),x}d.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},d.stdSerializers=t,d.stdTimeFunctions=Object.assign({},{nullTime:K,epochTime:Q,unixTime:z,isoTime:P});function m(w){const x=[];w.bindings&&x.push(w.bindings);let B=w[s];for(;B.parent;)B=B.parent,B.logger.bindings&&x.push(B.logger.bindings);return x.reverse()}function v(w,x,B,C){if(Object.defineProperty(w,C,{value:r(w.level,B)>r(C,B)?M:B[i][C],writable:!0,enumerable:!0,configurable:!0}),w[C]===M){if(!x.transmit)return;const _=x.transmit.level||w.level,$=r(_,B);if(r(C,B)<$)return}w[C]=A(w,x,B,C);const I=m(w);I.length!==0&&(w[C]=b(I,w[C]))}function b(w,x){return function(){return x.apply(this,[...w,...arguments])}}function A(w,x,B,C){return(function(I){return function(){const $=x.timestamp(),U=new Array(arguments.length),Y=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var q=0;q<U.length;q++)U[q]=arguments[q];var Z=!1;if(x.serialize&&(R(U,this._serialize,this.serializers,this._stdErrSerialize),Z=!0),x.asObject||x.formatters?I.call(Y,...N(this,C,U,$,x)):I.apply(Y,U),x.transmit){const te=x.transmit.level||w._level,re=r(te,B),le=r(C,B);if(le<re)return;O(this,{ts:$,methodLevel:C,methodValue:le,transmitValue:B.levels.values[x.transmit.level||w._level],send:x.transmit.send,val:r(w._level,B)},U,Z)}}})(w[i][C])}function N(w,x,B,C,I){const{level:_,log:$=te=>te}=I.formatters||{},U=B.slice();let Y=U[0];const q={};let Z=(w._childLevel|0)+1;if(Z<1&&(Z=1),C&&(q.time=C),_){const te=_(x,w.levels.values[x]);Object.assign(q,te)}else q.level=w.levels.values[x];if(I.asObjectBindingsOnly){if(Y!==null&&typeof Y=="object")for(;Z--&&typeof U[0]=="object";)Object.assign(q,U.shift());return[$(q),...U]}else{if(Y!==null&&typeof Y=="object"){for(;Z--&&typeof U[0]=="object";)Object.assign(q,U.shift());Y=U.length?n(U.shift(),U):void 0}else typeof Y=="string"&&(Y=n(U.shift(),U));return Y!==void 0&&(q[I.messageKey]=Y),[$(q)]}}function R(w,x,B,C){for(const I in w)if(C&&w[I]instanceof Error)w[I]=d.stdSerializers.err(w[I]);else if(typeof w[I]=="object"&&!Array.isArray(w[I])&&x)for(const _ in w[I])x.indexOf(_)>-1&&_ in B&&(w[I][_]=B[_](w[I][_]))}function O(w,x,B,C=!1){const I=x.send,_=x.ts,$=x.methodLevel,U=x.methodValue,Y=x.val,q=w._logEvent.bindings;C||R(B,w._serialize||Object.keys(w.serializers),w.serializers,w._stdErrSerialize===void 0?!0:w._stdErrSerialize),w._logEvent.ts=_,w._logEvent.messages=B.filter(function(Z){return q.indexOf(Z)===-1}),w._logEvent.level.label=$,w._logEvent.level.value=U,I($,w._logEvent,Y),w._logEvent=T(q)}function T(w){return{ts:0,messages:[],bindings:w||[],level:{label:"",value:0}}}function k(w){const x={type:w.constructor.name,msg:w.message,stack:w.stack};for(const B in w)x[B]===void 0&&(x[B]=w[B]);return x}function j(w){return typeof w.timestamp=="function"?w.timestamp:w.timestamp===!1?K:Q}function H(){return{}}function V(w){return w}function M(){}function K(){return!1}function Q(){return Date.now()}function z(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function D(){function w(x){return typeof x<"u"&&x}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return w(self)||w(window)||w(this)||{}}}return Cd.exports.default=d,Cd.exports.pino=d,Cd.exports}var ef=IV();const KC=Jp(ef),OV=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t);function SI(n){return typeof n=="string"?n:OV(n)||""}const BV={level:"info"},Qm="custom_context",I3=1e3*1024;var PV=Object.defineProperty,CV=(n,e,t)=>e in n?PV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Va=(n,e,t)=>CV(n,typeof e!="symbol"?e+"":e,t);let _V=class{constructor(e){Va(this,"nodeValue"),Va(this,"sizeInBytes"),Va(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},II=class{constructor(e){Va(this,"lengthInNodes"),Va(this,"sizeInBytes"),Va(this,"head"),Va(this,"tail"),Va(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new _V(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}};var NV=Object.defineProperty,DV=(n,e,t)=>e in n?NV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H0=(n,e,t)=>DV(n,typeof e!="symbol"?e+"":e,t);let GC=class{constructor(e,t=I3){H0(this,"logs"),H0(this,"level"),H0(this,"levelValue"),H0(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=ef.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new II(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===ef.levels.values.error?console.error(e):t===ef.levels.values.warn?console.warn(e):t===ef.levels.values.debug?console.debug(e):t===ef.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(SI({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new II(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(SI({extraMetadata:e})),new Blob(t,{type:"application/json"})}};var $V=Object.defineProperty,TV=(n,e,t)=>e in n?$V(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kV=(n,e,t)=>TV(n,e+"",t);let RV=class{constructor(e,t=I3){kV(this,"baseChunkLogger"),this.baseChunkLogger=new GC(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}};var UV=Object.defineProperty,LV=(n,e,t)=>e in n?UV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,FV=(n,e,t)=>LV(n,e+"",t);let MV=class{constructor(e,t=I3){FV(this,"baseChunkLogger"),this.baseChunkLogger=new GC(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var jV=Object.defineProperty,zV=Object.defineProperties,HV=Object.getOwnPropertyDescriptors,OI=Object.getOwnPropertySymbols,VV=Object.prototype.hasOwnProperty,qV=Object.prototype.propertyIsEnumerable,BI=(n,e,t)=>e in n?jV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tm=(n,e)=>{for(var t in e||(e={}))VV.call(e,t)&&BI(n,t,e[t]);if(OI)for(var t of OI(e))qV.call(e,t)&&BI(n,t,e[t]);return n},nm=(n,e)=>zV(n,HV(e));function KV(n){return nm(tm({},n),{level:(n==null?void 0:n.level)||BV.level})}function GV(n,e,t=Qm){return n[t]=e,n}function Pr(n,e=Qm){return n[e]||""}function WV(n,e,t=Qm){const r=Pr(n,t);return r.trim()?`${r}/${e}`:e}function Wr(n,e,t=Qm){const r=WV(n,e,t),i=n.child({context:r});return GV(i,r,t)}function QV(n){var e,t;const r=new RV((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:KC(nm(tm({},n.opts),{level:"trace",browser:nm(tm({},(t=n.opts)==null?void 0:t.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function ZV(n){var e;const t=new MV((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:KC(nm(tm({},n.opts),{level:"trace"}),t),chunkLoggerController:t}}function O3(n){return typeof n.loggerOverride<"u"&&typeof n.loggerOverride!="string"?{logger:n.loggerOverride,chunkLoggerController:null}:typeof window<"u"?QV(n):ZV(n)}function PI(n,e=[]){const t=[];return Object.keys(n).forEach(r=>{if(e.length&&!e.includes(r))return;const i=n[r];t.push(...i.accounts)}),t}const V0=BigInt(2**32-1),CI=BigInt(32);function WC(n,e=!1){return e?{h:Number(n&V0),l:Number(n>>CI&V0)}:{h:Number(n>>CI&V0)|0,l:Number(n&V0)|0}}function QC(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:c}=WC(n[s],e);[r[s],i[s]]=[o,c]}return[r,i]}const _I=(n,e,t)=>n>>>t,NI=(n,e,t)=>n<<32-t|e>>>t,Ta=(n,e,t)=>n>>>t|e<<32-t,ka=(n,e,t)=>n<<32-t|e>>>t,Yd=(n,e,t)=>n<<64-t|e>>>t-32,Xd=(n,e,t)=>n>>>t-32|e<<64-t,JV=(n,e)=>e,YV=(n,e)=>n,XV=(n,e,t)=>n<<t|e>>>32-t,eq=(n,e,t)=>e<<t|n>>>32-t,tq=(n,e,t)=>e<<t-32|n>>>64-t,nq=(n,e,t)=>n<<t-32|e>>>64-t;function $i(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const B3=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),P3=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,rq=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),iq=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,sq=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),oq=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Mu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Zm(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function vc(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Wi(n,...e){if(!Zm(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function ZC(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");vc(n.outputLen),vc(n.blockLen)}function Ec(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function C3(n,e){Wi(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Cp(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Qi(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function Yb(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function ls(n,e){return n<<32-e|n>>>e}const JC=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function YC(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const Xs=JC?n=>n:n=>YC(n);function aq(n){for(let e=0;e<n.length;e++)n[e]=YC(n[e]);return n}const Ra=JC?n=>n:aq,XC=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",cq=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function gf(n){if(Wi(n),XC)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=cq[n[t]];return e}const Ks={_0:48,_9:57,A:65,F:70,a:97,f:102};function DI(n){if(n>=Ks._0&&n<=Ks._9)return n-Ks._0;if(n>=Ks.A&&n<=Ks.F)return n-(Ks.A-10);if(n>=Ks.a&&n<=Ks.f)return n-(Ks.a-10)}function rm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(XC)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=DI(n.charCodeAt(s)),c=DI(n.charCodeAt(s+1));if(o===void 0||c===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+c}return r}function e_(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function No(n){return typeof n=="string"&&(n=e_(n)),Wi(n),n}function qa(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];Wi(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}let Jm=class{};function og(n){const e=r=>n().update(No(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function lq(n){const e=(r,i)=>n(i).update(No(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function _3(n=32){if(Mu&&typeof Mu.getRandomValues=="function")return Mu.getRandomValues(new Uint8Array(n));if(Mu&&typeof Mu.randomBytes=="function")return Uint8Array.from(Mu.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const uq=BigInt(0),_d=BigInt(1),fq=BigInt(2),hq=BigInt(7),dq=BigInt(256),pq=BigInt(113),t_=[],n_=[],r_=[];for(let n=0,e=_d,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],t_.push(2*(5*r+t)),n_.push((n+1)*(n+2)/2%64);let i=uq;for(let s=0;s<7;s++)e=(e<<_d^(e>>hq)*pq)%dq,e&fq&&(i^=_d<<(_d<<BigInt(s))-_d);r_.push(i)}const i_=QC(r_,!0),gq=i_[0],yq=i_[1],$I=(n,e,t)=>t>32?tq(n,e,t):XV(n,e,t),TI=(n,e,t)=>t>32?nq(n,e,t):eq(n,e,t);function mq(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=t[u],d=t[u+1],p=$I(f,d,1)^t[c],g=TI(f,d,1)^t[c+1];for(let m=0;m<50;m+=10)n[o+m]^=p,n[o+m+1]^=g}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=n_[o],u=$I(i,s,c),f=TI(i,s,c),d=t_[o];i=n[d],s=n[d+1],n[d]=u,n[d+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=gq[r],n[1]^=yq[r]}Qi(t)}let wq=class s_ extends Jm{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,vc(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Cp(this.state)}clone(){return this._cloneInto()}keccak(){Ra(this.state32),mq(this.state32,this.rounds),Ra(this.state32),this.posOut=0,this.pos=0}update(e){Ec(this),e=No(e),Wi(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ec(this,!1),Wi(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return vc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(C3(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Qi(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new s_(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const bq=(n,e,t)=>og(()=>new wq(e,n,t));bq(1,136,256/8);function vq(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}function Eq(n,e,t){return n&e^~n&t}function xq(n,e,t){return n&e^n&t^e&t}let o_=class extends Jm{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Yb(this.buffer)}update(e){Ec(this),e=No(e),Wi(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=Yb(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ec(this),C3(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,Qi(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let p=o;p<i;p++)t[p]=0;vq(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=Yb(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)c.setUint32(4*p,d[p],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=c,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const da=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),In=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),On=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Aq=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pa=new Uint32Array(64);let Sq=class extends o_{constructor(e=32){super(64,e,8,!1),this.A=da[0]|0,this.B=da[1]|0,this.C=da[2]|0,this.D=da[3]|0,this.E=da[4]|0,this.F=da[5]|0,this.G=da[6]|0,this.H=da[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let p=0;p<16;p++,t+=4)pa[p]=e.getUint32(t,!1);for(let p=16;p<64;p++){const g=pa[p-15],m=pa[p-2],v=ls(g,7)^ls(g,18)^g>>>3,b=ls(m,17)^ls(m,19)^m>>>10;pa[p]=b+pa[p-7]+v+pa[p-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:d}=this;for(let p=0;p<64;p++){const g=ls(c,6)^ls(c,11)^ls(c,25),m=d+g+Eq(c,u,f)+Aq[p]+pa[p]|0,v=(ls(r,2)^ls(r,13)^ls(r,22))+xq(r,i,s)|0;d=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,i,s,o,c,u,f,d)}roundClean(){Qi(pa)}destroy(){this.set(0,0,0,0,0,0,0,0),Qi(this.buffer)}};const a_=QC(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Iq=a_[0],Oq=a_[1],ga=new Uint32Array(80),ya=new Uint32Array(80);let N3=class extends o_{constructor(e=64){super(128,e,16,!1),this.Ah=On[0]|0,this.Al=On[1]|0,this.Bh=On[2]|0,this.Bl=On[3]|0,this.Ch=On[4]|0,this.Cl=On[5]|0,this.Dh=On[6]|0,this.Dl=On[7]|0,this.Eh=On[8]|0,this.El=On[9]|0,this.Fh=On[10]|0,this.Fl=On[11]|0,this.Gh=On[12]|0,this.Gl=On[13]|0,this.Hh=On[14]|0,this.Hl=On[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:f,El:d,Fh:p,Fl:g,Gh:m,Gl:v,Hh:b,Hl:A}=this;return[e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=d|0,this.Fh=p|0,this.Fl=g|0,this.Gh=m|0,this.Gl=v|0,this.Hh=b|0,this.Hl=A|0}process(e,t){for(let O=0;O<16;O++,t+=4)ga[O]=e.getUint32(t),ya[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const T=ga[O-15]|0,k=ya[O-15]|0,j=Ta(T,k,1)^Ta(T,k,8)^_I(T,k,7),H=ka(T,k,1)^ka(T,k,8)^NI(T,k,7),V=ga[O-2]|0,M=ya[O-2]|0,K=Ta(V,M,19)^Yd(V,M,61)^_I(V,M,6),Q=ka(V,M,19)^Xd(V,M,61)^NI(V,M,6),z=rq(H,Q,ya[O-7],ya[O-16]),P=iq(z,j,K,ga[O-7],ga[O-16]);ga[O]=P|0,ya[O]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:f,Dl:d,Eh:p,El:g,Fh:m,Fl:v,Gh:b,Gl:A,Hh:N,Hl:R}=this;for(let O=0;O<80;O++){const T=Ta(p,g,14)^Ta(p,g,18)^Yd(p,g,41),k=ka(p,g,14)^ka(p,g,18)^Xd(p,g,41),j=p&m^~p&b,H=g&v^~g&A,V=sq(R,k,H,Oq[O],ya[O]),M=oq(V,N,T,j,Iq[O],ga[O]),K=V|0,Q=Ta(r,i,28)^Yd(r,i,34)^Yd(r,i,39),z=ka(r,i,28)^Xd(r,i,34)^Xd(r,i,39),P=r&s^r&c^s&c,D=i&o^i&u^o&u;N=b|0,R=A|0,b=m|0,A=v|0,m=p|0,v=g|0,{h:p,l:g}=$i(f|0,d|0,M|0,K|0),f=c|0,d=u|0,c=s|0,u=o|0,s=r|0,o=i|0;const w=B3(K,z,D);r=P3(w,M,Q,P),i=w|0}({h:r,l:i}=$i(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=$i(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=$i(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:d}=$i(this.Dh|0,this.Dl|0,f|0,d|0),{h:p,l:g}=$i(this.Eh|0,this.El|0,p|0,g|0),{h:m,l:v}=$i(this.Fh|0,this.Fl|0,m|0,v|0),{h:b,l:A}=$i(this.Gh|0,this.Gl|0,b|0,A|0),{h:N,l:R}=$i(this.Hh|0,this.Hl|0,N|0,R|0),this.set(r,i,s,o,c,u,f,d,p,g,m,v,b,A,N,R)}roundClean(){Qi(ga,ya)}destroy(){Qi(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Bq=class extends N3{constructor(){super(48),this.Ah=In[0]|0,this.Al=In[1]|0,this.Bh=In[2]|0,this.Bl=In[3]|0,this.Ch=In[4]|0,this.Cl=In[5]|0,this.Dh=In[6]|0,this.Dl=In[7]|0,this.Eh=In[8]|0,this.El=In[9]|0,this.Fh=In[10]|0,this.Fl=In[11]|0,this.Gh=In[12]|0,this.Gl=In[13]|0,this.Hh=In[14]|0,this.Hl=In[15]|0}};const Bn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let Pq=class extends N3{constructor(){super(32),this.Ah=Bn[0]|0,this.Al=Bn[1]|0,this.Bh=Bn[2]|0,this.Bl=Bn[3]|0,this.Ch=Bn[4]|0,this.Cl=Bn[5]|0,this.Dh=Bn[6]|0,this.Dl=Bn[7]|0,this.Eh=Bn[8]|0,this.El=Bn[9]|0,this.Fh=Bn[10]|0,this.Fl=Bn[11]|0,this.Gh=Bn[12]|0,this.Gl=Bn[13]|0,this.Hh=Bn[14]|0,this.Hl=Bn[15]|0}};const Cq=og(()=>new Sq),_q=og(()=>new N3),Nq=og(()=>new Bq);og(()=>new Pq);const Dq=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Mt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ve=new Uint32Array(32);function ma(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=ve[2*n],f=ve[2*n+1],d=ve[2*e],p=ve[2*e+1],g=ve[2*t],m=ve[2*t+1],v=ve[2*r],b=ve[2*r+1],A=B3(u,d,o);f=P3(A,f,p,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:JV(b,v),Dl:YV(b)},{h:m,l:g}=$i(m,g,b,v),{Bh:p,Bl:d}={Bh:p^m,Bl:d^g},{Bh:p,Bl:d}={Bh:Ta(p,d,24),Bl:ka(p,d,24)},ve[2*n]=u,ve[2*n+1]=f,ve[2*e]=d,ve[2*e+1]=p,ve[2*t]=g,ve[2*t+1]=m,ve[2*r]=v,ve[2*r+1]=b}function wa(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=ve[2*n],f=ve[2*n+1],d=ve[2*e],p=ve[2*e+1],g=ve[2*t],m=ve[2*t+1],v=ve[2*r],b=ve[2*r+1],A=B3(u,d,o);f=P3(A,f,p,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:Ta(b,v,16),Dl:ka(b,v,16)},{h:m,l:g}=$i(m,g,b,v),{Bh:p,Bl:d}={Bh:p^m,Bl:d^g},{Bh:p,Bl:d}={Bh:Yd(p,d,63),Bl:Xd(p,d,63)},ve[2*n]=u,ve[2*n+1]=f,ve[2*e]=d,ve[2*e+1]=p,ve[2*t]=g,ve[2*t+1]=m,ve[2*r]=v,ve[2*r+1]=b}function $q(n,e={},t,r,i){if(vc(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:c}=e;if(s!==void 0&&(s.length<1||s.length>t))throw new Error("key length must be undefined or 1.."+t);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}let Tq=class extends Jm{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,vc(e),vc(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=Cp(this.buffer)}update(e){Ec(this),e=No(e),Wi(e);const{blockLen:t,buffer:r,buffer32:i}=this,s=e.length,o=e.byteOffset,c=e.buffer;for(let u=0;u<s;){this.pos===t&&(Ra(i),this.compress(i,0,!1),Ra(i),this.pos=0);const f=Math.min(t-this.pos,s-u),d=o+u;if(f===t&&!(d%4)&&u+f<s){const p=new Uint32Array(c,d,Math.floor((s-u)/4));Ra(p);for(let g=0;u+t<s;g+=i.length,u+=t)this.length+=t,this.compress(p,g,!1);Ra(p);continue}r.set(e.subarray(u,u+f),this.pos),this.pos+=f,this.length+=f,u+=f}return this}digestInto(e){Ec(this),C3(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,Qi(this.buffer.subarray(t)),Ra(r),this.compress(r,0,!0),Ra(r);const i=Cp(e);this.get().forEach((s,o)=>i[o]=Xs(s))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:i,destroyed:s,outputLen:o,pos:c}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=s,e.finished=i,e.length=r,e.pos=c,e.outputLen=o,e}clone(){return this._cloneInto()}},kq=class extends Tq{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=Mt[0]|0,this.v0h=Mt[1]|0,this.v1l=Mt[2]|0,this.v1h=Mt[3]|0,this.v2l=Mt[4]|0,this.v2h=Mt[5]|0,this.v3l=Mt[6]|0,this.v3h=Mt[7]|0,this.v4l=Mt[8]|0,this.v4h=Mt[9]|0,this.v5l=Mt[10]|0,this.v5h=Mt[11]|0,this.v6l=Mt[12]|0,this.v6h=Mt[13]|0,this.v7l=Mt[14]|0,this.v7h=Mt[15]|0,$q(t,e,64,16,16);let{key:r,personalization:i,salt:s}=e,o=0;if(r!==void 0&&(r=No(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=No(s);const c=Cp(s);this.v4l^=Xs(c[0]),this.v4h^=Xs(c[1]),this.v5l^=Xs(c[2]),this.v5h^=Xs(c[3])}if(i!==void 0){i=No(i);const c=Cp(i);this.v6l^=Xs(c[0]),this.v6h^=Xs(c[1]),this.v7l^=Xs(c[2]),this.v7h^=Xs(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:i,v2l:s,v2h:o,v3l:c,v3h:u,v4l:f,v4h:d,v5l:p,v5h:g,v6l:m,v6h:v,v7l:b,v7h:A}=this;return[e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=c|0,this.v3h=u|0,this.v4l=f|0,this.v4h=d|0,this.v5l=p|0,this.v5h=g|0,this.v6l=m|0,this.v6h=v|0,this.v7l=b|0,this.v7h=A|0}compress(e,t,r){this.get().forEach((u,f)=>ve[f]=u),ve.set(Mt,16);let{h:i,l:s}=WC(BigInt(this.length));ve[24]=Mt[8]^s,ve[25]=Mt[9]^i,r&&(ve[28]=~ve[28],ve[29]=~ve[29]);let o=0;const c=Dq;for(let u=0;u<12;u++)ma(0,4,8,12,e,t+2*c[o++]),wa(0,4,8,12,e,t+2*c[o++]),ma(1,5,9,13,e,t+2*c[o++]),wa(1,5,9,13,e,t+2*c[o++]),ma(2,6,10,14,e,t+2*c[o++]),wa(2,6,10,14,e,t+2*c[o++]),ma(3,7,11,15,e,t+2*c[o++]),wa(3,7,11,15,e,t+2*c[o++]),ma(0,5,10,15,e,t+2*c[o++]),wa(0,5,10,15,e,t+2*c[o++]),ma(1,6,11,12,e,t+2*c[o++]),wa(1,6,11,12,e,t+2*c[o++]),ma(2,7,8,13,e,t+2*c[o++]),wa(2,7,8,13,e,t+2*c[o++]),ma(3,4,9,14,e,t+2*c[o++]),wa(3,4,9,14,e,t+2*c[o++]);this.v0l^=ve[0]^ve[16],this.v0h^=ve[1]^ve[17],this.v1l^=ve[2]^ve[18],this.v1h^=ve[3]^ve[19],this.v2l^=ve[4]^ve[20],this.v2h^=ve[5]^ve[21],this.v3l^=ve[6]^ve[22],this.v3h^=ve[7]^ve[23],this.v4l^=ve[8]^ve[24],this.v4h^=ve[9]^ve[25],this.v5l^=ve[10]^ve[26],this.v5h^=ve[11]^ve[27],this.v6l^=ve[12]^ve[28],this.v6h^=ve[13]^ve[29],this.v7l^=ve[14]^ve[30],this.v7h^=ve[15]^ve[31],Qi(ve)}destroy(){this.destroyed=!0,Qi(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};lq(n=>new kq(n));/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function c_(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Kv(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function Xb(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function gr(n,...e){if(!c_(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function kI(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Rq(n,e){gr(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function pc(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function mh(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function Uq(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const Lq=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Fq(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Gv(n){if(typeof n=="string")n=Fq(n);else if(c_(n))n=Wv(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function Mq(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function jq(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const zq=(n,e)=>{function t(r,...i){if(gr(r),!Lq)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const f=i[0];if(!f)throw new Error("nonce / iv required");n.varSizeNonce?gr(f):gr(f,n.nonceLength)}const s=n.tagLength;s&&i[1]!==void 0&&gr(i[1]);const o=e(r,...i),c=(f,d)=>{if(d!==void 0){if(f!==2)throw new Error("cipher output not supported");gr(d)}};let u=!1;return{encrypt(f,d){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,gr(f),c(o.encrypt.length,d),o.encrypt(f,d)},decrypt(f,d){if(gr(f),s&&f.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return c(o.decrypt.length,d),o.decrypt(f,d)}}}return Object.assign(t,n),t};function RI(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!Vq(e))throw new Error("invalid output, must be aligned");return e}function UI(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s);n.setUint32(e+4,o,r),n.setUint32(e+0,c,r)}function Hq(n,e,t){Kv(t);const r=new Uint8Array(16),i=Uq(r);return UI(i,0,BigInt(e),t),UI(i,8,BigInt(n),t),r}function Vq(n){return n.byteOffset%4===0}function Wv(n){return Uint8Array.from(n)}const l_=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),qq=l_("expand 16-byte k"),Kq=l_("expand 32-byte k"),Gq=pc(qq),Wq=pc(Kq);function Ye(n,e){return n<<e|n>>>32-e}function Qv(n){return n.byteOffset%4===0}const q0=64,Qq=16,u_=2**32-1,LI=new Uint32Array;function Zq(n,e,t,r,i,s,o,c){const u=i.length,f=new Uint8Array(q0),d=pc(f),p=Qv(i)&&Qv(s),g=p?pc(i):LI,m=p?pc(s):LI;for(let v=0;v<u;o++){if(n(e,t,r,d,o,c),o>=u_)throw new Error("arx: counter overflow");const b=Math.min(q0,u-v);if(p&&b===q0){const A=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let N=0,R;N<Qq;N++)R=A+N,m[R]=g[R]^d[N];v+=q0;continue}for(let A=0,N;A<b;A++)N=v+A,s[N]=i[N]^f[A];v+=b}}function Jq(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=Mq({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return Xb(i),Xb(o),Kv(s),Kv(t),(c,u,f,d,p=0)=>{gr(c),gr(u),gr(f);const g=f.length;if(d===void 0&&(d=new Uint8Array(g)),gr(d),Xb(p),p<0||p>=u_)throw new Error("arx: counter overflow");if(d.length<g)throw new Error(`arx: output (${d.length}) is shorter than data (${g})`);const m=[];let v=c.length,b,A;if(v===32)m.push(b=Wv(c)),A=Wq;else if(v===16&&t)b=new Uint8Array(32),b.set(c),b.set(c,16),A=Gq,m.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);Qv(u)||m.push(u=Wv(u));const N=pc(b);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,N,pc(u.subarray(0,16)),N),u=u.subarray(16)}const R=16-i;if(R!==u.length)throw new Error(`arx: nonce must be ${R} or 16 bytes`);if(R!==12){const T=new Uint8Array(12);T.set(u,s?0:12-u.length),u=T,m.push(u)}const O=pc(u);return Zq(n,A,N,O,f,d,p,o),mh(...m),d}}const ln=(n,e)=>n[e++]&255|(n[e++]&255)<<8;let Yq=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Gv(e),gr(e,32);const t=ln(e,0),r=ln(e,2),i=ln(e,4),s=ln(e,6),o=ln(e,8),c=ln(e,10),u=ln(e,12),f=ln(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let d=0;d<8;d++)this.pad[d]=ln(e,16+2*d)}process(e,t,r=!1){const i=r?0:2048,{h:s,r:o}=this,c=o[0],u=o[1],f=o[2],d=o[3],p=o[4],g=o[5],m=o[6],v=o[7],b=o[8],A=o[9],N=ln(e,t+0),R=ln(e,t+2),O=ln(e,t+4),T=ln(e,t+6),k=ln(e,t+8),j=ln(e,t+10),H=ln(e,t+12),V=ln(e,t+14);let M=s[0]+(N&8191),K=s[1]+((N>>>13|R<<3)&8191),Q=s[2]+((R>>>10|O<<6)&8191),z=s[3]+((O>>>7|T<<9)&8191),P=s[4]+((T>>>4|k<<12)&8191),D=s[5]+(k>>>1&8191),w=s[6]+((k>>>14|j<<2)&8191),x=s[7]+((j>>>11|H<<5)&8191),B=s[8]+((H>>>8|V<<8)&8191),C=s[9]+(V>>>5|i),I=0,_=I+M*c+K*(5*A)+Q*(5*b)+z*(5*v)+P*(5*m);I=_>>>13,_&=8191,_+=D*(5*g)+w*(5*p)+x*(5*d)+B*(5*f)+C*(5*u),I+=_>>>13,_&=8191;let $=I+M*u+K*c+Q*(5*A)+z*(5*b)+P*(5*v);I=$>>>13,$&=8191,$+=D*(5*m)+w*(5*g)+x*(5*p)+B*(5*d)+C*(5*f),I+=$>>>13,$&=8191;let U=I+M*f+K*u+Q*c+z*(5*A)+P*(5*b);I=U>>>13,U&=8191,U+=D*(5*v)+w*(5*m)+x*(5*g)+B*(5*p)+C*(5*d),I+=U>>>13,U&=8191;let Y=I+M*d+K*f+Q*u+z*c+P*(5*A);I=Y>>>13,Y&=8191,Y+=D*(5*b)+w*(5*v)+x*(5*m)+B*(5*g)+C*(5*p),I+=Y>>>13,Y&=8191;let q=I+M*p+K*d+Q*f+z*u+P*c;I=q>>>13,q&=8191,q+=D*(5*A)+w*(5*b)+x*(5*v)+B*(5*m)+C*(5*g),I+=q>>>13,q&=8191;let Z=I+M*g+K*p+Q*d+z*f+P*u;I=Z>>>13,Z&=8191,Z+=D*c+w*(5*A)+x*(5*b)+B*(5*v)+C*(5*m),I+=Z>>>13,Z&=8191;let te=I+M*m+K*g+Q*p+z*d+P*f;I=te>>>13,te&=8191,te+=D*u+w*c+x*(5*A)+B*(5*b)+C*(5*v),I+=te>>>13,te&=8191;let re=I+M*v+K*m+Q*g+z*p+P*d;I=re>>>13,re&=8191,re+=D*f+w*u+x*c+B*(5*A)+C*(5*b),I+=re>>>13,re&=8191;let le=I+M*b+K*v+Q*m+z*g+P*p;I=le>>>13,le&=8191,le+=D*d+w*f+x*u+B*c+C*(5*A),I+=le>>>13,le&=8191;let ie=I+M*A+K*b+Q*v+z*m+P*g;I=ie>>>13,ie&=8191,ie+=D*p+w*d+x*f+B*u+C*c,I+=ie>>>13,ie&=8191,I=(I<<2)+I|0,I=I+_|0,_=I&8191,I=I>>>13,$+=I,s[0]=_,s[1]=$,s[2]=U,s[3]=Y,s[4]=q,s[5]=Z,s[6]=te,s[7]=re,s[8]=le,s[9]=ie}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=8192;let s=(i^1)-1;for(let c=0;c<10;c++)r[c]&=s;s=~s;for(let c=0;c<10;c++)e[c]=e[c]&s|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let c=1;c<8;c++)o=(e[c]+t[c]|0)+(o>>>16)|0,e[c]=o&65535;mh(r)}update(e){kI(this),e=Gv(e),gr(e);const{buffer:t,blockLen:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}t.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){mh(this.h,this.r,this.buffer,this.pad)}digestInto(e){kI(this),Rq(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}};function Xq(n){const e=(r,i)=>n(i).update(Gv(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const eK=Xq(n=>new Yq(n));function tK(n,e,t,r,i,s=20){let o=n[0],c=n[1],u=n[2],f=n[3],d=e[0],p=e[1],g=e[2],m=e[3],v=e[4],b=e[5],A=e[6],N=e[7],R=i,O=t[0],T=t[1],k=t[2],j=o,H=c,V=u,M=f,K=d,Q=p,z=g,P=m,D=v,w=b,x=A,B=N,C=R,I=O,_=T,$=k;for(let Y=0;Y<s;Y+=2)j=j+K|0,C=Ye(C^j,16),D=D+C|0,K=Ye(K^D,12),j=j+K|0,C=Ye(C^j,8),D=D+C|0,K=Ye(K^D,7),H=H+Q|0,I=Ye(I^H,16),w=w+I|0,Q=Ye(Q^w,12),H=H+Q|0,I=Ye(I^H,8),w=w+I|0,Q=Ye(Q^w,7),V=V+z|0,_=Ye(_^V,16),x=x+_|0,z=Ye(z^x,12),V=V+z|0,_=Ye(_^V,8),x=x+_|0,z=Ye(z^x,7),M=M+P|0,$=Ye($^M,16),B=B+$|0,P=Ye(P^B,12),M=M+P|0,$=Ye($^M,8),B=B+$|0,P=Ye(P^B,7),j=j+Q|0,$=Ye($^j,16),x=x+$|0,Q=Ye(Q^x,12),j=j+Q|0,$=Ye($^j,8),x=x+$|0,Q=Ye(Q^x,7),H=H+z|0,C=Ye(C^H,16),B=B+C|0,z=Ye(z^B,12),H=H+z|0,C=Ye(C^H,8),B=B+C|0,z=Ye(z^B,7),V=V+P|0,I=Ye(I^V,16),D=D+I|0,P=Ye(P^D,12),V=V+P|0,I=Ye(I^V,8),D=D+I|0,P=Ye(P^D,7),M=M+K|0,_=Ye(_^M,16),w=w+_|0,K=Ye(K^w,12),M=M+K|0,_=Ye(_^M,8),w=w+_|0,K=Ye(K^w,7);let U=0;r[U++]=o+j|0,r[U++]=c+H|0,r[U++]=u+V|0,r[U++]=f+M|0,r[U++]=d+K|0,r[U++]=p+Q|0,r[U++]=g+z|0,r[U++]=m+P|0,r[U++]=v+D|0,r[U++]=b+w|0,r[U++]=A+x|0,r[U++]=N+B|0,r[U++]=R+C|0,r[U++]=O+I|0,r[U++]=T+_|0,r[U++]=k+$|0}const nK=Jq(tK,{counterRight:!1,counterLength:4,allowShortKeys:!1}),rK=new Uint8Array(16),FI=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(rK.subarray(t))},iK=new Uint8Array(32);function MI(n,e,t,r,i){const s=n(e,t,iK),o=eK.create(s);i&&FI(o,i),FI(o,r);const c=Hq(r.length,i?i.length:0,!0);o.update(c);const u=o.digest();return mh(s,c),u}const sK=n=>(e,t,r)=>({encrypt(i,s){const o=i.length;s=RI(o+16,s,!1),s.set(i);const c=s.subarray(0,-16);n(e,t,c,c,1);const u=MI(n,e,t,c,r);return s.set(u,o),mh(u),s},decrypt(i,s){s=RI(i.length-16,s,!1);const o=i.subarray(0,-16),c=i.subarray(-16),u=MI(n,e,t,o,r);if(!jq(c,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),n(e,t,s,s,1),mh(u),s}});zq({blockSize:64,nonceLength:12,tagLength:16},sK(nK));let f_=class extends Jm{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ZC(e);const r=No(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Qi(s)}update(e){return Ec(this),this.iHash.update(e),this}digestInto(e){Ec(this),Wi(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const h_=(n,e,t)=>new f_(n,e).update(t).digest();h_.create=(n,e)=>new f_(n,e);Uint8Array.from([0]);const D3=BigInt(0),Zv=BigInt(1);function im(n,e=""){if(typeof n!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof n)}return n}function dl(n,e,t=""){const r=Zm(n),i=n==null?void 0:n.length,s=e!==void 0;if(!r||s&&i!==e){const o=t&&`"${t}" `,c=s?` of length ${e}`:"",u=r?`length=${i}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+c+", got "+u)}return n}function K0(n){const e=n.toString(16);return e.length&1?"0"+e:e}function d_(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?D3:BigInt("0x"+n)}function Ym(n){return d_(gf(n))}function sm(n){return Wi(n),d_(gf(Uint8Array.from(n).reverse()))}function $3(n,e){return rm(n.toString(16).padStart(e*2,"0"))}function T3(n,e){return $3(n,e).reverse()}function Fn(n,e,t){let r;if(typeof e=="string")try{r=rm(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(Zm(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}const e2=n=>typeof n=="bigint"&&D3<=n;function oK(n,e,t){return e2(n)&&e2(e)&&e2(t)&&e<=n&&n<t}function Jv(n,e,t,r){if(!oK(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function p_(n){let e;for(e=0;n>D3;n>>=Zv,e+=1);return e}const ag=n=>(Zv<<BigInt(n))-Zv;function aK(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=r(n),o=r(n),c=0;const u=()=>{s.fill(1),o.fill(0),c=0},f=(...g)=>t(o,s,...g),d=(g=r(0))=>{o=f(i(0),g),s=f(),g.length!==0&&(o=f(i(1),g),s=f())},p=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const m=[];for(;g<e;){s=f();const v=s.slice();m.push(v),g+=s.length}return qa(...m)};return(g,m)=>{u(),d(g);let v;for(;!(v=m(p()));)d();return u(),v}}function Xm(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,s,o){const c=n[i];if(o&&c===void 0)return;const u=typeof c;if(u!==s||c===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${u}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(t).forEach(([i,s])=>r(i,s,!0))}function jI(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const Er=BigInt(0),Jn=BigInt(1),pl=BigInt(2),g_=BigInt(3),y_=BigInt(4),m_=BigInt(5),cK=BigInt(7),w_=BigInt(8),lK=BigInt(9),b_=BigInt(16);function Hr(n,e){const t=n%e;return t>=Er?t:e+t}function _i(n,e,t){let r=n;for(;e-- >Er;)r*=r,r%=t;return r}function zI(n,e){if(n===Er)throw new Error("invert: expected non-zero number");if(e<=Er)throw new Error("invert: expected positive modulus, got "+e);let t=Hr(n,e),r=e,i=Er,s=Jn;for(;t!==Er;){const o=r/t,c=r%t,u=i-s*o;r=t,t=c,i=s,s=u}if(r!==Jn)throw new Error("invert: does not exist");return Hr(i,e)}function k3(n,e,t){if(!n.eql(n.sqr(e),t))throw new Error("Cannot find square root")}function v_(n,e){const t=(n.ORDER+Jn)/y_,r=n.pow(e,t);return k3(n,r,e),r}function uK(n,e){const t=(n.ORDER-m_)/w_,r=n.mul(e,pl),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,pl),i),c=n.mul(s,n.sub(o,n.ONE));return k3(n,c,e),c}function fK(n){const e=Pc(n),t=E_(n),r=t(e,e.neg(e.ONE)),i=t(e,r),s=t(e,e.neg(r)),o=(n+cK)/b_;return(c,u)=>{let f=c.pow(u,o),d=c.mul(f,r);const p=c.mul(f,i),g=c.mul(f,s),m=c.eql(c.sqr(d),u),v=c.eql(c.sqr(p),u);f=c.cmov(f,d,m),d=c.cmov(g,p,v);const b=c.eql(c.sqr(d),u),A=c.cmov(f,d,b);return k3(c,A,u),A}}function E_(n){if(n<g_)throw new Error("sqrt is not defined for small field");let e=n-Jn,t=0;for(;e%pl===Er;)e/=pl,t++;let r=pl;const i=Pc(n);for(;HI(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return v_;let s=i.pow(r,e);const o=(e+Jn)/pl;return function(c,u){if(c.is0(u))return u;if(HI(c,u)!==1)throw new Error("Cannot find square root");let f=t,d=c.mul(c.ONE,s),p=c.pow(u,e),g=c.pow(u,o);for(;!c.eql(p,c.ONE);){if(c.is0(p))return c.ZERO;let m=1,v=c.sqr(p);for(;!c.eql(v,c.ONE);)if(m++,v=c.sqr(v),m===f)throw new Error("Cannot find square root");const b=Jn<<BigInt(f-m-1),A=c.pow(d,b);f=m,d=c.sqr(A),p=c.mul(p,d),g=c.mul(g,A)}return g}}function hK(n){return n%y_===g_?v_:n%w_===m_?uK:n%b_===lK?fK(n):E_(n)}const dK=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function pK(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=dK.reduce((r,i)=>(r[i]="function",r),e);return Xm(n,t),n}function gK(n,e,t){if(t<Er)throw new Error("invalid exponent, negatives unsupported");if(t===Er)return n.ONE;if(t===Jn)return e;let r=n.ONE,i=e;for(;t>Er;)t&Jn&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Jn;return r}function x_(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,c,u)=>n.is0(c)?o:(r[u]=o,n.mul(o,c)),n.ONE),s=n.inv(i);return e.reduceRight((o,c,u)=>n.is0(c)?o:(r[u]=n.mul(o,r[u]),n.mul(o,c)),s),r}function HI(n,e){const t=(n.ORDER-Jn)/pl,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function A_(n,e){e!==void 0&&vc(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Pc(n,e,t=!1,r={}){if(n<=Er)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,s,o=!1,c;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const g=e;g.BITS&&(i=g.BITS),g.sqrt&&(s=g.sqrt),typeof g.isLE=="boolean"&&(t=g.isLE),typeof g.modFromBytes=="boolean"&&(o=g.modFromBytes),c=g.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:u,nByteLength:f}=A_(n,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const p=Object.freeze({ORDER:n,isLE:t,BITS:u,BYTES:f,MASK:ag(u),ZERO:Er,ONE:Jn,allowedLengths:c,create:g=>Hr(g,n),isValid:g=>{if(typeof g!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof g);return Er<=g&&g<n},is0:g=>g===Er,isValidNot0:g=>!p.is0(g)&&p.isValid(g),isOdd:g=>(g&Jn)===Jn,neg:g=>Hr(-g,n),eql:(g,m)=>g===m,sqr:g=>Hr(g*g,n),add:(g,m)=>Hr(g+m,n),sub:(g,m)=>Hr(g-m,n),mul:(g,m)=>Hr(g*m,n),pow:(g,m)=>gK(p,g,m),div:(g,m)=>Hr(g*zI(m,n),n),sqrN:g=>g*g,addN:(g,m)=>g+m,subN:(g,m)=>g-m,mulN:(g,m)=>g*m,inv:g=>zI(g,n),sqrt:s||(g=>(d||(d=hK(n)),d(p,g))),toBytes:g=>t?T3(g,f):$3(g,f),fromBytes:(g,m=!0)=>{if(c){if(!c.includes(g.length)||g.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+g.length);const b=new Uint8Array(f);b.set(g,t?0:b.length-g.length),g=b}if(g.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+g.length);let v=t?sm(g):Ym(g);if(o&&(v=Hr(v,n)),!m&&!p.isValid(v))throw new Error("invalid field element: outside of range 0..ORDER");return v},invertBatch:g=>x_(p,g),cmov:(g,m,v)=>v?m:g});return Object.freeze(p)}function S_(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function I_(n){const e=S_(n);return e+Math.ceil(e/2)}function yK(n,e,t=!1){const r=n.length,i=S_(e),s=I_(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?sm(n):Ym(n),c=Hr(o,e-Jn)+Jn;return t?T3(c,i):$3(c,i)}const wh=BigInt(0),gl=BigInt(1);function om(n,e){const t=e.negate();return n?t:e}function t2(n,e){const t=x_(n.Fp,e.map(r=>r.Z));return e.map((r,i)=>n.fromAffine(r.toAffine(t[i])))}function O_(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function n2(n,e){O_(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=ag(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function VI(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t;let c=Number(n&i),u=n>>o;c>r&&(c-=s,u+=gl);const f=e*r,d=f+Math.abs(c)-1,p=c===0,g=c<0,m=e%2!==0;return{nextN:u,offset:d,isZero:p,isNeg:g,isNegF:m,offsetF:f}}function mK(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function wK(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const r2=new WeakMap,B_=new WeakMap;function i2(n){return B_.get(n)||1}function qI(n){if(n!==wh)throw new Error("invalid wNAF")}let bK=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>wh;)t&gl&&(r=r.add(i)),i=i.double(),t>>=gl;return r}precomputeWindow(e,t){const{windows:r,windowSize:i}=n2(t,this.bits),s=[];let o=e,c=o;for(let u=0;u<r;u++){c=o,s.push(c);for(let f=1;f<i;f++)c=c.add(o),s.push(c);o=c.double()}return s}wNAF(e,t,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=n2(e,this.bits);for(let c=0;c<o.windows;c++){const{nextN:u,offset:f,isZero:d,isNeg:p,isNegF:g,offsetF:m}=VI(r,c,o);r=u,d?s=s.add(om(g,t[m])):i=i.add(om(p,t[f]))}return qI(r),{p:i,f:s}}wNAFUnsafe(e,t,r,i=this.ZERO){const s=n2(e,this.bits);for(let o=0;o<s.windows&&r!==wh;o++){const{nextN:c,offset:u,isZero:f,isNeg:d}=VI(r,o,s);if(r=c,!f){const p=t[u];i=i.add(d?p.negate():p)}}return qI(r),i}getPrecomputes(e,t,r){let i=r2.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof r=="function"&&(i=r(i)),r2.set(t,i))),i}cached(e,t,r){const i=i2(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){const s=i2(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),t,i)}createCache(e,t){O_(t,this.bits),B_.set(e,t),r2.delete(e)}hasCache(e){return i2(e)!==1}};function vK(n,e,t,r){let i=e,s=n.ZERO,o=n.ZERO;for(;t>wh||r>wh;)t&gl&&(s=s.add(i)),r&gl&&(o=o.add(i)),i=i.double(),t>>=gl,r>>=gl;return{p1:s,p2:o}}function EK(n,e,t,r){mK(t,n),wK(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=p_(BigInt(i));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const f=ag(u),d=new Array(Number(f)+1).fill(o),p=Math.floor((e.BITS-1)/u)*u;let g=o;for(let m=p;m>=0;m-=u){d.fill(o);for(let b=0;b<s;b++){const A=r[b],N=Number(A>>BigInt(m)&f);d[N]=d[N].add(t[b])}let v=o;for(let b=d.length-1,A=o;b>0;b--)A=A.add(d[b]),v=v.add(A);if(g=g.add(v),m!==0)for(let b=0;b<u;b++)g=g.double()}return g}function KI(n,e,t){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return pK(e),e}else return Pc(n,{isLE:t})}function xK(n,e,t={},r){if(r===void 0&&(r=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>wh))throw new Error(`CURVE.${c} must be positive bigint`)}const i=KI(e.p,t.Fp,r),s=KI(e.n,t.Fn,r),o=["Gx","Gy","a","b"];for(const c of o)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),e_("HashToScalar-");const Nd=BigInt(0),ju=BigInt(1),G0=BigInt(2);function AK(n){return Xm(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function SK(n){const e=AK(n),{P:t,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,c=r==="x25519";if(!c&&r!=="x448")throw new Error("invalid type");const u=o||_3,f=c?255:448,d=c?32:56,p=BigInt(c?9:5),g=BigInt(c?121665:39081),m=c?G0**BigInt(254):G0**BigInt(447),v=c?BigInt(8)*G0**BigInt(251)-ju:BigInt(4)*G0**BigInt(445)-ju,b=m+v+ju,A=z=>Hr(z,t),N=R(p);function R(z){return T3(A(z),d)}function O(z){const P=Fn("u coordinate",z,d);return c&&(P[31]&=127),A(sm(P))}function T(z){return sm(i(Fn("scalar",z,d)))}function k(z,P){const D=V(O(P),T(z));if(D===Nd)throw new Error("invalid private or public key received");return R(D)}function j(z){return k(z,N)}function H(z,P,D){const w=A(z*(P-D));return P=A(P-w),D=A(D+w),{x_2:P,x_3:D}}function V(z,P){Jv("u",z,Nd,t),Jv("scalar",P,m,b);const D=P,w=z;let x=ju,B=Nd,C=z,I=ju,_=Nd;for(let U=BigInt(f-1);U>=Nd;U--){const Y=D>>U&ju;_^=Y,{x_2:x,x_3:C}=H(_,x,C),{x_2:B,x_3:I}=H(_,B,I),_=Y;const q=x+B,Z=A(q*q),te=x-B,re=A(te*te),le=Z-re,ie=C+I,ue=C-I,Ne=A(ue*q),Re=A(ie*te),Te=Ne+Re,Ve=Ne-Re;C=A(Te*Te),I=A(w*A(Ve*Ve)),x=A(Z*re),B=A(le*(Z+A(g*le)))}({x_2:x,x_3:C}=H(_,x,C)),{x_2:B,x_3:I}=H(_,B,I);const $=s(B);return A(x*$)}const M={secretKey:d,publicKey:d,seed:d},K=(z=u(d))=>(Wi(z,M.seed),z);function Q(z){const P=K(z);return{secretKey:P,publicKey:j(P)}}return{keygen:Q,getSharedSecret:(z,P)=>k(z,P),getPublicKey:z=>j(z),scalarMult:k,scalarMultBase:j,utils:{randomSecretKey:K,randomPrivateKey:K},GuBytes:N.slice(),lengths:M}}const IK=BigInt(1),GI=BigInt(2),OK=BigInt(3),BK=BigInt(5);BigInt(8);const P_=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),PK={p:P_,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function CK(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=P_,o=n*n%s*n%s,c=_i(o,GI,s)*o%s,u=_i(c,IK,s)*n%s,f=_i(u,BK,s)*u%s,d=_i(f,e,s)*f%s,p=_i(d,t,s)*d%s,g=_i(p,r,s)*p%s,m=_i(g,i,s)*g%s,v=_i(m,i,s)*g%s,b=_i(v,e,s)*f%s;return{pow_p_5_8:_i(b,GI,s)*n%s,b2:o}}function _K(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const NK=Pc(PK.p,{isLE:!0});(()=>{const n=NK.ORDER;return SK({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=CK(e);return Hr(_i(t,OK,n)*r,n)},adjustScalarBytes:_K})})();const WI=(n,e)=>(n+(n>=0?e:-e)/C_)/e;function DK(n,e,t){const[[r,i],[s,o]]=e,c=WI(o*n,t),u=WI(-i*n,t);let f=n-c*r-u*s,d=-c*i-u*o;const p=f<Oo,g=d<Oo;p&&(f=-f),g&&(d=-d);const m=ag(Math.ceil(p_(t)/2))+yf;if(f<Oo||f>=m||d<Oo||d>=m)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:p,k1:f,k2neg:g,k2:d}}function Yv(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function s2(n,e){const t={};for(let r of Object.keys(e))t[r]=n[r]===void 0?e[r]:n[r];return im(t.lowS,"lowS"),im(t.prehash,"prehash"),t.format!==void 0&&Yv(t.format),t}let $K=class extends Error{constructor(e=""){super(e)}};const ao={Err:$K,_tlv:{encode:(n,e)=>{const{Err:t}=ao;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=K0(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?K0(i.length/2|128):"";return K0(n)+s+i+e},decode(n,e){const{Err:t}=ao;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new t("tlv.decode: length bytes not complete");if(f[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const d of f)o=o<<8|d;if(r+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=ao;if(n<Oo)throw new e("integer: negative integers are not allowed");let t=K0(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=ao;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ym(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=ao,i=Fn("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,s),{v:f,l:d}=r.decode(2,u);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(f)}},hexFromSig(n){const{_tlv:e,_int:t}=ao,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},Oo=BigInt(0),yf=BigInt(1),C_=BigInt(2),W0=BigInt(3),TK=BigInt(4);function rf(n,e){const{BYTES:t}=n;let r;if(typeof e=="bigint")r=e;else{let i=Fn("private key",e);try{r=n.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function kK(n,e={}){const t=xK("weierstrass",n,e),{Fp:r,Fn:i}=t;let s=t.CURVE;const{h:o,n:c}=s;Xm(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=e;if(u&&(!r.is0(s.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=N_(r,i);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(z,P,D){const{x:w,y:x}=P.toAffine(),B=r.toBytes(w);if(im(D,"isCompressed"),D){d();const C=!r.isOdd(x);return qa(__(C),B)}else return qa(Uint8Array.of(4),B,r.toBytes(x))}function g(z){dl(z,void 0,"Point");const{publicKey:P,publicKeyUncompressed:D}=f,w=z.length,x=z[0],B=z.subarray(1);if(w===P&&(x===2||x===3)){const C=r.fromBytes(B);if(!r.isValid(C))throw new Error("bad point: is not on curve, wrong x");const I=b(C);let _;try{_=r.sqrt(I)}catch(U){const Y=U instanceof Error?": "+U.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}d();const $=r.isOdd(_);return(x&1)===1!==$&&(_=r.neg(_)),{x:C,y:_}}else if(w===D&&x===4){const C=r.BYTES,I=r.fromBytes(B.subarray(0,C)),_=r.fromBytes(B.subarray(C,C*2));if(!A(I,_))throw new Error("bad point: is not on curve");return{x:I,y:_}}else throw new Error(`bad point: got length ${w}, expected compressed=${P} or uncompressed=${D}`)}const m=e.toBytes||p,v=e.fromBytes||g;function b(z){const P=r.sqr(z),D=r.mul(P,z);return r.add(r.add(D,r.mul(z,s.a)),s.b)}function A(z,P){const D=r.sqr(P),w=b(z);return r.eql(D,w)}if(!A(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const N=r.mul(r.pow(s.a,W0),TK),R=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(N,R)))throw new Error("bad curve params: a or b");function O(z,P,D=!1){if(!r.isValid(P)||D&&r.is0(P))throw new Error(`bad point coordinate ${z}`);return P}function T(z){if(!(z instanceof M))throw new Error("ProjectivePoint expected")}function k(z){if(!u||!u.basises)throw new Error("no endo");return DK(z,u.basises,i.ORDER)}const j=jI((z,P)=>{const{X:D,Y:w,Z:x}=z;if(r.eql(x,r.ONE))return{x:D,y:w};const B=z.is0();P==null&&(P=B?r.ONE:r.inv(x));const C=r.mul(D,P),I=r.mul(w,P),_=r.mul(x,P);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(_,r.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),H=jI(z=>{if(z.is0()){if(e.allowInfinityPoint&&!r.is0(z.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:D}=z.toAffine();if(!r.isValid(P)||!r.isValid(D))throw new Error("bad point: x or y not field elements");if(!A(P,D))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function V(z,P,D,w,x){return D=new M(r.mul(D.X,z),D.Y,D.Z),P=om(w,P),D=om(x,D),P.add(D)}class M{constructor(P,D,w){this.X=O("x",P),this.Y=O("y",D,!0),this.Z=O("z",w),Object.freeze(this)}static CURVE(){return s}static fromAffine(P){const{x:D,y:w}=P||{};if(!P||!r.isValid(D)||!r.isValid(w))throw new Error("invalid affine point");if(P instanceof M)throw new Error("projective point not allowed");return r.is0(D)&&r.is0(w)?M.ZERO:new M(D,w,r.ONE)}static fromBytes(P){const D=M.fromAffine(v(dl(P,void 0,"point")));return D.assertValidity(),D}static fromHex(P){return M.fromBytes(Fn("pointHex",P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,D=!0){return Q.createCache(this,P),D||this.multiply(W0),this}assertValidity(){H(this)}hasEvenY(){const{y:P}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(P)}equals(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P,_=r.eql(r.mul(D,I),r.mul(B,x)),$=r.eql(r.mul(w,I),r.mul(C,x));return _&&$}negate(){return new M(this.X,r.neg(this.Y),this.Z)}double(){const{a:P,b:D}=s,w=r.mul(D,W0),{X:x,Y:B,Z:C}=this;let I=r.ZERO,_=r.ZERO,$=r.ZERO,U=r.mul(x,x),Y=r.mul(B,B),q=r.mul(C,C),Z=r.mul(x,B);return Z=r.add(Z,Z),$=r.mul(x,C),$=r.add($,$),I=r.mul(P,$),_=r.mul(w,q),_=r.add(I,_),I=r.sub(Y,_),_=r.add(Y,_),_=r.mul(I,_),I=r.mul(Z,I),$=r.mul(w,$),q=r.mul(P,q),Z=r.sub(U,q),Z=r.mul(P,Z),Z=r.add(Z,$),$=r.add(U,U),U=r.add($,U),U=r.add(U,q),U=r.mul(U,Z),_=r.add(_,U),q=r.mul(B,C),q=r.add(q,q),U=r.mul(q,Z),I=r.sub(I,U),$=r.mul(q,Y),$=r.add($,$),$=r.add($,$),new M(I,_,$)}add(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P;let _=r.ZERO,$=r.ZERO,U=r.ZERO;const Y=s.a,q=r.mul(s.b,W0);let Z=r.mul(D,B),te=r.mul(w,C),re=r.mul(x,I),le=r.add(D,w),ie=r.add(B,C);le=r.mul(le,ie),ie=r.add(Z,te),le=r.sub(le,ie),ie=r.add(D,x);let ue=r.add(B,I);return ie=r.mul(ie,ue),ue=r.add(Z,re),ie=r.sub(ie,ue),ue=r.add(w,x),_=r.add(C,I),ue=r.mul(ue,_),_=r.add(te,re),ue=r.sub(ue,_),U=r.mul(Y,ie),_=r.mul(q,re),U=r.add(_,U),_=r.sub(te,U),U=r.add(te,U),$=r.mul(_,U),te=r.add(Z,Z),te=r.add(te,Z),re=r.mul(Y,re),ie=r.mul(q,ie),te=r.add(te,re),re=r.sub(Z,re),re=r.mul(Y,re),ie=r.add(ie,re),Z=r.mul(te,ie),$=r.add($,Z),Z=r.mul(ue,ie),_=r.mul(le,_),_=r.sub(_,Z),Z=r.mul(le,te),U=r.mul(ue,U),U=r.add(U,Z),new M(_,$,U)}subtract(P){return this.add(P.negate())}is0(){return this.equals(M.ZERO)}multiply(P){const{endo:D}=e;if(!i.isValidNot0(P))throw new Error("invalid scalar: out of range");let w,x;const B=C=>Q.cached(this,C,I=>t2(M,I));if(D){const{k1neg:C,k1:I,k2neg:_,k2:$}=k(P),{p:U,f:Y}=B(I),{p:q,f:Z}=B($);x=Y.add(Z),w=V(D.beta,U,q,C,_)}else{const{p:C,f:I}=B(P);w=C,x=I}return t2(M,[w,x])[0]}multiplyUnsafe(P){const{endo:D}=e,w=this;if(!i.isValid(P))throw new Error("invalid scalar: out of range");if(P===Oo||w.is0())return M.ZERO;if(P===yf)return w;if(Q.hasCache(this))return this.multiply(P);if(D){const{k1neg:x,k1:B,k2neg:C,k2:I}=k(P),{p1:_,p2:$}=vK(M,w,B,I);return V(D.beta,_,$,x,C)}else return Q.unsafe(w,P)}multiplyAndAddUnsafe(P,D,w){const x=this.multiplyUnsafe(D).add(P.multiplyUnsafe(w));return x.is0()?void 0:x}toAffine(P){return j(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return o===yf?!0:P?P(M,this):Q.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:P}=e;return o===yf?this:P?P(M,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(P=!0){return im(P,"isCompressed"),this.assertValidity(),m(M,this,P)}toHex(P=!0){return gf(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(P=!0){return this.toBytes(P)}_setWindowSize(P){this.precompute(P)}static normalizeZ(P){return t2(M,P)}static msm(P,D){return EK(M,i,P,D)}static fromPrivateKey(P){return M.BASE.multiply(rf(i,P))}}M.BASE=new M(s.Gx,s.Gy,r.ONE),M.ZERO=new M(r.ZERO,r.ONE,r.ZERO),M.Fp=r,M.Fn=i;const K=i.BITS,Q=new bK(M,e.endo?Math.ceil(K/2):K);return M.BASE.precompute(8),M}function __(n){return Uint8Array.of(n?2:3)}function N_(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function RK(n,e={}){const{Fn:t}=n,r=e.randomBytes||_3,i=Object.assign(N_(n.Fp,t),{seed:I_(t.ORDER)});function s(g){try{return!!rf(t,g)}catch{return!1}}function o(g,m){const{publicKey:v,publicKeyUncompressed:b}=i;try{const A=g.length;return m===!0&&A!==v||m===!1&&A!==b?!1:!!n.fromBytes(g)}catch{return!1}}function c(g=r(i.seed)){return yK(dl(g,i.seed,"seed"),t.ORDER)}function u(g,m=!0){return n.BASE.multiply(rf(t,g)).toBytes(m)}function f(g){const m=c(g);return{secretKey:m,publicKey:u(m)}}function d(g){if(typeof g=="bigint")return!1;if(g instanceof n)return!0;const{secretKey:m,publicKey:v,publicKeyUncompressed:b}=i;if(t.allowedLengths||m===v)return;const A=Fn("key",g).length;return A===v||A===b}function p(g,m,v=!0){if(d(g)===!0)throw new Error("first arg must be private key");if(d(m)===!1)throw new Error("second arg must be public key");const b=rf(t,g);return n.fromHex(m).multiply(b).toBytes(v)}return Object.freeze({getPublicKey:u,getSharedSecret:p,keygen:f,Point:n,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:s,randomPrivateKey:c,normPrivateKeyToScalar:g=>rf(t,g),precompute(g=8,m=n.BASE){return m.precompute(g,!1)}},lengths:i})}function UK(n,e,t={}){ZC(e),Xm(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||_3,i=t.hmac||((D,...w)=>h_(e,D,qa(...w))),{Fp:s,Fn:o}=n,{ORDER:c,BITS:u}=o,{keygen:f,getPublicKey:d,getSharedSecret:p,utils:g,lengths:m}=RK(n,t),v={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},b="compact";function A(D){const w=c>>yf;return D>w}function N(D,w){if(!o.isValidNot0(w))throw new Error(`invalid signature ${D}: out of range 1..Point.Fn.ORDER`);return w}function R(D,w){Yv(w);const x=m.signature,B=w==="compact"?x:w==="recovered"?x+1:void 0;return dl(D,B,`${w} signature`)}class O{constructor(w,x,B){this.r=N("r",w),this.s=N("s",x),B!=null&&(this.recovery=B),Object.freeze(this)}static fromBytes(w,x=b){R(w,x);let B;if(x==="der"){const{r:$,s:U}=ao.toSig(dl(w));return new O($,U)}x==="recovered"&&(B=w[0],x="compact",w=w.subarray(1));const C=o.BYTES,I=w.subarray(0,C),_=w.subarray(C,C*2);return new O(o.fromBytes(I),o.fromBytes(_),B)}static fromHex(w,x){return this.fromBytes(rm(w),x)}addRecoveryBit(w){return new O(this.r,this.s,w)}recoverPublicKey(w){const x=s.ORDER,{r:B,s:C,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(c*C_<x&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const _=I===2||I===3?B+c:B;if(!s.isValid(_))throw new Error("recovery id 2 or 3 invalid");const $=s.toBytes(_),U=n.fromBytes(qa(__((I&1)===0),$)),Y=o.inv(_),q=k(Fn("msgHash",w)),Z=o.create(-q*Y),te=o.create(C*Y),re=n.BASE.multiplyUnsafe(Z).add(U.multiplyUnsafe(te));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return A(this.s)}toBytes(w=b){if(Yv(w),w==="der")return rm(ao.hexFromSig(this));const x=o.toBytes(this.r),B=o.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return qa(Uint8Array.of(this.recovery),x,B)}return qa(x,B)}toHex(w){return gf(this.toBytes(w))}assertValidity(){}static fromCompact(w){return O.fromBytes(Fn("sig",w),"compact")}static fromDER(w){return O.fromBytes(Fn("sig",w),"der")}normalizeS(){return this.hasHighS()?new O(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return gf(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return gf(this.toBytes("compact"))}}const T=t.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const w=Ym(D),x=D.length*8-u;return x>0?w>>BigInt(x):w},k=t.bits2int_modN||function(D){return o.create(T(D))},j=ag(u);function H(D){return Jv("num < 2^"+u,D,Oo,j),o.toBytes(D)}function V(D,w){return dl(D,void 0,"message"),w?dl(e(D),void 0,"prehashed message"):D}function M(D,w,x){if(["recovered","canonical"].some(te=>te in x))throw new Error("sign() legacy options not supported");const{lowS:B,prehash:C,extraEntropy:I}=s2(x,v);D=V(D,C);const _=k(D),$=rf(o,w),U=[H($),H(_)];if(I!=null&&I!==!1){const te=I===!0?r(m.secretKey):I;U.push(Fn("extraEntropy",te))}const Y=qa(...U),q=_;function Z(te){const re=T(te);if(!o.isValidNot0(re))return;const le=o.inv(re),ie=n.BASE.multiply(re).toAffine(),ue=o.create(ie.x);if(ue===Oo)return;const Ne=o.create(le*o.create(q+ue*$));if(Ne===Oo)return;let Re=(ie.x===ue?0:2)|Number(ie.y&yf),Te=Ne;return B&&A(Ne)&&(Te=o.neg(Ne),Re^=1),new O(ue,Te,Re)}return{seed:Y,k2sig:Z}}function K(D,w,x={}){D=Fn("message",D);const{seed:B,k2sig:C}=M(D,w,x);return aK(e.outputLen,o.BYTES,i)(B,C)}function Q(D){let w;const x=typeof D=="string"||Zm(D),B=!x&&D!==null&&typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!x&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(B)w=new O(D.r,D.s);else if(x){try{w=O.fromBytes(Fn("sig",D),"der")}catch(C){if(!(C instanceof ao.Err))throw C}if(!w)try{w=O.fromBytes(Fn("sig",D),"compact")}catch{return!1}}return w||!1}function z(D,w,x,B={}){const{lowS:C,prehash:I,format:_}=s2(B,v);if(x=Fn("publicKey",x),w=V(Fn("message",w),I),"strict"in B)throw new Error("options.strict was renamed to lowS");const $=_===void 0?Q(D):O.fromBytes(Fn("sig",D),_);if($===!1)return!1;try{const U=n.fromBytes(x);if(C&&$.hasHighS())return!1;const{r:Y,s:q}=$,Z=k(w),te=o.inv(q),re=o.create(Z*te),le=o.create(Y*te),ie=n.BASE.multiplyUnsafe(re).add(U.multiplyUnsafe(le));return ie.is0()?!1:o.create(ie.x)===Y}catch{return!1}}function P(D,w,x={}){const{prehash:B}=s2(x,v);return w=V(w,B),O.fromBytes(D,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:f,getPublicKey:d,getSharedSecret:p,utils:g,lengths:m,Point:n,sign:K,verify:z,recoverPublicKey:P,Signature:O,hash:e})}function LK(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Pc(e.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),s={Fp:t,Fn:i,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function FK(n){const{CURVE:e,curveOpts:t}=LK(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,hash:n.hash,ecdsaOpts:r}}function MK(n,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},n,A_(t.Fn.ORDER,t.Fn.BITS))})}function jK(n){const{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:i}=FK(n),s=kK(e,t),o=UK(s,r,i);return MK(n,o)}function Xv(n,e){const t=r=>jK({...n,hash:r});return{...t(e),create:t}}const D_={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},$_={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},T_={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},zK=Pc(D_.p),HK=Pc($_.p),VK=Pc(T_.p);Xv({...D_,Fp:zK,lowS:!1},Cq);Xv({...$_,Fp:HK,lowS:!1},Nq),Xv({...T_,Fp:VK,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},_q);const qK={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function KK(n,e){const{message:t,code:r}=qK[n];return{message:t,code:r}}function eE(n,e){return!!Array.isArray(n)}class iu{}let GK=class extends iu{constructor(e){super()}};const QI=me.FIVE_SECONDS,su={pulse:"heartbeat_pulse"};let WK=class k_ extends GK{constructor(e){super(e),this.events=new Gr.EventEmitter,this.interval=QI,this.interval=(e==null?void 0:e.interval)||QI}static async init(e){const t=new k_(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),me.toMiliseconds(this.interval))}pulse(){this.events.emit(su.pulse)}};const QK=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,ZK=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JK=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function YK(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){XK(n);return}return e}function XK(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function Q0(n,e={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const t=n.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!JK.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(QK.test(n)||ZK.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,YK)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function eG(n){return!n||typeof n.then!="function"?Promise.resolve(n):n}function Xt(n,...e){try{return eG(n(...e))}catch(t){return Promise.reject(t)}}function tG(n){const e=typeof n;return n===null||e!=="object"&&e!=="function"}function nG(n){const e=Object.getPrototypeOf(n);return!e||e.isPrototypeOf(Object)}function Py(n){if(tG(n))return String(n);if(nG(n)||Array.isArray(n))return JSON.stringify(n);if(typeof n.toJSON=="function")return Py(n.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const tE="base64:";function rG(n){return typeof n=="string"?n:tE+oG(n)}function iG(n){return typeof n!="string"||!n.startsWith(tE)?n:sG(n.slice(tE.length))}function sG(n){return globalThis.Buffer?Buffer.from(n,"base64"):Uint8Array.from(globalThis.atob(n),e=>e.codePointAt(0))}function oG(n){return globalThis.Buffer?Buffer.from(n).toString("base64"):globalThis.btoa(String.fromCodePoint(...n))}function ur(n){var e;return n&&((e=n.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function aG(...n){return ur(n.join(":"))}function Z0(n){return n=ur(n),n?n+":":""}function cG(n,e){if(e===void 0)return!0;let t=0,r=n.indexOf(":");for(;r>-1;)t++,r=n.indexOf(":",r+1);return t<=e}function lG(n,e){return e?n.startsWith(e)&&n[n.length-1]!=="$":n[n.length-1]!=="$"}const uG="memory",fG=()=>{const n=new Map;return{name:uG,getInstance:()=>n,hasItem(e){return n.has(e)},getItem(e){return n.get(e)??null},getItemRaw(e){return n.get(e)??null},setItem(e,t){n.set(e,t)},setItemRaw(e,t){n.set(e,t)},removeItem(e){n.delete(e)},getKeys(){return[...n.keys()]},clear(){n.clear()},dispose(){n.clear()}}};function hG(n={}){const e={mounts:{"":n.driver||fG()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=f=>{for(const d of e.mountpoints)if(f.startsWith(d))return{base:d,relativeKey:f.slice(d.length),driver:e.mounts[d]};return{base:"",relativeKey:f,driver:e.mounts[""]}},r=(f,d)=>e.mountpoints.filter(p=>p.startsWith(f)||d&&f.startsWith(p)).map(p=>({relativeBase:f.length>p.length?f.slice(p.length):void 0,mountpoint:p,driver:e.mounts[p]})),i=(f,d)=>{if(e.watching){d=ur(d);for(const p of e.watchListeners)p(f,d)}},s=async()=>{if(!e.watching){e.watching=!0;for(const f in e.mounts)e.unwatch[f]=await ZI(e.mounts[f],i,f)}},o=async()=>{if(e.watching){for(const f in e.unwatch)await e.unwatch[f]();e.unwatch={},e.watching=!1}},c=(f,d,p)=>{const g=new Map,m=v=>{let b=g.get(v.base);return b||(b={driver:v.driver,base:v.base,items:[]},g.set(v.base,b)),b};for(const v of f){const b=typeof v=="string",A=ur(b?v:v.key),N=b?void 0:v.value,R=b||!v.options?d:{...d,...v.options},O=t(A);m(O).items.push({key:A,value:N,relativeKey:O.relativeKey,options:R})}return Promise.all([...g.values()].map(v=>p(v))).then(v=>v.flat())},u={hasItem(f,d={}){f=ur(f);const{relativeKey:p,driver:g}=t(f);return Xt(g.hasItem,p,d)},getItem(f,d={}){f=ur(f);const{relativeKey:p,driver:g}=t(f);return Xt(g.getItem,p,d).then(m=>Q0(m))},getItems(f,d={}){return c(f,d,p=>p.driver.getItems?Xt(p.driver.getItems,p.items.map(g=>({key:g.relativeKey,options:g.options})),d).then(g=>g.map(m=>({key:aG(p.base,m.key),value:Q0(m.value)}))):Promise.all(p.items.map(g=>Xt(p.driver.getItem,g.relativeKey,g.options).then(m=>({key:g.key,value:Q0(m)})))))},getItemRaw(f,d={}){f=ur(f);const{relativeKey:p,driver:g}=t(f);return g.getItemRaw?Xt(g.getItemRaw,p,d):Xt(g.getItem,p,d).then(m=>iG(m))},async setItem(f,d,p={}){if(d===void 0)return u.removeItem(f);f=ur(f);const{relativeKey:g,driver:m}=t(f);m.setItem&&(await Xt(m.setItem,g,Py(d),p),m.watch||i("update",f))},async setItems(f,d){await c(f,d,async p=>{if(p.driver.setItems)return Xt(p.driver.setItems,p.items.map(g=>({key:g.relativeKey,value:Py(g.value),options:g.options})),d);p.driver.setItem&&await Promise.all(p.items.map(g=>Xt(p.driver.setItem,g.relativeKey,Py(g.value),g.options)))})},async setItemRaw(f,d,p={}){if(d===void 0)return u.removeItem(f,p);f=ur(f);const{relativeKey:g,driver:m}=t(f);if(m.setItemRaw)await Xt(m.setItemRaw,g,d,p);else if(m.setItem)await Xt(m.setItem,g,rG(d),p);else return;m.watch||i("update",f)},async removeItem(f,d={}){typeof d=="boolean"&&(d={removeMeta:d}),f=ur(f);const{relativeKey:p,driver:g}=t(f);g.removeItem&&(await Xt(g.removeItem,p,d),(d.removeMeta||d.removeMata)&&await Xt(g.removeItem,p+"$",d),g.watch||i("remove",f))},async getMeta(f,d={}){typeof d=="boolean"&&(d={nativeOnly:d}),f=ur(f);const{relativeKey:p,driver:g}=t(f),m=Object.create(null);if(g.getMeta&&Object.assign(m,await Xt(g.getMeta,p,d)),!d.nativeOnly){const v=await Xt(g.getItem,p+"$",d).then(b=>Q0(b));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(m,v))}return m},setMeta(f,d,p={}){return this.setItem(f+"$",d,p)},removeMeta(f,d={}){return this.removeItem(f+"$",d)},async getKeys(f,d={}){var A;f=Z0(f);const p=r(f,!0);let g=[];const m=[];let v=!0;for(const N of p){(A=N.driver.flags)!=null&&A.maxDepth||(v=!1);const R=await Xt(N.driver.getKeys,N.relativeBase,d);for(const O of R){const T=N.mountpoint+ur(O);g.some(k=>T.startsWith(k))||m.push(T)}g=[N.mountpoint,...g.filter(O=>!O.startsWith(N.mountpoint))]}const b=d.maxDepth!==void 0&&!v;return m.filter(N=>(!b||cG(N,d.maxDepth))&&lG(N,f))},async clear(f,d={}){f=Z0(f),await Promise.all(r(f,!1).map(async p=>{if(p.driver.clear)return Xt(p.driver.clear,p.relativeBase,d);if(p.driver.removeItem){const g=await p.driver.getKeys(p.relativeBase||"",d);return Promise.all(g.map(m=>p.driver.removeItem(m,d)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(f=>JI(f)))},async watch(f){return await s(),e.watchListeners.push(f),async()=>{e.watchListeners=e.watchListeners.filter(d=>d!==f),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(f,d){if(f=Z0(f),f&&e.mounts[f])throw new Error(`already mounted at ${f}`);return f&&(e.mountpoints.push(f),e.mountpoints.sort((p,g)=>g.length-p.length)),e.mounts[f]=d,e.watching&&Promise.resolve(ZI(d,i,f)).then(p=>{e.unwatch[f]=p}).catch(console.error),u},async unmount(f,d=!0){var p,g;f=Z0(f),!(!f||!e.mounts[f])&&(e.watching&&f in e.unwatch&&((g=(p=e.unwatch)[f])==null||g.call(p),delete e.unwatch[f]),d&&await JI(e.mounts[f]),e.mountpoints=e.mountpoints.filter(m=>m!==f),delete e.mounts[f])},getMount(f=""){f=ur(f)+":";const d=t(f);return{driver:d.driver,base:d.base}},getMounts(f="",d={}){return f=ur(f),r(f,d.parents).map(g=>({driver:g.driver,base:g.mountpoint}))},keys:(f,d={})=>u.getKeys(f,d),get:(f,d={})=>u.getItem(f,d),set:(f,d,p={})=>u.setItem(f,d,p),has:(f,d={})=>u.hasItem(f,d),del:(f,d={})=>u.removeItem(f,d),remove:(f,d={})=>u.removeItem(f,d)};return u}function ZI(n,e,t){return n.watch?n.watch((r,i)=>e(r,t+i)):()=>{}}async function JI(n){typeof n.dispose=="function"&&await Xt(n.dispose)}function ou(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function R_(n,e){let t;const r=()=>{if(t)return t;const i=indexedDB.open(n);return i.onupgradeneeded=()=>i.result.createObjectStore(e),t=ou(i),t.then(s=>{s.onclose=()=>t=void 0},()=>{}),t};return(i,s)=>r().then(o=>s(o.transaction(e,i).objectStore(e)))}let o2;function cg(){return o2||(o2=R_("keyval-store","keyval")),o2}function YI(n,e=cg()){return e("readonly",t=>ou(t.get(n)))}function dG(n,e,t=cg()){return t("readwrite",r=>(r.put(e,n),ou(r.transaction)))}function pG(n,e=cg()){return e("readwrite",t=>(t.delete(n),ou(t.transaction)))}function gG(n=cg()){return n("readwrite",e=>(e.clear(),ou(e.transaction)))}function yG(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ou(n.transaction)}function mG(n=cg()){return n("readonly",e=>{if(e.getAllKeys)return ou(e.getAllKeys());const t=[];return yG(e,r=>t.push(r.key)).then(()=>t)})}const wG=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),bG=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function am(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return bG(n)}catch{return n}}function R3(n){return typeof n=="string"?n:wG(n)||""}const vG="idb-keyval";var EG=(n={})=>{const e=n.base&&n.base.length>0?`${n.base}:`:"",t=i=>e+i;let r;return n.dbName&&n.storeName&&(r=R_(n.dbName,n.storeName)),{name:vG,options:n,async hasItem(i){return!(typeof await YI(t(i),r)>"u")},async getItem(i){return await YI(t(i),r)??null},setItem(i,s){return dG(t(i),s,r)},removeItem(i){return pG(t(i),r)},getKeys(){return mG(r)},clear(){return gG(r)}}};const xG="WALLET_CONNECT_V2_INDEXED_DB",AG="keyvaluestorage";let SG=class{constructor(){this.indexedDb=hG({driver:EG({dbName:xG,storeName:AG})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,R3(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var a2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cy={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,r){this[t]=String(r)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(r){t[r]=void 0,delete t[r]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof a2<"u"&&a2.localStorage?Cy.exports=a2.localStorage:typeof window<"u"&&window.localStorage?Cy.exports=window.localStorage:Cy.exports=new e})();function IG(n){var e;return[n[0],am((e=n[1])!=null?e:"")]}let OG=class{constructor(){this.localStorage=Cy.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(IG)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return am(t)}async setItem(e,t){this.localStorage.setItem(e,R3(t))}async removeItem(e){this.localStorage.removeItem(e)}};const BG="wc_storage_version",XI=1,PG=async(n,e,t)=>{const r=BG,i=await e.getItem(r);if(i&&i>=XI){t(e);return}const s=await n.getKeys();if(!s.length){t(e);return}const o=[];for(;s.length;){const c=s.shift();if(!c)continue;const u=c.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){const f=await n.getItem(c);await e.setItem(c,f),o.push(c)}}await e.setItem(r,XI),t(e),CG(n,o)},CG=async(n,e)=>{e.length&&e.forEach(async t=>{await n.removeItem(t)})};let _G=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new OG;this.storage=e;try{const t=new SG;PG(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var NG=Object.defineProperty,DG=(n,e,t)=>e in n?NG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,e6=(n,e,t)=>DG(n,typeof e!="symbol"?e+"":e,t);let $G=class extends iu{constructor(e){super(),this.opts=e,e6(this,"protocol","wc"),e6(this,"version",2)}};var TG=Object.defineProperty,kG=(n,e,t)=>e in n?TG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,RG=(n,e,t)=>kG(n,e+"",t);let UG=class extends iu{constructor(e,t){super(),this.core=e,this.logger=t,RG(this,"records",new Map)}},LG=class{constructor(e,t){this.logger=e,this.core=t}},FG=class extends iu{constructor(e,t){super(),this.relayer=e,this.logger=t}},MG=class extends iu{constructor(e){super()}},jG=class{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}},zG=class extends iu{constructor(e,t){super(),this.relayer=e,this.logger=t}},HG=class extends iu{constructor(e,t){super(),this.core=e,this.logger=t}},VG=class{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}},qG=class{constructor(e,t){this.projectId=e,this.logger=t}},KG=class{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}};var GG=Object.defineProperty,WG=(n,e,t)=>e in n?GG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,t6=(n,e,t)=>WG(n,typeof e!="symbol"?e+"":e,t);let QG=class{constructor(e){this.opts=e,t6(this,"protocol","wc"),t6(this,"version",2)}},ZG=class{constructor(e){this.client=e}};var n6=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},JG=(function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n})(),YG=(function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n})(),XG=(function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n})(),eW=(function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n})(),tW=(function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n})(),nW=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,rW=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,r6=3,iW=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",nW]],i6=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function sW(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new tW:typeof navigator<"u"?aW(navigator.userAgent):lW()}function oW(n){return n!==""&&iW.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function aW(n){var e=oW(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new eW;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<r6&&(i=n6(n6([],i,!0),uW(r6-i.length),!0)):i=[];var s=i.join("."),o=cW(n),c=rW.exec(n);return c&&c[1]?new XG(t,s,o,c[1]):new JG(t,s,o)}function cW(n){for(var e=0,t=i6.length;e<t;e++){var r=i6[e],i=r[0],s=r[1],o=s.exec(n);if(o)return i}return null}function lW(){var n=typeof process<"u"&&process.version;return n?new YG(process.version.slice(1)):null}function uW(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var ct={},s6;function U_(){if(s6)return ct;s6=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.getLocalStorage=ct.getLocalStorageOrThrow=ct.getCrypto=ct.getCryptoOrThrow=ct.getLocation=ct.getLocationOrThrow=ct.getNavigator=ct.getNavigatorOrThrow=ct.getDocument=ct.getDocumentOrThrow=ct.getFromWindowOrThrow=ct.getFromWindow=void 0;function n(g){let m;return typeof window<"u"&&typeof window[g]<"u"&&(m=window[g]),m}ct.getFromWindow=n;function e(g){const m=n(g);if(!m)throw new Error(`${g} is not defined in Window`);return m}ct.getFromWindowOrThrow=e;function t(){return e("document")}ct.getDocumentOrThrow=t;function r(){return n("document")}ct.getDocument=r;function i(){return e("navigator")}ct.getNavigatorOrThrow=i;function s(){return n("navigator")}ct.getNavigator=s;function o(){return e("location")}ct.getLocationOrThrow=o;function c(){return n("location")}ct.getLocation=c;function u(){return e("crypto")}ct.getCryptoOrThrow=u;function f(){return n("crypto")}ct.getCrypto=f;function d(){return e("localStorage")}ct.getLocalStorageOrThrow=d;function p(){return n("localStorage")}return ct.getLocalStorage=p,ct}var Ro=U_(),Dd={},o6;function fW(){if(o6)return Dd;o6=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.getWindowMetadata=void 0;const n=U_();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function i(){const m=t.getElementsByTagName("link"),v=[];for(let b=0;b<m.length;b++){const A=m[b],N=A.getAttribute("rel");if(N&&N.toLowerCase().indexOf("icon")>-1){const R=A.getAttribute("href");if(R)if(R.toLowerCase().indexOf("https:")===-1&&R.toLowerCase().indexOf("http:")===-1&&R.indexOf("//")!==0){let O=r.protocol+"//"+r.host;if(R.indexOf("/")===0)O+=R;else{const T=r.pathname.split("/");T.pop();const k=T.join("/");O+=k+"/"+R}v.push(O)}else if(R.indexOf("//")===0){const O=r.protocol+R;v.push(O)}else v.push(R)}}return v}function s(...m){const v=t.getElementsByTagName("meta");for(let b=0;b<v.length;b++){const A=v[b],N=["itemprop","property","name"].map(R=>A.getAttribute(R)).filter(R=>R?m.includes(R):!1);if(N.length&&N){const R=A.getAttribute("content");if(R)return R}}return""}function o(){let m=s("name","og:site_name","og:title","twitter:title");return m||(m=t.title),m}function c(){return s("description","og:description","twitter:description","keywords")}const u=o(),f=c(),d=r.origin,p=i();return{description:f,url:d,icons:p,name:u}}return Dd.getWindowMetadata=e,Dd}var hW=fW();const dW="0.1.1";function pW(){return dW}class vt extends Error{constructor(e,t={}){const r=(()=>{var u;if(t.cause instanceof vt){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause&&"details"in t.cause&&typeof t.cause.details=="string"?t.cause.details:(u=t.cause)!=null&&u.message?t.cause.message:t.details})(),i=t.cause instanceof vt&&t.cause.docsPath||t.docsPath,o=`https://oxlib.sh${i??""}`,c=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${o}`:void 0]:[]].filter(u=>typeof u=="string").join(`
`);super(c,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${pW()}`}),this.cause=t.cause,this.details=r,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return L_(this,e)}}function L_(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause?L_(n.cause,e):e?null:n}const zu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gW(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function _p(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Yl(n,...e){if(!gW(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function yW(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");_p(n.outputLen),_p(n.blockLen)}function bh(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function F_(n,e){Yl(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function mW(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function vh(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function c2(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function us(n,e){return n<<32-e|n>>>e}const wW=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function bW(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function vW(n){for(let e=0;e<n.length;e++)n[e]=bW(n[e]);return n}const a6=wW?n=>n:vW;function EW(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function ew(n){return typeof n=="string"&&(n=EW(n)),Yl(n),n}function xW(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];Yl(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}class U3{}function M_(n){const e=r=>n().update(ew(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function AW(n=32){if(zu&&typeof zu.getRandomValues=="function")return zu.getRandomValues(new Uint8Array(n));if(zu&&typeof zu.randomBytes=="function")return Uint8Array.from(zu.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function SW(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}function IW(n,e,t){return n&e^~n&t}function OW(n,e,t){return n&e^n&t^e&t}class BW extends U3{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=c2(this.buffer)}update(e){bh(this),e=ew(e),Yl(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=c2(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){bh(this),F_(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,vh(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let p=o;p<i;p++)t[p]=0;SW(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=c2(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)c.setUint32(4*p,d[p],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=c,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const ba=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),J0=BigInt(2**32-1),c6=BigInt(32);function PW(n,e=!1){return e?{h:Number(n&J0),l:Number(n>>c6&J0)}:{h:Number(n>>c6&J0)|0,l:Number(n&J0)|0}}function CW(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:c}=PW(n[s],e);[r[s],i[s]]=[o,c]}return[r,i]}const _W=(n,e,t)=>n<<t|e>>>32-t,NW=(n,e,t)=>e<<t|n>>>32-t,DW=(n,e,t)=>e<<t-32|n>>>64-t,$W=(n,e,t)=>n<<t-32|e>>>64-t,TW=BigInt(0),$d=BigInt(1),kW=BigInt(2),RW=BigInt(7),UW=BigInt(256),LW=BigInt(113),j_=[],z_=[],H_=[];for(let n=0,e=$d,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],j_.push(2*(5*r+t)),z_.push((n+1)*(n+2)/2%64);let i=TW;for(let s=0;s<7;s++)e=(e<<$d^(e>>RW)*LW)%UW,e&kW&&(i^=$d<<($d<<BigInt(s))-$d);H_.push(i)}const V_=CW(H_,!0),FW=V_[0],MW=V_[1],l6=(n,e,t)=>t>32?DW(n,e,t):_W(n,e,t),u6=(n,e,t)=>t>32?$W(n,e,t):NW(n,e,t);function jW(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=t[u],d=t[u+1],p=l6(f,d,1)^t[c],g=u6(f,d,1)^t[c+1];for(let m=0;m<50;m+=10)n[o+m]^=p,n[o+m+1]^=g}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=z_[o],u=l6(i,s,c),f=u6(i,s,c),d=j_[o];i=n[d],s=n[d+1],n[d]=u,n[d+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=FW[r],n[1]^=MW[r]}vh(t)}class L3 extends U3{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,_p(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=mW(this.state)}clone(){return this._cloneInto()}keccak(){a6(this.state32),jW(this.state32,this.rounds),a6(this.state32),this.posOut=0,this.pos=0}update(e){bh(this),e=ew(e),Yl(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){bh(this,!1),Yl(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return _p(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(F_(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,vh(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new L3(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const zW=(n,e,t)=>M_(()=>new L3(e,n,t)),HW=zW(1,136,256/8),VW=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),va=new Uint32Array(64);class qW extends BW{constructor(e=32){super(64,e,8,!1),this.A=ba[0]|0,this.B=ba[1]|0,this.C=ba[2]|0,this.D=ba[3]|0,this.E=ba[4]|0,this.F=ba[5]|0,this.G=ba[6]|0,this.H=ba[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let p=0;p<16;p++,t+=4)va[p]=e.getUint32(t,!1);for(let p=16;p<64;p++){const g=va[p-15],m=va[p-2],v=us(g,7)^us(g,18)^g>>>3,b=us(m,17)^us(m,19)^m>>>10;va[p]=b+va[p-7]+v+va[p-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:d}=this;for(let p=0;p<64;p++){const g=us(c,6)^us(c,11)^us(c,25),m=d+g+IW(c,u,f)+VW[p]+va[p]|0,b=(us(r,2)^us(r,13)^us(r,22))+OW(r,i,s)|0;d=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+b|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,i,s,o,c,u,f,d)}roundClean(){vh(va)}destroy(){this.set(0,0,0,0,0,0,0,0),vh(this.buffer)}}const KW=M_(()=>new qW);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const F3=BigInt(0),nE=BigInt(1);function lg(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function M3(n){if(!lg(n))throw new Error("Uint8Array expected")}function Np(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}function Y0(n){const e=n.toString(16);return e.length&1?"0"+e:e}function q_(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?F3:BigInt("0x"+n)}const K_=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",GW=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Dp(n){if(M3(n),K_)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=GW[n[t]];return e}const Gs={_0:48,_9:57,A:65,F:70,a:97,f:102};function f6(n){if(n>=Gs._0&&n<=Gs._9)return n-Gs._0;if(n>=Gs.A&&n<=Gs.F)return n-(Gs.A-10);if(n>=Gs.a&&n<=Gs.f)return n-(Gs.a-10)}function cm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(K_)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=f6(n.charCodeAt(s)),c=f6(n.charCodeAt(s+1));if(o===void 0||c===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+c}return r}function Kl(n){return q_(Dp(n))}function G_(n){return M3(n),q_(Dp(Uint8Array.from(n).reverse()))}function ug(n,e){return cm(n.toString(16).padStart(e*2,"0"))}function W_(n,e){return ug(n,e).reverse()}function li(n,e,t){let r;if(typeof e=="string")try{r=cm(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(lg(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function lm(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];M3(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}const l2=n=>typeof n=="bigint"&&F3<=n;function j3(n,e,t){return l2(n)&&l2(e)&&l2(t)&&e<=n&&n<t}function mf(n,e,t,r){if(!j3(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function WW(n){let e;for(e=0;n>F3;n>>=nE,e+=1);return e}const tw=n=>(nE<<BigInt(n))-nE,u2=n=>new Uint8Array(n),h6=n=>Uint8Array.from(n);function QW(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=u2(n),i=u2(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},c=(...p)=>t(i,r,...p),u=(p=u2(0))=>{i=c(h6([0]),p),r=c(),p.length!==0&&(i=c(h6([1]),p),r=c())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const g=[];for(;p<e;){r=c();const m=r.slice();g.push(m),p+=r.length}return lm(...g)};return(p,g)=>{o(),u(p);let m;for(;!(m=g(f()));)u();return o(),m}}const ZW={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||lg(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function nw(n,e,t={}){const r=(i,s,o)=>{const c=ZW[s];if(typeof c!="function")throw new Error("invalid validator function");const u=n[i];if(!(o&&u===void 0)&&!c(u,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}function d6(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}function JW(n,e){if(m6(n)>e)throw new wQ({givenSize:m6(n),maxSize:e})}const Ws={zero:48,nine:57,A:65,F:70,a:97,f:102};function p6(n){if(n>=Ws.zero&&n<=Ws.nine)return n-Ws.zero;if(n>=Ws.A&&n<=Ws.F)return n-(Ws.A-10);if(n>=Ws.a&&n<=Ws.f)return n-(Ws.a-10)}function YW(n,e={}){const{dir:t,size:r=32}=e;if(r===0)return n;if(n.length>r)throw new bQ({size:n.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let s=0;s<r;s++){const o=t==="right";i[o?s:r-s-1]=n[o?s:n.length-s-1]}return i}function Q_(n,e){if(xc(n)>e)throw new cQ({givenSize:xc(n),maxSize:e})}function XW(n,e){if(typeof e=="number"&&e>0&&e>xc(n)-1)throw new Y_({offset:e,position:"start",size:xc(n)})}function eQ(n,e,t){if(typeof e=="number"&&typeof t=="number"&&xc(n)!==t-e)throw new Y_({offset:t,position:"end",size:xc(n)})}function Z_(n,e={}){const{dir:t,size:r=32}=e;if(r===0)return n;const i=n.replace("0x","");if(i.length>r*2)throw new lQ({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[t==="right"?"padEnd":"padStart"](r*2,"0")}`}const tQ="#__bigint";function z3(n,e,t){return JSON.stringify(n,(r,i)=>typeof i=="bigint"?i.toString()+tQ:i,t)}const nQ=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function rQ(n,e={}){const{strict:t=!1}=e;if(!n)throw new g6(n);if(typeof n!="string")throw new g6(n);if(t&&!/^0x[0-9a-fA-F]*$/.test(n))throw new y6(n);if(!n.startsWith("0x"))throw new y6(n)}function iQ(...n){return`0x${n.reduce((e,t)=>e+t.replace("0x",""),"")}`}function H3(n){return n instanceof Uint8Array?um(n):Array.isArray(n)?um(new Uint8Array(n)):n}function um(n,e={}){let t="";for(let i=0;i<n.length;i++)t+=nQ[n[i]];const r=`0x${t}`;return typeof e.size=="number"?(Q_(r,e.size),J_(r,e.size)):r}function f2(n,e={}){const{signed:t,size:r}=e,i=BigInt(n);let s;r?t?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&t?-s-1n:0;if(s&&i>s||i<o){const f=typeof n=="bigint"?"n":"";throw new aQ({max:s?`${s}${f}`:void 0,min:`${o}${f}`,signed:t,size:r,value:`${n}${f}`})}const u=`0x${(t&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?sQ(u,r):u}function sQ(n,e){return Z_(n,{dir:"left",size:e})}function J_(n,e){return Z_(n,{dir:"right",size:e})}function io(n,e,t,r={}){const{strict:i}=r;XW(n,e);const s=`0x${n.replace("0x","").slice((e??0)*2,(t??n.length)*2)}`;return i&&eQ(s,e,t),s}function xc(n){return Math.ceil((n.length-2)/2)}function oQ(n,e={}){const{strict:t=!1}=e;try{return rQ(n,{strict:t}),!0}catch{return!1}}class aQ extends vt{constructor({max:e,min:t,signed:r,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class g6 extends vt{constructor(e){super(`Value \`${typeof e=="object"?z3(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class y6 extends vt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let cQ=class extends vt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class Y_ extends vt{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let lQ=class extends vt{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const uQ=new TextEncoder;function fQ(n){if(!(n instanceof Uint8Array)){if(!n)throw new X0(n);if(typeof n!="object")throw new X0(n);if(!("BYTES_PER_ELEMENT"in n))throw new X0(n);if(n.BYTES_PER_ELEMENT!==1||n.constructor.name!=="Uint8Array")throw new X0(n)}}function hQ(n){return n instanceof Uint8Array?n:typeof n=="string"?pQ(n):dQ(n)}function dQ(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function pQ(n,e={}){const{size:t}=e;let r=n;t&&(Q_(n,t),r=J_(n,t));let i=r.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let c=0,u=0;c<s;c++){const f=p6(i.charCodeAt(u++)),d=p6(i.charCodeAt(u++));if(f===void 0||d===void 0)throw new vt(`Invalid byte sequence ("${i[u-2]}${i[u-1]}" in "${i}").`);o[c]=f*16+d}return o}function gQ(n,e={}){const{size:t}=e,r=uQ.encode(n);return typeof t=="number"?(JW(r,t),yQ(r,t)):r}function yQ(n,e){return YW(n,{dir:"right",size:e})}function m6(n){return n.length}function mQ(n){try{return fQ(n),!0}catch{return!1}}class X0 extends vt{constructor(e){super(`Value \`${typeof e=="object"?z3(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class wQ extends vt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class bQ extends vt{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function X_(n,e={}){const{as:t=typeof n=="string"?"Hex":"Bytes"}=e,r=HW(hQ(n));return t==="Bytes"?r:um(r)}class vQ extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const EQ={checksum:new vQ(8192)},h2=EQ.checksum;function eN(n,e={}){const{compressed:t}=e,{prefix:r,x:i,y:s}=n;if(t===!1||typeof i=="bigint"&&typeof s=="bigint"){if(r!==4)throw new w6({prefix:r,cause:new BQ});return}if(t===!0||typeof i=="bigint"&&typeof s>"u"){if(r!==3&&r!==2)throw new w6({prefix:r,cause:new OQ});return}throw new IQ({publicKey:n})}function xQ(n){const e=(()=>{if(oQ(n))return tN(n);if(mQ(n))return AQ(n);const{prefix:t,x:r,y:i}=n;return typeof r=="bigint"&&typeof i=="bigint"?{prefix:t??4,x:r,y:i}:{prefix:t,x:r}})();return eN(e),e}function AQ(n){return tN(um(n))}function tN(n){if(n.length!==132&&n.length!==130&&n.length!==68)throw new PQ({publicKey:n});if(n.length===130){const r=BigInt(io(n,0,32)),i=BigInt(io(n,32,64));return{prefix:4,x:r,y:i}}if(n.length===132){const r=Number(io(n,0,1)),i=BigInt(io(n,1,33)),s=BigInt(io(n,33,65));return{prefix:r,x:i,y:s}}const e=Number(io(n,0,1)),t=BigInt(io(n,1,33));return{prefix:e,x:t}}function SQ(n,e={}){eN(n);const{prefix:t,x:r,y:i}=n,{includePrefix:s=!0}=e;return iQ(s?f2(t,{size:1}):"0x",f2(r,{size:32}),typeof i=="bigint"?f2(i,{size:32}):"0x")}class IQ extends vt{constructor({publicKey:e}){super(`Value \`${z3(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class w6 extends vt{constructor({prefix:e,cause:t}){super(`Prefix "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class OQ extends vt{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class BQ extends vt{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let PQ=class extends vt{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${xc(H3(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const CQ=/^0x[a-fA-F0-9]{40}$/;function nN(n,e={}){const{strict:t=!0}=e;if(!CQ.test(n))throw new b6({address:n,cause:new DQ});if(t){if(n.toLowerCase()===n)return;if(rN(n)!==n)throw new b6({address:n,cause:new $Q})}}function rN(n){if(h2.has(n))return h2.get(n);nN(n,{strict:!1});const e=n.substring(2).toLowerCase(),t=X_(gQ(e),{as:"Bytes"}),r=e.split("");for(let s=0;s<40;s+=2)t[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(t[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());const i=`0x${r.join("")}`;return h2.set(n,i),i}function _Q(n,e={}){const{checksum:t=!1}=e;return nN(n),t?rN(n):n}function NQ(n,e={}){const t=X_(`0x${SQ(n).slice(4)}`).substring(26);return _Q(`0x${t}`,e)}class b6 extends vt{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class DQ extends vt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class $Q extends vt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class iN extends U3{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,yW(e);const r=ew(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),vh(s)}update(e){return bh(this),this.iHash.update(e),this}digestInto(e){bh(this),Yl(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const sN=(n,e,t)=>new iN(n,e).update(t).digest();sN.create=(n,e)=>new iN(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xr=BigInt(0),Yn=BigInt(1),yl=BigInt(2),TQ=BigInt(3),oN=BigInt(4),aN=BigInt(5),cN=BigInt(8);function yr(n,e){const t=n%e;return t>=xr?t:e+t}function ni(n,e,t){let r=n;for(;e-- >xr;)r*=r,r%=t;return r}function rE(n,e){if(n===xr)throw new Error("invert: expected non-zero number");if(e<=xr)throw new Error("invert: expected positive modulus, got "+e);let t=yr(n,e),r=e,i=xr,s=Yn;for(;t!==xr;){const c=r/t,u=r%t,f=i-s*c;r=t,t=u,i=s,s=f}if(r!==Yn)throw new Error("invert: does not exist");return yr(i,e)}function lN(n,e){const t=(n.ORDER+Yn)/oN,r=n.pow(e,t);if(!n.eql(n.sqr(r),e))throw new Error("Cannot find square root");return r}function kQ(n,e){const t=(n.ORDER-aN)/cN,r=n.mul(e,yl),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,yl),i),c=n.mul(s,n.sub(o,n.ONE));if(!n.eql(n.sqr(c),e))throw new Error("Cannot find square root");return c}function RQ(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let e=n-Yn,t=0;for(;e%yl===xr;)e/=yl,t++;let r=yl;const i=V3(n);for(;v6(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return lN;let s=i.pow(r,e);const o=(e+Yn)/yl;return function(u,f){if(u.is0(f))return f;if(v6(u,f)!==1)throw new Error("Cannot find square root");let d=t,p=u.mul(u.ONE,s),g=u.pow(f,e),m=u.pow(f,o);for(;!u.eql(g,u.ONE);){if(u.is0(g))return u.ZERO;let v=1,b=u.sqr(g);for(;!u.eql(b,u.ONE);)if(v++,b=u.sqr(b),v===d)throw new Error("Cannot find square root");const A=Yn<<BigInt(d-v-1),N=u.pow(p,A);d=v,p=u.sqr(N),g=u.mul(g,p),m=u.mul(m,N)}return m}}function UQ(n){return n%oN===TQ?lN:n%cN===aN?kQ:RQ(n)}const LQ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function FQ(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=LQ.reduce((r,i)=>(r[i]="function",r),e);return nw(n,t)}function MQ(n,e,t){if(t<xr)throw new Error("invalid exponent, negatives unsupported");if(t===xr)return n.ONE;if(t===Yn)return e;let r=n.ONE,i=e;for(;t>xr;)t&Yn&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Yn;return r}function uN(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,c,u)=>n.is0(c)?o:(r[u]=o,n.mul(o,c)),n.ONE),s=n.inv(i);return e.reduceRight((o,c,u)=>n.is0(c)?o:(r[u]=n.mul(o,r[u]),n.mul(o,c)),s),r}function v6(n,e){const t=(n.ORDER-Yn)/yl,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function fN(n,e){e!==void 0&&_p(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function V3(n,e,t=!1,r={}){if(n<=xr)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:s}=fN(n,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const c=Object.freeze({ORDER:n,isLE:t,BITS:i,BYTES:s,MASK:tw(i),ZERO:xr,ONE:Yn,create:u=>yr(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return xr<=u&&u<n},is0:u=>u===xr,isOdd:u=>(u&Yn)===Yn,neg:u=>yr(-u,n),eql:(u,f)=>u===f,sqr:u=>yr(u*u,n),add:(u,f)=>yr(u+f,n),sub:(u,f)=>yr(u-f,n),mul:(u,f)=>yr(u*f,n),pow:(u,f)=>MQ(c,u,f),div:(u,f)=>yr(u*rE(f,n),n),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>rE(u,n),sqrt:r.sqrt||(u=>(o||(o=UQ(n)),o(c,u))),toBytes:u=>t?W_(u,s):ug(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return t?G_(u):Kl(u)},invertBatch:u=>uN(c,u),cmov:(u,f,d)=>d?f:u});return Object.freeze(c)}function hN(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function dN(n){const e=hN(n);return e+Math.ceil(e/2)}function jQ(n,e,t=!1){const r=n.length,i=hN(e),s=dN(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?G_(n):Kl(n),c=yr(o,e-Yn)+Yn;return t?W_(c,i):ug(c,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const E6=BigInt(0),iE=BigInt(1);function d2(n,e){const t=e.negate();return n?t:e}function pN(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function p2(n,e){pN(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=tw(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function x6(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t;let c=Number(n&i),u=n>>o;c>r&&(c-=s,u+=iE);const f=e*r,d=f+Math.abs(c)-1,p=c===0,g=c<0,m=e%2!==0;return{nextN:u,offset:d,isZero:p,isNeg:g,isNegF:m,offsetF:f}}function zQ(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function HQ(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const g2=new WeakMap,gN=new WeakMap;function y2(n){return gN.get(n)||1}function VQ(n,e){return{constTimeNegate:d2,hasPrecomputes(t){return y2(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>E6;)r&iE&&(i=i.add(s)),s=s.double(),r>>=iE;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=p2(r,e),o=[];let c=t,u=c;for(let f=0;f<i;f++){u=c,o.push(u);for(let d=1;d<s;d++)u=u.add(c),o.push(u);c=u.double()}return o},wNAF(t,r,i){let s=n.ZERO,o=n.BASE;const c=p2(t,e);for(let u=0;u<c.windows;u++){const{nextN:f,offset:d,isZero:p,isNeg:g,isNegF:m,offsetF:v}=x6(i,u,c);i=f,p?o=o.add(d2(m,r[v])):s=s.add(d2(g,r[d]))}return{p:s,f:o}},wNAFUnsafe(t,r,i,s=n.ZERO){const o=p2(t,e);for(let c=0;c<o.windows&&i!==E6;c++){const{nextN:u,offset:f,isZero:d,isNeg:p}=x6(i,c,o);if(i=u,!d){const g=r[f];s=s.add(p?g.negate():g)}}return s},getPrecomputes(t,r,i){let s=g2.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&g2.set(r,i(s))),s},wNAFCached(t,r,i){const s=y2(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const o=y2(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),r,s)},setWindowSize(t,r){pN(r,e),gN.set(t,r),g2.delete(t)}}}function qQ(n,e,t,r){zQ(t,n),HQ(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=WW(BigInt(i));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const f=tw(u),d=new Array(Number(f)+1).fill(o),p=Math.floor((e.BITS-1)/u)*u;let g=o;for(let m=p;m>=0;m-=u){d.fill(o);for(let b=0;b<s;b++){const A=r[b],N=Number(A>>BigInt(m)&f);d[N]=d[N].add(t[b])}let v=o;for(let b=d.length-1,A=o;b>0;b--)A=A.add(d[b]),v=v.add(A);if(g=g.add(v),m!==0)for(let b=0;b<u;b++)g=g.double()}return g}function yN(n){return FQ(n.Fp),nw(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...fN(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function A6(n){n.lowS!==void 0&&Np("lowS",n.lowS),n.prehash!==void 0&&Np("prehash",n.prehash)}function KQ(n){const e=yN(n);nw(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class GQ extends Error{constructor(e=""){super(e)}}const co={Err:GQ,_tlv:{encode:(n,e)=>{const{Err:t}=co;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=Y0(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?Y0(i.length/2|128):"";return Y0(n)+s+i+e},decode(n,e){const{Err:t}=co;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new t("tlv.decode: length bytes not complete");if(f[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const d of f)o=o<<8|d;if(r+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=co;if(n<So)throw new e("integer: negative integers are not allowed");let t=Y0(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=co;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Kl(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=co,i=li("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,s),{v:f,l:d}=r.decode(2,u);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(f)}},hexFromSig(n){const{_tlv:e,_int:t}=co,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}};function m2(n,e){return Dp(ug(n,e))}const So=BigInt(0),tn=BigInt(1);BigInt(2);const w2=BigInt(3),WQ=BigInt(4);function QQ(n){const e=KQ(n),{Fp:t}=e,r=V3(e.n,e.nBitLength),i=e.toBytes||((O,T,k)=>{const j=T.toAffine();return lm(Uint8Array.from([4]),t.toBytes(j.x),t.toBytes(j.y))}),s=e.fromBytes||(O=>{const T=O.subarray(1),k=t.fromBytes(T.subarray(0,t.BYTES)),j=t.fromBytes(T.subarray(t.BYTES,2*t.BYTES));return{x:k,y:j}});function o(O){const{a:T,b:k}=e,j=t.sqr(O),H=t.mul(j,O);return t.add(t.add(H,t.mul(O,T)),k)}function c(O,T){const k=t.sqr(T),j=o(O);return t.eql(k,j)}if(!c(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const u=t.mul(t.pow(e.a,w2),WQ),f=t.mul(t.sqr(e.b),BigInt(27));if(t.is0(t.add(u,f)))throw new Error("bad curve params: a or b");function d(O){return j3(O,tn,e.n)}function p(O){const{allowedPrivateKeyLengths:T,nByteLength:k,wrapPrivateKey:j,n:H}=e;if(T&&typeof O!="bigint"){if(lg(O)&&(O=Dp(O)),typeof O!="string"||!T.includes(O.length))throw new Error("invalid private key");O=O.padStart(k*2,"0")}let V;try{V=typeof O=="bigint"?O:Kl(li("private key",O,k))}catch{throw new Error("invalid private key, expected hex or "+k+" bytes, got "+typeof O)}return j&&(V=yr(V,H)),mf("private key",V,tn,H),V}function g(O){if(!(O instanceof b))throw new Error("ProjectivePoint expected")}const m=d6((O,T)=>{const{px:k,py:j,pz:H}=O;if(t.eql(H,t.ONE))return{x:k,y:j};const V=O.is0();T==null&&(T=V?t.ONE:t.inv(H));const M=t.mul(k,T),K=t.mul(j,T),Q=t.mul(H,T);if(V)return{x:t.ZERO,y:t.ZERO};if(!t.eql(Q,t.ONE))throw new Error("invZ was invalid");return{x:M,y:K}}),v=d6(O=>{if(O.is0()){if(e.allowInfinityPoint&&!t.is0(O.py))return;throw new Error("bad point: ZERO")}const{x:T,y:k}=O.toAffine();if(!t.isValid(T)||!t.isValid(k))throw new Error("bad point: x or y not FE");if(!c(T,k))throw new Error("bad point: equation left != right");if(!O.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(T,k,j){if(T==null||!t.isValid(T))throw new Error("x required");if(k==null||!t.isValid(k)||t.is0(k))throw new Error("y required");if(j==null||!t.isValid(j))throw new Error("z required");this.px=T,this.py=k,this.pz=j,Object.freeze(this)}static fromAffine(T){const{x:k,y:j}=T||{};if(!T||!t.isValid(k)||!t.isValid(j))throw new Error("invalid affine point");if(T instanceof b)throw new Error("projective point not allowed");const H=V=>t.eql(V,t.ZERO);return H(k)&&H(j)?b.ZERO:new b(k,j,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(T){const k=uN(t,T.map(j=>j.pz));return T.map((j,H)=>j.toAffine(k[H])).map(b.fromAffine)}static fromHex(T){const k=b.fromAffine(s(li("pointHex",T)));return k.assertValidity(),k}static fromPrivateKey(T){return b.BASE.multiply(p(T))}static msm(T,k){return qQ(b,r,T,k)}_setWindowSize(T){R.setWindowSize(this,T)}assertValidity(){v(this)}hasEvenY(){const{y:T}=this.toAffine();if(t.isOdd)return!t.isOdd(T);throw new Error("Field doesn't support isOdd")}equals(T){g(T);const{px:k,py:j,pz:H}=this,{px:V,py:M,pz:K}=T,Q=t.eql(t.mul(k,K),t.mul(V,H)),z=t.eql(t.mul(j,K),t.mul(M,H));return Q&&z}negate(){return new b(this.px,t.neg(this.py),this.pz)}double(){const{a:T,b:k}=e,j=t.mul(k,w2),{px:H,py:V,pz:M}=this;let K=t.ZERO,Q=t.ZERO,z=t.ZERO,P=t.mul(H,H),D=t.mul(V,V),w=t.mul(M,M),x=t.mul(H,V);return x=t.add(x,x),z=t.mul(H,M),z=t.add(z,z),K=t.mul(T,z),Q=t.mul(j,w),Q=t.add(K,Q),K=t.sub(D,Q),Q=t.add(D,Q),Q=t.mul(K,Q),K=t.mul(x,K),z=t.mul(j,z),w=t.mul(T,w),x=t.sub(P,w),x=t.mul(T,x),x=t.add(x,z),z=t.add(P,P),P=t.add(z,P),P=t.add(P,w),P=t.mul(P,x),Q=t.add(Q,P),w=t.mul(V,M),w=t.add(w,w),P=t.mul(w,x),K=t.sub(K,P),z=t.mul(w,D),z=t.add(z,z),z=t.add(z,z),new b(K,Q,z)}add(T){g(T);const{px:k,py:j,pz:H}=this,{px:V,py:M,pz:K}=T;let Q=t.ZERO,z=t.ZERO,P=t.ZERO;const D=e.a,w=t.mul(e.b,w2);let x=t.mul(k,V),B=t.mul(j,M),C=t.mul(H,K),I=t.add(k,j),_=t.add(V,M);I=t.mul(I,_),_=t.add(x,B),I=t.sub(I,_),_=t.add(k,H);let $=t.add(V,K);return _=t.mul(_,$),$=t.add(x,C),_=t.sub(_,$),$=t.add(j,H),Q=t.add(M,K),$=t.mul($,Q),Q=t.add(B,C),$=t.sub($,Q),P=t.mul(D,_),Q=t.mul(w,C),P=t.add(Q,P),Q=t.sub(B,P),P=t.add(B,P),z=t.mul(Q,P),B=t.add(x,x),B=t.add(B,x),C=t.mul(D,C),_=t.mul(w,_),B=t.add(B,C),C=t.sub(x,C),C=t.mul(D,C),_=t.add(_,C),x=t.mul(B,_),z=t.add(z,x),x=t.mul($,_),Q=t.mul(I,Q),Q=t.sub(Q,x),x=t.mul(I,B),P=t.mul($,P),P=t.add(P,x),new b(Q,z,P)}subtract(T){return this.add(T.negate())}is0(){return this.equals(b.ZERO)}wNAF(T){return R.wNAFCached(this,T,b.normalizeZ)}multiplyUnsafe(T){const{endo:k,n:j}=e;mf("scalar",T,So,j);const H=b.ZERO;if(T===So)return H;if(this.is0()||T===tn)return this;if(!k||R.hasPrecomputes(this))return R.wNAFCachedUnsafe(this,T,b.normalizeZ);let{k1neg:V,k1:M,k2neg:K,k2:Q}=k.splitScalar(T),z=H,P=H,D=this;for(;M>So||Q>So;)M&tn&&(z=z.add(D)),Q&tn&&(P=P.add(D)),D=D.double(),M>>=tn,Q>>=tn;return V&&(z=z.negate()),K&&(P=P.negate()),P=new b(t.mul(P.px,k.beta),P.py,P.pz),z.add(P)}multiply(T){const{endo:k,n:j}=e;mf("scalar",T,tn,j);let H,V;if(k){const{k1neg:M,k1:K,k2neg:Q,k2:z}=k.splitScalar(T);let{p:P,f:D}=this.wNAF(K),{p:w,f:x}=this.wNAF(z);P=R.constTimeNegate(M,P),w=R.constTimeNegate(Q,w),w=new b(t.mul(w.px,k.beta),w.py,w.pz),H=P.add(w),V=D.add(x)}else{const{p:M,f:K}=this.wNAF(T);H=M,V=K}return b.normalizeZ([H,V])[0]}multiplyAndAddUnsafe(T,k,j){const H=b.BASE,V=(K,Q)=>Q===So||Q===tn||!K.equals(H)?K.multiplyUnsafe(Q):K.multiply(Q),M=V(this,k).add(V(T,j));return M.is0()?void 0:M}toAffine(T){return m(this,T)}isTorsionFree(){const{h:T,isTorsionFree:k}=e;if(T===tn)return!0;if(k)return k(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:T,clearCofactor:k}=e;return T===tn?this:k?k(b,this):this.multiplyUnsafe(e.h)}toRawBytes(T=!0){return Np("isCompressed",T),this.assertValidity(),i(b,this,T)}toHex(T=!0){return Np("isCompressed",T),Dp(this.toRawBytes(T))}}b.BASE=new b(e.Gx,e.Gy,t.ONE),b.ZERO=new b(t.ZERO,t.ONE,t.ZERO);const{endo:A,nBitLength:N}=e,R=VQ(b,A?Math.ceil(N/2):N);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:p,weierstrassEquation:o,isWithinCurveOrder:d}}function ZQ(n){const e=yN(n);return nw(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function JQ(n){const e=ZQ(n),{Fp:t,n:r,nByteLength:i,nBitLength:s}=e,o=t.BYTES+1,c=2*t.BYTES+1;function u(w){return yr(w,r)}function f(w){return rE(w,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:p,weierstrassEquation:g,isWithinCurveOrder:m}=QQ({...e,toBytes(w,x,B){const C=x.toAffine(),I=t.toBytes(C.x),_=lm;return Np("isCompressed",B),B?_(Uint8Array.from([x.hasEvenY()?2:3]),I):_(Uint8Array.from([4]),I,t.toBytes(C.y))},fromBytes(w){const x=w.length,B=w[0],C=w.subarray(1);if(x===o&&(B===2||B===3)){const I=Kl(C);if(!j3(I,tn,t.ORDER))throw new Error("Point is not on curve");const _=g(I);let $;try{$=t.sqrt(_)}catch(q){const Z=q instanceof Error?": "+q.message:"";throw new Error("Point is not on curve"+Z)}const U=($&tn)===tn;return(B&1)===1!==U&&($=t.neg($)),{x:I,y:$}}else if(x===c&&B===4){const I=t.fromBytes(C.subarray(0,t.BYTES)),_=t.fromBytes(C.subarray(t.BYTES,2*t.BYTES));return{x:I,y:_}}else{const I=o,_=c;throw new Error("invalid Point, expected length of "+I+", or uncompressed "+_+", got "+x)}}});function v(w){const x=r>>tn;return w>x}function b(w){return v(w)?u(-w):w}const A=(w,x,B)=>Kl(w.slice(x,B));class N{constructor(x,B,C){mf("r",x,tn,r),mf("s",B,tn,r),this.r=x,this.s=B,C!=null&&(this.recovery=C),Object.freeze(this)}static fromCompact(x){const B=i;return x=li("compactSignature",x,B*2),new N(A(x,0,B),A(x,B,2*B))}static fromDER(x){const{r:B,s:C}=co.toSig(li("DER",x));return new N(B,C)}assertValidity(){}addRecoveryBit(x){return new N(this.r,this.s,x)}recoverPublicKey(x){const{r:B,s:C,recovery:I}=this,_=H(li("msgHash",x));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");const $=I===2||I===3?B+e.n:B;if($>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const U=(I&1)===0?"02":"03",Y=d.fromHex(U+m2($,t.BYTES)),q=f($),Z=u(-_*q),te=u(C*q),re=d.BASE.multiplyAndAddUnsafe(Y,Z,te);if(!re)throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return cm(this.toDERHex())}toDERHex(){return co.hexFromSig(this)}toCompactRawBytes(){return cm(this.toCompactHex())}toCompactHex(){const x=i;return m2(this.r,x)+m2(this.s,x)}}const R={isValidPrivateKey(w){try{return p(w),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const w=dN(e.n);return jQ(e.randomBytes(w),e.n)},precompute(w=8,x=d.BASE){return x._setWindowSize(w),x.multiply(BigInt(3)),x}};function O(w,x=!0){return d.fromPrivateKey(w).toRawBytes(x)}function T(w){if(typeof w=="bigint")return!1;if(w instanceof d)return!0;const B=li("key",w).length,C=t.BYTES,I=C+1,_=2*C+1;if(!(e.allowedPrivateKeyLengths||i===I))return B===I||B===_}function k(w,x,B=!0){if(T(w)===!0)throw new Error("first arg must be private key");if(T(x)===!1)throw new Error("second arg must be public key");return d.fromHex(x).multiply(p(w)).toRawBytes(B)}const j=e.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const x=Kl(w),B=w.length*8-s;return B>0?x>>BigInt(B):x},H=e.bits2int_modN||function(w){return u(j(w))},V=tw(s);function M(w){return mf("num < 2^"+s,w,So,V),ug(w,i)}function K(w,x,B=Q){if(["recovered","canonical"].some(ie=>ie in B))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:I}=e;let{lowS:_,prehash:$,extraEntropy:U}=B;_==null&&(_=!0),w=li("msgHash",w),A6(B),$&&(w=li("prehashed msgHash",C(w)));const Y=H(w),q=p(x),Z=[M(q),M(Y)];if(U!=null&&U!==!1){const ie=U===!0?I(t.BYTES):U;Z.push(li("extraEntropy",ie))}const te=lm(...Z),re=Y;function le(ie){const ue=j(ie);if(!m(ue))return;const Ne=f(ue),Re=d.BASE.multiply(ue).toAffine(),Te=u(Re.x);if(Te===So)return;const Ve=u(Ne*u(re+Te*q));if(Ve===So)return;let Gt=(Re.x===Te?0:2)|Number(Re.y&tn),on=Ve;return _&&v(Ve)&&(on=b(Ve),Gt^=1),new N(Te,on,Gt)}return{seed:te,k2sig:le}}const Q={lowS:e.lowS,prehash:!1},z={lowS:e.lowS,prehash:!1};function P(w,x,B=Q){const{seed:C,k2sig:I}=K(w,x,B),_=e;return QW(_.hash.outputLen,_.nByteLength,_.hmac)(C,I)}d.BASE._setWindowSize(8);function D(w,x,B,C=z){var Gt;const I=w;x=li("msgHash",x),B=li("publicKey",B);const{lowS:_,prehash:$,format:U}=C;if(A6(C),"strict"in C)throw new Error("options.strict was renamed to lowS");if(U!==void 0&&U!=="compact"&&U!=="der")throw new Error("format must be compact or der");const Y=typeof I=="string"||lg(I),q=!Y&&!U&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!Y&&!q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Z,te;try{if(q&&(Z=new N(I.r,I.s)),Y){try{U!=="compact"&&(Z=N.fromDER(I))}catch(on){if(!(on instanceof co.Err))throw on}!Z&&U!=="der"&&(Z=N.fromCompact(I))}te=d.fromHex(B)}catch{return!1}if(!Z||_&&Z.hasHighS())return!1;$&&(x=e.hash(x));const{r:re,s:le}=Z,ie=H(x),ue=f(le),Ne=u(ie*ue),Re=u(re*ue),Te=(Gt=d.BASE.multiplyAndAddUnsafe(te,Ne,Re))==null?void 0:Gt.toAffine();return Te?u(Te.x)===re:!1}return{CURVE:e,getPublicKey:O,getSharedSecret:k,sign:P,verify:D,ProjectivePoint:d,Signature:N,utils:R}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function YQ(n){return{hash:n,hmac:(e,...t)=>sN(n,e,xW(...t)),randomBytes:AW}}function XQ(n,e){const t=r=>JQ({...n,...YQ(r)});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mN=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),S6=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),eZ=BigInt(0),tZ=BigInt(1),sE=BigInt(2),I6=(n,e)=>(n+e/sE)/e;function nZ(n){const e=mN,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),c=BigInt(44),u=BigInt(88),f=n*n*n%e,d=f*f*n%e,p=ni(d,t,e)*d%e,g=ni(p,t,e)*d%e,m=ni(g,sE,e)*f%e,v=ni(m,i,e)*m%e,b=ni(v,s,e)*v%e,A=ni(b,c,e)*b%e,N=ni(A,u,e)*A%e,R=ni(N,c,e)*b%e,O=ni(R,t,e)*d%e,T=ni(O,o,e)*v%e,k=ni(T,r,e)*f%e,j=ni(k,sE,e);if(!oE.eql(oE.sqr(j),n))throw new Error("Cannot find square root");return j}const oE=V3(mN,void 0,void 0,{sqrt:nZ}),rZ=XQ({a:eZ,b:BigInt(7),Fp:oE,n:S6,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=S6,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-tZ*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),c=I6(s*n,e),u=I6(-r*n,e);let f=yr(n-c*t-u*i,e),d=yr(-c*r-u*s,e);const p=f>o,g=d>o;if(p&&(f=e-f),g&&(d=e-d),f>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:p,k1:f,k2neg:g,k2:d}}}},KW);function iZ(n){if(n.length!==130&&n.length!==132)throw new oZ({signature:n});const e=BigInt(io(n,0,32)),t=BigInt(io(n,32,64)),r=(()=>{const i=+`0x${n.slice(130)}`;if(!Number.isNaN(i))try{return sZ(i)}catch{throw new aZ({value:i})}})();return typeof r>"u"?{r:e,s:t}:{r:e,s:t,yParity:r}}function sZ(n){if(n===0||n===27)return 0;if(n===1||n===28)return 1;if(n>=35)return n%2===0?1:0;throw new cZ({value:n})}class oZ extends vt{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${xc(H3(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class aZ extends vt{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class cZ extends vt{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function lZ(n){return NQ(uZ(n))}function uZ(n){const{payload:e,signature:t}=n,{r,s:i,yParity:s}=t,c=new rZ.Signature(BigInt(r),BigInt(i)).addRecoveryBit(s).recoverPublicKey(H3(e).substring(2));return xQ(c)}function fZ(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<n.length;f++){const d=n.charAt(f),p=d.charCodeAt(0);if(e[p]!==255)throw new TypeError(d+" is ambiguous");e[p]=f}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let d=0,p=0,g=0;const m=f.length;for(;g!==m&&f[g]===0;)g++,d++;const v=(m-g)*s+1>>>0,b=new Uint8Array(v);for(;g!==m;){let R=f[g],O=0;for(let T=v-1;(R!==0||O<p)&&T!==-1;T--,O++)R+=256*b[T]>>>0,b[T]=R%t>>>0,R=R/t>>>0;if(R!==0)throw new Error("Non-zero carry");p=O,g++}let A=v-p;for(;A!==v&&b[A]===0;)A++;let N=r.repeat(d);for(;A<v;++A)N+=n.charAt(b[A]);return N}function c(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let d=0,p=0,g=0;for(;f[d]===r;)p++,d++;const m=(f.length-d)*i+1>>>0,v=new Uint8Array(m);for(;d<f.length;){const R=f.charCodeAt(d);if(R>255)return;let O=e[R];if(O===255)return;let T=0;for(let k=m-1;(O!==0||T<g)&&k!==-1;k--,T++)O+=t*v[k]>>>0,v[k]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");g=T,d++}let b=m-g;for(;b!==m&&v[b]===0;)b++;const A=new Uint8Array(p+(m-b));let N=p;for(;b!==m;)A[N++]=v[b++];return A}function u(f){const d=c(f);if(d)return d;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:c,decode:u}}var hZ="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const fg=fZ(hZ);var dZ={};const pZ=":";function _y(n){const[e,t]=n.split(pZ);return{namespace:e,reference:t}}function wN(n,e){return n.includes(":")?[n]:e.chains||[]}var gZ=Object.defineProperty,yZ=Object.defineProperties,mZ=Object.getOwnPropertyDescriptors,O6=Object.getOwnPropertySymbols,wZ=Object.prototype.hasOwnProperty,bZ=Object.prototype.propertyIsEnumerable,aE=(n,e,t)=>e in n?gZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,B6=(n,e)=>{for(var t in e||(e={}))wZ.call(e,t)&&aE(n,t,e[t]);if(O6)for(var t of O6(e))bZ.call(e,t)&&aE(n,t,e[t]);return n},vZ=(n,e)=>yZ(n,mZ(e)),P6=(n,e,t)=>aE(n,typeof e!="symbol"?e+"":e,t);const EZ="ReactNative",Kr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},xZ="js";function fm(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Cc(){return!Ro.getDocument()&&!!Ro.getNavigator()&&navigator.product===EZ}function AZ(){return Cc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function SZ(){return Cc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Ch(){return!fm()&&!!Ro.getNavigator()&&!!Ro.getDocument()}function hg(){return Cc()?Kr.reactNative:fm()?Kr.node:Ch()?Kr.browser:Kr.unknown}function C6(){var n;try{return Cc()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(n=global.Application)==null?void 0:n.applicationId:void 0}catch{return}}function IZ(n,e){const t=new URLSearchParams(n);return Object.entries(e).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!=null&&t.set(r,String(i))}),t.toString()}function OZ(n){var e,t;const r=bN();try{return n!=null&&n.url&&r.url&&new URL(n.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${n.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),n.url=r.url),(e=n==null?void 0:n.icons)!=null&&e.length&&n.icons.length>0&&(n.icons=n.icons.filter(i=>i!=="")),vZ(B6(B6({},r),n),{url:(n==null?void 0:n.url)||r.url,name:(n==null?void 0:n.name)||r.name,description:(n==null?void 0:n.description)||r.description,icons:(t=n==null?void 0:n.icons)!=null&&t.length&&n.icons.length>0?n.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),n||r}}function bN(){return hW.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function BZ(){if(hg()===Kr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:r}=global.Platform;return[t,r].join("-")}const n=sW();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function PZ(){var n;const e=hg();return e===Kr.browser?[e,((n=Ro.getLocation())==null?void 0:n.host)||"unknown"].join(":"):e}function vN(n,e,t){const r=BZ(),i=PZ();return[[n,e].join("-"),[xZ,t].join("-"),r,i].join("/")}function CZ({protocol:n,version:e,relayUrl:t,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:c,packageName:u}){const f=t.split("?"),d=vN(n,e,r),p={auth:i,ua:d,projectId:s,useOnCloseEvent:o,packageName:u||void 0,bundleId:c||void 0},g=IZ(f[1]||"",p);return f[0]+"?"+g}function ml(n,e){return n.filter(t=>e.includes(t)).length===n.length}function cE(n){return Object.fromEntries(n.entries())}function lE(n){return new Map(Object.entries(n))}function Xc(n=me.FIVE_MINUTES,e){const t=me.toMiliseconds(n||me.FIVE_MINUTES);let r,i,s,o;return{resolve:c=>{s&&r&&(clearTimeout(s),r(c),o=Promise.resolve(c))},reject:c=>{s&&i&&(clearTimeout(s),i(c))},done:()=>new Promise((c,u)=>{if(o)return c(o);s=setTimeout(()=>{const f=new Error(e);o=Promise.reject(f),u(f)},t),r=c,i=u})}}function Ds(n,e,t){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(t)),e);try{const o=await n;r(o)}catch(o){i(o)}clearTimeout(s)})}function EN(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function _Z(n){return EN("topic",n)}function NZ(n){return EN("id",n)}function xN(n){const[e,t]=n.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")r.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return r}function Ht(n,e){return me.fromMiliseconds(Date.now()+me.toMiliseconds(n))}function Ua(n){return Date.now()>=me.toMiliseconds(n)}function nt(n,e){return`${n}${e?`:${e}`:""}`}function Gl(n=[],e=[]){return[...new Set([...n,...e])]}async function DZ({id:n,topic:e,wcDeepLink:t}){var r;try{if(!t)return;const i=typeof t=="string"?JSON.parse(t):t,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=$Z(s,n,e),c=hg();if(c===Kr.browser){if(!((r=Ro.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}TZ(o)}else c===Kr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function $Z(n,e,t){const r=`requestId=${e}&sessionTopic=${t}`;n.endsWith("/")&&(n=n.slice(0,-1));let i=`${n}`;if(n.startsWith("https://t.me")){const s=n.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${LZ(r,!0)}`}else i=`${i}/wc?${r}`;return i}function TZ(n){let e="_self";UZ()?e="_top":(RZ()||n.startsWith("https://")||n.startsWith("http://"))&&(e="_blank"),window.open(n,e,"noreferrer noopener")}async function kZ(n,e){let t="";try{if(Ch()&&(t=localStorage.getItem(e),t))return t;t=await n.getItem(e)}catch(r){console.error(r)}return t}function _6(n,e){if(!n.includes(e))return null;const t=n.split(/([&,?,=])/),r=t.indexOf(e);return t[r+2]}function N6(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function q3(){return typeof process<"u"&&dZ.IS_VITEST==="true"}function RZ(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function UZ(){try{return window.self!==window.top}catch{return!1}}function LZ(n,e=!1){const t=Buffer.from(n).toString("base64");return e?t.replace(/[=]/g,""):t}function AN(n){return Buffer.from(n,"base64").toString("utf-8")}function FZ(n){return new Promise(e=>setTimeout(e,n))}let MZ=class{constructor({limit:e}){P6(this,"limit"),P6(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const t=this.set.values().next().value;t&&this.set.delete(t)}this.set.add(e)}}has(e){return this.set.has(e)}};const ey=BigInt(2**32-1),D6=BigInt(32);function SN(n,e=!1){return e?{h:Number(n&ey),l:Number(n>>D6&ey)}:{h:Number(n>>D6&ey)|0,l:Number(n&ey)|0}}function IN(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:c}=SN(n[s],e);[r[s],i[s]]=[o,c]}return[r,i]}const $6=(n,e,t)=>n>>>t,T6=(n,e,t)=>n<<32-t|e>>>t,La=(n,e,t)=>n>>>t|e<<32-t,Fa=(n,e,t)=>n<<32-t|e>>>t,ep=(n,e,t)=>n<<64-t|e>>>t-32,tp=(n,e,t)=>n>>>t-32|e<<64-t,jZ=(n,e)=>e,zZ=(n,e)=>n,HZ=(n,e,t)=>n<<t|e>>>32-t,VZ=(n,e,t)=>e<<t|n>>>32-t,qZ=(n,e,t)=>e<<t-32|n>>>64-t,KZ=(n,e,t)=>n<<t-32|e>>>64-t;function Ti(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const K3=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),G3=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,GZ=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),WZ=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,QZ=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),ZZ=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Hu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function rw(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Uo(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Zi(n,...e){if(!rw(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function iw(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Uo(n.outputLen),Uo(n.blockLen)}function Ac(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function W3(n,e){Zi(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function $p(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function wi(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function b2(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function fs(n,e){return n<<32-e|n>>>e}const ON=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function BN(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const eo=ON?n=>n:n=>BN(n);function JZ(n){for(let e=0;e<n.length;e++)n[e]=BN(n[e]);return n}const Ma=ON?n=>n:JZ,PN=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",YZ=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function wf(n){if(Zi(n),PN)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=YZ[n[t]];return e}const Qs={_0:48,_9:57,A:65,F:70,a:97,f:102};function k6(n){if(n>=Qs._0&&n<=Qs._9)return n-Qs._0;if(n>=Qs.A&&n<=Qs.F)return n-(Qs.A-10);if(n>=Qs.a&&n<=Qs.f)return n-(Qs.a-10)}function hm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(PN)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=k6(n.charCodeAt(s)),c=k6(n.charCodeAt(s+1));if(o===void 0||c===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+c}return r}function CN(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Ki(n){return typeof n=="string"&&(n=CN(n)),Zi(n),n}function Ka(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];Zi(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}let sw=class{};function dg(n){const e=r=>n().update(Ki(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function XZ(n){const e=(r,i)=>n(i).update(Ki(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function au(n=32){if(Hu&&typeof Hu.getRandomValues=="function")return Hu.getRandomValues(new Uint8Array(n));if(Hu&&typeof Hu.randomBytes=="function")return Uint8Array.from(Hu.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const eJ=BigInt(0),Td=BigInt(1),tJ=BigInt(2),nJ=BigInt(7),rJ=BigInt(256),iJ=BigInt(113),_N=[],NN=[],DN=[];for(let n=0,e=Td,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],_N.push(2*(5*r+t)),NN.push((n+1)*(n+2)/2%64);let i=eJ;for(let s=0;s<7;s++)e=(e<<Td^(e>>nJ)*iJ)%rJ,e&tJ&&(i^=Td<<(Td<<BigInt(s))-Td);DN.push(i)}const $N=IN(DN,!0),sJ=$N[0],oJ=$N[1],R6=(n,e,t)=>t>32?qZ(n,e,t):HZ(n,e,t),U6=(n,e,t)=>t>32?KZ(n,e,t):VZ(n,e,t);function aJ(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=t[u],d=t[u+1],p=R6(f,d,1)^t[c],g=U6(f,d,1)^t[c+1];for(let m=0;m<50;m+=10)n[o+m]^=p,n[o+m+1]^=g}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=NN[o],u=R6(i,s,c),f=U6(i,s,c),d=_N[o];i=n[d],s=n[d+1],n[d]=u,n[d+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=sJ[r],n[1]^=oJ[r]}wi(t)}let cJ=class TN extends sw{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,Uo(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=$p(this.state)}clone(){return this._cloneInto()}keccak(){Ma(this.state32),aJ(this.state32,this.rounds),Ma(this.state32),this.posOut=0,this.pos=0}update(e){Ac(this),e=Ki(e),Zi(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ac(this,!1),Zi(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Uo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(W3(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,wi(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new TN(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const lJ=(n,e,t)=>dg(()=>new cJ(e,n,t)),uJ=lJ(1,136,256/8);function fJ(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}function hJ(n,e,t){return n&e^~n&t}function dJ(n,e,t){return n&e^n&t^e&t}let kN=class extends sw{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=b2(this.buffer)}update(e){Ac(this),e=Ki(e),Zi(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=b2(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ac(this),W3(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,wi(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let p=o;p<i;p++)t[p]=0;fJ(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=b2(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)c.setUint32(4*p,d[p],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=c,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Ea=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Cn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),pJ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xa=new Uint32Array(64);let gJ=class extends kN{constructor(e=32){super(64,e,8,!1),this.A=Ea[0]|0,this.B=Ea[1]|0,this.C=Ea[2]|0,this.D=Ea[3]|0,this.E=Ea[4]|0,this.F=Ea[5]|0,this.G=Ea[6]|0,this.H=Ea[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let p=0;p<16;p++,t+=4)xa[p]=e.getUint32(t,!1);for(let p=16;p<64;p++){const g=xa[p-15],m=xa[p-2],v=fs(g,7)^fs(g,18)^g>>>3,b=fs(m,17)^fs(m,19)^m>>>10;xa[p]=b+xa[p-7]+v+xa[p-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:d}=this;for(let p=0;p<64;p++){const g=fs(c,6)^fs(c,11)^fs(c,25),m=d+g+hJ(c,u,f)+pJ[p]+xa[p]|0,v=(fs(r,2)^fs(r,13)^fs(r,22))+dJ(r,i,s)|0;d=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,i,s,o,c,u,f,d)}roundClean(){wi(xa)}destroy(){this.set(0,0,0,0,0,0,0,0),wi(this.buffer)}};const RN=IN(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),yJ=RN[0],mJ=RN[1],Aa=new Uint32Array(80),Sa=new Uint32Array(80);let Q3=class extends kN{constructor(e=64){super(128,e,16,!1),this.Ah=Cn[0]|0,this.Al=Cn[1]|0,this.Bh=Cn[2]|0,this.Bl=Cn[3]|0,this.Ch=Cn[4]|0,this.Cl=Cn[5]|0,this.Dh=Cn[6]|0,this.Dl=Cn[7]|0,this.Eh=Cn[8]|0,this.El=Cn[9]|0,this.Fh=Cn[10]|0,this.Fl=Cn[11]|0,this.Gh=Cn[12]|0,this.Gl=Cn[13]|0,this.Hh=Cn[14]|0,this.Hl=Cn[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:f,El:d,Fh:p,Fl:g,Gh:m,Gl:v,Hh:b,Hl:A}=this;return[e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=d|0,this.Fh=p|0,this.Fl=g|0,this.Gh=m|0,this.Gl=v|0,this.Hh=b|0,this.Hl=A|0}process(e,t){for(let O=0;O<16;O++,t+=4)Aa[O]=e.getUint32(t),Sa[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const T=Aa[O-15]|0,k=Sa[O-15]|0,j=La(T,k,1)^La(T,k,8)^$6(T,k,7),H=Fa(T,k,1)^Fa(T,k,8)^T6(T,k,7),V=Aa[O-2]|0,M=Sa[O-2]|0,K=La(V,M,19)^ep(V,M,61)^$6(V,M,6),Q=Fa(V,M,19)^tp(V,M,61)^T6(V,M,6),z=GZ(H,Q,Sa[O-7],Sa[O-16]),P=WZ(z,j,K,Aa[O-7],Aa[O-16]);Aa[O]=P|0,Sa[O]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:f,Dl:d,Eh:p,El:g,Fh:m,Fl:v,Gh:b,Gl:A,Hh:N,Hl:R}=this;for(let O=0;O<80;O++){const T=La(p,g,14)^La(p,g,18)^ep(p,g,41),k=Fa(p,g,14)^Fa(p,g,18)^tp(p,g,41),j=p&m^~p&b,H=g&v^~g&A,V=QZ(R,k,H,mJ[O],Sa[O]),M=ZZ(V,N,T,j,yJ[O],Aa[O]),K=V|0,Q=La(r,i,28)^ep(r,i,34)^ep(r,i,39),z=Fa(r,i,28)^tp(r,i,34)^tp(r,i,39),P=r&s^r&c^s&c,D=i&o^i&u^o&u;N=b|0,R=A|0,b=m|0,A=v|0,m=p|0,v=g|0,{h:p,l:g}=Ti(f|0,d|0,M|0,K|0),f=c|0,d=u|0,c=s|0,u=o|0,s=r|0,o=i|0;const w=K3(K,z,D);r=G3(w,M,Q,P),i=w|0}({h:r,l:i}=Ti(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Ti(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=Ti(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:d}=Ti(this.Dh|0,this.Dl|0,f|0,d|0),{h:p,l:g}=Ti(this.Eh|0,this.El|0,p|0,g|0),{h:m,l:v}=Ti(this.Fh|0,this.Fl|0,m|0,v|0),{h:b,l:A}=Ti(this.Gh|0,this.Gl|0,b|0,A|0),{h:N,l:R}=Ti(this.Hh|0,this.Hl|0,N|0,R|0),this.set(r,i,s,o,c,u,f,d,p,g,m,v,b,A,N,R)}roundClean(){wi(Aa,Sa)}destroy(){wi(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},wJ=class extends Q3{constructor(){super(48),this.Ah=Pn[0]|0,this.Al=Pn[1]|0,this.Bh=Pn[2]|0,this.Bl=Pn[3]|0,this.Ch=Pn[4]|0,this.Cl=Pn[5]|0,this.Dh=Pn[6]|0,this.Dl=Pn[7]|0,this.Eh=Pn[8]|0,this.El=Pn[9]|0,this.Fh=Pn[10]|0,this.Fl=Pn[11]|0,this.Gh=Pn[12]|0,this.Gl=Pn[13]|0,this.Hh=Pn[14]|0,this.Hl=Pn[15]|0}};const _n=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let bJ=class extends Q3{constructor(){super(32),this.Ah=_n[0]|0,this.Al=_n[1]|0,this.Bh=_n[2]|0,this.Bl=_n[3]|0,this.Ch=_n[4]|0,this.Cl=_n[5]|0,this.Dh=_n[6]|0,this.Dl=_n[7]|0,this.Eh=_n[8]|0,this.El=_n[9]|0,this.Fh=_n[10]|0,this.Fl=_n[11]|0,this.Gh=_n[12]|0,this.Gl=_n[13]|0,this.Hh=_n[14]|0,this.Hl=_n[15]|0}};const ow=dg(()=>new gJ),vJ=dg(()=>new Q3),EJ=dg(()=>new wJ),xJ=dg(()=>new bJ),AJ=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),jt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ee=new Uint32Array(32);function Ia(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=Ee[2*n],f=Ee[2*n+1],d=Ee[2*e],p=Ee[2*e+1],g=Ee[2*t],m=Ee[2*t+1],v=Ee[2*r],b=Ee[2*r+1],A=K3(u,d,o);f=G3(A,f,p,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:jZ(b,v),Dl:zZ(b)},{h:m,l:g}=Ti(m,g,b,v),{Bh:p,Bl:d}={Bh:p^m,Bl:d^g},{Bh:p,Bl:d}={Bh:La(p,d,24),Bl:Fa(p,d,24)},Ee[2*n]=u,Ee[2*n+1]=f,Ee[2*e]=d,Ee[2*e+1]=p,Ee[2*t]=g,Ee[2*t+1]=m,Ee[2*r]=v,Ee[2*r+1]=b}function Oa(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=Ee[2*n],f=Ee[2*n+1],d=Ee[2*e],p=Ee[2*e+1],g=Ee[2*t],m=Ee[2*t+1],v=Ee[2*r],b=Ee[2*r+1],A=K3(u,d,o);f=G3(A,f,p,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:La(b,v,16),Dl:Fa(b,v,16)},{h:m,l:g}=Ti(m,g,b,v),{Bh:p,Bl:d}={Bh:p^m,Bl:d^g},{Bh:p,Bl:d}={Bh:ep(p,d,63),Bl:tp(p,d,63)},Ee[2*n]=u,Ee[2*n+1]=f,Ee[2*e]=d,Ee[2*e+1]=p,Ee[2*t]=g,Ee[2*t+1]=m,Ee[2*r]=v,Ee[2*r+1]=b}function SJ(n,e={},t,r,i){if(Uo(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:c}=e;if(s!==void 0&&(s.length<1||s.length>t))throw new Error("key length must be undefined or 1.."+t);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}let IJ=class extends sw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Uo(e),Uo(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=$p(this.buffer)}update(e){Ac(this),e=Ki(e),Zi(e);const{blockLen:t,buffer:r,buffer32:i}=this,s=e.length,o=e.byteOffset,c=e.buffer;for(let u=0;u<s;){this.pos===t&&(Ma(i),this.compress(i,0,!1),Ma(i),this.pos=0);const f=Math.min(t-this.pos,s-u),d=o+u;if(f===t&&!(d%4)&&u+f<s){const p=new Uint32Array(c,d,Math.floor((s-u)/4));Ma(p);for(let g=0;u+t<s;g+=i.length,u+=t)this.length+=t,this.compress(p,g,!1);Ma(p);continue}r.set(e.subarray(u,u+f),this.pos),this.pos+=f,this.length+=f,u+=f}return this}digestInto(e){Ac(this),W3(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,wi(this.buffer.subarray(t)),Ma(r),this.compress(r,0,!0),Ma(r);const i=$p(e);this.get().forEach((s,o)=>i[o]=eo(s))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:i,destroyed:s,outputLen:o,pos:c}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=s,e.finished=i,e.length=r,e.pos=c,e.outputLen=o,e}clone(){return this._cloneInto()}},OJ=class extends IJ{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=jt[0]|0,this.v0h=jt[1]|0,this.v1l=jt[2]|0,this.v1h=jt[3]|0,this.v2l=jt[4]|0,this.v2h=jt[5]|0,this.v3l=jt[6]|0,this.v3h=jt[7]|0,this.v4l=jt[8]|0,this.v4h=jt[9]|0,this.v5l=jt[10]|0,this.v5h=jt[11]|0,this.v6l=jt[12]|0,this.v6h=jt[13]|0,this.v7l=jt[14]|0,this.v7h=jt[15]|0,SJ(t,e,64,16,16);let{key:r,personalization:i,salt:s}=e,o=0;if(r!==void 0&&(r=Ki(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=Ki(s);const c=$p(s);this.v4l^=eo(c[0]),this.v4h^=eo(c[1]),this.v5l^=eo(c[2]),this.v5h^=eo(c[3])}if(i!==void 0){i=Ki(i);const c=$p(i);this.v6l^=eo(c[0]),this.v6h^=eo(c[1]),this.v7l^=eo(c[2]),this.v7h^=eo(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:i,v2l:s,v2h:o,v3l:c,v3h:u,v4l:f,v4h:d,v5l:p,v5h:g,v6l:m,v6h:v,v7l:b,v7h:A}=this;return[e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=c|0,this.v3h=u|0,this.v4l=f|0,this.v4h=d|0,this.v5l=p|0,this.v5h=g|0,this.v6l=m|0,this.v6h=v|0,this.v7l=b|0,this.v7h=A|0}compress(e,t,r){this.get().forEach((u,f)=>Ee[f]=u),Ee.set(jt,16);let{h:i,l:s}=SN(BigInt(this.length));Ee[24]=jt[8]^s,Ee[25]=jt[9]^i,r&&(Ee[28]=~Ee[28],Ee[29]=~Ee[29]);let o=0;const c=AJ;for(let u=0;u<12;u++)Ia(0,4,8,12,e,t+2*c[o++]),Oa(0,4,8,12,e,t+2*c[o++]),Ia(1,5,9,13,e,t+2*c[o++]),Oa(1,5,9,13,e,t+2*c[o++]),Ia(2,6,10,14,e,t+2*c[o++]),Oa(2,6,10,14,e,t+2*c[o++]),Ia(3,7,11,15,e,t+2*c[o++]),Oa(3,7,11,15,e,t+2*c[o++]),Ia(0,5,10,15,e,t+2*c[o++]),Oa(0,5,10,15,e,t+2*c[o++]),Ia(1,6,11,12,e,t+2*c[o++]),Oa(1,6,11,12,e,t+2*c[o++]),Ia(2,7,8,13,e,t+2*c[o++]),Oa(2,7,8,13,e,t+2*c[o++]),Ia(3,4,9,14,e,t+2*c[o++]),Oa(3,4,9,14,e,t+2*c[o++]);this.v0l^=Ee[0]^Ee[16],this.v0h^=Ee[1]^Ee[17],this.v1l^=Ee[2]^Ee[18],this.v1h^=Ee[3]^Ee[19],this.v2l^=Ee[4]^Ee[20],this.v2h^=Ee[5]^Ee[21],this.v3l^=Ee[6]^Ee[22],this.v3h^=Ee[7]^Ee[23],this.v4l^=Ee[8]^Ee[24],this.v4h^=Ee[9]^Ee[25],this.v5l^=Ee[10]^Ee[26],this.v5h^=Ee[11]^Ee[27],this.v6l^=Ee[12]^Ee[28],this.v6h^=Ee[13]^Ee[29],this.v7l^=Ee[14]^Ee[30],this.v7h^=Ee[15]^Ee[31],wi(Ee)}destroy(){this.destroyed=!0,wi(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const BJ=XZ(n=>new OJ(n)),PJ="https://rpc.walletconnect.org/v1";function UN(n){const e=`Ethereum Signed Message:
${n.length}`,t=new TextEncoder().encode(e+n);return"0x"+Buffer.from(uJ(t)).toString("hex")}async function CJ(n,e,t,r,i,s){switch(t.t){case"eip191":return await _J(n,e,t.s);case"eip1271":return await NJ(n,e,t.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}function _J(n,e,t){const r=iZ(t);return lZ({payload:UN(e),signature:r}).toLowerCase()===n.toLowerCase()}async function NJ(n,e,t,r,i,s){const o=_y(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const c="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",f=t.substring(2),d=(f.length/2).toString(16).padStart(64,"0"),p=(e.startsWith("0x")?e:UN(e)).substring(2),g=c+p+u+d+f,m=await fetch(`${s||PJ}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:DJ(),jsonrpc:"2.0",method:"eth_call",params:[{to:n,data:g},"latest"]})}),{result:v}=await m.json();return v?v.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}}function DJ(){return Date.now()+Math.floor(Math.random()*1e3)}function $J(n){const e=atob(n),t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);const r=t[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(t.length<i)throw new Error("Transaction data too short for claimed signature count");if(t.length<100)throw new Error("Transaction too short");const s=Buffer.from(n,"base64").slice(1,65);return fg.encode(s)}function TJ(n){const e=new Uint8Array(Buffer.from(n,"base64")),t=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),r=new Uint8Array(t.length+e.length);r.set(t),r.set(e,t.length);const i=BJ(r,{dkLen:32});return fg.encode(i)}function L6(n){const e=new Uint8Array(ow(kJ(n)));return fg.encode(e)}function kJ(n){if(n instanceof Uint8Array)return n;if(Array.isArray(n))return new Uint8Array(n);if(typeof n=="object"&&n!=null&&n.data)return new Uint8Array(Object.values(n.data));if(typeof n=="object"&&n)return new Uint8Array(Object.values(n));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function F6(n){const e=Buffer.from(n,"base64"),t=PM(e).txn;if(!t)throw new Error("Invalid signed transaction: missing 'txn' field");const r=bM(t),i=Buffer.from("TX"),s=Buffer.concat([i,Buffer.from(r)]),o=xJ(s);return VF.encode(o).replace(/=+$/,"")}function v2(n){const e=[];let t=BigInt(n);for(;t>=BigInt(128);)e.push(Number(t&BigInt(127)|BigInt(128))),t>>=BigInt(7);return e.push(Number(t)),Buffer.from(e)}function RJ(n){const e=Buffer.from(n.signed.bodyBytes,"base64"),t=Buffer.from(n.signed.authInfoBytes,"base64"),r=Buffer.from(n.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(v2(e.length)),i.push(e),i.push(Buffer.from([18])),i.push(v2(t.length)),i.push(t),i.push(Buffer.from([26])),i.push(v2(r.length)),i.push(r);const s=Buffer.concat(i),o=ow(s);return Buffer.from(o).toString("hex").toUpperCase()}function UJ(n){var e,t;const r=[];try{if(typeof n=="string")return r.push(n),r;if(typeof n!="object")return r;n!=null&&n.id&&r.push(n.id);const i=(t=(e=n==null?void 0:n.capabilities)==null?void 0:e.caip345)==null?void 0:t.transactionHashes;i&&r.push(...i)}catch(i){console.warn("getWalletSendCallsHashes failed: ",i)}return r}var LJ=Object.defineProperty,FJ=Object.defineProperties,MJ=Object.getOwnPropertyDescriptors,M6=Object.getOwnPropertySymbols,jJ=Object.prototype.hasOwnProperty,zJ=Object.prototype.propertyIsEnumerable,j6=(n,e,t)=>e in n?LJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,HJ=(n,e)=>{for(var t in e||(e={}))jJ.call(e,t)&&j6(n,t,e[t]);if(M6)for(var t of M6(e))zJ.call(e,t)&&j6(n,t,e[t]);return n},VJ=(n,e)=>FJ(n,MJ(e));const qJ="did:pkh:",Z3=n=>n==null?void 0:n.split(":"),KJ=n=>{const e=n&&Z3(n);if(e)return n.includes(qJ)?e[3]:e[1]},uE=n=>{const e=n&&Z3(n);if(e)return e[2]+":"+e[3]},dm=n=>{const e=n&&Z3(n);if(e)return e.pop()};async function z6(n){const{cacao:e,projectId:t}=n,{s:r,p:i}=e,s=LN(i,i.iss),o=dm(i.iss);return await CJ(o,s,r,uE(i.iss),t)}const LN=(n,e)=>{const t=`${n.domain} wants you to sign in with your Ethereum account:`,r=dm(e);if(!n.aud&&!n.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=n.statement||void 0;const s=`URI: ${n.aud||n.uri}`,o=`Version: ${n.version}`,c=`Chain ID: ${KJ(e)}`,u=`Nonce: ${n.nonce}`,f=`Issued At: ${n.iat}`,d=n.exp?`Expiration Time: ${n.exp}`:void 0,p=n.nbf?`Not Before: ${n.nbf}`:void 0,g=n.requestId?`Request ID: ${n.requestId}`:void 0,m=n.resources?`Resources:${n.resources.map(b=>`
- ${b}`).join("")}`:void 0,v=Ny(n.resources);if(v){const b=Tp(v);i=tY(i,b)}return[t,r,"",i,"",s,o,c,u,f,d,p,g,m].filter(b=>b!=null).join(`
`)};function GJ(n){return Buffer.from(JSON.stringify(n)).toString("base64")}function WJ(n){return JSON.parse(Buffer.from(n,"base64").toString("utf-8"))}function Xl(n){if(!n)throw new Error("No recap provided, value is undefined");if(!n.att)throw new Error("No `att` property found");const e=Object.keys(n.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const r=n.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function QJ(n,e,t,r={}){return t==null||t.sort((i,s)=>i.localeCompare(s)),{att:{[n]:ZJ(e,t,r)}}}function ZJ(n,e,t={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const r=e.map(i=>({[`${n}/${i}`]:[t]}));return Object.assign({},...r)}function FN(n){return Xl(n),`urn:recap:${GJ(n).replace(/=/g,"")}`}function Tp(n){const e=WJ(n.replace("urn:recap:",""));return Xl(e),e}function JJ(n,e,t){const r=QJ(n,e,t);return FN(r)}function YJ(n){return n&&n.includes("urn:recap:")}function XJ(n,e){const t=Tp(n),r=Tp(e),i=eY(t,r);return FN(i)}function eY(n,e){Xl(n),Xl(e);const t=Object.keys(n.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return t.forEach(i=>{var s,o;Object.keys(((s=n.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((c,u)=>c.localeCompare(u)).forEach(c=>{var u,f;r.att[i]=VJ(HJ({},r.att[i]),{[c]:((u=n.att[i])==null?void 0:u[c])||((f=e.att[i])==null?void 0:f[c])})})}),r}function tY(n="",e){Xl(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(n.includes(t))return n;const r=[];let i=0;Object.keys(e.att).forEach(c=>{const u=Object.keys(e.att[c]).map(p=>({ability:p.split("/")[0],action:p.split("/")[1]}));u.sort((p,g)=>p.action.localeCompare(g.action));const f={};u.forEach(p=>{f[p.ability]||(f[p.ability]=[]),f[p.ability].push(p.action)});const d=Object.keys(f).map(p=>(i++,`(${i}) '${p}': '${f[p].join("', '")}' for '${c}'.`));r.push(d.join(", ").replace(".,","."))});const s=r.join(" "),o=`${t}${s}`;return`${n?n+" ":""}${o}`}function H6(n){var e;const t=Tp(n);Xl(t);const r=(e=t.att)==null?void 0:e.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function V6(n){const e=Tp(n);Xl(e);const t=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&t.push(i[0].chains)})}),[...new Set(t.flat())]}function Ny(n){if(!n)return;const e=n==null?void 0:n[n.length-1];return YJ(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function MN(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function fE(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function E2(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function mr(n,...e){if(!MN(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function q6(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function nY(n,e){mr(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function gc(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Eh(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function rY(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const iY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function sY(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function hE(n){if(typeof n=="string")n=sY(n);else if(MN(n))n=dE(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function oY(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function aY(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const cY=(n,e)=>{function t(r,...i){if(mr(r),!iY)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const f=i[0];if(!f)throw new Error("nonce / iv required");n.varSizeNonce?mr(f):mr(f,n.nonceLength)}const s=n.tagLength;s&&i[1]!==void 0&&mr(i[1]);const o=e(r,...i),c=(f,d)=>{if(d!==void 0){if(f!==2)throw new Error("cipher output not supported");mr(d)}};let u=!1;return{encrypt(f,d){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,mr(f),c(o.encrypt.length,d),o.encrypt(f,d)},decrypt(f,d){if(mr(f),s&&f.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return c(o.decrypt.length,d),o.decrypt(f,d)}}}return Object.assign(t,n),t};function K6(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!uY(e))throw new Error("invalid output, must be aligned");return e}function G6(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s);n.setUint32(e+4,o,r),n.setUint32(e+0,c,r)}function lY(n,e,t){fE(t);const r=new Uint8Array(16),i=rY(r);return G6(i,0,BigInt(e),t),G6(i,8,BigInt(n),t),r}function uY(n){return n.byteOffset%4===0}function dE(n){return Uint8Array.from(n)}const jN=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),fY=jN("expand 16-byte k"),hY=jN("expand 32-byte k"),dY=gc(fY),pY=gc(hY);function Xe(n,e){return n<<e|n>>>32-e}function pE(n){return n.byteOffset%4===0}const ty=64,gY=16,zN=2**32-1,W6=new Uint32Array;function yY(n,e,t,r,i,s,o,c){const u=i.length,f=new Uint8Array(ty),d=gc(f),p=pE(i)&&pE(s),g=p?gc(i):W6,m=p?gc(s):W6;for(let v=0;v<u;o++){if(n(e,t,r,d,o,c),o>=zN)throw new Error("arx: counter overflow");const b=Math.min(ty,u-v);if(p&&b===ty){const A=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let N=0,R;N<gY;N++)R=A+N,m[R]=g[R]^d[N];v+=ty;continue}for(let A=0,N;A<b;A++)N=v+A,s[N]=i[N]^f[A];v+=b}}function mY(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=oY({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return E2(i),E2(o),fE(s),fE(t),(c,u,f,d,p=0)=>{mr(c),mr(u),mr(f);const g=f.length;if(d===void 0&&(d=new Uint8Array(g)),mr(d),E2(p),p<0||p>=zN)throw new Error("arx: counter overflow");if(d.length<g)throw new Error(`arx: output (${d.length}) is shorter than data (${g})`);const m=[];let v=c.length,b,A;if(v===32)m.push(b=dE(c)),A=pY;else if(v===16&&t)b=new Uint8Array(32),b.set(c),b.set(c,16),A=dY,m.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);pE(u)||m.push(u=dE(u));const N=gc(b);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,N,gc(u.subarray(0,16)),N),u=u.subarray(16)}const R=16-i;if(R!==u.length)throw new Error(`arx: nonce must be ${R} or 16 bytes`);if(R!==12){const T=new Uint8Array(12);T.set(u,s?0:12-u.length),u=T,m.push(u)}const O=gc(u);return yY(n,A,N,O,f,d,p,o),Eh(...m),d}}const un=(n,e)=>n[e++]&255|(n[e++]&255)<<8;let wY=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=hE(e),mr(e,32);const t=un(e,0),r=un(e,2),i=un(e,4),s=un(e,6),o=un(e,8),c=un(e,10),u=un(e,12),f=un(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let d=0;d<8;d++)this.pad[d]=un(e,16+2*d)}process(e,t,r=!1){const i=r?0:2048,{h:s,r:o}=this,c=o[0],u=o[1],f=o[2],d=o[3],p=o[4],g=o[5],m=o[6],v=o[7],b=o[8],A=o[9],N=un(e,t+0),R=un(e,t+2),O=un(e,t+4),T=un(e,t+6),k=un(e,t+8),j=un(e,t+10),H=un(e,t+12),V=un(e,t+14);let M=s[0]+(N&8191),K=s[1]+((N>>>13|R<<3)&8191),Q=s[2]+((R>>>10|O<<6)&8191),z=s[3]+((O>>>7|T<<9)&8191),P=s[4]+((T>>>4|k<<12)&8191),D=s[5]+(k>>>1&8191),w=s[6]+((k>>>14|j<<2)&8191),x=s[7]+((j>>>11|H<<5)&8191),B=s[8]+((H>>>8|V<<8)&8191),C=s[9]+(V>>>5|i),I=0,_=I+M*c+K*(5*A)+Q*(5*b)+z*(5*v)+P*(5*m);I=_>>>13,_&=8191,_+=D*(5*g)+w*(5*p)+x*(5*d)+B*(5*f)+C*(5*u),I+=_>>>13,_&=8191;let $=I+M*u+K*c+Q*(5*A)+z*(5*b)+P*(5*v);I=$>>>13,$&=8191,$+=D*(5*m)+w*(5*g)+x*(5*p)+B*(5*d)+C*(5*f),I+=$>>>13,$&=8191;let U=I+M*f+K*u+Q*c+z*(5*A)+P*(5*b);I=U>>>13,U&=8191,U+=D*(5*v)+w*(5*m)+x*(5*g)+B*(5*p)+C*(5*d),I+=U>>>13,U&=8191;let Y=I+M*d+K*f+Q*u+z*c+P*(5*A);I=Y>>>13,Y&=8191,Y+=D*(5*b)+w*(5*v)+x*(5*m)+B*(5*g)+C*(5*p),I+=Y>>>13,Y&=8191;let q=I+M*p+K*d+Q*f+z*u+P*c;I=q>>>13,q&=8191,q+=D*(5*A)+w*(5*b)+x*(5*v)+B*(5*m)+C*(5*g),I+=q>>>13,q&=8191;let Z=I+M*g+K*p+Q*d+z*f+P*u;I=Z>>>13,Z&=8191,Z+=D*c+w*(5*A)+x*(5*b)+B*(5*v)+C*(5*m),I+=Z>>>13,Z&=8191;let te=I+M*m+K*g+Q*p+z*d+P*f;I=te>>>13,te&=8191,te+=D*u+w*c+x*(5*A)+B*(5*b)+C*(5*v),I+=te>>>13,te&=8191;let re=I+M*v+K*m+Q*g+z*p+P*d;I=re>>>13,re&=8191,re+=D*f+w*u+x*c+B*(5*A)+C*(5*b),I+=re>>>13,re&=8191;let le=I+M*b+K*v+Q*m+z*g+P*p;I=le>>>13,le&=8191,le+=D*d+w*f+x*u+B*c+C*(5*A),I+=le>>>13,le&=8191;let ie=I+M*A+K*b+Q*v+z*m+P*g;I=ie>>>13,ie&=8191,ie+=D*p+w*d+x*f+B*u+C*c,I+=ie>>>13,ie&=8191,I=(I<<2)+I|0,I=I+_|0,_=I&8191,I=I>>>13,$+=I,s[0]=_,s[1]=$,s[2]=U,s[3]=Y,s[4]=q,s[5]=Z,s[6]=te,s[7]=re,s[8]=le,s[9]=ie}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=8192;let s=(i^1)-1;for(let c=0;c<10;c++)r[c]&=s;s=~s;for(let c=0;c<10;c++)e[c]=e[c]&s|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let c=1;c<8;c++)o=(e[c]+t[c]|0)+(o>>>16)|0,e[c]=o&65535;Eh(r)}update(e){q6(this),e=hE(e),mr(e);const{buffer:t,blockLen:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}t.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){Eh(this.h,this.r,this.buffer,this.pad)}digestInto(e){q6(this),nY(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}};function bY(n){const e=(r,i)=>n(i).update(hE(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const vY=bY(n=>new wY(n));function EY(n,e,t,r,i,s=20){let o=n[0],c=n[1],u=n[2],f=n[3],d=e[0],p=e[1],g=e[2],m=e[3],v=e[4],b=e[5],A=e[6],N=e[7],R=i,O=t[0],T=t[1],k=t[2],j=o,H=c,V=u,M=f,K=d,Q=p,z=g,P=m,D=v,w=b,x=A,B=N,C=R,I=O,_=T,$=k;for(let Y=0;Y<s;Y+=2)j=j+K|0,C=Xe(C^j,16),D=D+C|0,K=Xe(K^D,12),j=j+K|0,C=Xe(C^j,8),D=D+C|0,K=Xe(K^D,7),H=H+Q|0,I=Xe(I^H,16),w=w+I|0,Q=Xe(Q^w,12),H=H+Q|0,I=Xe(I^H,8),w=w+I|0,Q=Xe(Q^w,7),V=V+z|0,_=Xe(_^V,16),x=x+_|0,z=Xe(z^x,12),V=V+z|0,_=Xe(_^V,8),x=x+_|0,z=Xe(z^x,7),M=M+P|0,$=Xe($^M,16),B=B+$|0,P=Xe(P^B,12),M=M+P|0,$=Xe($^M,8),B=B+$|0,P=Xe(P^B,7),j=j+Q|0,$=Xe($^j,16),x=x+$|0,Q=Xe(Q^x,12),j=j+Q|0,$=Xe($^j,8),x=x+$|0,Q=Xe(Q^x,7),H=H+z|0,C=Xe(C^H,16),B=B+C|0,z=Xe(z^B,12),H=H+z|0,C=Xe(C^H,8),B=B+C|0,z=Xe(z^B,7),V=V+P|0,I=Xe(I^V,16),D=D+I|0,P=Xe(P^D,12),V=V+P|0,I=Xe(I^V,8),D=D+I|0,P=Xe(P^D,7),M=M+K|0,_=Xe(_^M,16),w=w+_|0,K=Xe(K^w,12),M=M+K|0,_=Xe(_^M,8),w=w+_|0,K=Xe(K^w,7);let U=0;r[U++]=o+j|0,r[U++]=c+H|0,r[U++]=u+V|0,r[U++]=f+M|0,r[U++]=d+K|0,r[U++]=p+Q|0,r[U++]=g+z|0,r[U++]=m+P|0,r[U++]=v+D|0,r[U++]=b+w|0,r[U++]=A+x|0,r[U++]=N+B|0,r[U++]=R+C|0,r[U++]=O+I|0,r[U++]=T+_|0,r[U++]=k+$|0}const xY=mY(EY,{counterRight:!1,counterLength:4,allowShortKeys:!1}),AY=new Uint8Array(16),Q6=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(AY.subarray(t))},SY=new Uint8Array(32);function Z6(n,e,t,r,i){const s=n(e,t,SY),o=vY.create(s);i&&Q6(o,i),Q6(o,r);const c=lY(r.length,i?i.length:0,!0);o.update(c);const u=o.digest();return Eh(s,c),u}const IY=n=>(e,t,r)=>({encrypt(i,s){const o=i.length;s=K6(o+16,s,!1),s.set(i);const c=s.subarray(0,-16);n(e,t,c,c,1);const u=Z6(n,e,t,c,r);return s.set(u,o),Eh(u),s},decrypt(i,s){s=K6(i.length-16,s,!1);const o=i.subarray(0,-16),c=i.subarray(-16),u=Z6(n,e,t,o,r);if(!aY(c,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),n(e,t,s,s,1),Eh(u),s}}),HN=cY({blockSize:64,nonceLength:12,tagLength:16},IY(xY));let VN=class extends sw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,iw(e);const r=Ki(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),wi(s)}update(e){return Ac(this),this.iHash.update(e),this}digestInto(e){Ac(this),Zi(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const aw=(n,e,t)=>new VN(n,e).update(t).digest();aw.create=(n,e)=>new VN(n,e);function OY(n,e,t){return iw(n),t===void 0&&(t=new Uint8Array(n.outputLen)),aw(n,Ki(t),Ki(e))}const x2=Uint8Array.from([0]),J6=Uint8Array.of();function BY(n,e,t,r=32){iw(n),Uo(r);const i=n.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/i);t===void 0&&(t=J6);const o=new Uint8Array(s*i),c=aw.create(n,e),u=c._cloneInto(),f=new Uint8Array(c.outputLen);for(let d=0;d<s;d++)x2[0]=d+1,u.update(d===0?J6:f).update(t).update(x2).digestInto(f),o.set(f,i*d),c._cloneInto(u);return c.destroy(),u.destroy(),wi(f,x2),o.slice(0,r)}const PY=(n,e,t,r,i)=>BY(n,OY(n,e,t),r,i),cw=ow,J3=BigInt(0),gE=BigInt(1);function pm(n,e=""){if(typeof n!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof n)}return n}function wl(n,e,t=""){const r=rw(n),i=n==null?void 0:n.length,s=e!==void 0;if(!r||s&&i!==e){const o=t&&`"${t}" `,c=s?` of length ${e}`:"",u=r?`length=${i}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+c+", got "+u)}return n}function ny(n){const e=n.toString(16);return e.length&1?"0"+e:e}function qN(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?J3:BigInt("0x"+n)}function lw(n){return qN(wf(n))}function gm(n){return Zi(n),qN(wf(Uint8Array.from(n).reverse()))}function Y3(n,e){return hm(n.toString(16).padStart(e*2,"0"))}function X3(n,e){return Y3(n,e).reverse()}function Mn(n,e,t){let r;if(typeof e=="string")try{r=hm(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(rw(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}const A2=n=>typeof n=="bigint"&&J3<=n;function CY(n,e,t){return A2(n)&&A2(e)&&A2(t)&&e<=n&&n<t}function yE(n,e,t,r){if(!CY(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function KN(n){let e;for(e=0;n>J3;n>>=gE,e+=1);return e}const pg=n=>(gE<<BigInt(n))-gE;function _Y(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=r(n),o=r(n),c=0;const u=()=>{s.fill(1),o.fill(0),c=0},f=(...g)=>t(o,s,...g),d=(g=r(0))=>{o=f(i(0),g),s=f(),g.length!==0&&(o=f(i(1),g),s=f())},p=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const m=[];for(;g<e;){s=f();const v=s.slice();m.push(v),g+=s.length}return Ka(...m)};return(g,m)=>{u(),d(g);let v;for(;!(v=m(p()));)d();return u(),v}}function uw(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,s,o){const c=n[i];if(o&&c===void 0)return;const u=typeof c;if(u!==s||c===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${u}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(t).forEach(([i,s])=>r(i,s,!0))}function Y6(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const Ar=BigInt(0),Xn=BigInt(1),bl=BigInt(2),GN=BigInt(3),WN=BigInt(4),QN=BigInt(5),NY=BigInt(7),ZN=BigInt(8),DY=BigInt(9),JN=BigInt(16);function Vr(n,e){const t=n%e;return t>=Ar?t:e+t}function Ni(n,e,t){let r=n;for(;e-- >Ar;)r*=r,r%=t;return r}function X6(n,e){if(n===Ar)throw new Error("invert: expected non-zero number");if(e<=Ar)throw new Error("invert: expected positive modulus, got "+e);let t=Vr(n,e),r=e,i=Ar,s=Xn;for(;t!==Ar;){const o=r/t,c=r%t,u=i-s*o;r=t,t=c,i=s,s=u}if(r!==Xn)throw new Error("invert: does not exist");return Vr(i,e)}function ex(n,e,t){if(!n.eql(n.sqr(e),t))throw new Error("Cannot find square root")}function YN(n,e){const t=(n.ORDER+Xn)/WN,r=n.pow(e,t);return ex(n,r,e),r}function $Y(n,e){const t=(n.ORDER-QN)/ZN,r=n.mul(e,bl),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,bl),i),c=n.mul(s,n.sub(o,n.ONE));return ex(n,c,e),c}function TY(n){const e=_c(n),t=XN(n),r=t(e,e.neg(e.ONE)),i=t(e,r),s=t(e,e.neg(r)),o=(n+NY)/JN;return(c,u)=>{let f=c.pow(u,o),d=c.mul(f,r);const p=c.mul(f,i),g=c.mul(f,s),m=c.eql(c.sqr(d),u),v=c.eql(c.sqr(p),u);f=c.cmov(f,d,m),d=c.cmov(g,p,v);const b=c.eql(c.sqr(d),u),A=c.cmov(f,d,b);return ex(c,A,u),A}}function XN(n){if(n<GN)throw new Error("sqrt is not defined for small field");let e=n-Xn,t=0;for(;e%bl===Ar;)e/=bl,t++;let r=bl;const i=_c(n);for(;e5(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return YN;let s=i.pow(r,e);const o=(e+Xn)/bl;return function(c,u){if(c.is0(u))return u;if(e5(c,u)!==1)throw new Error("Cannot find square root");let f=t,d=c.mul(c.ONE,s),p=c.pow(u,e),g=c.pow(u,o);for(;!c.eql(p,c.ONE);){if(c.is0(p))return c.ZERO;let m=1,v=c.sqr(p);for(;!c.eql(v,c.ONE);)if(m++,v=c.sqr(v),m===f)throw new Error("Cannot find square root");const b=Xn<<BigInt(f-m-1),A=c.pow(d,b);f=m,d=c.sqr(A),p=c.mul(p,d),g=c.mul(g,A)}return g}}function kY(n){return n%WN===GN?YN:n%ZN===QN?$Y:n%JN===DY?TY(n):XN(n)}const RY=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function UY(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=RY.reduce((r,i)=>(r[i]="function",r),e);return uw(n,t),n}function LY(n,e,t){if(t<Ar)throw new Error("invalid exponent, negatives unsupported");if(t===Ar)return n.ONE;if(t===Xn)return e;let r=n.ONE,i=e;for(;t>Ar;)t&Xn&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Xn;return r}function eD(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,c,u)=>n.is0(c)?o:(r[u]=o,n.mul(o,c)),n.ONE),s=n.inv(i);return e.reduceRight((o,c,u)=>n.is0(c)?o:(r[u]=n.mul(o,r[u]),n.mul(o,c)),s),r}function e5(n,e){const t=(n.ORDER-Xn)/bl,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function tD(n,e){e!==void 0&&Uo(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function _c(n,e,t=!1,r={}){if(n<=Ar)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,s,o=!1,c;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const g=e;g.BITS&&(i=g.BITS),g.sqrt&&(s=g.sqrt),typeof g.isLE=="boolean"&&(t=g.isLE),typeof g.modFromBytes=="boolean"&&(o=g.modFromBytes),c=g.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:u,nByteLength:f}=tD(n,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const p=Object.freeze({ORDER:n,isLE:t,BITS:u,BYTES:f,MASK:pg(u),ZERO:Ar,ONE:Xn,allowedLengths:c,create:g=>Vr(g,n),isValid:g=>{if(typeof g!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof g);return Ar<=g&&g<n},is0:g=>g===Ar,isValidNot0:g=>!p.is0(g)&&p.isValid(g),isOdd:g=>(g&Xn)===Xn,neg:g=>Vr(-g,n),eql:(g,m)=>g===m,sqr:g=>Vr(g*g,n),add:(g,m)=>Vr(g+m,n),sub:(g,m)=>Vr(g-m,n),mul:(g,m)=>Vr(g*m,n),pow:(g,m)=>LY(p,g,m),div:(g,m)=>Vr(g*X6(m,n),n),sqrN:g=>g*g,addN:(g,m)=>g+m,subN:(g,m)=>g-m,mulN:(g,m)=>g*m,inv:g=>X6(g,n),sqrt:s||(g=>(d||(d=kY(n)),d(p,g))),toBytes:g=>t?X3(g,f):Y3(g,f),fromBytes:(g,m=!0)=>{if(c){if(!c.includes(g.length)||g.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+g.length);const b=new Uint8Array(f);b.set(g,t?0:b.length-g.length),g=b}if(g.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+g.length);let v=t?gm(g):lw(g);if(o&&(v=Vr(v,n)),!m&&!p.isValid(v))throw new Error("invalid field element: outside of range 0..ORDER");return v},invertBatch:g=>eD(p,g),cmov:(g,m,v)=>v?m:g});return Object.freeze(p)}function nD(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function rD(n){const e=nD(n);return e+Math.ceil(e/2)}function FY(n,e,t=!1){const r=n.length,i=nD(e),s=rD(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?gm(n):lw(n),c=Vr(o,e-Xn)+Xn;return t?X3(c,i):Y3(c,i)}const xh=BigInt(0),vl=BigInt(1);function ym(n,e){const t=e.negate();return n?t:e}function S2(n,e){const t=eD(n.Fp,e.map(r=>r.Z));return e.map((r,i)=>n.fromAffine(r.toAffine(t[i])))}function iD(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function I2(n,e){iD(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=pg(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function t5(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t;let c=Number(n&i),u=n>>o;c>r&&(c-=s,u+=vl);const f=e*r,d=f+Math.abs(c)-1,p=c===0,g=c<0,m=e%2!==0;return{nextN:u,offset:d,isZero:p,isNeg:g,isNegF:m,offsetF:f}}function MY(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function jY(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const O2=new WeakMap,sD=new WeakMap;function B2(n){return sD.get(n)||1}function n5(n){if(n!==xh)throw new Error("invalid wNAF")}let zY=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>xh;)t&vl&&(r=r.add(i)),i=i.double(),t>>=vl;return r}precomputeWindow(e,t){const{windows:r,windowSize:i}=I2(t,this.bits),s=[];let o=e,c=o;for(let u=0;u<r;u++){c=o,s.push(c);for(let f=1;f<i;f++)c=c.add(o),s.push(c);o=c.double()}return s}wNAF(e,t,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=I2(e,this.bits);for(let c=0;c<o.windows;c++){const{nextN:u,offset:f,isZero:d,isNeg:p,isNegF:g,offsetF:m}=t5(r,c,o);r=u,d?s=s.add(ym(g,t[m])):i=i.add(ym(p,t[f]))}return n5(r),{p:i,f:s}}wNAFUnsafe(e,t,r,i=this.ZERO){const s=I2(e,this.bits);for(let o=0;o<s.windows&&r!==xh;o++){const{nextN:c,offset:u,isZero:f,isNeg:d}=t5(r,o,s);if(r=c,!f){const p=t[u];i=i.add(d?p.negate():p)}}return n5(r),i}getPrecomputes(e,t,r){let i=O2.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof r=="function"&&(i=r(i)),O2.set(t,i))),i}cached(e,t,r){const i=B2(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){const s=B2(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),t,i)}createCache(e,t){iD(t,this.bits),sD.set(e,t),O2.delete(e)}hasCache(e){return B2(e)!==1}};function HY(n,e,t,r){let i=e,s=n.ZERO,o=n.ZERO;for(;t>xh||r>xh;)t&vl&&(s=s.add(i)),r&vl&&(o=o.add(i)),i=i.double(),t>>=vl,r>>=vl;return{p1:s,p2:o}}function VY(n,e,t,r){MY(t,n),jY(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=KN(BigInt(i));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const f=pg(u),d=new Array(Number(f)+1).fill(o),p=Math.floor((e.BITS-1)/u)*u;let g=o;for(let m=p;m>=0;m-=u){d.fill(o);for(let b=0;b<s;b++){const A=r[b],N=Number(A>>BigInt(m)&f);d[N]=d[N].add(t[b])}let v=o;for(let b=d.length-1,A=o;b>0;b--)A=A.add(d[b]),v=v.add(A);if(g=g.add(v),m!==0)for(let b=0;b<u;b++)g=g.double()}return g}function r5(n,e,t){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return UY(e),e}else return _c(n,{isLE:t})}function qY(n,e,t={},r){if(r===void 0&&(r=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>xh))throw new Error(`CURVE.${c} must be positive bigint`)}const i=r5(e.p,t.Fp,r),s=r5(e.n,t.Fn,r),o=["Gx","Gy","a","b"];for(const c of o)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),CN("HashToScalar-");const kd=BigInt(0),Vu=BigInt(1),ry=BigInt(2);function KY(n){return uw(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function GY(n){const e=KY(n),{P:t,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,c=r==="x25519";if(!c&&r!=="x448")throw new Error("invalid type");const u=o||au,f=c?255:448,d=c?32:56,p=BigInt(c?9:5),g=BigInt(c?121665:39081),m=c?ry**BigInt(254):ry**BigInt(447),v=c?BigInt(8)*ry**BigInt(251)-Vu:BigInt(4)*ry**BigInt(445)-Vu,b=m+v+Vu,A=z=>Vr(z,t),N=R(p);function R(z){return X3(A(z),d)}function O(z){const P=Mn("u coordinate",z,d);return c&&(P[31]&=127),A(gm(P))}function T(z){return gm(i(Mn("scalar",z,d)))}function k(z,P){const D=V(O(P),T(z));if(D===kd)throw new Error("invalid private or public key received");return R(D)}function j(z){return k(z,N)}function H(z,P,D){const w=A(z*(P-D));return P=A(P-w),D=A(D+w),{x_2:P,x_3:D}}function V(z,P){yE("u",z,kd,t),yE("scalar",P,m,b);const D=P,w=z;let x=Vu,B=kd,C=z,I=Vu,_=kd;for(let U=BigInt(f-1);U>=kd;U--){const Y=D>>U&Vu;_^=Y,{x_2:x,x_3:C}=H(_,x,C),{x_2:B,x_3:I}=H(_,B,I),_=Y;const q=x+B,Z=A(q*q),te=x-B,re=A(te*te),le=Z-re,ie=C+I,ue=C-I,Ne=A(ue*q),Re=A(ie*te),Te=Ne+Re,Ve=Ne-Re;C=A(Te*Te),I=A(w*A(Ve*Ve)),x=A(Z*re),B=A(le*(Z+A(g*le)))}({x_2:x,x_3:C}=H(_,x,C)),{x_2:B,x_3:I}=H(_,B,I);const $=s(B);return A(x*$)}const M={secretKey:d,publicKey:d,seed:d},K=(z=u(d))=>(Zi(z,M.seed),z);function Q(z){const P=K(z);return{secretKey:P,publicKey:j(P)}}return{keygen:Q,getSharedSecret:(z,P)=>k(z,P),getPublicKey:z=>j(z),scalarMult:k,scalarMultBase:j,utils:{randomSecretKey:K,randomPrivateKey:K},GuBytes:N.slice(),lengths:M}}const WY=BigInt(1),i5=BigInt(2),QY=BigInt(3),ZY=BigInt(5);BigInt(8);const oD=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),JY={p:oD,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function YY(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=oD,o=n*n%s*n%s,c=Ni(o,i5,s)*o%s,u=Ni(c,WY,s)*n%s,f=Ni(u,ZY,s)*u%s,d=Ni(f,e,s)*f%s,p=Ni(d,t,s)*d%s,g=Ni(p,r,s)*p%s,m=Ni(g,i,s)*g%s,v=Ni(m,i,s)*g%s,b=Ni(v,e,s)*f%s;return{pow_p_5_8:Ni(b,i5,s)*n%s,b2:o}}function XY(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const eX=_c(JY.p,{isLE:!0}),mE=(()=>{const n=eX.ORDER;return GY({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=YY(e);return Vr(Ni(t,QY,n)*r,n)},adjustScalarBytes:XY})})(),s5=(n,e)=>(n+(n>=0?e:-e)/aD)/e;function tX(n,e,t){const[[r,i],[s,o]]=e,c=s5(o*n,t),u=s5(-i*n,t);let f=n-c*r-u*s,d=-c*i-u*o;const p=f<Bo,g=d<Bo;p&&(f=-f),g&&(d=-d);const m=pg(Math.ceil(KN(t)/2))+bf;if(f<Bo||f>=m||d<Bo||d>=m)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:p,k1:f,k2neg:g,k2:d}}function wE(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function P2(n,e){const t={};for(let r of Object.keys(e))t[r]=n[r]===void 0?e[r]:n[r];return pm(t.lowS,"lowS"),pm(t.prehash,"prehash"),t.format!==void 0&&wE(t.format),t}let nX=class extends Error{constructor(e=""){super(e)}};const lo={Err:nX,_tlv:{encode:(n,e)=>{const{Err:t}=lo;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=ny(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?ny(i.length/2|128):"";return ny(n)+s+i+e},decode(n,e){const{Err:t}=lo;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new t("tlv.decode: length bytes not complete");if(f[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const d of f)o=o<<8|d;if(r+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=lo;if(n<Bo)throw new e("integer: negative integers are not allowed");let t=ny(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=lo;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return lw(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=lo,i=Mn("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,s),{v:f,l:d}=r.decode(2,u);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(f)}},hexFromSig(n){const{_tlv:e,_int:t}=lo,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},Bo=BigInt(0),bf=BigInt(1),aD=BigInt(2),iy=BigInt(3),rX=BigInt(4);function sf(n,e){const{BYTES:t}=n;let r;if(typeof e=="bigint")r=e;else{let i=Mn("private key",e);try{r=n.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function iX(n,e={}){const t=qY("weierstrass",n,e),{Fp:r,Fn:i}=t;let s=t.CURVE;const{h:o,n:c}=s;uw(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=e;if(u&&(!r.is0(s.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=lD(r,i);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(z,P,D){const{x:w,y:x}=P.toAffine(),B=r.toBytes(w);if(pm(D,"isCompressed"),D){d();const C=!r.isOdd(x);return Ka(cD(C),B)}else return Ka(Uint8Array.of(4),B,r.toBytes(x))}function g(z){wl(z,void 0,"Point");const{publicKey:P,publicKeyUncompressed:D}=f,w=z.length,x=z[0],B=z.subarray(1);if(w===P&&(x===2||x===3)){const C=r.fromBytes(B);if(!r.isValid(C))throw new Error("bad point: is not on curve, wrong x");const I=b(C);let _;try{_=r.sqrt(I)}catch(U){const Y=U instanceof Error?": "+U.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}d();const $=r.isOdd(_);return(x&1)===1!==$&&(_=r.neg(_)),{x:C,y:_}}else if(w===D&&x===4){const C=r.BYTES,I=r.fromBytes(B.subarray(0,C)),_=r.fromBytes(B.subarray(C,C*2));if(!A(I,_))throw new Error("bad point: is not on curve");return{x:I,y:_}}else throw new Error(`bad point: got length ${w}, expected compressed=${P} or uncompressed=${D}`)}const m=e.toBytes||p,v=e.fromBytes||g;function b(z){const P=r.sqr(z),D=r.mul(P,z);return r.add(r.add(D,r.mul(z,s.a)),s.b)}function A(z,P){const D=r.sqr(P),w=b(z);return r.eql(D,w)}if(!A(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const N=r.mul(r.pow(s.a,iy),rX),R=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(N,R)))throw new Error("bad curve params: a or b");function O(z,P,D=!1){if(!r.isValid(P)||D&&r.is0(P))throw new Error(`bad point coordinate ${z}`);return P}function T(z){if(!(z instanceof M))throw new Error("ProjectivePoint expected")}function k(z){if(!u||!u.basises)throw new Error("no endo");return tX(z,u.basises,i.ORDER)}const j=Y6((z,P)=>{const{X:D,Y:w,Z:x}=z;if(r.eql(x,r.ONE))return{x:D,y:w};const B=z.is0();P==null&&(P=B?r.ONE:r.inv(x));const C=r.mul(D,P),I=r.mul(w,P),_=r.mul(x,P);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(_,r.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),H=Y6(z=>{if(z.is0()){if(e.allowInfinityPoint&&!r.is0(z.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:D}=z.toAffine();if(!r.isValid(P)||!r.isValid(D))throw new Error("bad point: x or y not field elements");if(!A(P,D))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function V(z,P,D,w,x){return D=new M(r.mul(D.X,z),D.Y,D.Z),P=ym(w,P),D=ym(x,D),P.add(D)}class M{constructor(P,D,w){this.X=O("x",P),this.Y=O("y",D,!0),this.Z=O("z",w),Object.freeze(this)}static CURVE(){return s}static fromAffine(P){const{x:D,y:w}=P||{};if(!P||!r.isValid(D)||!r.isValid(w))throw new Error("invalid affine point");if(P instanceof M)throw new Error("projective point not allowed");return r.is0(D)&&r.is0(w)?M.ZERO:new M(D,w,r.ONE)}static fromBytes(P){const D=M.fromAffine(v(wl(P,void 0,"point")));return D.assertValidity(),D}static fromHex(P){return M.fromBytes(Mn("pointHex",P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,D=!0){return Q.createCache(this,P),D||this.multiply(iy),this}assertValidity(){H(this)}hasEvenY(){const{y:P}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(P)}equals(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P,_=r.eql(r.mul(D,I),r.mul(B,x)),$=r.eql(r.mul(w,I),r.mul(C,x));return _&&$}negate(){return new M(this.X,r.neg(this.Y),this.Z)}double(){const{a:P,b:D}=s,w=r.mul(D,iy),{X:x,Y:B,Z:C}=this;let I=r.ZERO,_=r.ZERO,$=r.ZERO,U=r.mul(x,x),Y=r.mul(B,B),q=r.mul(C,C),Z=r.mul(x,B);return Z=r.add(Z,Z),$=r.mul(x,C),$=r.add($,$),I=r.mul(P,$),_=r.mul(w,q),_=r.add(I,_),I=r.sub(Y,_),_=r.add(Y,_),_=r.mul(I,_),I=r.mul(Z,I),$=r.mul(w,$),q=r.mul(P,q),Z=r.sub(U,q),Z=r.mul(P,Z),Z=r.add(Z,$),$=r.add(U,U),U=r.add($,U),U=r.add(U,q),U=r.mul(U,Z),_=r.add(_,U),q=r.mul(B,C),q=r.add(q,q),U=r.mul(q,Z),I=r.sub(I,U),$=r.mul(q,Y),$=r.add($,$),$=r.add($,$),new M(I,_,$)}add(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P;let _=r.ZERO,$=r.ZERO,U=r.ZERO;const Y=s.a,q=r.mul(s.b,iy);let Z=r.mul(D,B),te=r.mul(w,C),re=r.mul(x,I),le=r.add(D,w),ie=r.add(B,C);le=r.mul(le,ie),ie=r.add(Z,te),le=r.sub(le,ie),ie=r.add(D,x);let ue=r.add(B,I);return ie=r.mul(ie,ue),ue=r.add(Z,re),ie=r.sub(ie,ue),ue=r.add(w,x),_=r.add(C,I),ue=r.mul(ue,_),_=r.add(te,re),ue=r.sub(ue,_),U=r.mul(Y,ie),_=r.mul(q,re),U=r.add(_,U),_=r.sub(te,U),U=r.add(te,U),$=r.mul(_,U),te=r.add(Z,Z),te=r.add(te,Z),re=r.mul(Y,re),ie=r.mul(q,ie),te=r.add(te,re),re=r.sub(Z,re),re=r.mul(Y,re),ie=r.add(ie,re),Z=r.mul(te,ie),$=r.add($,Z),Z=r.mul(ue,ie),_=r.mul(le,_),_=r.sub(_,Z),Z=r.mul(le,te),U=r.mul(ue,U),U=r.add(U,Z),new M(_,$,U)}subtract(P){return this.add(P.negate())}is0(){return this.equals(M.ZERO)}multiply(P){const{endo:D}=e;if(!i.isValidNot0(P))throw new Error("invalid scalar: out of range");let w,x;const B=C=>Q.cached(this,C,I=>S2(M,I));if(D){const{k1neg:C,k1:I,k2neg:_,k2:$}=k(P),{p:U,f:Y}=B(I),{p:q,f:Z}=B($);x=Y.add(Z),w=V(D.beta,U,q,C,_)}else{const{p:C,f:I}=B(P);w=C,x=I}return S2(M,[w,x])[0]}multiplyUnsafe(P){const{endo:D}=e,w=this;if(!i.isValid(P))throw new Error("invalid scalar: out of range");if(P===Bo||w.is0())return M.ZERO;if(P===bf)return w;if(Q.hasCache(this))return this.multiply(P);if(D){const{k1neg:x,k1:B,k2neg:C,k2:I}=k(P),{p1:_,p2:$}=HY(M,w,B,I);return V(D.beta,_,$,x,C)}else return Q.unsafe(w,P)}multiplyAndAddUnsafe(P,D,w){const x=this.multiplyUnsafe(D).add(P.multiplyUnsafe(w));return x.is0()?void 0:x}toAffine(P){return j(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return o===bf?!0:P?P(M,this):Q.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:P}=e;return o===bf?this:P?P(M,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(P=!0){return pm(P,"isCompressed"),this.assertValidity(),m(M,this,P)}toHex(P=!0){return wf(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(P=!0){return this.toBytes(P)}_setWindowSize(P){this.precompute(P)}static normalizeZ(P){return S2(M,P)}static msm(P,D){return VY(M,i,P,D)}static fromPrivateKey(P){return M.BASE.multiply(sf(i,P))}}M.BASE=new M(s.Gx,s.Gy,r.ONE),M.ZERO=new M(r.ZERO,r.ONE,r.ZERO),M.Fp=r,M.Fn=i;const K=i.BITS,Q=new zY(M,e.endo?Math.ceil(K/2):K);return M.BASE.precompute(8),M}function cD(n){return Uint8Array.of(n?2:3)}function lD(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function sX(n,e={}){const{Fn:t}=n,r=e.randomBytes||au,i=Object.assign(lD(n.Fp,t),{seed:rD(t.ORDER)});function s(g){try{return!!sf(t,g)}catch{return!1}}function o(g,m){const{publicKey:v,publicKeyUncompressed:b}=i;try{const A=g.length;return m===!0&&A!==v||m===!1&&A!==b?!1:!!n.fromBytes(g)}catch{return!1}}function c(g=r(i.seed)){return FY(wl(g,i.seed,"seed"),t.ORDER)}function u(g,m=!0){return n.BASE.multiply(sf(t,g)).toBytes(m)}function f(g){const m=c(g);return{secretKey:m,publicKey:u(m)}}function d(g){if(typeof g=="bigint")return!1;if(g instanceof n)return!0;const{secretKey:m,publicKey:v,publicKeyUncompressed:b}=i;if(t.allowedLengths||m===v)return;const A=Mn("key",g).length;return A===v||A===b}function p(g,m,v=!0){if(d(g)===!0)throw new Error("first arg must be private key");if(d(m)===!1)throw new Error("second arg must be public key");const b=sf(t,g);return n.fromHex(m).multiply(b).toBytes(v)}return Object.freeze({getPublicKey:u,getSharedSecret:p,keygen:f,Point:n,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:s,randomPrivateKey:c,normPrivateKeyToScalar:g=>sf(t,g),precompute(g=8,m=n.BASE){return m.precompute(g,!1)}},lengths:i})}function oX(n,e,t={}){iw(e),uw(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||au,i=t.hmac||((D,...w)=>aw(e,D,Ka(...w))),{Fp:s,Fn:o}=n,{ORDER:c,BITS:u}=o,{keygen:f,getPublicKey:d,getSharedSecret:p,utils:g,lengths:m}=sX(n,t),v={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},b="compact";function A(D){const w=c>>bf;return D>w}function N(D,w){if(!o.isValidNot0(w))throw new Error(`invalid signature ${D}: out of range 1..Point.Fn.ORDER`);return w}function R(D,w){wE(w);const x=m.signature,B=w==="compact"?x:w==="recovered"?x+1:void 0;return wl(D,B,`${w} signature`)}class O{constructor(w,x,B){this.r=N("r",w),this.s=N("s",x),B!=null&&(this.recovery=B),Object.freeze(this)}static fromBytes(w,x=b){R(w,x);let B;if(x==="der"){const{r:$,s:U}=lo.toSig(wl(w));return new O($,U)}x==="recovered"&&(B=w[0],x="compact",w=w.subarray(1));const C=o.BYTES,I=w.subarray(0,C),_=w.subarray(C,C*2);return new O(o.fromBytes(I),o.fromBytes(_),B)}static fromHex(w,x){return this.fromBytes(hm(w),x)}addRecoveryBit(w){return new O(this.r,this.s,w)}recoverPublicKey(w){const x=s.ORDER,{r:B,s:C,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(c*aD<x&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const _=I===2||I===3?B+c:B;if(!s.isValid(_))throw new Error("recovery id 2 or 3 invalid");const $=s.toBytes(_),U=n.fromBytes(Ka(cD((I&1)===0),$)),Y=o.inv(_),q=k(Mn("msgHash",w)),Z=o.create(-q*Y),te=o.create(C*Y),re=n.BASE.multiplyUnsafe(Z).add(U.multiplyUnsafe(te));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return A(this.s)}toBytes(w=b){if(wE(w),w==="der")return hm(lo.hexFromSig(this));const x=o.toBytes(this.r),B=o.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ka(Uint8Array.of(this.recovery),x,B)}return Ka(x,B)}toHex(w){return wf(this.toBytes(w))}assertValidity(){}static fromCompact(w){return O.fromBytes(Mn("sig",w),"compact")}static fromDER(w){return O.fromBytes(Mn("sig",w),"der")}normalizeS(){return this.hasHighS()?new O(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return wf(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return wf(this.toBytes("compact"))}}const T=t.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const w=lw(D),x=D.length*8-u;return x>0?w>>BigInt(x):w},k=t.bits2int_modN||function(D){return o.create(T(D))},j=pg(u);function H(D){return yE("num < 2^"+u,D,Bo,j),o.toBytes(D)}function V(D,w){return wl(D,void 0,"message"),w?wl(e(D),void 0,"prehashed message"):D}function M(D,w,x){if(["recovered","canonical"].some(te=>te in x))throw new Error("sign() legacy options not supported");const{lowS:B,prehash:C,extraEntropy:I}=P2(x,v);D=V(D,C);const _=k(D),$=sf(o,w),U=[H($),H(_)];if(I!=null&&I!==!1){const te=I===!0?r(m.secretKey):I;U.push(Mn("extraEntropy",te))}const Y=Ka(...U),q=_;function Z(te){const re=T(te);if(!o.isValidNot0(re))return;const le=o.inv(re),ie=n.BASE.multiply(re).toAffine(),ue=o.create(ie.x);if(ue===Bo)return;const Ne=o.create(le*o.create(q+ue*$));if(Ne===Bo)return;let Re=(ie.x===ue?0:2)|Number(ie.y&bf),Te=Ne;return B&&A(Ne)&&(Te=o.neg(Ne),Re^=1),new O(ue,Te,Re)}return{seed:Y,k2sig:Z}}function K(D,w,x={}){D=Mn("message",D);const{seed:B,k2sig:C}=M(D,w,x);return _Y(e.outputLen,o.BYTES,i)(B,C)}function Q(D){let w;const x=typeof D=="string"||rw(D),B=!x&&D!==null&&typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!x&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(B)w=new O(D.r,D.s);else if(x){try{w=O.fromBytes(Mn("sig",D),"der")}catch(C){if(!(C instanceof lo.Err))throw C}if(!w)try{w=O.fromBytes(Mn("sig",D),"compact")}catch{return!1}}return w||!1}function z(D,w,x,B={}){const{lowS:C,prehash:I,format:_}=P2(B,v);if(x=Mn("publicKey",x),w=V(Mn("message",w),I),"strict"in B)throw new Error("options.strict was renamed to lowS");const $=_===void 0?Q(D):O.fromBytes(Mn("sig",D),_);if($===!1)return!1;try{const U=n.fromBytes(x);if(C&&$.hasHighS())return!1;const{r:Y,s:q}=$,Z=k(w),te=o.inv(q),re=o.create(Z*te),le=o.create(Y*te),ie=n.BASE.multiplyUnsafe(re).add(U.multiplyUnsafe(le));return ie.is0()?!1:o.create(ie.x)===Y}catch{return!1}}function P(D,w,x={}){const{prehash:B}=P2(x,v);return w=V(w,B),O.fromBytes(D,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:f,getPublicKey:d,getSharedSecret:p,utils:g,lengths:m,Point:n,sign:K,verify:z,recoverPublicKey:P,Signature:O,hash:e})}function aX(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=_c(e.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),s={Fp:t,Fn:i,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function cX(n){const{CURVE:e,curveOpts:t}=aX(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,hash:n.hash,ecdsaOpts:r}}function lX(n,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},n,tD(t.Fn.ORDER,t.Fn.BITS))})}function uX(n){const{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:i}=cX(n),s=iX(e,t),o=oX(s,r,i);return lX(n,o)}function bE(n,e){const t=r=>uX({...n,hash:r});return{...t(e),create:t}}const uD={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},fD={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},hD={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},fX=_c(uD.p),hX=_c(fD.p),dX=_c(hD.p),pX=bE({...uD,Fp:fX,lowS:!1},ow);bE({...fD,Fp:hX,lowS:!1},EJ),bE({...hD,Fp:dX,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},vJ);const gX=pX,dD="base10",er="base16",wr="base64pad",Ga="base64url",gg="utf8",pD=0,Do=1,yg=2,yX=0,o5=1,up=12,tx=32;function mX(){const n=mE.utils.randomPrivateKey(),e=mE.getPublicKey(n);return{privateKey:Or(n,er),publicKey:Or(e,er)}}function vE(){const n=au(tx);return Or(n,er)}function wX(n,e){const t=mE.getSharedSecret(mi(n,er),mi(e,er)),r=PY(cw,t,void 0,void 0,tx);return Or(r,er)}function Dy(n){const e=cw(mi(n,er));return Or(e,er)}function gi(n){const e=cw(mi(n,gg));return Or(e,er)}function gD(n){return mi(`${n}`,dD)}function eu(n){return Number(Or(n,dD))}function yD(n){return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function mD(n){const e=n.replace(/-/g,"+").replace(/_/g,"/"),t=(4-e.length%4)%4;return e+"=".repeat(t)}function bX(n){const e=gD(typeof n.type<"u"?n.type:pD);if(eu(e)===Do&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?mi(n.senderPublicKey,er):void 0,r=typeof n.iv<"u"?mi(n.iv,er):au(up),i=mi(n.symKey,er),s=HN(i,r).encrypt(mi(n.message,gg)),o=wD({type:e,sealed:s,iv:r,senderPublicKey:t});return n.encoding===Ga?yD(o):o}function vX(n){const e=mi(n.symKey,er),{sealed:t,iv:r}=kp({encoded:n.encoded,encoding:n.encoding}),i=HN(e,r).decrypt(t);if(i===null)throw new Error("Failed to decrypt");return Or(i,gg)}function EX(n,e){const t=gD(yg),r=au(up),i=mi(n,gg),s=wD({type:t,sealed:i,iv:r});return e===Ga?yD(s):s}function xX(n,e){const{sealed:t}=kp({encoded:n,encoding:e});return Or(t,gg)}function wD(n){if(eu(n.type)===yg)return Or(lp([n.type,n.sealed]),wr);if(eu(n.type)===Do){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Or(lp([n.type,n.senderPublicKey,n.iv,n.sealed]),wr)}return Or(lp([n.type,n.iv,n.sealed]),wr)}function kp(n){const e=(n.encoding||wr)===Ga?mD(n.encoded):n.encoded,t=mi(e,wr),r=t.slice(yX,o5),i=o5;if(eu(r)===Do){const u=i+tx,f=u+up,d=t.slice(i,u),p=t.slice(u,f),g=t.slice(f);return{type:r,sealed:g,iv:p,senderPublicKey:d}}if(eu(r)===yg){const u=t.slice(i),f=au(up);return{type:r,sealed:u,iv:f}}const s=i+up,o=t.slice(i,s),c=t.slice(s);return{type:r,sealed:c,iv:o}}function AX(n,e){const t=kp({encoded:n,encoding:e==null?void 0:e.encoding});return bD({type:eu(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Or(t.senderPublicKey,er):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function bD(n){const e=(n==null?void 0:n.type)||pD;if(e===Do){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function a5(n){return n.type===Do&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}function c5(n){return n.type===yg}function SX(n){const e=Buffer.from(n.x,"base64"),t=Buffer.from(n.y,"base64");return lp([new Uint8Array([4]),e,t])}function IX(n,e){const[t,r,i]=n.split("."),s=Buffer.from(mD(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),c=s.slice(32,64),u=`${t}.${r}`,f=cw(u),d=SX(e);if(!gX.verify(lp([o,c]),f,d))throw new Error("Invalid signature");return qv(n).payload}const OX="irn";function mm(n){return(n==null?void 0:n.relay)||{protocol:OX}}function of(n){const e=bV[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var BX=Object.defineProperty,PX=Object.defineProperties,CX=Object.getOwnPropertyDescriptors,l5=Object.getOwnPropertySymbols,_X=Object.prototype.hasOwnProperty,NX=Object.prototype.propertyIsEnumerable,u5=(n,e,t)=>e in n?BX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,C2=(n,e)=>{for(var t in e||(e={}))_X.call(e,t)&&u5(n,t,e[t]);if(l5)for(var t of l5(e))NX.call(e,t)&&u5(n,t,e[t]);return n},DX=(n,e)=>PX(n,CX(e));function $X(n,e="-"){const t={},r="relay"+e;return Object.keys(n).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=n[i];t[s]=o}}),t}function f5(n){if(!n.includes("wc:")){const f=AN(n);f!=null&&f.includes("wc:")&&(n=f)}n=n.includes("wc://")?n.replace("wc://",""):n,n=n.includes("wc:")?n.replace("wc:",""):n;const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,r=n.substring(0,e),i=n.substring(e+1,t).split("@"),s=typeof t<"u"?n.substring(t):"",o=new URLSearchParams(s),c=Object.fromEntries(o.entries()),u=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:r,topic:TX(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:$X(c),methods:u,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function TX(n){return n.startsWith("//")?n.substring(2):n}function kX(n,e="-"){const t="relay",r={};return Object.keys(n).forEach(i=>{const s=i,o=t+e+s;n[s]&&(r[o]=n[s])}),r}function h5(n){const e=new URLSearchParams,t=C2(C2(DX(C2({},kX(n.relay)),{symKey:n.symKey}),n.expiryTimestamp&&{expiryTimestamp:n.expiryTimestamp.toString()}),n.methods&&{methods:n.methods.join(",")});return Object.entries(t).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!==void 0&&e.append(r,String(i))}),`${n.protocol}:${n.topic}@${n.version}?${e}`}function sy(n,e,t){return`${n}?wc_ev=${t}&topic=${e}`}var RX=Object.defineProperty,UX=Object.defineProperties,LX=Object.getOwnPropertyDescriptors,d5=Object.getOwnPropertySymbols,FX=Object.prototype.hasOwnProperty,MX=Object.prototype.propertyIsEnumerable,p5=(n,e,t)=>e in n?RX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jX=(n,e)=>{for(var t in e||(e={}))FX.call(e,t)&&p5(n,t,e[t]);if(d5)for(var t of d5(e))MX.call(e,t)&&p5(n,t,e[t]);return n},zX=(n,e)=>UX(n,LX(e));function _h(n){const e=[];return n.forEach(t=>{const[r,i]=t.split(":");e.push(`${r}:${i}`)}),e}function HX(n){const e=[];return Object.values(n).forEach(t=>{e.push(..._h(t.accounts))}),e}function VX(n,e){const t=[];return Object.values(n).forEach(r=>{_h(r.accounts).includes(e)&&t.push(...r.methods)}),t}function qX(n,e){const t=[];return Object.values(n).forEach(r=>{_h(r.accounts).includes(e)&&t.push(...r.events)}),t}function vD(n){return n.includes(":")}function KX(n){return vD(n)?n.split(":")[0]:n}function g5(n){var e,t,r;const i={};if(!Rp(n))return i;for(const[s,o]of Object.entries(n)){const c=vD(s)?[s]:o.chains,u=o.methods||[],f=o.events||[],d=KX(s);i[d]=zX(jX({},i[d]),{chains:Gl(c,(e=i[d])==null?void 0:e.chains),methods:Gl(u,(t=i[d])==null?void 0:t.methods),events:Gl(f,(r=i[d])==null?void 0:r.events)})}return i}function GX(n){const e={};return n==null||n.forEach(t=>{var r;const[i,s]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(t),(r=e[i].chains)==null||r.push(`${i}:${s}`)}),e}function y5(n,e){e=e.map(r=>r.replace("did:pkh:",""));const t=GX(e);for(const[r,i]of Object.entries(t))i.methods?i.methods=Gl(i.methods,n):i.methods=n,i.events=["chainChanged","accountsChanged"];return t}function WX(n,e){var t,r,i,s,o,c;const u=g5(n),f=g5(e),d={},p=Object.keys(u).concat(Object.keys(f));for(const g of p)d[g]={chains:Gl((t=u[g])==null?void 0:t.chains,(r=f[g])==null?void 0:r.chains),methods:Gl((i=u[g])==null?void 0:i.methods,(s=f[g])==null?void 0:s.methods),events:Gl((o=u[g])==null?void 0:o.events,(c=f[g])==null?void 0:c.events)};return d}const QX={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ZX={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function we(n,e){const{message:t,code:r}=ZX[n];return{message:e?`${t} ${e}`:t,code:r}}function It(n,e){const{message:t,code:r}=QX[n];return{message:e?`${t} ${e}`:t,code:r}}function Ah(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function Rp(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function qt(n){return typeof n>"u"}function Rt(n,e){return e&&qt(n)?!0:typeof n=="string"&&!!n.trim().length}function nx(n,e){return e&&qt(n)?!0:typeof n=="number"&&!isNaN(n)}function JX(n,e){const{requiredNamespaces:t}=e,r=Object.keys(n.namespaces),i=Object.keys(t);let s=!0;return ml(i,r)?(r.forEach(o=>{const{accounts:c,methods:u,events:f}=n.namespaces[o],d=_h(c),p=t[o];(!ml(wN(o,p),d)||!ml(p.methods,u)||!ml(p.events,f))&&(s=!1)}),s):!1}function wm(n){return Rt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function YX(n){if(Rt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&wm(t)}}return!1}function XX(n){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(Rt(n,!1)){if(e(n))return!0;const t=AN(n);return e(t)}}catch{}return!1}function eee(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function tee(n){return n==null?void 0:n.topic}function nee(n,e){let t=null;return Rt(n==null?void 0:n.publicKey,!1)||(t=we("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function m5(n){let e=!0;return Ah(n)?n.length&&(e=n.every(t=>Rt(t,!1))):e=!1,e}function ree(n,e,t){let r=null;return Ah(e)&&e.length?e.forEach(i=>{r||wm(i)||(r=It("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):wm(n)||(r=It("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function iee(n,e,t){let r=null;return Object.entries(n).forEach(([i,s])=>{if(r)return;const o=ree(i,wN(i,s),`${e} ${t}`);o&&(r=o)}),r}function see(n,e){let t=null;return Ah(n)?n.forEach(r=>{t||YX(r)||(t=It("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=It("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function oee(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const i=see(r==null?void 0:r.accounts,`${e} namespace`);i&&(t=i)}),t}function aee(n,e){let t=null;return m5(n==null?void 0:n.methods)?m5(n==null?void 0:n.events)||(t=It("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=It("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function ED(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const i=aee(r,`${e}, namespace`);i&&(t=i)}),t}function cee(n,e,t){let r=null;if(n&&Rp(n)){const i=ED(n,e);i&&(r=i);const s=iee(n,e,t);s&&(r=s)}else r=we("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return r}function _2(n,e){let t=null;if(n&&Rp(n)){const r=ED(n,e);r&&(t=r);const i=oee(n,e);i&&(t=i)}else t=we("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function xD(n){return Rt(n.protocol,!0)}function lee(n,e){let t=!1;return n?n&&Ah(n)&&n.length&&n.forEach(r=>{t=xD(r)}):t=!0,t}function uee(n){return typeof n=="number"}function fr(n){return typeof n<"u"&&typeof n!==null}function fee(n){return!(!n||typeof n!="object"||!n.code||!nx(n.code,!1)||!n.message||!Rt(n.message,!1))}function hee(n){return!(qt(n)||!Rt(n.method,!1))}function dee(n){return!(qt(n)||qt(n.result)&&qt(n.error)||!nx(n.id,!1)||!Rt(n.jsonrpc,!1))}function pee(n){return!(qt(n)||!Rt(n.name,!1))}function w5(n,e){return!(!wm(e)||!HX(n).includes(e))}function gee(n,e,t){return Rt(t,!1)?VX(n,e).includes(t):!1}function yee(n,e,t){return Rt(t,!1)?qX(n,e).includes(t):!1}function b5(n,e,t){let r=null;const i=mee(n),s=wee(e),o=Object.keys(i),c=Object.keys(s),u=v5(Object.keys(n)),f=v5(Object.keys(e)),d=u.filter(p=>!f.includes(p));return d.length&&(r=we("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),ml(o,c)||(r=we("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${c.toString()}`)),Object.keys(e).forEach(p=>{if(!p.includes(":")||r)return;const g=_h(e[p].accounts);g.includes(p)||(r=we("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${p}
        Required: ${p}
        Approved: ${g.toString()}`))}),o.forEach(p=>{r||(ml(i[p].methods,s[p].methods)?ml(i[p].events,s[p].events)||(r=we("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${p}`)):r=we("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${p}`))}),r}function mee(n){const e={};return Object.keys(n).forEach(t=>{var r;t.includes(":")?e[t]=n[t]:(r=n[t].chains)==null||r.forEach(i=>{e[i]={methods:n[t].methods,events:n[t].events}})}),e}function v5(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function wee(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const r=_h(n[t].accounts);r==null||r.forEach(i=>{e[i]={accounts:n[t].accounts.filter(s=>s.includes(`${i}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function bee(n,e){return nx(n,!1)&&n<=e.max&&n>=e.min}function E5(){const n=hg();return new Promise(e=>{switch(n){case Kr.browser:e(vee());break;case Kr.reactNative:e(Eee());break;case Kr.node:e(xee());break;default:e(!0)}})}function vee(){return Ch()&&(navigator==null?void 0:navigator.onLine)}async function Eee(){if(Cc()&&typeof global<"u"&&global!=null&&global.NetInfo){const n=await(global==null?void 0:global.NetInfo.fetch());return n==null?void 0:n.isConnected}return!0}function xee(){return!0}function Aee(n){switch(hg()){case Kr.browser:See(n);break;case Kr.reactNative:Iee(n);break}}function See(n){!Cc()&&Ch()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function Iee(n){Cc()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>n(e==null?void 0:e.isConnected)))}function Oee(){var n;return Ch()&&Ro.getDocument()?((n=Ro.getDocument())==null?void 0:n.visibilityState)==="visible":!0}const N2={};class Rd{static get(e){return N2[e]}static set(e,t){N2[e]=t}static delete(e){delete N2[e]}}function Bee(n){const e=fg.decode(n);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Pee({publicKey:n,signature:e,payload:t}){var r;const i=EE(t.method),s=128|parseInt(((r=t.version)==null?void 0:r.toString())||"4"),o=Nee(t.address),c=t.era==="00"?new Uint8Array([0]):EE(t.era);if(c.length!==1&&c.length!==2)throw new Error("Invalid era length");const u=parseInt(t.nonce,16),f=new Uint8Array([u&255,u>>8&255]),d=BigInt(`0x${_ee(t.tip)}`),p=$ee(d),g=new Uint8Array([0,...n,o,...e,...c,...f,...p,...i]),m=Dee(g.length+1);return new Uint8Array([...m,s,...g])}function Cee(n){const e=EE(n),t=AV.blake2b(e,void 0,32);return"0x"+Buffer.from(t).toString("hex")}function EE(n){return new Uint8Array(n.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function _ee(n){return n.startsWith("0x")?n.slice(2):n}function Nee(n){const e=fg.decode(n)[0];return e===42?0:e===60?2:1}function Dee(n){if(n<64)return new Uint8Array([n<<2]);if(n<16384){const e=n<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(n<1<<30){const e=n<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function $ee(n){if(n<BigInt(1)<<BigInt(6))return new Uint8Array([Number(n<<BigInt(2))]);if(n<BigInt(1)<<BigInt(14)){const e=n<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(n<BigInt(1)<<BigInt(30)){const e=n<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Tee(n){const e=Uint8Array.from(Buffer.from(n.signature,"hex")),t=Bee(n.transaction.address),r=Pee({publicKey:t,signature:e,payload:n.transaction}),i=Buffer.from(r).toString("hex");return Cee(i)}function AD({logger:n,name:e}){const t=typeof n=="string"?O3({opts:{level:n,name:e}}).logger:n;return t.level=typeof n=="string"?n:n.level,t}const kee="PARSE_ERROR",Ree="INVALID_REQUEST",Uee="METHOD_NOT_FOUND",Lee="INVALID_PARAMS",SD="INTERNAL_ERROR",rx="SERVER_ERROR",Fee=[-32700,-32600,-32601,-32602,-32603],fp={[kee]:{code:-32700,message:"Parse error"},[Ree]:{code:-32600,message:"Invalid Request"},[Uee]:{code:-32601,message:"Method not found"},[Lee]:{code:-32602,message:"Invalid params"},[SD]:{code:-32603,message:"Internal error"},[rx]:{code:-32e3,message:"Server error"}},ID=rx;function Mee(n){return Fee.includes(n)}function x5(n){return Object.keys(fp).includes(n)?fp[n]:fp[ID]}function jee(n){const e=Object.values(fp).find(t=>t.code===n);return e||fp[ID]}function OD(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var D2={},Zs={},A5;function zee(){if(A5)return Zs;A5=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.isBrowserCryptoAvailable=Zs.getSubtleCrypto=Zs.getBrowerCrypto=void 0;function n(){return(Ps==null?void 0:Ps.crypto)||(Ps==null?void 0:Ps.msCrypto)||{}}Zs.getBrowerCrypto=n;function e(){const r=n();return r.subtle||r.webkitSubtle}Zs.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return Zs.isBrowserCryptoAvailable=t,Zs}var Js={},S5;function Hee(){if(S5)return Js;S5=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.isBrowser=Js.isNode=Js.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Js.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Js.isNode=e;function t(){return!n()&&!e()}return Js.isBrowser=t,Js}var I5;function Vee(){return I5||(I5=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=rg;e.__exportStar(zee(),n),e.__exportStar(Hee(),n)})(D2)),D2}var qee=Vee();function ys(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function hc(n=6){return BigInt(ys(n))}function Vi(n,e,t){return{id:t||ys(),jsonrpc:"2.0",method:n,params:e}}function Up(n,e){return{id:n,jsonrpc:"2.0",result:e}}function fw(n,e,t){return{id:n,jsonrpc:"2.0",error:Kee(e)}}function Kee(n,e){return typeof n>"u"?x5(SD):(typeof n=="string"&&(n=Object.assign(Object.assign({},x5(rx)),{message:n})),Mee(n.code)&&(n=jee(n.code)),n)}class Gee{}class Wee extends Gee{constructor(){super()}}class Qee extends Wee{constructor(e){super()}}const Zee="^https?:",Jee="^wss?:";function Yee(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function BD(n,e){const t=Yee(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function O5(n){return BD(n,Zee)}function B5(n){return BD(n,Jee)}function Xee(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function PD(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function ix(n){return PD(n)&&"method"in n}function hw(n){return PD(n)&&(ms(n)||yi(n))}function ms(n){return"result"in n}function yi(n){return"error"in n}let sx=class extends Qee{constructor(e){super(e),this.events=new Gr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Vi(e.method,e.params||[],e.id||hc().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{yi(s)?i(s.error):r(s.result)});try{await this.connection.send(e,t)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),hw(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const ete=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),tte=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function nte(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return tte(n)}catch{return n}}function rte(n){return typeof n=="string"?n:ete(n)||""}const ite=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),ste=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",P5=n=>n.split("?")[0],C5=10,ote=ite();let ate=class{constructor(e){if(this.url=e,this.events=new Gr.EventEmitter,this.registering=!1,!B5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(rte(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!B5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const i=qee.isReactNative()?void 0:{rejectUnauthorized:!Xee(e)},s=new ote(e,[],i);ste()?s.onerror=o=>{const c=o;r(this.emitError(c.error))}:s.on("error",o=>{r(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),t(s)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?nte(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=r.message||r.toString(),s=fw(e,i);this.events.emit("payload",s)}parseError(e,t=this.url){return OD(e,P5(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>C5&&this.events.setMaxListeners(C5)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${P5(this.url)}`));return this.events.emit("register_error",t),t}};var cte={};const CD="wc",_D=2,xE="core",Ts=`${CD}@2:${xE}:`,lte={logger:"error"},ute={database:":memory:"},fte="crypto",_5="client_ed25519_seed",hte=me.ONE_DAY,dte="keychain",pte="0.3",gte="messages",yte="0.3",mte=me.SIX_HOURS,wte="publisher",ND="irn",bte="error",DD="wss://relay.walletconnect.org",vte="relayer",_t={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Ete="_subscription",ri={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},xte=.1,AE="2.22.3",mt={link_mode:"link_mode",relay:"relay"},$y={inbound:"inbound",outbound:"outbound"},Ate="0.3",Ste="WALLETCONNECT_CLIENT_ID",N5="WALLETCONNECT_LINK_MODE_APPS",Rr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Ite="subscription",Ote="0.3",Bte="pairing",Pte="0.3",Ud={wc_pairingDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:me.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:me.ONE_DAY,prompt:!1,tag:0},res:{ttl:me.ONE_DAY,prompt:!1,tag:0}}},il={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Pi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Cte="history",_te="0.3",Nte="expirer",oi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Dte="0.3",$te="verify-api",Tte="https://verify.walletconnect.com",$D="https://verify.walletconnect.org",hp=$D,kte=`${hp}/v3`,Rte=[Tte,$D],Ute="echo",Lte="https://echo.walletconnect.com",gs={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},to={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ci={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},Qc={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},Zc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ld={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Fte=.1,Mte="event-client",jte=86400,zte="https://pulse.walletconnect.org/batch";function Hte(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var c=n.length,u=n.charAt(0),f=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function p(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var b=0,A=0,N=0,R=v.length;N!==R&&v[N]===0;)N++,b++;for(var O=(R-N)*d+1>>>0,T=new Uint8Array(O);N!==R;){for(var k=v[N],j=0,H=O-1;(k!==0||j<A)&&H!==-1;H--,j++)k+=256*T[H]>>>0,T[H]=k%c>>>0,k=k/c>>>0;if(k!==0)throw new Error("Non-zero carry");A=j,N++}for(var V=O-A;V!==O&&T[V]===0;)V++;for(var M=u.repeat(b);V<O;++V)M+=n.charAt(T[V]);return M}function g(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var b=0;if(v[b]!==" "){for(var A=0,N=0;v[b]===u;)A++,b++;for(var R=(v.length-b)*f+1>>>0,O=new Uint8Array(R);v[b];){var T=t[v.charCodeAt(b)];if(T===255)return;for(var k=0,j=R-1;(T!==0||k<N)&&j!==-1;j--,k++)T+=c*O[j]>>>0,O[j]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");N=k,b++}if(v[b]!==" "){for(var H=R-N;H!==R&&O[H]===0;)H++;for(var V=new Uint8Array(A+(R-H)),M=A;H!==R;)V[M++]=O[H++];return V}}}function m(v){var b=g(v);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:g,decode:m}}var Vte=Hte,qte=Vte;const TD=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Kte=n=>new TextEncoder().encode(n),Gte=n=>new TextDecoder().decode(n);class Wte{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Qte{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return kD(this,e)}}class Zte{constructor(e){this.decoders=e}or(e){return kD(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const kD=(n,e)=>new Zte({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Jte{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new Wte(e,t,r),this.decoder=new Qte(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const dw=({name:n,prefix:e,encode:t,decode:r})=>new Jte(n,e,t,r),mg=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=qte(t,e);return dw({prefix:n,name:e,encode:r,decode:s=>TD(i(s))})},Yte=(n,e,t,r)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=n.length;for(;n[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let c=0,u=0,f=0;for(let d=0;d<s;++d){const p=i[n[d]];if(p===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<t|p,c+=t,c>=8&&(c-=8,o[f++]=255&u>>c)}if(c>=t||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return o},Xte=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let s="",o=0,c=0;for(let u=0;u<n.length;++u)for(c=c<<8|n[u],o+=8;o>t;)o-=t,s+=e[i&c>>o];if(o&&(s+=e[i&c<<t-o]),r)for(;s.length*t&7;)s+="=";return s},vn=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>dw({prefix:e,name:n,encode(i){return Xte(i,r,t)},decode(i){return Yte(i,r,t,n)}}),ene=dw({prefix:"\0",name:"identity",encode:n=>Gte(n),decode:n=>Kte(n)});var tne=Object.freeze({__proto__:null,identity:ene});const nne=vn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var rne=Object.freeze({__proto__:null,base2:nne});const ine=vn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var sne=Object.freeze({__proto__:null,base8:ine});const one=mg({prefix:"9",name:"base10",alphabet:"0123456789"});var ane=Object.freeze({__proto__:null,base10:one});const cne=vn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),lne=vn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var une=Object.freeze({__proto__:null,base16:cne,base16upper:lne});const fne=vn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hne=vn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dne=vn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pne=vn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gne=vn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yne=vn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mne=vn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wne=vn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bne=vn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var vne=Object.freeze({__proto__:null,base32:fne,base32upper:hne,base32pad:dne,base32padupper:pne,base32hex:gne,base32hexupper:yne,base32hexpad:mne,base32hexpadupper:wne,base32z:bne});const Ene=mg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),xne=mg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ane=Object.freeze({__proto__:null,base36:Ene,base36upper:xne});const Sne=mg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ine=mg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var One=Object.freeze({__proto__:null,base58btc:Sne,base58flickr:Ine});const Bne=vn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pne=vn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cne=vn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_ne=vn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Nne=Object.freeze({__proto__:null,base64:Bne,base64pad:Pne,base64url:Cne,base64urlpad:_ne});const RD=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Dne=RD.reduce((n,e,t)=>(n[t]=e,n),[]),$ne=RD.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function Tne(n){return n.reduce((e,t)=>(e+=Dne[t],e),"")}function kne(n){const e=[];for(const t of n){const r=$ne[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const Rne=dw({prefix:"🚀",name:"base256emoji",encode:Tne,decode:kne});var Une=Object.freeze({__proto__:null,base256emoji:Rne}),Lne=UD,D5=128,Fne=-128,Mne=Math.pow(2,31);function UD(n,e,t){e=e||[],t=t||0;for(var r=t;n>=Mne;)e[t++]=n&255|D5,n/=128;for(;n&Fne;)e[t++]=n&255|D5,n>>>=7;return e[t]=n|0,UD.bytes=t-r+1,e}var jne=SE,zne=128,$5=127;function SE(n,r){var t=0,r=r||0,i=0,s=r,o,c=n.length;do{if(s>=c)throw SE.bytes=0,new RangeError("Could not decode varint");o=n[s++],t+=i<28?(o&$5)<<i:(o&$5)*Math.pow(2,i),i+=7}while(o>=zne);return SE.bytes=s-r,t}var Hne=Math.pow(2,7),Vne=Math.pow(2,14),qne=Math.pow(2,21),Kne=Math.pow(2,28),Gne=Math.pow(2,35),Wne=Math.pow(2,42),Qne=Math.pow(2,49),Zne=Math.pow(2,56),Jne=Math.pow(2,63),Yne=function(n){return n<Hne?1:n<Vne?2:n<qne?3:n<Kne?4:n<Gne?5:n<Wne?6:n<Qne?7:n<Zne?8:n<Jne?9:10},Xne={encode:Lne,decode:jne,encodingLength:Yne},LD=Xne;const T5=(n,e,t=0)=>(LD.encode(n,e,t),e),k5=n=>LD.encodingLength(n),IE=(n,e)=>{const t=e.byteLength,r=k5(n),i=r+k5(t),s=new Uint8Array(i+t);return T5(n,s,0),T5(t,s,r),s.set(e,i),new ere(n,t,e,s)};let ere=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};const FD=({name:n,code:e,encode:t})=>new tre(n,e,t);class tre{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?IE(this.code,t):t.then(r=>IE(this.code,r))}else throw Error("Unknown type, must be binary type")}}const MD=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),nre=FD({name:"sha2-256",code:18,encode:MD("SHA-256")}),rre=FD({name:"sha2-512",code:19,encode:MD("SHA-512")});var ire=Object.freeze({__proto__:null,sha256:nre,sha512:rre});const jD=0,sre="identity",zD=TD,ore=n=>IE(jD,zD(n)),are={code:jD,name:sre,encode:zD,digest:ore};var cre=Object.freeze({__proto__:null,identity:are});new TextEncoder,new TextDecoder;const R5={...tne,...rne,...sne,...ane,...une,...vne,...Ane,...One,...Nne,...Une};({...ire,...cre});function HD(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function lre(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?HD(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function VD(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const U5=VD("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),$2=VD("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=lre(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),ure={utf8:U5,"utf-8":U5,hex:R5.base16,latin1:$2,ascii:$2,binary:$2,...R5};function fre(n,e="utf8"){const t=ure[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?HD(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}var hre=Object.defineProperty,dre=(n,e,t)=>e in n?hre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hs=(n,e,t)=>dre(n,typeof e!="symbol"?e+"":e,t);class pre{constructor(e,t){this.core=e,this.logger=t,hs(this,"keychain",new Map),hs(this,"name",dte),hs(this,"version",pte),hs(this,"initialized",!1),hs(this,"storagePrefix",Ts),hs(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),hs(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),hs(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),hs(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=we("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),hs(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Wr(t,this.name)}get context(){return Pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,cE(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?lE(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=we("NOT_INITIALIZED",this.name);throw new Error(e)}}}var gre=Object.defineProperty,yre=(n,e,t)=>e in n?gre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jt=(n,e,t)=>yre(n,typeof e!="symbol"?e+"":e,t);class mre{constructor(e,t,r){this.core=e,this.logger=t,Jt(this,"name",fte),Jt(this,"keychain"),Jt(this,"randomSessionIdentifier",vE()),Jt(this,"initialized",!1),Jt(this,"clientId"),Jt(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Jt(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Jt(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const i=await this.getClientSeed(),s=gI(i),o=FC(s.publicKey);return this.clientId=o,o}),Jt(this,"generateKeyPair",()=>{this.isInitialized();const i=mX();return this.setPrivateKey(i.publicKey,i.privateKey)}),Jt(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=gI(s),c=this.randomSessionIdentifier;return await xH(c,i,hte,o)}),Jt(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const c=this.getPrivateKey(i),u=wX(c,s);return this.setSymKey(u,o)}),Jt(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||Dy(i);return await this.keychain.set(o,i),o}),Jt(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Jt(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Jt(this,"encode",async(i,s,o)=>{this.isInitialized();const c=bD(o),u=R3(s);if(c5(c))return EX(u,o==null?void 0:o.encoding);if(a5(c)){const g=c.senderPublicKey,m=c.receiverPublicKey;i=await this.generateSharedKey(g,m)}const f=this.getSymKey(i),{type:d,senderPublicKey:p}=c;return bX({type:d,symKey:f,message:u,senderPublicKey:p,encoding:o==null?void 0:o.encoding})}),Jt(this,"decode",async(i,s,o)=>{this.isInitialized();const c=AX(s,o);if(c5(c)){const u=xX(s,o==null?void 0:o.encoding);return am(u)}if(a5(c)){const u=c.receiverPublicKey,f=c.senderPublicKey;i=await this.generateSharedKey(u,f)}try{const u=this.getSymKey(i),f=vX({symKey:u,encoded:s,encoding:o==null?void 0:o.encoding});return am(f)}catch(u){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}}),Jt(this,"getPayloadType",(i,s=wr)=>{const o=kp({encoded:i,encoding:s});return eu(o.type)}),Jt(this,"getPayloadSenderPublicKey",(i,s=wr)=>{const o=kp({encoded:i,encoding:s});return o.senderPublicKey?Or(o.senderPublicKey,er):void 0}),this.core=e,this.logger=Wr(t,this.name),this.keychain=r||new pre(this.core,this.logger)}get context(){return Pr(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(_5)}catch{e=vE(),await this.keychain.set(_5,e)}return fre(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=we("NOT_INITIALIZED",this.name);throw new Error(e)}}}var wre=Object.defineProperty,bre=Object.defineProperties,vre=Object.getOwnPropertyDescriptors,L5=Object.getOwnPropertySymbols,Ere=Object.prototype.hasOwnProperty,xre=Object.prototype.propertyIsEnumerable,OE=(n,e,t)=>e in n?wre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Are=(n,e)=>{for(var t in e||(e={}))Ere.call(e,t)&&OE(n,t,e[t]);if(L5)for(var t of L5(e))xre.call(e,t)&&OE(n,t,e[t]);return n},Sre=(n,e)=>bre(n,vre(e)),$r=(n,e,t)=>OE(n,typeof e!="symbol"?e+"":e,t);class Ire extends LG{constructor(e,t){super(e,t),this.logger=e,this.core=t,$r(this,"messages",new Map),$r(this,"messagesWithoutClientAck",new Map),$r(this,"name",gte),$r(this,"version",yte),$r(this,"initialized",!1),$r(this,"storagePrefix",Ts),$r(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),$r(this,"set",async(r,i,s)=>{this.isInitialized();const o=gi(i);let c=this.messages.get(r);if(typeof c>"u"&&(c={}),typeof c[o]<"u")return o;if(c[o]=i,this.messages.set(r,c),s===$y.inbound){const u=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Sre(Are({},u),{[o]:i}))}return await this.persist(),o}),$r(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),$r(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),$r(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=gi(i);return typeof s[o]<"u"}),$r(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=gi(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),$r(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Wr(e,this.name),this.core=t}get context(){return Pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,cE(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,cE(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?lE(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?lE(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=we("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Ore=Object.defineProperty,Bre=Object.defineProperties,Pre=Object.getOwnPropertyDescriptors,F5=Object.getOwnPropertySymbols,Cre=Object.prototype.hasOwnProperty,_re=Object.prototype.propertyIsEnumerable,BE=(n,e,t)=>e in n?Ore(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qu=(n,e)=>{for(var t in e||(e={}))Cre.call(e,t)&&BE(n,t,e[t]);if(F5)for(var t of F5(e))_re.call(e,t)&&BE(n,t,e[t]);return n},M5=(n,e)=>Bre(n,Pre(e)),ii=(n,e,t)=>BE(n,typeof e!="symbol"?e+"":e,t);class Nre extends FG{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,ii(this,"events",new Gr.EventEmitter),ii(this,"name",wte),ii(this,"queue",new Map),ii(this,"publishTimeout",me.toMiliseconds(me.ONE_MINUTE)),ii(this,"initialPublishTimeout",me.toMiliseconds(me.ONE_SECOND*15)),ii(this,"needsTransportRestart",!1),ii(this,"publish",async(r,i,s)=>{var o,c,u,f,d;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const p=(s==null?void 0:s.ttl)||mte,g=(s==null?void 0:s.prompt)||!1,m=(s==null?void 0:s.tag)||0,v=(s==null?void 0:s.id)||hc().toString(),b=of(mm().protocol),A={id:v,method:(s==null?void 0:s.publishMethod)||b.publish,params:qu({topic:r,message:i,ttl:p,prompt:g,tag:m,attestation:s==null?void 0:s.attestation},s==null?void 0:s.tvf)},N=`Failed to publish payload, please try again. id:${v} tag:${m}`;try{qt((o=A.params)==null?void 0:o.prompt)&&((c=A.params)==null||delete c.prompt),qt((u=A.params)==null?void 0:u.tag)&&((f=A.params)==null||delete f.tag);const R=new Promise(async O=>{const T=({id:j})=>{var H;((H=A.id)==null?void 0:H.toString())===j.toString()&&(this.removeRequestFromQueue(j),this.relayer.events.removeListener(_t.publish,T),O())};this.relayer.events.on(_t.publish,T);const k=Ds(new Promise((j,H)=>{this.rpcPublish(A,s).then(j).catch(V=>{this.logger.warn(V,V==null?void 0:V.message),H(V)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${v} tag:${m}`);try{await k,this.events.removeListener(_t.publish,T)}catch(j){this.queue.set(v,{request:A,opts:s,attempt:1}),this.logger.warn(j,j==null?void 0:j.message)}});this.logger.trace({type:"method",method:"publish",params:{id:v,topic:r,message:i,opts:s}}),await Ds(R,this.publishTimeout,N)}catch(R){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(R),(d=s==null?void 0:s.internal)!=null&&d.throwOnFailedPublish)throw R}finally{this.queue.delete(v)}}),ii(this,"publishCustom",async r=>{var i,s,o,c,u;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:f,opts:d={}}=r,{attestation:p,tvf:g,publishMethod:m,prompt:v,tag:b,ttl:A=me.FIVE_MINUTES}=d,N=d.id||hc().toString(),R=of(mm().protocol),O=m||R.publish,T={id:N,method:O,params:qu(M5(qu({},f),{ttl:A,prompt:v,tag:b,attestation:p}),g)},k=`Failed to publish custom payload, please try again. id:${N} tag:${b}`;try{qt((i=T.params)==null?void 0:i.prompt)&&((s=T.params)==null||delete s.prompt),qt((o=T.params)==null?void 0:o.tag)&&((c=T.params)==null||delete c.tag);const j=new Promise(async H=>{const V=({id:K})=>{var Q;((Q=T.id)==null?void 0:Q.toString())===K.toString()&&(this.removeRequestFromQueue(K),this.relayer.events.removeListener(_t.publish,V),H())};this.relayer.events.on(_t.publish,V);const M=Ds(new Promise((K,Q)=>{this.rpcPublish(T,d).then(K).catch(z=>{this.logger.warn(z,z==null?void 0:z.message),Q(z)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${O} id:${N} tag:${b}`);try{await M,this.events.removeListener(_t.publish,V)}catch(K){this.queue.set(N,{request:T,opts:d,attempt:1}),this.logger.warn(K,K==null?void 0:K.message)}});this.logger.trace({type:"method",method:"publish",params:{id:N,payload:f,opts:d}}),await Ds(j,this.publishTimeout,k)}catch(j){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(j),(u=d==null?void 0:d.internal)!=null&&u.throwOnFailedPublish)throw j}finally{this.queue.delete(N)}}),ii(this,"on",(r,i)=>{this.events.on(r,i)}),ii(this,"once",(r,i)=>{this.events.once(r,i)}),ii(this,"off",(r,i)=>{this.events.off(r,i)}),ii(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=e,this.logger=Wr(t,this.name),this.registerEventListeners()}get context(){return Pr(this.logger)}async rpcPublish(e,t){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(_t.publish,qu(qu({},e),t)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{var r;const i=e.attempt+1;this.queue.set(t,M5(qu({},e),{attempt:i})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${i}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(su.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(_t.connection_stalled);return}this.checkQueue()}),this.relayer.on(_t.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Dre=Object.defineProperty,$re=(n,e,t)=>e in n?Dre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ku=(n,e,t)=>$re(n,typeof e!="symbol"?e+"":e,t);class Tre{constructor(){Ku(this,"map",new Map),Ku(this,"set",(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),Ku(this,"get",e=>this.map.get(e)||[]),Ku(this,"exists",(e,t)=>this.get(e).includes(t)),Ku(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const i=r.filter(s=>s!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),Ku(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var kre=Object.defineProperty,Rre=Object.defineProperties,Ure=Object.getOwnPropertyDescriptors,j5=Object.getOwnPropertySymbols,Lre=Object.prototype.hasOwnProperty,Fre=Object.prototype.propertyIsEnumerable,PE=(n,e,t)=>e in n?kre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Fd=(n,e)=>{for(var t in e||(e={}))Lre.call(e,t)&&PE(n,t,e[t]);if(j5)for(var t of j5(e))Fre.call(e,t)&&PE(n,t,e[t]);return n},T2=(n,e)=>Rre(n,Ure(e)),lt=(n,e,t)=>PE(n,typeof e!="symbol"?e+"":e,t);class Mre extends zG{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,lt(this,"subscriptions",new Map),lt(this,"topicMap",new Tre),lt(this,"events",new Gr.EventEmitter),lt(this,"name",Ite),lt(this,"version",Ote),lt(this,"pending",new Map),lt(this,"cached",[]),lt(this,"initialized",!1),lt(this,"storagePrefix",Ts),lt(this,"subscribeTimeout",me.toMiliseconds(me.ONE_MINUTE)),lt(this,"initialSubscribeTimeout",me.toMiliseconds(me.ONE_SECOND*15)),lt(this,"clientId"),lt(this,"batchSubscribeTopicsLimit",500),lt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),lt(this,"subscribe",async(r,i)=>{var s;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const o=mm(i),c={topic:r,relay:o,transportType:i==null?void 0:i.transportType};(s=i==null?void 0:i.internal)!=null&&s.skipSubscribe||this.pending.set(r,c);const u=await this.rpcSubscribe(r,o,i);return typeof u=="string"&&(this.onSubscribe(u,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),u}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),lt(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),lt(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),lt(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),lt(this,"on",(r,i)=>{this.events.on(r,i)}),lt(this,"once",(r,i)=>{this.events.once(r,i)}),lt(this,"off",(r,i)=>{this.events.off(r,i)}),lt(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),lt(this,"start",async()=>{await this.onConnect()}),lt(this,"stop",async()=>{await this.onDisconnect()}),lt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),lt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),lt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(su.pulse,async()=>{await this.checkPending()}),this.events.on(Rr.created,async r=>{const i=Rr.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(Rr.deleted,async r=>{const i=Rr.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=e,this.logger=Wr(t,this.name),this.clientId=""}get context(){return Pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const i=mm(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);const s=It("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,t,r){var i,s;const o=await this.getSubscriptionId(e);if((i=r==null?void 0:r.internal)!=null&&i.skipSubscribe)return o;(!r||(r==null?void 0:r.transportType)===mt.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const c={method:of(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});const u=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{if((r==null?void 0:r.transportType)===mt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(c).catch(p=>this.logger.warn(p))},me.toMiliseconds(me.ONE_SECOND)),o;const f=new Promise(async p=>{const g=m=>{m.topic===e&&(this.events.removeListener(Rr.created,g),p(m.id))};this.events.on(Rr.created,g);try{const m=await Ds(new Promise((v,b)=>{this.relayer.request(c).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),b(A)}).then(v)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Rr.created,g),p(m)}catch{}}),d=await Ds(f,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!d&&u)throw new Error(`Subscribing to ${e} failed, please try again`);return d?o:null}catch(f){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(_t.connection_stalled),u)throw f}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,r={method:of(t.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Ds(new Promise(i=>{this.relayer.request(r).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(_t.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,r={method:of(t.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await Ds(new Promise((s,o)=>{this.relayer.request(r).catch(c=>{this.logger.warn(c),o(c)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(_t.connection_stalled)}return i}rpcUnsubscribe(e,t,r){const i={method:of(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,T2(Fd({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Fd({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Fd({},t)),this.topicMap.set(t.topic,e),this.events.emit(Rr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:r}=we("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Rr.deleted,T2(Fd({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Rr.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Rr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(t=>{var r;return t.topic===((r=this.subscriptions.get(t.id))==null?void 0:r.topic)})){const{message:t}=we("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>T2(Fd({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await FZ(me.toMiliseconds(me.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=we("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return gi(e+await this.getClientId())}}var jre=Object.defineProperty,z5=Object.getOwnPropertySymbols,zre=Object.prototype.hasOwnProperty,Hre=Object.prototype.propertyIsEnumerable,CE=(n,e,t)=>e in n?jre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H5=(n,e)=>{for(var t in e||(e={}))zre.call(e,t)&&CE(n,t,e[t]);if(z5)for(var t of z5(e))Hre.call(e,t)&&CE(n,t,e[t]);return n},et=(n,e,t)=>CE(n,typeof e!="symbol"?e+"":e,t);class Vre extends MG{constructor(e){var t;super(e),et(this,"protocol","wc"),et(this,"version",2),et(this,"core"),et(this,"logger"),et(this,"events",new Gr.EventEmitter),et(this,"provider"),et(this,"messages"),et(this,"subscriber"),et(this,"publisher"),et(this,"name",vte),et(this,"transportExplicitlyClosed",!1),et(this,"initialized",!1),et(this,"connectionAttemptInProgress",!1),et(this,"relayUrl"),et(this,"projectId"),et(this,"packageName"),et(this,"bundleId"),et(this,"hasExperiencedNetworkDisruption",!1),et(this,"pingTimeout"),et(this,"heartBeatTimeout",me.toMiliseconds(me.THIRTY_SECONDS+me.FIVE_SECONDS)),et(this,"reconnectTimeout"),et(this,"connectPromise"),et(this,"reconnectInProgress",!1),et(this,"requestsInFlight",[]),et(this,"connectTimeout",me.toMiliseconds(me.ONE_SECOND*15)),et(this,"request",async r=>{var i,s;this.logger.debug("Publishing Request Payload");const o=r.id||hc().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - publishing...");const c=`${o}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(c);const u=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(f=>f!==c),u}catch(c){throw this.logger.debug(`Failed to Publish Request: ${o}`),c}}),et(this,"resetPingTimeout",()=>{fm()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,i,s,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null?void 0:s.terminate)==null||o.call(s)}catch(c){this.logger.warn(c,c==null?void 0:c.message)}},this.heartBeatTimeout))}),et(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),et(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(_t.connect)}),et(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),et(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(_t.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),et(this,"registerProviderListeners",()=>{this.provider.on(ri.payload,this.onPayloadHandler),this.provider.on(ri.connect,this.onConnectHandler),this.provider.on(ri.disconnect,this.onDisconnectHandler),this.provider.on(ri.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=AD({logger:(t=e.logger)!=null?t:bte,name:this.name}),this.messages=new Ire(this.logger,e.core),this.subscriber=new Mre(this,this.logger),this.publisher=new Nre(this,this.logger),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||DD,AZ()?this.packageName=C6():SZ()&&(this.bundleId=C6()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return Pr(this.logger)}get connected(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:mt.relay},$y.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,t){var r,i,s;this.isInitialized(),(!(t!=null&&t.transportType)||(t==null?void 0:t.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=t==null?void 0:t.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=t==null?void 0:t.internal)==null?void 0:i.throwOnFailedPublish;let c=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",u;const f=d=>{d.topic===e&&(this.subscriber.off(Rr.created,f),u())};return await Promise.all([new Promise(d=>{u=d,this.subscriber.on(Rr.created,f)}),new Promise(async(d,p)=>{c=await this.subscriber.subscribe(e,H5({internal:{throwOnFailedPublish:o}},t)).catch(g=>{o&&p(g)})||c,d()})]),c}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Ds(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await E5())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const r of t)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const i=Ht(me.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(_t.message,e),await this.recordMessageEvent(e,$y.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(ri.disconnect,s),await Ds(new Promise((o,c)=>{this.provider.connect().then(o).catch(c)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(ri.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,c)=>{const u=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ri.disconnect,u),await this.subscriber.start().then(o).catch(c).finally(()=>{this.provider.off(ri.disconnect,u)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(r=>setTimeout(r,me.toMiliseconds(t*1))),t++}}startPingTimeout(){var e,t,r,i,s;if(fm())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new sx(new ate(CZ({sdkVersion:AE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:i}=e;await this.messages.set(r,i,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ix(e)){if(!e.method.endsWith(Ete))return;const t=e.params,{topic:r,message:i,publishedAt:s,attestation:o}=t.data,c={topic:r,message:i,publishedAt:s,transportType:mt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(H5({type:"event",event:t.id},c)),this.events.emit(t.id,c),await this.acknowledgePayload(e),await this.onMessageEvent(c)}else hw(e)&&this.events.emit(_t.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,$y.inbound),this.events.emit(_t.message,e))}async acknowledgePayload(e){const t=Up(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(ri.payload,this.onPayloadHandler),this.provider.off(ri.connect,this.onConnectHandler),this.provider.off(ri.disconnect,this.onDisconnectHandler),this.provider.off(ri.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await E5();Aee(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(su.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Oee())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(t){this.logger.warn(t,t==null?void 0:t.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(_t.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},me.toMiliseconds(xte)))))}isInitialized(){if(!this.initialized){const{message:e}=we("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function qre(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)}function V5(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function q5(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Kre="[object RegExp]",Gre="[object String]",Wre="[object Number]",Qre="[object Boolean]",K5="[object Arguments]",Zre="[object Symbol]",Jre="[object Date]",Yre="[object Map]",Xre="[object Set]",eie="[object Array]",tie="[object Function]",nie="[object ArrayBuffer]",k2="[object Object]",rie="[object Error]",iie="[object DataView]",sie="[object Uint8Array]",oie="[object Uint8ClampedArray]",aie="[object Uint16Array]",cie="[object Uint32Array]",lie="[object BigUint64Array]",uie="[object Int8Array]",fie="[object Int16Array]",hie="[object Int32Array]",die="[object BigInt64Array]",pie="[object Float32Array]",gie="[object Float64Array]";function yie(){}function G5(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(n)==="[object Object]":!1}function mie(n,e,t){return np(n,e,void 0,void 0,void 0,void 0,t)}function np(n,e,t,r,i,s,o){const c=o(n,e,t,r,i,s);if(c!==void 0)return c;if(typeof n==typeof e)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return n===e;case"number":return n===e||Object.is(n,e);case"function":return n===e;case"object":return dp(n,e,s,o)}return dp(n,e,s,o)}function dp(n,e,t,r){if(Object.is(n,e))return!0;let i=q5(n),s=q5(e);if(i===K5&&(i=k2),s===K5&&(s=k2),i!==s)return!1;switch(i){case Gre:return n.toString()===e.toString();case Wre:{const u=n.valueOf(),f=e.valueOf();return qre(u,f)}case Qre:case Jre:case Zre:return Object.is(n.valueOf(),e.valueOf());case Kre:return n.source===e.source&&n.flags===e.flags;case tie:return n===e}t=t??new Map;const o=t.get(n),c=t.get(e);if(o!=null&&c!=null)return o===e;t.set(n,e),t.set(e,n);try{switch(i){case Yre:{if(n.size!==e.size)return!1;for(const[u,f]of n.entries())if(!e.has(u)||!np(f,e.get(u),u,n,e,t,r))return!1;return!0}case Xre:{if(n.size!==e.size)return!1;const u=Array.from(n.values()),f=Array.from(e.values());for(let d=0;d<u.length;d++){const p=u[d],g=f.findIndex(m=>np(p,m,void 0,n,e,t,r));if(g===-1)return!1;f.splice(g,1)}return!0}case eie:case sie:case oie:case aie:case cie:case lie:case uie:case fie:case hie:case die:case pie:case gie:{if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(e)||n.length!==e.length)return!1;for(let u=0;u<n.length;u++)if(!np(n[u],e[u],u,n,e,t,r))return!1;return!0}case nie:return n.byteLength!==e.byteLength?!1:dp(new Uint8Array(n),new Uint8Array(e),t,r);case iie:return n.byteLength!==e.byteLength||n.byteOffset!==e.byteOffset?!1:dp(new Uint8Array(n),new Uint8Array(e),t,r);case rie:return n.name===e.name&&n.message===e.message;case k2:{if(!(dp(n.constructor,e.constructor,t,r)||G5(n)&&G5(e)))return!1;const u=[...Object.keys(n),...V5(n)],f=[...Object.keys(e),...V5(e)];if(u.length!==f.length)return!1;for(let d=0;d<u.length;d++){const p=u[d],g=n[p];if(!Object.hasOwn(e,p))return!1;const m=e[p];if(!np(g,m,p,n,e,t,r))return!1}return!0}default:return!1}}finally{t.delete(n),t.delete(e)}}function wie(n,e){return mie(n,e,yie)}var bie=Object.defineProperty,W5=Object.getOwnPropertySymbols,vie=Object.prototype.hasOwnProperty,Eie=Object.prototype.propertyIsEnumerable,_E=(n,e,t)=>e in n?bie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Q5=(n,e)=>{for(var t in e||(e={}))vie.call(e,t)&&_E(n,t,e[t]);if(W5)for(var t of W5(e))Eie.call(e,t)&&_E(n,t,e[t]);return n},lr=(n,e,t)=>_E(n,typeof e!="symbol"?e+"":e,t);class cu extends jG{constructor(e,t,r,i=Ts,s=void 0){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,lr(this,"map",new Map),lr(this,"version",Ate),lr(this,"cached",[]),lr(this,"initialized",!1),lr(this,"getKey"),lr(this,"storagePrefix",Ts),lr(this,"recentlyDeleted",[]),lr(this,"recentlyDeletedLimit",200),lr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!qt(o)?this.map.set(this.getKey(o),o):eee(o)?this.map.set(o.id,o):tee(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),lr(this,"set",async(o,c)=>{this.isInitialized(),this.map.has(o)?await this.update(o,c):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:c}),this.map.set(o,c),await this.persist())}),lr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),lr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(c=>Object.keys(o).every(u=>wie(c[u],o[u]))):this.values)),lr(this,"update",async(o,c)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:c});const u=Q5(Q5({},this.getData(o)),c);this.map.set(o,u),await this.persist()}),lr(this,"delete",async(o,c)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:c}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Wr(t,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:i}=we("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:r}=we("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=we("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=we("NOT_INITIALIZED",this.name);throw new Error(e)}}}var xie=Object.defineProperty,Aie=(n,e,t)=>e in n?xie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qe=(n,e,t)=>Aie(n,typeof e!="symbol"?e+"":e,t);let Sie=class{constructor(e,t){this.core=e,this.logger=t,qe(this,"name",Bte),qe(this,"version",Pte),qe(this,"events",new p3),qe(this,"pairings"),qe(this,"initialized",!1),qe(this,"storagePrefix",Ts),qe(this,"ignoredPayloadTypes",[Do]),qe(this,"registeredMethods",[]),qe(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),qe(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),qe(this,"create",async r=>{this.isInitialized();const i=vE(),s=await this.core.crypto.setSymKey(i),o=Ht(me.FIVE_MINUTES),c={protocol:ND},u={topic:s,expiry:o,relay:c,active:!1,methods:r==null?void 0:r.methods},f=h5({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:c,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(il.create,u),this.core.expirer.set(s,o),await this.pairings.set(s,u),await this.core.relayer.subscribe(s,{transportType:r==null?void 0:r.transportType,internal:r==null?void 0:r.internal}),{topic:s,uri:f}}),qe(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[gs.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:c,expiryTimestamp:u,methods:f}=f5(r.uri);i.props.properties.topic=s,i.addTrace(gs.pairing_uri_validation_success),i.addTrace(gs.pairing_uri_not_expired);let d;if(this.pairings.keys.includes(s)){if(d=this.pairings.get(s),i.addTrace(gs.existing_pairing),d.active)throw i.setError(to.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(gs.pairing_not_expired)}const p=u||Ht(me.FIVE_MINUTES),g={topic:s,relay:c,expiry:p,active:!1,methods:f};this.core.expirer.set(s,p),await this.pairings.set(s,g),i.addTrace(gs.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(il.create,g),i.addTrace(gs.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(gs.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(to.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:c})}catch(m){throw i.setError(to.subscribe_pairing_topic_failure),m}return i.addTrace(gs.subscribe_pairing_topic_success),g}),qe(this,"activate",async({topic:r})=>{this.isInitialized();const i=Ht(me.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),qe(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:c,reject:u}=Xc();this.events.once(nt("pairing_ping",s),({error:f})=>{f?u(f):c()}),await o()}}),qe(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),qe(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),qe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),qe(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",It("USER_DISCONNECTED")),await this.deletePairing(i))}),qe(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:c}=r,u=this.core.crypto.keychain.get(i);return h5({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:u,relay:s,expiryTimestamp:o,methods:c})}),qe(this,"sendRequest",async(r,i,s)=>{const o=Vi(i,s),c=await this.core.crypto.encode(r,o),u=Ud[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,c,u),o.id}),qe(this,"sendResult",async(r,i,s)=>{const o=Up(r,s),c=await this.core.crypto.encode(i,o),u=(await this.core.history.get(i,r)).request.method,f=Ud[u].res;await this.core.relayer.publish(i,c,f),await this.core.history.resolve(o)}),qe(this,"sendError",async(r,i,s)=>{const o=fw(r,s),c=await this.core.crypto.encode(i,o),u=(await this.core.history.get(i,r)).request.method,f=Ud[u]?Ud[u].res:Ud.unregistered_method.res;await this.core.relayer.publish(i,c,f),await this.core.history.resolve(o)}),qe(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,It("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),qe(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>Ua(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),qe(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),qe(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),qe(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(il.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),qe(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{ms(i)?this.events.emit(nt("pairing_ping",s),{}):yi(i)&&this.events.emit(nt("pairing_ping",s),{error:i.error})},500)}),qe(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(il.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),qe(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const c=It("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,c),this.logger.error(c)}catch(c){await this.sendError(s,r,c),this.logger.error(c)}}),qe(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(It("WC_METHOD_UNSUPPORTED",r))}),qe(this,"isValidPair",(r,i)=>{var s;if(!fr(r)){const{message:c}=we("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(to.malformed_pairing_uri),new Error(c)}if(!XX(r.uri)){const{message:c}=we("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(to.malformed_pairing_uri),new Error(c)}const o=f5(r==null?void 0:r.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:c}=we("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(to.malformed_pairing_uri),new Error(c)}if(!(o!=null&&o.symKey)){const{message:c}=we("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(to.malformed_pairing_uri),new Error(c)}if(o!=null&&o.expiryTimestamp&&me.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(to.pairing_expired);const{message:c}=we("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(c)}}),qe(this,"isValidPing",async r=>{if(!fr(r)){const{message:s}=we("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),qe(this,"isValidDisconnect",async r=>{if(!fr(r)){const{message:s}=we("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),qe(this,"isValidPairingTopic",async r=>{if(!Rt(r,!1)){const{message:i}=we("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=we("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(Ua(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=we("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=e,this.logger=Wr(t,this.name),this.pairings=new cu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Pr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=we("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(_t.message,async e=>{const{topic:t,message:r,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==mt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(t,r);ix(s)?(this.core.history.set(t,s),await this.onRelayEventRequest({topic:t,payload:s})):hw(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id)),await this.core.relayer.messages.ack(t,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(oi.expired,async e=>{const{topic:t}=xN(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(il.expire,{topic:t}))})}};var Iie=Object.defineProperty,Oie=(n,e,t)=>e in n?Iie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fn=(n,e,t)=>Oie(n,typeof e!="symbol"?e+"":e,t);let Bie=class extends UG{constructor(e,t){super(e,t),this.core=e,this.logger=t,fn(this,"records",new Map),fn(this,"events",new Gr.EventEmitter),fn(this,"name",Cte),fn(this,"version",_te),fn(this,"cached",[]),fn(this,"initialized",!1),fn(this,"storagePrefix",Ts),fn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),fn(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:Ht(me.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Pi.created,o)}),fn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=yi(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(Pi.updated,i))}),fn(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),fn(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Pi.deleted,s)}}),this.persist()}),fn(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),fn(this,"on",(r,i)=>{this.events.on(r,i)}),fn(this,"once",(r,i)=>{this.events.once(r,i)}),fn(this,"off",(r,i)=>{this.events.off(r,i)}),fn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Wr(t,this.name)}get context(){return Pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:Vi(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:r}=we("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Pi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=we("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Pi.created,e=>{const t=Pi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Pi.updated,e=>{const t=Pi.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Pi.deleted,e=>{const t=Pi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(su.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{me.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Pi.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=we("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Pie=Object.defineProperty,Cie=(n,e,t)=>e in n?Pie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Nn=(n,e,t)=>Cie(n,typeof e!="symbol"?e+"":e,t);let _ie=class extends HG{constructor(e,t){super(e,t),this.core=e,this.logger=t,Nn(this,"expirations",new Map),Nn(this,"events",new Gr.EventEmitter),Nn(this,"name",Nte),Nn(this,"version",Dte),Nn(this,"cached",[]),Nn(this,"initialized",!1),Nn(this,"storagePrefix",Ts),Nn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Nn(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Nn(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(oi.created,{target:s,expiration:o})}),Nn(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),Nn(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(oi.deleted,{target:i,expiration:s})}}),Nn(this,"on",(r,i)=>{this.events.on(r,i)}),Nn(this,"once",(r,i)=>{this.events.once(r,i)}),Nn(this,"off",(r,i)=>{this.events.off(r,i)}),Nn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Wr(t,this.name)}get context(){return Pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return _Z(e);if(typeof e=="number")return NZ(e);const{message:t}=we("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(oi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=we("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:r}=we("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return t}checkExpiry(e,t){const{expiry:r}=t;me.toMiliseconds(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(oi.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(su.pulse,()=>this.checkExpirations()),this.events.on(oi.created,e=>{const t=oi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(oi.expired,e=>{const t=oi.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(oi.deleted,e=>{const t=oi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=we("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Nie=Object.defineProperty,Die=(n,e,t)=>e in n?Nie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kt=(n,e,t)=>Die(n,typeof e!="symbol"?e+"":e,t);let $ie=class extends VG{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,kt(this,"name",$te),kt(this,"abortController"),kt(this,"isDevEnv"),kt(this,"verifyUrlV3",kte),kt(this,"storagePrefix",Ts),kt(this,"version",_D),kt(this,"publicKey"),kt(this,"fetchPromise"),kt(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&me.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),kt(this,"register",async i=>{if(!Ch()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:c}=i,u=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${c}`;try{const f=Ro.getDocument(),d=this.startAbortTimer(me.ONE_SECOND*5),p=await new Promise((g,m)=>{const v=()=>{window.removeEventListener("message",A),f.body.removeChild(b),m("attestation aborted")};this.abortController.signal.addEventListener("abort",v);const b=f.createElement("iframe");b.src=u,b.style.display="none",b.addEventListener("error",v,{signal:this.abortController.signal});const A=N=>{if(N.data&&typeof N.data=="string")try{const R=JSON.parse(N.data);if(R.type==="verify_attestation"){if(qv(R.attestation).payload.id!==o)return;clearInterval(d),f.body.removeChild(b),this.abortController.signal.removeEventListener("abort",v),window.removeEventListener("message",A),g(R.attestation===null?"":R.attestation)}}catch(R){this.logger.warn(R)}};f.body.appendChild(b),window.addEventListener("message",A,{signal:this.abortController.signal})});return this.logger.debug(p,"jwt attestation"),p}catch(f){this.logger.warn(f)}return""}),kt(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:c}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(qv(s).payload.id!==c)return;const f=await this.isValidJwtAttestation(s);if(f){if(!f.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return f}}if(!o)return;const u=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,u)}),kt(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(me.ONE_SECOND*5),c=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),c.status===200?await c.json():void 0}),kt(this,"getVerifyUrl",i=>{let s=i||hp;return Rte.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${hp}`),s=hp),s}),kt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(me.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),kt(this,"persistPublicKey",async i=>{this.logger.debug(i,"persisting public key to local storage"),await this.store.setItem(this.storeKey,i),this.publicKey=i}),kt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),kt(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(c){this.logger.error(c),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(c){this.logger.error(c),this.logger.warn("error validating attestation")}}),kt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),kt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),kt(this,"validateAttestation",(i,s)=>{const o=IX(i,s.publicKey),c={hasExpired:me.toMiliseconds(o.exp)<Date.now(),payload:o};if(c.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:c.payload.origin,isScam:c.payload.isScam,isVerified:c.payload.isVerified}}),this.logger=Wr(t,this.name),this.abortController=new AbortController,this.isDevEnv=q3(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Pr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),me.toMiliseconds(e))}};var Tie=Object.defineProperty,kie=(n,e,t)=>e in n?Tie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Z5=(n,e,t)=>kie(n,typeof e!="symbol"?e+"":e,t);let Rie=class extends qG{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,Z5(this,"context",Ute),Z5(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:c=!1}=r,u=`${Lte}/${this.projectId}/clients`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:c})})}),this.logger=Wr(t,this.context)}};var Uie=Object.defineProperty,J5=Object.getOwnPropertySymbols,Lie=Object.prototype.hasOwnProperty,Fie=Object.prototype.propertyIsEnumerable,NE=(n,e,t)=>e in n?Uie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Md=(n,e)=>{for(var t in e||(e={}))Lie.call(e,t)&&NE(n,t,e[t]);if(J5)for(var t of J5(e))Fie.call(e,t)&&NE(n,t,e[t]);return n},Yt=(n,e,t)=>NE(n,typeof e!="symbol"?e+"":e,t);let Mie=class extends KG{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,Yt(this,"context",Mte),Yt(this,"storagePrefix",Ts),Yt(this,"storageVersion",Fte),Yt(this,"events",new Map),Yt(this,"shouldPersist",!1),Yt(this,"init",async()=>{if(!q3())try{const i={eventId:N6(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:vN(this.core.relayer.protocol,this.core.relayer.version,AE)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),Yt(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:c,trace:u}}=i,f=N6(),d=this.core.projectId||"",p=Date.now(),g=Md({eventId:f,timestamp:p,props:{event:s,type:o,properties:{topic:c,trace:u}},bundleId:d,domain:this.getAppDomain()},this.setMethods(f));return this.telemetryEnabled&&(this.events.set(f,g),this.shouldPersist=!0),g}),Yt(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const c=Array.from(this.events.values()).find(u=>u.props.properties.topic===o);if(c)return Md(Md({},c),this.setMethods(c.eventId))}),Yt(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),Yt(this,"setEventListeners",()=>{this.core.heartbeat.on(su.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{me.fromMiliseconds(Date.now())-me.fromMiliseconds(i.timestamp)>jte&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),Yt(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),Yt(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),Yt(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),Yt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Yt(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Md(Md({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),Yt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Yt(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${zte}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${AE}${s}`,{method:"POST",body:JSON.stringify(i)})}),Yt(this,"getAppDomain",()=>bN().url),this.logger=Wr(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var jie=Object.defineProperty,Y5=Object.getOwnPropertySymbols,zie=Object.prototype.hasOwnProperty,Hie=Object.prototype.propertyIsEnumerable,DE=(n,e,t)=>e in n?jie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,X5=(n,e)=>{for(var t in e||(e={}))zie.call(e,t)&&DE(n,t,e[t]);if(Y5)for(var t of Y5(e))Hie.call(e,t)&&DE(n,t,e[t]);return n},dt=(n,e,t)=>DE(n,typeof e!="symbol"?e+"":e,t);let Vie=class qD extends $G{constructor(e){var t;super(e),dt(this,"protocol",CD),dt(this,"version",_D),dt(this,"name",xE),dt(this,"relayUrl"),dt(this,"projectId"),dt(this,"customStoragePrefix"),dt(this,"events",new Gr.EventEmitter),dt(this,"logger"),dt(this,"heartbeat"),dt(this,"relayer"),dt(this,"crypto"),dt(this,"storage"),dt(this,"history"),dt(this,"expirer"),dt(this,"pairing"),dt(this,"verify"),dt(this,"echoClient"),dt(this,"linkModeSupportedApps"),dt(this,"eventClient"),dt(this,"initialized",!1),dt(this,"logChunkController"),dt(this,"on",(c,u)=>this.events.on(c,u)),dt(this,"once",(c,u)=>this.events.once(c,u)),dt(this,"off",(c,u)=>this.events.off(c,u)),dt(this,"removeListener",(c,u)=>this.events.removeListener(c,u)),dt(this,"dispatchEnvelope",({topic:c,message:u,sessionExists:f})=>{if(!c||!u)return;const d={topic:c,message:u,publishedAt:Date.now(),transportType:mt.link_mode};this.relayer.onLinkMessageEvent(d,{sessionExists:f})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(c){console.warn("Failed to copy global core",c)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||DD,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=KV({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:lte.logger,name:xE}),{logger:s,chunkLoggerController:o}=O3({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var c,u;(c=this.logChunkController)!=null&&c.downloadLogsBlobInBrowser&&((u=this.logChunkController)==null||u.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Wr(s,this.name),this.heartbeat=new WK,this.crypto=new mre(this,this.logger,e==null?void 0:e.keychain),this.history=new Bie(this,this.logger),this.expirer=new _ie(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new _G(X5(X5({},ute),e==null?void 0:e.storageOptions)),this.relayer=new Vre({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Sie(this,this.logger),this.verify=new $ie(this,this.logger,this.storage),this.echoClient=new Rie(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Mie(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new qD(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem(Ste,r),t}get context(){return Pr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(N5,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(N5)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(t){console.warn("Failed to get global WalletConnect core",t);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((t=e.opts)==null?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&cte.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const qie=Vie,KD="wc",GD=2,WD="client",ox=`${KD}@${GD}:${WD}:`,R2={name:WD,logger:"error"},eO="WALLETCONNECT_DEEPLINK_CHOICE",Kie="proposal",tO="Proposal expired",Gie="session",Gu=me.SEVEN_DAYS,Wie="engine",hn={wc_sessionPropose:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1104},res:{ttl:me.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1106},res:{ttl:me.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1112},res:{ttl:me.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1114},res:{ttl:me.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:me.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:me.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1119}}},U2={min:me.FIVE_MINUTES,max:me.SEVEN_DAYS},ds={idle:"IDLE",active:"ACTIVE"},Qie={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},Zie="request",Jie=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Yie="wc",Xie="auth",ese="authKeys",tse="pairingTopics",nse="requests",pw=`${Yie}@${1.5}:${Xie}:`,Ty=`${pw}:PUB_KEY`;var rse=Object.defineProperty,ise=Object.defineProperties,sse=Object.getOwnPropertyDescriptors,nO=Object.getOwnPropertySymbols,ose=Object.prototype.hasOwnProperty,ase=Object.prototype.propertyIsEnumerable,$E=(n,e,t)=>e in n?rse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,st=(n,e)=>{for(var t in e||(e={}))ose.call(e,t)&&$E(n,t,e[t]);if(nO)for(var t of nO(e))ase.call(e,t)&&$E(n,t,e[t]);return n},Dn=(n,e)=>ise(n,sse(e)),de=(n,e,t)=>$E(n,typeof e!="symbol"?e+"":e,t);class cse extends ZG{constructor(e){super(e),de(this,"name",Wie),de(this,"events",new p3),de(this,"initialized",!1),de(this,"requestQueue",{state:ds.idle,queue:[]}),de(this,"sessionRequestQueue",{state:ds.idle,queue:[]}),de(this,"emittedSessionRequests",new MZ({limit:500})),de(this,"requestQueueDelay",me.ONE_SECOND),de(this,"expectedPairingMethodMap",new Map),de(this,"recentlyDeletedMap",new Map),de(this,"recentlyDeletedLimit",200),de(this,"relayMessageCache",[]),de(this,"pendingSessions",new Map),de(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(hn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},me.toMiliseconds(this.requestQueueDelay)))}),de(this,"connect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Dn(st({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=WX(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:c,scopedProperties:u,relays:f}=r;let d=i,p,g=!1;try{if(d){const j=this.client.core.pairing.pairings.get(d);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),g=j.active}}catch(j){throw this.client.logger.error(`connect() -> pairing.get(${d}) failed`),j}if(!d||!g){const{topic:j,uri:H}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});d=j,p=H}if(!d){const{message:j}=we("NO_MATCHING_KEY",`connect() pairing topic: ${d}`);throw new Error(j)}const m=await this.client.core.crypto.generateKeyPair(),v=hn.wc_sessionPropose.req.ttl||me.FIVE_MINUTES,b=Ht(v),A=Dn(st(st({requiredNamespaces:s,optionalNamespaces:o,relays:f??[{protocol:ND}],proposer:{publicKey:m,metadata:this.client.metadata},expiryTimestamp:b,pairingTopic:d},c&&{sessionProperties:c}),u&&{scopedProperties:u}),{id:ys()}),N=nt("session_connect",A.id),{reject:R,resolve:O,done:T}=Xc(v,tO),k=({id:j})=>{j===A.id&&(this.client.events.off("proposal_expire",k),this.pendingSessions.delete(A.id),this.events.emit(N,{error:{message:tO,code:0}}))};return this.client.events.on("proposal_expire",k),this.events.once(N,({error:j,session:H})=>{this.client.events.off("proposal_expire",k),j?R(j):H&&O(H)}),await this.sendProposeSession({proposal:A,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:A.id}}}),await this.setProposal(A.id,A),{uri:p,approval:T}}),de(this,"pair",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(r){throw this.client.logger.error("pair() failed"),r}}),de(this,"approve",async t=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=t==null?void 0:t.id)==null?void 0:r.toString(),trace:[Ci.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(M){throw o.setError(Qc.no_internet_connection),M}try{await this.isValidProposalId(t==null?void 0:t.id)}catch(M){throw this.client.logger.error(`approve() -> proposal.get(${t==null?void 0:t.id}) failed`),o.setError(Qc.proposal_not_found),M}try{await this.isValidApprove(t)}catch(M){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Qc.session_approve_namespace_validation_failure),M}const{id:c,relayProtocol:u,namespaces:f,sessionProperties:d,scopedProperties:p,sessionConfig:g}=t,m=this.client.proposal.get(c);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:v,proposer:b,requiredNamespaces:A,optionalNamespaces:N}=m;let R=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:v});R||(R=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Ci.session_approve_started,properties:{topic:v,trace:[Ci.session_approve_started,Ci.session_namespaces_validation_success]}}));const O=await this.client.core.crypto.generateKeyPair(),T=b.publicKey,k=await this.client.core.crypto.generateSharedKey(O,T),j=st(st(st({relay:{protocol:u??"irn"},namespaces:f,controller:{publicKey:O,metadata:this.client.metadata},expiry:Ht(Gu)},d&&{sessionProperties:d}),p&&{scopedProperties:p}),g&&{sessionConfig:g}),H=mt.relay;R.addTrace(Ci.subscribing_session_topic);try{await this.client.core.relayer.subscribe(k,{transportType:H,internal:{skipSubscribe:!0}})}catch(M){throw R.setError(Qc.subscribe_session_topic_failure),M}R.addTrace(Ci.subscribe_session_topic_success);const V=Dn(st({},j),{topic:k,requiredNamespaces:A,optionalNamespaces:N,pairingTopic:v,acknowledged:!1,self:j.controller,peer:{publicKey:b.publicKey,metadata:b.metadata},controller:O,transportType:mt.relay});await this.client.session.set(k,V),R.addTrace(Ci.store_session);try{await this.sendApproveSession({sessionTopic:k,proposal:m,pairingProposalResponse:{relay:{protocol:u??"irn"},responderPublicKey:O},sessionSettleRequest:j,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:c}}}),R.addTrace(Ci.session_approve_publish_success)}catch(M){throw this.client.logger.error(M),this.client.session.delete(k,It("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(k),M}return this.client.core.eventClient.deleteEvent({eventId:R.eventId}),await this.client.core.pairing.updateMetadata({topic:v,metadata:b.metadata}),await this.deleteProposal(c),await this.client.core.pairing.activate({topic:v}),await this.setExpiry(k,Ht(Gu)),{topic:k,acknowledged:()=>Promise.resolve(this.client.session.get(k))}}),de(this,"reject",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=t;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&await this.sendError({id:r,topic:s,error:i,rpcOpts:hn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),de(this,"update",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(p){throw this.client.logger.error("update() -> isValidUpdate() failed"),p}const{topic:r,namespaces:i}=t,{done:s,resolve:o,reject:c}=Xc(),u=ys(),f=hc().toString(),d=this.client.session.get(r).namespaces;return this.events.once(nt("session_update",u),({error:p})=>{p?c(p):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:f}).catch(p=>{this.client.logger.error(p),this.client.session.update(r,{namespaces:d}),c(p)}),{acknowledged:s}}),de(this,"extend",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(u){throw this.client.logger.error("extend() -> isValidExtend() failed"),u}const{topic:r}=t,i=ys(),{done:s,resolve:o,reject:c}=Xc();return this.events.once(nt("session_extend",i),({error:u})=>{u?c(u):o()}),await this.setExpiry(r,Ht(Gu)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(u=>{c(u)}),{acknowledged:s}}),de(this,"request",async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(A){throw this.client.logger.error("request() -> isValidRequest() failed"),A}const{chainId:r,request:i,topic:s,expiry:o=hn.wc_sessionRequest.req.ttl}=t,c=this.client.session.get(s);(c==null?void 0:c.transportType)===mt.relay&&await this.confirmOnlineStateOrThrow();const u=ys(),f=hc().toString(),{done:d,resolve:p,reject:g}=Xc(o,"Request expired. Please try again.");this.events.once(nt("session_request",u),({error:A,result:N})=>{A?g(A):p(N)});const m="wc_sessionRequest",v=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);if(v)return await this.sendRequest({clientRpcId:u,relayRpcId:f,topic:s,method:m,params:{request:Dn(st({},i),{expiryTimestamp:Ht(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:v}).catch(A=>g(A)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:u}),await d();const b={request:Dn(st({},i),{expiryTimestamp:Ht(o)}),chainId:r};return await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:u,relayRpcId:f,topic:s,method:m,params:b,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(u,b)}).catch(N=>g(N)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:u}),A()}),new Promise(async A=>{var N;if(!((N=c.sessionConfig)!=null&&N.disableDeepLink)){const R=await kZ(this.client.core.storage,eO);await DZ({id:u,topic:s,wcDeepLink:R})}A()}),d()]).then(A=>A[2])}),de(this,"respond",async t=>{var r,i;this.isInitialized();const s=this.client.core.eventClient.createEvent({properties:{topic:(t==null?void 0:t.topic)||((i=(r=t==null?void 0:t.response)==null?void 0:r.id)==null?void 0:i.toString()),trace:[Ci.session_request_response_started]}});try{await this.isValidRespond(t)}catch(p){throw s.addTrace(p==null?void 0:p.message),s.setError(Qc.session_request_response_validation_failure),p}s.addTrace(Ci.session_request_response_validation_success);const{topic:o,response:c}=t,{id:u}=c,f=this.client.session.get(o);f.transportType===mt.relay&&await this.confirmOnlineStateOrThrow();const d=this.getAppLinkIfEnabled(f.peer.metadata,f.transportType);try{s.addTrace(Ci.session_request_response_publish_started),ms(c)?await this.sendResult({id:u,topic:o,result:c.result,throwOnFailedPublish:!0,appLink:d}):yi(c)&&await this.sendError({id:u,topic:o,error:c.error,appLink:d}),this.cleanupAfterResponse(t)}catch(p){throw s.addTrace(p==null?void 0:p.message),s.setError(Qc.session_request_response_publish_failure),p}}),de(this,"ping",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=t;if(this.client.session.keys.includes(r)){const i=ys(),s=hc().toString(),{done:o,resolve:c,reject:u}=Xc();this.events.once(nt("session_ping",i),({error:f})=>{f?u(f):c()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),de(this,"emit",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:r,event:i,chainId:s}=t,o=hc().toString(),c=ys();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:c})}),de(this,"disconnect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:r}=t;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:It("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=we("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),de(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(r=>JX(r,t)))),de(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),de(this,"authenticate",async(t,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(t);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?mt.link_mode:mt.relay;o===mt.relay&&await this.confirmOnlineStateOrThrow();const{chains:c,statement:u="",uri:f,domain:d,nonce:p,type:g,exp:m,nbf:v,methods:b=[],expiry:A}=t,N=[...t.resources||[]],{topic:R,uri:O}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:R,uri:O}});const T=await this.client.core.crypto.generateKeyPair(),k=Dy(T);if(await Promise.all([this.client.auth.authKeys.set(Ty,{responseTopic:k,publicKey:T}),this.client.auth.pairingTopics.set(k,{topic:k,pairingTopic:R})]),await this.client.core.relayer.subscribe(k,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${R}`),b.length>0){const{namespace:I}=_y(c[0]);let _=JJ(I,"request",b);Ny(N)&&(_=XJ(_,N.pop())),N.push(_)}const j=A&&A>hn.wc_sessionAuthenticate.req.ttl?A:hn.wc_sessionAuthenticate.req.ttl,H={authPayload:{type:g??"caip122",chains:c,statement:u,aud:f,domain:d,version:"1",nonce:p,iat:new Date().toISOString(),exp:m,nbf:v,resources:N},requester:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Ht(j)},V={eip155:{chains:c,methods:[...new Set(["personal_sign",...b])],events:["chainChanged","accountsChanged"]}},M={requiredNamespaces:{},optionalNamespaces:V,relays:[{protocol:"irn"}],pairingTopic:R,proposer:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Ht(hn.wc_sessionPropose.req.ttl),id:ys()},{done:K,resolve:Q,reject:z}=Xc(j,"Request expired"),P=ys(),D=nt("session_connect",M.id),w=nt("session_request",P),x=async({error:I,session:_})=>{this.events.off(w,B),I?z(I):_&&Q({session:_})},B=async I=>{var _,$,U;if(await this.deletePendingAuthRequest(P,{message:"fulfilled",code:0}),I.error){const ie=It("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return I.error.code===ie.code?void 0:(this.events.off(D,x),z(I.error.message))}await this.deleteProposal(M.id),this.events.off(D,x);const{cacaos:Y,responder:q}=I.result,Z=[],te=[];for(const ie of Y){await z6({cacao:ie,projectId:this.client.core.projectId})||(this.client.logger.error(ie,"Signature verification failed"),z(It("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ue}=ie,Ne=Ny(ue.resources),Re=[uE(ue.iss)],Te=dm(ue.iss);if(Ne){const Ve=H6(Ne),Gt=V6(Ne);Z.push(...Ve),Re.push(...Gt)}for(const Ve of Re)te.push(`${Ve}:${Te}`)}const re=await this.client.core.crypto.generateSharedKey(T,q.publicKey);let le;Z.length>0&&(le={topic:re,acknowledged:!0,self:{publicKey:T,metadata:this.client.metadata},peer:q,controller:q.publicKey,expiry:Ht(Gu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:R,namespaces:y5([...new Set(Z)],[...new Set(te)]),transportType:o},await this.client.core.relayer.subscribe(re,{transportType:o}),await this.client.session.set(re,le),R&&await this.client.core.pairing.updateMetadata({topic:R,metadata:q.metadata}),le=this.client.session.get(re)),(_=this.client.metadata.redirect)!=null&&_.linkMode&&($=q.metadata.redirect)!=null&&$.linkMode&&(U=q.metadata.redirect)!=null&&U.universal&&r&&(this.client.core.addLinkModeSupportedApp(q.metadata.redirect.universal),this.client.session.update(re,{transportType:mt.link_mode})),Q({auths:Y,session:le})};this.events.once(D,x),this.events.once(w,B);let C;try{if(s){const I=Vi("wc_sessionAuthenticate",H,P);this.client.core.history.set(R,I);const _=await this.client.core.crypto.encode("",I,{type:yg,encoding:Ga});C=sy(r,R,_)}else await Promise.all([this.sendRequest({topic:R,method:"wc_sessionAuthenticate",params:H,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:R,method:"wc_sessionPropose",params:M,expiry:hn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:M.id})])}catch(I){throw this.events.off(D,x),this.events.off(w,B),I}return await this.setProposal(M.id,M),await this.setAuthRequest(P,{request:Dn(st({},H),{verifyContext:{}}),pairingTopic:R,transportType:o}),{uri:C??O,response:K}}),de(this,"approveSessionAuthenticate",async t=>{const{id:r,auths:i}=t,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Zc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(A){throw s.setError(Ld.no_internet_connection),A}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(Ld.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const c=o.transportType||mt.relay;c===mt.relay&&await this.confirmOnlineStateOrThrow();const u=o.requester.publicKey,f=await this.client.core.crypto.generateKeyPair(),d=Dy(u),p={type:Do,receiverPublicKey:u,senderPublicKey:f},g=[],m=[];for(const A of i){if(!await z6({cacao:A,projectId:this.client.core.projectId})){s.setError(Ld.invalid_cacao);const k=It("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:d,error:k,encodeOpts:p}),new Error(k.message)}s.addTrace(Zc.cacaos_verified);const{p:N}=A,R=Ny(N.resources),O=[uE(N.iss)],T=dm(N.iss);if(R){const k=H6(R),j=V6(R);g.push(...k),O.push(...j)}for(const k of O)m.push(`${k}:${T}`)}const v=await this.client.core.crypto.generateSharedKey(f,u);s.addTrace(Zc.create_authenticated_session_topic);let b;if((g==null?void 0:g.length)>0){b={topic:v,acknowledged:!0,self:{publicKey:f,metadata:this.client.metadata},peer:{publicKey:u,metadata:o.requester.metadata},controller:u,expiry:Ht(Gu),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:y5([...new Set(g)],[...new Set(m)]),transportType:c},s.addTrace(Zc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:c})}catch(A){throw s.setError(Ld.subscribe_authenticated_session_topic_failure),A}s.addTrace(Zc.subscribe_authenticated_session_topic_success),await this.client.session.set(v,b),s.addTrace(Zc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Zc.publishing_authenticated_session_approve);try{await this.sendResult({topic:d,id:r,result:{cacaos:i,responder:{publicKey:f,metadata:this.client.metadata}},encodeOpts:p,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,c)})}catch(A){throw s.setError(Ld.authenticated_session_approve_publish_failure),A}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:b}}),de(this,"rejectSessionAuthenticate",async t=>{this.isInitialized();const{id:r,reason:i}=t,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===mt.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),u=Dy(o),f={type:Do,receiverPublicKey:o,senderPublicKey:c};await this.sendError({id:r,topic:u,error:i,encodeOpts:f,rpcOpts:hn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),de(this,"formatAuthMessage",t=>{this.isInitialized();const{request:r,iss:i}=t;return LN(r,i)}),de(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)}),de(this,"cleanupDuplicatePairings",async t=>{if(t.pairingTopic)try{const r=this.client.core.pairing.pairings.get(t.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,c;return((o=s.peerMetadata)==null?void 0:o.url)&&((c=s.peerMetadata)==null?void 0:c.url)===t.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),de(this,"deleteSession",async t=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:c=0}=t,{self:u}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,It("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(eO).catch(f=>this.client.logger.warn(f)),this.getPendingSessionRequests().forEach(f=>{f.topic===i&&this.deletePendingSessionRequest(f.id,It("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ds.idle),o&&this.client.events.emit("session_delete",{id:c,topic:i})}),de(this,"deleteProposal",async(t,r)=>{if(r)try{const i=this.client.proposal.get(t),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(Qc.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,It("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),de(this,"deletePendingSessionRequest",async(t,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==t),i&&(this.sessionRequestQueue.state=ds.idle,this.client.events.emit("session_request_expire",{id:t}))}),de(this,"deletePendingAuthRequest",async(t,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)])}),de(this,"setExpiry",async(t,r)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,r),await this.client.session.update(t,{expiry:r}))}),de(this,"setProposal",async(t,r)=>{this.client.core.expirer.set(t,Ht(hn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,r)}),de(this,"setAuthRequest",async(t,r)=>{const{request:i,pairingTopic:s,transportType:o=mt.relay}=r;this.client.core.expirer.set(t,i.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:t,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),de(this,"setPendingSessionRequest",async t=>{const{id:r,topic:i,params:s,verifyContext:o}=t,c=s.request.expiryTimestamp||Ht(hn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,c),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),de(this,"sendRequest",async t=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:c,clientRpcId:u,throwOnFailedPublish:f,appLink:d,tvf:p,publishOpts:g={}}=t,m=Vi(i,s,u);let v;const b=!!d;try{const R=b?Ga:wr;v=await this.client.core.crypto.encode(r,m,{encoding:R})}catch(R){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),R}let A;if(Jie.includes(i)){const R=gi(JSON.stringify(m)),O=gi(v);A=await this.client.core.verify.register({id:O,decryptedId:R})}const N=st(st({},hn[i].req),g);if(N.attestation=A,o&&(N.ttl=o),c&&(N.id=c),this.client.core.history.set(r,m),b){const R=sy(d,r,v);await global.Linking.openURL(R,this.client.name)}else N.tvf=Dn(st({},p),{correlationId:m.id}),f?(N.internal=Dn(st({},N.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,v,N)):this.client.core.relayer.publish(r,v,N).catch(R=>this.client.logger.error(R));return m.id}),de(this,"sendProposeSession",async t=>{const{proposal:r,publishOpts:i}=t,s=Vi("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,s);const o=await this.client.core.crypto.encode(r.pairingTopic,s,{encoding:wr}),c=gi(JSON.stringify(s)),u=gi(o),f=await this.client.core.verify.register({id:u,decryptedId:c});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:Dn(st({},i),{publishMethod:"wc_proposeSession",attestation:f})})}),de(this,"sendApproveSession",async t=>{const{sessionTopic:r,pairingProposalResponse:i,proposal:s,sessionSettleRequest:o,publishOpts:c}=t,u=Up(s.id,i),f=await this.client.core.crypto.encode(s.pairingTopic,u,{encoding:wr}),d=Vi("wc_sessionSettle",o,c==null?void 0:c.id),p=await this.client.core.crypto.encode(r,d,{encoding:wr});this.client.core.history.set(r,d),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:s.pairingTopic,sessionProposalResponse:f,sessionSettlementRequest:p},opts:Dn(st({},c),{publishMethod:"wc_approveSession"})})}),de(this,"sendResult",async t=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:c,appLink:u}=t,f=Up(r,s);let d;const p=u&&typeof(global==null?void 0:global.Linking)<"u";try{const v=p?Ga:wr;d=await this.client.core.crypto.encode(i,f,Dn(st({},c||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),v}let g,m;try{g=await this.client.core.history.get(i,r);const v=g.request;try{m=this.getTVFParams(r,v.params,s)}catch(b){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${b==null?void 0:b.message}`)}}catch(v){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),v}if(p){const v=sy(u,i,d);await global.Linking.openURL(v,this.client.name)}else{const v=g.request.method,b=hn[v].res;b.tvf=Dn(st({},m),{correlationId:r}),o?(b.internal=Dn(st({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,d,b)):this.client.core.relayer.publish(i,d,b).catch(A=>this.client.logger.error(A))}await this.client.core.history.resolve(f)}),de(this,"sendError",async t=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:c,appLink:u}=t,f=fw(r,s);let d;const p=u&&typeof(global==null?void 0:global.Linking)<"u";try{const m=p?Ga:wr;d=await this.client.core.crypto.encode(i,f,Dn(st({},o||{}),{encoding:m}))}catch(m){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),m}let g;try{g=await this.client.core.history.get(i,r)}catch(m){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),m}if(p){const m=sy(u,i,d);await global.Linking.openURL(m,this.client.name)}else{const m=g.request.method,v=c||hn[m].res;this.client.core.relayer.publish(i,d,v)}await this.client.core.history.resolve(f)}),de(this,"cleanup",async()=>{const t=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;Ua(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&t.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Ua(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...t.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),de(this,"onProviderMessageEvent",async t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):await this.onRelayMessage(t)}),de(this,"onRelayEventRequest",async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()}),de(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ds.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ds.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ds.idle}),de(this,"processRequest",async t=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:c}=t,u=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:u}))switch(u){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:c});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:c,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:c,transportType:o});default:return this.client.logger.info(`Unsupported request method ${u}`)}}),de(this,"onRelayEventResponse",async t=>{const{topic:r,payload:i,transportType:s}=t,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),de(this,"onRelayEventUnknownPayload",t=>{const{topic:r}=t,{message:i}=we("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),de(this,"shouldIgnorePairingRequest",t=>{const{topic:r,requestMethod:i}=t,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),de(this,"onSessionProposeRequest",async t=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=t,{params:c,id:u}=i;try{const f=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),f==null||f.setError(to.proposal_listener_not_found)),this.isValidConnect(st({},i.params));const d=c.expiryTimestamp||Ht(hn.wc_sessionPropose.req.ttl),p=st({id:u,pairingTopic:r,expiryTimestamp:d,attestation:s,encryptedId:o},c);await this.setProposal(u,p);const g=await this.getVerifyContext({attestationId:s,hash:gi(JSON.stringify(i)),encryptedId:o,metadata:p.proposer.metadata});f==null||f.addTrace(gs.emit_session_proposal),this.client.events.emit("session_proposal",{id:u,params:p,verifyContext:g})}catch(f){await this.sendError({id:u,topic:r,error:f,rpcOpts:hn.wc_sessionPropose.autoReject}),this.client.logger.error(f)}}),de(this,"onSessionProposeResponse",async(t,r,i)=>{const{id:s}=r;if(ms(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const c=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const u=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const f=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:f});const d=await this.client.core.crypto.generateSharedKey(u,f);this.pendingSessions.set(s,{sessionTopic:d,pairingTopic:t,proposalId:s,publicKey:u});const p=await this.client.core.relayer.subscribe(d,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:p}),await this.client.core.pairing.activate({topic:t})}else if(yi(r)){await this.deleteProposal(s);const o=nt("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),de(this,"onSessionSettleRequest",async(t,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:c,expiry:u,namespaces:f,sessionProperties:d,scopedProperties:p,sessionConfig:g}=r.params,m=[...this.pendingSessions.values()].find(A=>A.sessionTopic===t);if(!m)return this.client.logger.error(`Pending session not found for topic ${t}`);const v=this.client.proposal.get(m.proposalId),b=Dn(st(st(st({topic:t,relay:o,expiry:u,namespaces:f,acknowledged:!0,pairingTopic:m.pairingTopic,requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces,controller:c.publicKey,self:{publicKey:m.publicKey,metadata:this.client.metadata},peer:{publicKey:c.publicKey,metadata:c.metadata}},d&&{sessionProperties:d}),p&&{scopedProperties:p}),g&&{sessionConfig:g}),{transportType:mt.relay});await this.client.session.set(b.topic,b),await this.setExpiry(b.topic,b.expiry),await this.client.core.pairing.updateMetadata({topic:m.pairingTopic,metadata:b.peer.metadata}),this.client.events.emit("session_connect",{session:b}),this.events.emit(nt("session_connect",m.proposalId),{session:b}),this.pendingSessions.delete(m.proposalId),this.deleteProposal(m.proposalId,!1),this.cleanupDuplicatePairings(b),await this.sendResult({id:r.id,topic:t,result:!0})}catch(o){await this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}}),de(this,"onSessionSettleResponse",async(t,r)=>{const{id:i}=r;ms(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(nt("session_approve",i),{})):yi(r)&&(await this.client.session.delete(t,It("USER_DISCONNECTED")),this.events.emit(nt("session_approve",i),{error:r.error}))}),de(this,"onSessionUpdateRequest",async(t,r)=>{const{params:i,id:s}=r;try{const o=`${t}_session_update`,c=Rd.get(o);if(c&&this.isRequestOutOfSync(c,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:t,error:It("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(st({topic:t},i));try{Rd.set(o,s),await this.client.session.update(t,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:t,result:!0})}catch(u){throw Rd.delete(o),u}this.client.events.emit("session_update",{id:s,topic:t,params:i})}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),de(this,"isRequestOutOfSync",(t,r)=>r.toString().slice(0,-3)<t.toString().slice(0,-3)),de(this,"onSessionUpdateResponse",(t,r)=>{const{id:i}=r,s=nt("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);ms(r)?this.events.emit(nt("session_update",i),{}):yi(r)&&this.events.emit(nt("session_update",i),{error:r.error})}),de(this,"onSessionExtendRequest",async(t,r)=>{const{id:i}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Ht(Gu)),await this.sendResult({id:i,topic:t,result:!0}),this.client.events.emit("session_extend",{id:i,topic:t})}catch(s){await this.sendError({id:i,topic:t,error:s}),this.client.logger.error(s)}}),de(this,"onSessionExtendResponse",(t,r)=>{const{id:i}=r,s=nt("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);ms(r)?this.events.emit(nt("session_extend",i),{}):yi(r)&&this.events.emit(nt("session_extend",i),{error:r.error})}),de(this,"onSessionPingRequest",async(t,r)=>{const{id:i}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:t})}catch(s){await this.sendError({id:i,topic:t,error:s}),this.client.logger.error(s)}}),de(this,"onSessionPingResponse",(t,r)=>{const{id:i}=r,s=nt("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);ms(r)?this.events.emit(nt("session_ping",i),{}):yi(r)&&this.events.emit(nt("session_ping",i),{error:r.error})},500)}),de(this,"onSessionDeleteRequest",async(t,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(_t.publish,async()=>{s(await this.deleteSession({topic:t,id:i}))})}),this.sendResult({id:i,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:It("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),de(this,"onSessionRequest",async t=>{var r,i,s;const{topic:o,payload:c,attestation:u,encryptedId:f,transportType:d}=t,{id:p,params:g}=c;try{await this.isValidRequest(st({topic:o},g));const m=this.client.session.get(o),v=await this.getVerifyContext({attestationId:u,hash:gi(JSON.stringify(Vi("wc_sessionRequest",g,p))),encryptedId:f,metadata:m.peer.metadata,transportType:d}),b={id:p,topic:o,params:g,verifyContext:v};await this.setPendingSessionRequest(b),d===mt.link_mode&&(r=m.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=m.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(b):(this.addSessionRequestToSessionRequestQueue(b),this.processSessionRequestQueue())}catch(m){await this.sendError({id:p,topic:o,error:m}),this.client.logger.error(m)}}),de(this,"onSessionRequestResponse",(t,r)=>{const{id:i}=r,s=nt("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);ms(r)?this.events.emit(nt("session_request",i),{result:r.result}):yi(r)&&this.events.emit(nt("session_request",i),{error:r.error})}),de(this,"onSessionEventRequest",async(t,r)=>{const{id:i,params:s}=r;try{const o=`${t}_session_event_${s.event.name}`,c=Rd.get(o);if(c&&this.isRequestOutOfSync(c,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(st({topic:t},s)),this.client.events.emit("session_event",{id:i,topic:t,params:s}),Rd.set(o,i)}catch(o){await this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}}),de(this,"onSessionAuthenticateResponse",(t,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:r}),ms(r)?this.events.emit(nt("session_request",i),{result:r.result}):yi(r)&&this.events.emit(nt("session_request",i),{error:r.error})}),de(this,"onSessionAuthenticateRequest",async t=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:c,transportType:u}=t;try{const{requester:f,authPayload:d,expiryTimestamp:p}=s.params,g=await this.getVerifyContext({attestationId:o,hash:gi(JSON.stringify(s)),encryptedId:c,metadata:f.metadata,transportType:u}),m={requester:f,pairingTopic:i,id:s.id,authPayload:d,verifyContext:g,expiryTimestamp:p};await this.setAuthRequest(s.id,{request:m,pairingTopic:i,transportType:u}),u===mt.link_mode&&(r=f.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(f.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:g})}catch(f){this.client.logger.error(f);const d=s.params.requester.publicKey,p=await this.client.core.crypto.generateKeyPair(),g=this.getAppLinkIfEnabled(s.params.requester.metadata,u),m={type:Do,receiverPublicKey:d,senderPublicKey:p};await this.sendError({id:s.id,topic:i,error:f,encodeOpts:m,rpcOpts:hn.wc_sessionAuthenticate.autoReject,appLink:g})}}),de(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),de(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ds.idle,this.processSessionRequestQueue()},me.toMiliseconds(this.requestQueueDelay))}),de(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===t&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,c=nt("session_request",o);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners`);this.events.emit(nt("session_request",s.request.id),{error:r})})}),de(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ds.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(t)}catch(r){this.client.logger.error(r)}}),de(this,"emitSessionRequest",t=>{if(this.emittedSessionRequests.has(t.id)){this.client.logger.warn({id:t.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${t.id}`);return}this.sessionRequestQueue.state=ds.active,this.emittedSessionRequests.add(t.id),this.client.events.emit("session_request",t)}),de(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===t.topic);r&&this.onSessionProposeRequest({topic:t.topic,payload:Vi("wc_sessionPropose",Dn(st({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),de(this,"isValidConnect",async t=>{if(!fr(t)){const{message:f}=we("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(f)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:c,relays:u}=t;if(qt(r)||await this.isValidPairingTopic(r),!lee(u)){const{message:f}=we("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(f)}if(i&&!qt(i)&&Rp(i)!==0){const f="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(f):this.client.logger.warn(f),this.validateNamespaces(i,"requiredNamespaces")}if(s&&!qt(s)&&Rp(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),o&&!qt(o)&&this.validateSessionProps(o,"sessionProperties"),c&&!qt(c)){this.validateSessionProps(c,"scopedProperties");const f=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(c).every(d=>f.includes(d.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(c)}, required/optional namespaces: ${JSON.stringify(f)}`)}}),de(this,"validateNamespaces",(t,r)=>{const i=cee(t,"connect()",r);if(i)throw new Error(i.message)}),de(this,"isValidApprove",async t=>{if(!fr(t))throw new Error(we("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:c}=t;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const u=this.client.proposal.get(r),f=_2(i,"approve()");if(f)throw new Error(f.message);const d=b5(u.requiredNamespaces,i,"approve()");if(d)throw new Error(d.message);if(!Rt(s,!0)){const{message:p}=we("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(p)}if(o&&!qt(o)&&this.validateSessionProps(o,"sessionProperties"),c&&!qt(c)){this.validateSessionProps(c,"scopedProperties");const p=new Set(Object.keys(i));if(!Object.keys(c).every(g=>p.has(g.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(c)}, approved namespaces: ${Array.from(p).join(", ")}`)}}),de(this,"isValidReject",async t=>{if(!fr(t)){const{message:s}=we("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(s)}const{id:r,reason:i}=t;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!fee(i)){const{message:s}=we("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),de(this,"isValidSessionSettleRequest",t=>{if(!fr(t)){const{message:f}=we("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(f)}const{relay:r,controller:i,namespaces:s,expiry:o}=t;if(!xD(r)){const{message:f}=we("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(f)}const c=nee(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);const u=_2(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(Ua(o)){const{message:f}=we("EXPIRED","onSessionSettleRequest()");throw new Error(f)}}),de(this,"isValidUpdate",async t=>{if(!fr(t)){const{message:u}=we("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(u)}const{topic:r,namespaces:i}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=_2(i,"update()");if(o)throw new Error(o.message);const c=b5(s.requiredNamespaces,i,"update()");if(c)throw new Error(c.message)}),de(this,"isValidExtend",async t=>{if(!fr(t)){const{message:i}=we("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(i)}const{topic:r}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),de(this,"isValidRequest",async t=>{if(!fr(t)){const{message:u}=we("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(u)}const{topic:r,request:i,chainId:s,expiry:o}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:c}=this.client.session.get(r);if(!w5(c,s)){const{message:u}=we("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!hee(i)){const{message:u}=we("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!gee(c,s,i.method)){const{message:u}=we("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(o&&!bee(o,U2)){const{message:u}=we("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${U2.min} and ${U2.max}`);throw new Error(u)}}),de(this,"isValidRespond",async t=>{var r;if(!fr(t)){const{message:c}=we("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:i,response:s}=t;try{await this.isValidSessionTopic(i)}catch(c){throw(r=t==null?void 0:t.response)!=null&&r.id&&this.cleanupAfterResponse(t),c}if(!dee(s)){const{message:c}=we("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(c)}const o=this.client.pendingRequest.get(s.id);if(o.topic!==i){const{message:c}=we("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${s.id}, expected topic: ${o.topic}, received topic: ${i}`);throw new Error(c)}}),de(this,"isValidPing",async t=>{if(!fr(t)){const{message:i}=we("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),de(this,"isValidEmit",async t=>{if(!fr(t)){const{message:c}=we("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(c)}const{topic:r,event:i,chainId:s}=t;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!w5(o,s)){const{message:c}=we("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(c)}if(!pee(i)){const{message:c}=we("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(c)}if(!yee(o,s,i.name)){const{message:c}=we("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(c)}}),de(this,"isValidDisconnect",async t=>{if(!fr(t)){const{message:i}=we("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),de(this,"isValidAuthenticate",t=>{const{chains:r,uri:i,domain:s,nonce:o}=t;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Rt(i,!1))throw new Error("uri is required parameter");if(!Rt(s,!1))throw new Error("domain is required parameter");if(!Rt(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(u=>_y(u).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:c}=_y(r[0]);if(c!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),de(this,"getVerifyContext",async t=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:c}=t,u={verified:{verifyUrl:o.verifyUrl||hp,validation:"UNKNOWN",origin:o.url||""}};try{if(c===mt.link_mode){const d=this.getAppLinkIfEnabled(o,c);return u.verified.validation=d&&new URL(d).origin===new URL(o.url).origin?"VALID":"INVALID",u}const f=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});f&&(u.verified.origin=f.origin,u.verified.isScam=f.isScam,u.verified.validation=f.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(f){this.client.logger.warn(f)}return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`),u}),de(this,"validateSessionProps",(t,r)=>{Object.values(t).forEach((i,s)=>{if(i==null){const{message:o}=we("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(t)[s]}`);throw new Error(o)}})}),de(this,"getPendingAuthRequest",t=>{const r=this.client.auth.requests.get(t);return typeof r=="object"?r:void 0}),de(this,"addToRecentlyDeleted",(t,r)=>{if(this.recentlyDeletedMap.set(t,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),de(this,"checkRecentlyDeleted",t=>{const r=this.recentlyDeletedMap.get(t);if(r){const{message:i}=we("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${t}`);throw new Error(i)}}),de(this,"isLinkModeEnabled",(t,r)=>{var i,s,o,c,u,f,d,p,g;return!t||r!==mt.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((c=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:c.universal)!==void 0&&((f=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:f.universal)!==""&&((d=t==null?void 0:t.redirect)==null?void 0:d.universal)!==void 0&&((p=t==null?void 0:t.redirect)==null?void 0:p.universal)!==""&&((g=t==null?void 0:t.redirect)==null?void 0:g.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),de(this,"getAppLinkIfEnabled",(t,r)=>{var i;return this.isLinkModeEnabled(t,r)?(i=t==null?void 0:t.redirect)==null?void 0:i.universal:void 0}),de(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const r=_6(t,"topic")||"",i=decodeURIComponent(_6(t,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:mt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),de(this,"registerLinkModeListeners",async()=>{var t;if(q3()||Cc()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),de(this,"getTVFParams",(t,r,i)=>{var s,o,c;if(!((s=r.request)!=null&&s.method))return{};const u={correlationId:t,rpcMethods:[r.request.method],chainId:r.chainId};try{const f=this.extractTxHashesFromResult(r.request,i);u.txHashes=f,u.contractAddresses=this.isValidContractData(r.request.params)?[(c=(o=r.request.params)==null?void 0:o[0])==null?void 0:c.to]:[]}catch(f){this.client.logger.warn(f,"Error getting TVF params")}return u}),de(this,"isValidContractData",t=>{var r;if(!t)return!1;try{const i=(t==null?void 0:t.data)||((r=t==null?void 0:t[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),de(this,"extractTxHashesFromResult",(t,r)=>{var i;try{if(!r)return[];const s=t.method,o=Qie[s];if(s==="sui_signTransaction")return[TJ(r.transactionBytes)];if(s==="near_signTransaction")return[L6(r)];if(s==="near_signTransactions")return r.map(u=>L6(u));if(s==="xrpl_signTransactionFor"||s==="xrpl_signTransaction")return[(i=r.tx_json)==null?void 0:i.hash];if(s==="polkadot_signTransaction")return[Tee({transaction:t.params.transactionPayload,signature:r.signature})];if(s==="algo_signTxn")return Ah(r)?r.map(u=>F6(u)):[F6(r)];if(s==="cosmos_signDirect")return[RJ(r)];if(s==="wallet_sendCalls")return UJ(r);if(typeof r=="string")return[r];const c=r[o.key];if(Ah(c))return s==="solana_signAllTransactions"?c.map(u=>$J(u)):c;if(typeof c=="string")return[c]}catch(s){this.client.logger.warn(s,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,i]of Object.entries(t))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=we("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(_t.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:t,message:r,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Ty)?this.client.auth.authKeys.get(Ty):{publicKey:void 0};try{const c=await this.client.core.crypto.decode(t,r,{receiverPublicKey:o,encoding:s===mt.link_mode?Ga:wr});ix(c)?(this.client.core.history.set(t,c),await this.onRelayEventRequest({topic:t,payload:c,attestation:i,transportType:s,encryptedId:gi(r)})):hw(c)?(await this.client.core.history.resolve(c),await this.onRelayEventResponse({topic:t,payload:c,transportType:s}),this.client.core.history.delete(t,c.id)):await this.onRelayEventUnknownPayload({topic:t,payload:c,transportType:s}),await this.client.core.relayer.messages.ack(t,r)}catch(c){this.client.logger.error(c)}}registerExpirerEvents(){this.client.core.expirer.on(oi.expired,async e=>{const{topic:t,id:r}=xN(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,we("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,we("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(il.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(il.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Rt(e,!1)){const{message:t}=we("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=we("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ua(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=we("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Rt(e,!1)){const{message:t}=we("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=we("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Ua(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=we("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=we("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Rt(e,!1)){const{message:t}=we("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=we("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!uee(e)){const{message:t}=we("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=we("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Ua(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=we("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class lse extends cu{constructor(e,t){super(e,t,Kie,ox),this.core=e,this.logger=t}}let use=class extends cu{constructor(e,t){super(e,t,Gie,ox),this.core=e,this.logger=t}};class fse extends cu{constructor(e,t){super(e,t,Zie,ox,r=>r.id),this.core=e,this.logger=t}}class hse extends cu{constructor(e,t){super(e,t,ese,pw,()=>Ty),this.core=e,this.logger=t}}class dse extends cu{constructor(e,t){super(e,t,tse,pw),this.core=e,this.logger=t}}class pse extends cu{constructor(e,t){super(e,t,nse,pw,r=>r.id),this.core=e,this.logger=t}}var gse=Object.defineProperty,yse=(n,e,t)=>e in n?gse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L2=(n,e,t)=>yse(n,typeof e!="symbol"?e+"":e,t);class mse{constructor(e,t){this.core=e,this.logger=t,L2(this,"authKeys"),L2(this,"pairingTopics"),L2(this,"requests"),this.authKeys=new hse(this.core,this.logger),this.pairingTopics=new dse(this.core,this.logger),this.requests=new pse(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var wse=Object.defineProperty,bse=(n,e,t)=>e in n?wse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ke=(n,e,t)=>bse(n,typeof e!="symbol"?e+"":e,t);let vse=class QD extends QG{constructor(e){super(e),Ke(this,"protocol",KD),Ke(this,"version",GD),Ke(this,"name",R2.name),Ke(this,"metadata"),Ke(this,"core"),Ke(this,"logger"),Ke(this,"events",new Gr.EventEmitter),Ke(this,"engine"),Ke(this,"session"),Ke(this,"proposal"),Ke(this,"pendingRequest"),Ke(this,"auth"),Ke(this,"signConfig"),Ke(this,"on",(r,i)=>this.events.on(r,i)),Ke(this,"once",(r,i)=>this.events.once(r,i)),Ke(this,"off",(r,i)=>this.events.off(r,i)),Ke(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),Ke(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Ke(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Ke(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),Ke(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||R2.name,this.metadata=OZ(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const t=AD({logger:(e==null?void 0:e.logger)||R2.logger,name:this.name});this.logger=t,this.core=(e==null?void 0:e.core)||new qie(e),this.session=new use(this.core,this.logger),this.proposal=new lse(this.core,this.logger),this.pendingRequest=new fse(this.core,this.logger),this.engine=new cse(this),this.auth=new mse(this.core,this.logger)}static async init(e){const t=new QD(e);return await t.initialize(),t}get context(){return Pr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const Ese=vse;var ut={},rO;function ZD(){if(rO)return ut;rO=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.getLocalStorage=ut.getLocalStorageOrThrow=ut.getCrypto=ut.getCryptoOrThrow=ut.getLocation=ut.getLocationOrThrow=ut.getNavigator=ut.getNavigatorOrThrow=ut.getDocument=ut.getDocumentOrThrow=ut.getFromWindowOrThrow=ut.getFromWindow=void 0;function n(g){let m;return typeof window<"u"&&typeof window[g]<"u"&&(m=window[g]),m}ut.getFromWindow=n;function e(g){const m=n(g);if(!m)throw new Error(`${g} is not defined in Window`);return m}ut.getFromWindowOrThrow=e;function t(){return e("document")}ut.getDocumentOrThrow=t;function r(){return n("document")}ut.getDocument=r;function i(){return e("navigator")}ut.getNavigatorOrThrow=i;function s(){return n("navigator")}ut.getNavigator=s;function o(){return e("location")}ut.getLocationOrThrow=o;function c(){return n("location")}ut.getLocation=c;function u(){return e("crypto")}ut.getCryptoOrThrow=u;function f(){return n("crypto")}ut.getCrypto=f;function d(){return e("localStorage")}ut.getLocalStorageOrThrow=d;function p(){return n("localStorage")}return ut.getLocalStorage=p,ut}ZD();var jd={},iO;function xse(){if(iO)return jd;iO=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.getWindowMetadata=void 0;const n=ZD();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function i(){const m=t.getElementsByTagName("link"),v=[];for(let b=0;b<m.length;b++){const A=m[b],N=A.getAttribute("rel");if(N&&N.toLowerCase().indexOf("icon")>-1){const R=A.getAttribute("href");if(R)if(R.toLowerCase().indexOf("https:")===-1&&R.toLowerCase().indexOf("http:")===-1&&R.indexOf("//")!==0){let O=r.protocol+"//"+r.host;if(R.indexOf("/")===0)O+=R;else{const T=r.pathname.split("/");T.pop();const k=T.join("/");O+=k+"/"+R}v.push(O)}else if(R.indexOf("//")===0){const O=r.protocol+R;v.push(O)}else v.push(R)}}return v}function s(...m){const v=t.getElementsByTagName("meta");for(let b=0;b<v.length;b++){const A=v[b],N=["itemprop","property","name"].map(R=>A.getAttribute(R)).filter(R=>R?m.includes(R):!1);if(N.length&&N){const R=A.getAttribute("content");if(R)return R}}return""}function o(){let m=s("name","og:site_name","og:title","twitter:title");return m||(m=t.title),m}function c(){return s("description","og:description","twitter:description","keywords")}const u=o(),f=c(),d=r.origin,p=i();return{description:f,url:d,icons:p,name:u}}return jd.getWindowMetadata=e,jd}xse();function Ase(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<n.length;f++){const d=n.charAt(f),p=d.charCodeAt(0);if(e[p]!==255)throw new TypeError(d+" is ambiguous");e[p]=f}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let d=0,p=0,g=0;const m=f.length;for(;g!==m&&f[g]===0;)g++,d++;const v=(m-g)*s+1>>>0,b=new Uint8Array(v);for(;g!==m;){let R=f[g],O=0;for(let T=v-1;(R!==0||O<p)&&T!==-1;T--,O++)R+=256*b[T]>>>0,b[T]=R%t>>>0,R=R/t>>>0;if(R!==0)throw new Error("Non-zero carry");p=O,g++}let A=v-p;for(;A!==v&&b[A]===0;)A++;let N=r.repeat(d);for(;A<v;++A)N+=n.charAt(b[A]);return N}function c(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let d=0,p=0,g=0;for(;f[d]===r;)p++,d++;const m=(f.length-d)*i+1>>>0,v=new Uint8Array(m);for(;d<f.length;){const R=f.charCodeAt(d);if(R>255)return;let O=e[R];if(O===255)return;let T=0;for(let k=m-1;(O!==0||T<g)&&k!==-1;k--,T++)O+=t*v[k]>>>0,v[k]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");g=T,d++}let b=m-g;for(;b!==m&&v[b]===0;)b++;const A=new Uint8Array(p+(m-b));let N=p;for(;b!==m;)A[N++]=v[b++];return A}function u(f){const d=c(f);if(d)return d;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:c,decode:u}}var Sse="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Ase(Sse);const Ise=":";function pp(n){const[e,t]=n.split(Ise);return{namespace:e,reference:t}}function Ose(n,e){return me.fromMiliseconds(Date.now()+me.toMiliseconds(n))}function JD(n){return Date.now()>=me.toMiliseconds(n)}function F2(n=[],e=[]){return[...new Set([...n,...e])]}const oy=BigInt(2**32-1),sO=BigInt(32);function YD(n,e=!1){return e?{h:Number(n&oy),l:Number(n>>sO&oy)}:{h:Number(n>>sO&oy)|0,l:Number(n&oy)|0}}function XD(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:c}=YD(n[s],e);[r[s],i[s]]=[o,c]}return[r,i]}const oO=(n,e,t)=>n>>>t,aO=(n,e,t)=>n<<32-t|e>>>t,ja=(n,e,t)=>n>>>t|e<<32-t,za=(n,e,t)=>n<<32-t|e>>>t,rp=(n,e,t)=>n<<64-t|e>>>t-32,ip=(n,e,t)=>n>>>t-32|e<<64-t,Bse=(n,e)=>e,Pse=(n,e)=>n,Cse=(n,e,t)=>n<<t|e>>>32-t,_se=(n,e,t)=>e<<t|n>>>32-t,Nse=(n,e,t)=>e<<t-32|n>>>64-t,Dse=(n,e,t)=>n<<t-32|e>>>64-t;function ki(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const ax=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),cx=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,$se=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Tse=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,kse=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),Rse=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Wu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function gw(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Sc(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Ji(n,...e){if(!gw(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function e$(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Sc(n.outputLen),Sc(n.blockLen)}function Ic(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function lx(n,e){Ji(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Lp(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Yi(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function M2(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function ps(n,e){return n<<32-e|n>>>e}const t$=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function n$(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const no=t$?n=>n:n=>n$(n);function Use(n){for(let e=0;e<n.length;e++)n[e]=n$(n[e]);return n}const Ha=t$?n=>n:Use,r$=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Lse=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function vf(n){if(Ji(n),r$)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=Lse[n[t]];return e}const Ys={_0:48,_9:57,A:65,F:70,a:97,f:102};function cO(n){if(n>=Ys._0&&n<=Ys._9)return n-Ys._0;if(n>=Ys.A&&n<=Ys.F)return n-(Ys.A-10);if(n>=Ys.a&&n<=Ys.f)return n-(Ys.a-10)}function bm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(r$)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=cO(n.charCodeAt(s)),c=cO(n.charCodeAt(s+1));if(o===void 0||c===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+c}return r}function i$(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function $o(n){return typeof n=="string"&&(n=i$(n)),Ji(n),n}function Wa(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];Ji(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}class yw{}function wg(n){const e=r=>n().update($o(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Fse(n){const e=(r,i)=>n(i).update($o(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function ux(n=32){if(Wu&&typeof Wu.getRandomValues=="function")return Wu.getRandomValues(new Uint8Array(n));if(Wu&&typeof Wu.randomBytes=="function")return Uint8Array.from(Wu.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const Mse=BigInt(0),zd=BigInt(1),jse=BigInt(2),zse=BigInt(7),Hse=BigInt(256),Vse=BigInt(113),s$=[],o$=[],a$=[];for(let n=0,e=zd,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],s$.push(2*(5*r+t)),o$.push((n+1)*(n+2)/2%64);let i=Mse;for(let s=0;s<7;s++)e=(e<<zd^(e>>zse)*Vse)%Hse,e&jse&&(i^=zd<<(zd<<BigInt(s))-zd);a$.push(i)}const c$=XD(a$,!0),qse=c$[0],Kse=c$[1],lO=(n,e,t)=>t>32?Nse(n,e,t):Cse(n,e,t),uO=(n,e,t)=>t>32?Dse(n,e,t):_se(n,e,t);function Gse(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=t[u],d=t[u+1],p=lO(f,d,1)^t[c],g=uO(f,d,1)^t[c+1];for(let m=0;m<50;m+=10)n[o+m]^=p,n[o+m+1]^=g}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=o$[o],u=lO(i,s,c),f=uO(i,s,c),d=s$[o];i=n[d],s=n[d+1],n[d]=u,n[d+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=qse[r],n[1]^=Kse[r]}Yi(t)}class fx extends yw{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,Sc(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Lp(this.state)}clone(){return this._cloneInto()}keccak(){Ha(this.state32),Gse(this.state32,this.rounds),Ha(this.state32),this.posOut=0,this.pos=0}update(e){Ic(this),e=$o(e),Ji(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ic(this,!1),Ji(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Sc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(lx(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Yi(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new fx(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Wse=(n,e,t)=>wg(()=>new fx(e,n,t));Wse(1,136,256/8);function Qse(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}function Zse(n,e,t){return n&e^~n&t}function Jse(n,e,t){return n&e^n&t^e&t}class l$ extends yw{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=M2(this.buffer)}update(e){Ic(this),e=$o(e),Ji(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=M2(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ic(this),lx(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,Yi(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let p=o;p<i;p++)t[p]=0;Qse(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=M2(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)c.setUint32(4*p,d[p],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=c,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Ba=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$n=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Tn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Yse=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pa=new Uint32Array(64);class Xse extends l${constructor(e=32){super(64,e,8,!1),this.A=Ba[0]|0,this.B=Ba[1]|0,this.C=Ba[2]|0,this.D=Ba[3]|0,this.E=Ba[4]|0,this.F=Ba[5]|0,this.G=Ba[6]|0,this.H=Ba[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let p=0;p<16;p++,t+=4)Pa[p]=e.getUint32(t,!1);for(let p=16;p<64;p++){const g=Pa[p-15],m=Pa[p-2],v=ps(g,7)^ps(g,18)^g>>>3,b=ps(m,17)^ps(m,19)^m>>>10;Pa[p]=b+Pa[p-7]+v+Pa[p-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:d}=this;for(let p=0;p<64;p++){const g=ps(c,6)^ps(c,11)^ps(c,25),m=d+g+Zse(c,u,f)+Yse[p]+Pa[p]|0,v=(ps(r,2)^ps(r,13)^ps(r,22))+Jse(r,i,s)|0;d=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,i,s,o,c,u,f,d)}roundClean(){Yi(Pa)}destroy(){this.set(0,0,0,0,0,0,0,0),Yi(this.buffer)}}const u$=XD(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),eoe=u$[0],toe=u$[1],Ca=new Uint32Array(80),_a=new Uint32Array(80);class hx extends l${constructor(e=64){super(128,e,16,!1),this.Ah=Tn[0]|0,this.Al=Tn[1]|0,this.Bh=Tn[2]|0,this.Bl=Tn[3]|0,this.Ch=Tn[4]|0,this.Cl=Tn[5]|0,this.Dh=Tn[6]|0,this.Dl=Tn[7]|0,this.Eh=Tn[8]|0,this.El=Tn[9]|0,this.Fh=Tn[10]|0,this.Fl=Tn[11]|0,this.Gh=Tn[12]|0,this.Gl=Tn[13]|0,this.Hh=Tn[14]|0,this.Hl=Tn[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:f,El:d,Fh:p,Fl:g,Gh:m,Gl:v,Hh:b,Hl:A}=this;return[e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=d|0,this.Fh=p|0,this.Fl=g|0,this.Gh=m|0,this.Gl=v|0,this.Hh=b|0,this.Hl=A|0}process(e,t){for(let O=0;O<16;O++,t+=4)Ca[O]=e.getUint32(t),_a[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const T=Ca[O-15]|0,k=_a[O-15]|0,j=ja(T,k,1)^ja(T,k,8)^oO(T,k,7),H=za(T,k,1)^za(T,k,8)^aO(T,k,7),V=Ca[O-2]|0,M=_a[O-2]|0,K=ja(V,M,19)^rp(V,M,61)^oO(V,M,6),Q=za(V,M,19)^ip(V,M,61)^aO(V,M,6),z=$se(H,Q,_a[O-7],_a[O-16]),P=Tse(z,j,K,Ca[O-7],Ca[O-16]);Ca[O]=P|0,_a[O]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:f,Dl:d,Eh:p,El:g,Fh:m,Fl:v,Gh:b,Gl:A,Hh:N,Hl:R}=this;for(let O=0;O<80;O++){const T=ja(p,g,14)^ja(p,g,18)^rp(p,g,41),k=za(p,g,14)^za(p,g,18)^ip(p,g,41),j=p&m^~p&b,H=g&v^~g&A,V=kse(R,k,H,toe[O],_a[O]),M=Rse(V,N,T,j,eoe[O],Ca[O]),K=V|0,Q=ja(r,i,28)^rp(r,i,34)^rp(r,i,39),z=za(r,i,28)^ip(r,i,34)^ip(r,i,39),P=r&s^r&c^s&c,D=i&o^i&u^o&u;N=b|0,R=A|0,b=m|0,A=v|0,m=p|0,v=g|0,{h:p,l:g}=ki(f|0,d|0,M|0,K|0),f=c|0,d=u|0,c=s|0,u=o|0,s=r|0,o=i|0;const w=ax(K,z,D);r=cx(w,M,Q,P),i=w|0}({h:r,l:i}=ki(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=ki(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=ki(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:d}=ki(this.Dh|0,this.Dl|0,f|0,d|0),{h:p,l:g}=ki(this.Eh|0,this.El|0,p|0,g|0),{h:m,l:v}=ki(this.Fh|0,this.Fl|0,m|0,v|0),{h:b,l:A}=ki(this.Gh|0,this.Gl|0,b|0,A|0),{h:N,l:R}=ki(this.Hh|0,this.Hl|0,N|0,R|0),this.set(r,i,s,o,c,u,f,d,p,g,m,v,b,A,N,R)}roundClean(){Yi(Ca,_a)}destroy(){Yi(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class noe extends hx{constructor(){super(48),this.Ah=$n[0]|0,this.Al=$n[1]|0,this.Bh=$n[2]|0,this.Bl=$n[3]|0,this.Ch=$n[4]|0,this.Cl=$n[5]|0,this.Dh=$n[6]|0,this.Dl=$n[7]|0,this.Eh=$n[8]|0,this.El=$n[9]|0,this.Fh=$n[10]|0,this.Fl=$n[11]|0,this.Gh=$n[12]|0,this.Gl=$n[13]|0,this.Hh=$n[14]|0,this.Hl=$n[15]|0}}const kn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class roe extends hx{constructor(){super(32),this.Ah=kn[0]|0,this.Al=kn[1]|0,this.Bh=kn[2]|0,this.Bl=kn[3]|0,this.Ch=kn[4]|0,this.Cl=kn[5]|0,this.Dh=kn[6]|0,this.Dl=kn[7]|0,this.Eh=kn[8]|0,this.El=kn[9]|0,this.Fh=kn[10]|0,this.Fl=kn[11]|0,this.Gh=kn[12]|0,this.Gl=kn[13]|0,this.Hh=kn[14]|0,this.Hl=kn[15]|0}}const ioe=wg(()=>new Xse),soe=wg(()=>new hx),ooe=wg(()=>new noe);wg(()=>new roe);const aoe=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),zt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),xe=new Uint32Array(32);function Na(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=xe[2*n],f=xe[2*n+1],d=xe[2*e],p=xe[2*e+1],g=xe[2*t],m=xe[2*t+1],v=xe[2*r],b=xe[2*r+1],A=ax(u,d,o);f=cx(A,f,p,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:Bse(b,v),Dl:Pse(b)},{h:m,l:g}=ki(m,g,b,v),{Bh:p,Bl:d}={Bh:p^m,Bl:d^g},{Bh:p,Bl:d}={Bh:ja(p,d,24),Bl:za(p,d,24)},xe[2*n]=u,xe[2*n+1]=f,xe[2*e]=d,xe[2*e+1]=p,xe[2*t]=g,xe[2*t+1]=m,xe[2*r]=v,xe[2*r+1]=b}function Da(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=xe[2*n],f=xe[2*n+1],d=xe[2*e],p=xe[2*e+1],g=xe[2*t],m=xe[2*t+1],v=xe[2*r],b=xe[2*r+1],A=ax(u,d,o);f=cx(A,f,p,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:ja(b,v,16),Dl:za(b,v,16)},{h:m,l:g}=ki(m,g,b,v),{Bh:p,Bl:d}={Bh:p^m,Bl:d^g},{Bh:p,Bl:d}={Bh:rp(p,d,63),Bl:ip(p,d,63)},xe[2*n]=u,xe[2*n+1]=f,xe[2*e]=d,xe[2*e+1]=p,xe[2*t]=g,xe[2*t+1]=m,xe[2*r]=v,xe[2*r+1]=b}function coe(n,e={},t,r,i){if(Sc(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:c}=e;if(s!==void 0&&(s.length<1||s.length>t))throw new Error("key length must be undefined or 1.."+t);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}class loe extends yw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Sc(e),Sc(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=Lp(this.buffer)}update(e){Ic(this),e=$o(e),Ji(e);const{blockLen:t,buffer:r,buffer32:i}=this,s=e.length,o=e.byteOffset,c=e.buffer;for(let u=0;u<s;){this.pos===t&&(Ha(i),this.compress(i,0,!1),Ha(i),this.pos=0);const f=Math.min(t-this.pos,s-u),d=o+u;if(f===t&&!(d%4)&&u+f<s){const p=new Uint32Array(c,d,Math.floor((s-u)/4));Ha(p);for(let g=0;u+t<s;g+=i.length,u+=t)this.length+=t,this.compress(p,g,!1);Ha(p);continue}r.set(e.subarray(u,u+f),this.pos),this.pos+=f,this.length+=f,u+=f}return this}digestInto(e){Ic(this),lx(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,Yi(this.buffer.subarray(t)),Ha(r),this.compress(r,0,!0),Ha(r);const i=Lp(e);this.get().forEach((s,o)=>i[o]=no(s))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:i,destroyed:s,outputLen:o,pos:c}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=s,e.finished=i,e.length=r,e.pos=c,e.outputLen=o,e}clone(){return this._cloneInto()}}class uoe extends loe{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=zt[0]|0,this.v0h=zt[1]|0,this.v1l=zt[2]|0,this.v1h=zt[3]|0,this.v2l=zt[4]|0,this.v2h=zt[5]|0,this.v3l=zt[6]|0,this.v3h=zt[7]|0,this.v4l=zt[8]|0,this.v4h=zt[9]|0,this.v5l=zt[10]|0,this.v5h=zt[11]|0,this.v6l=zt[12]|0,this.v6h=zt[13]|0,this.v7l=zt[14]|0,this.v7h=zt[15]|0,coe(t,e,64,16,16);let{key:r,personalization:i,salt:s}=e,o=0;if(r!==void 0&&(r=$o(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=$o(s);const c=Lp(s);this.v4l^=no(c[0]),this.v4h^=no(c[1]),this.v5l^=no(c[2]),this.v5h^=no(c[3])}if(i!==void 0){i=$o(i);const c=Lp(i);this.v6l^=no(c[0]),this.v6h^=no(c[1]),this.v7l^=no(c[2]),this.v7h^=no(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:i,v2l:s,v2h:o,v3l:c,v3h:u,v4l:f,v4h:d,v5l:p,v5h:g,v6l:m,v6h:v,v7l:b,v7h:A}=this;return[e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,d,p,g,m,v,b,A){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=c|0,this.v3h=u|0,this.v4l=f|0,this.v4h=d|0,this.v5l=p|0,this.v5h=g|0,this.v6l=m|0,this.v6h=v|0,this.v7l=b|0,this.v7h=A|0}compress(e,t,r){this.get().forEach((u,f)=>xe[f]=u),xe.set(zt,16);let{h:i,l:s}=YD(BigInt(this.length));xe[24]=zt[8]^s,xe[25]=zt[9]^i,r&&(xe[28]=~xe[28],xe[29]=~xe[29]);let o=0;const c=aoe;for(let u=0;u<12;u++)Na(0,4,8,12,e,t+2*c[o++]),Da(0,4,8,12,e,t+2*c[o++]),Na(1,5,9,13,e,t+2*c[o++]),Da(1,5,9,13,e,t+2*c[o++]),Na(2,6,10,14,e,t+2*c[o++]),Da(2,6,10,14,e,t+2*c[o++]),Na(3,7,11,15,e,t+2*c[o++]),Da(3,7,11,15,e,t+2*c[o++]),Na(0,5,10,15,e,t+2*c[o++]),Da(0,5,10,15,e,t+2*c[o++]),Na(1,6,11,12,e,t+2*c[o++]),Da(1,6,11,12,e,t+2*c[o++]),Na(2,7,8,13,e,t+2*c[o++]),Da(2,7,8,13,e,t+2*c[o++]),Na(3,4,9,14,e,t+2*c[o++]),Da(3,4,9,14,e,t+2*c[o++]);this.v0l^=xe[0]^xe[16],this.v0h^=xe[1]^xe[17],this.v1l^=xe[2]^xe[18],this.v1h^=xe[3]^xe[19],this.v2l^=xe[4]^xe[20],this.v2h^=xe[5]^xe[21],this.v3l^=xe[6]^xe[22],this.v3h^=xe[7]^xe[23],this.v4l^=xe[8]^xe[24],this.v4h^=xe[9]^xe[25],this.v5l^=xe[10]^xe[26],this.v5h^=xe[11]^xe[27],this.v6l^=xe[12]^xe[28],this.v6h^=xe[13]^xe[29],this.v7l^=xe[14]^xe[30],this.v7h^=xe[15]^xe[31],Yi(xe)}destroy(){this.destroyed=!0,Yi(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Fse(n=>new uoe(n));/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function f$(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function TE(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function j2(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function br(n,...e){if(!f$(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function fO(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function foe(n,e){br(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function yc(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Sh(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function hoe(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const doe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function poe(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function kE(n){if(typeof n=="string")n=poe(n);else if(f$(n))n=RE(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function goe(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function yoe(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const moe=(n,e)=>{function t(r,...i){if(br(r),!doe)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const f=i[0];if(!f)throw new Error("nonce / iv required");n.varSizeNonce?br(f):br(f,n.nonceLength)}const s=n.tagLength;s&&i[1]!==void 0&&br(i[1]);const o=e(r,...i),c=(f,d)=>{if(d!==void 0){if(f!==2)throw new Error("cipher output not supported");br(d)}};let u=!1;return{encrypt(f,d){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,br(f),c(o.encrypt.length,d),o.encrypt(f,d)},decrypt(f,d){if(br(f),s&&f.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return c(o.decrypt.length,d),o.decrypt(f,d)}}}return Object.assign(t,n),t};function hO(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!boe(e))throw new Error("invalid output, must be aligned");return e}function dO(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s);n.setUint32(e+4,o,r),n.setUint32(e+0,c,r)}function woe(n,e,t){TE(t);const r=new Uint8Array(16),i=hoe(r);return dO(i,0,BigInt(e),t),dO(i,8,BigInt(n),t),r}function boe(n){return n.byteOffset%4===0}function RE(n){return Uint8Array.from(n)}const h$=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),voe=h$("expand 16-byte k"),Eoe=h$("expand 32-byte k"),xoe=yc(voe),Aoe=yc(Eoe);function tt(n,e){return n<<e|n>>>32-e}function UE(n){return n.byteOffset%4===0}const ay=64,Soe=16,d$=2**32-1,pO=new Uint32Array;function Ioe(n,e,t,r,i,s,o,c){const u=i.length,f=new Uint8Array(ay),d=yc(f),p=UE(i)&&UE(s),g=p?yc(i):pO,m=p?yc(s):pO;for(let v=0;v<u;o++){if(n(e,t,r,d,o,c),o>=d$)throw new Error("arx: counter overflow");const b=Math.min(ay,u-v);if(p&&b===ay){const A=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let N=0,R;N<Soe;N++)R=A+N,m[R]=g[R]^d[N];v+=ay;continue}for(let A=0,N;A<b;A++)N=v+A,s[N]=i[N]^f[A];v+=b}}function Ooe(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=goe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return j2(i),j2(o),TE(s),TE(t),(c,u,f,d,p=0)=>{br(c),br(u),br(f);const g=f.length;if(d===void 0&&(d=new Uint8Array(g)),br(d),j2(p),p<0||p>=d$)throw new Error("arx: counter overflow");if(d.length<g)throw new Error(`arx: output (${d.length}) is shorter than data (${g})`);const m=[];let v=c.length,b,A;if(v===32)m.push(b=RE(c)),A=Aoe;else if(v===16&&t)b=new Uint8Array(32),b.set(c),b.set(c,16),A=xoe,m.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);UE(u)||m.push(u=RE(u));const N=yc(b);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,N,yc(u.subarray(0,16)),N),u=u.subarray(16)}const R=16-i;if(R!==u.length)throw new Error(`arx: nonce must be ${R} or 16 bytes`);if(R!==12){const T=new Uint8Array(12);T.set(u,s?0:12-u.length),u=T,m.push(u)}const O=yc(u);return Ioe(n,A,N,O,f,d,p,o),Sh(...m),d}}const dn=(n,e)=>n[e++]&255|(n[e++]&255)<<8;class Boe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=kE(e),br(e,32);const t=dn(e,0),r=dn(e,2),i=dn(e,4),s=dn(e,6),o=dn(e,8),c=dn(e,10),u=dn(e,12),f=dn(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let d=0;d<8;d++)this.pad[d]=dn(e,16+2*d)}process(e,t,r=!1){const i=r?0:2048,{h:s,r:o}=this,c=o[0],u=o[1],f=o[2],d=o[3],p=o[4],g=o[5],m=o[6],v=o[7],b=o[8],A=o[9],N=dn(e,t+0),R=dn(e,t+2),O=dn(e,t+4),T=dn(e,t+6),k=dn(e,t+8),j=dn(e,t+10),H=dn(e,t+12),V=dn(e,t+14);let M=s[0]+(N&8191),K=s[1]+((N>>>13|R<<3)&8191),Q=s[2]+((R>>>10|O<<6)&8191),z=s[3]+((O>>>7|T<<9)&8191),P=s[4]+((T>>>4|k<<12)&8191),D=s[5]+(k>>>1&8191),w=s[6]+((k>>>14|j<<2)&8191),x=s[7]+((j>>>11|H<<5)&8191),B=s[8]+((H>>>8|V<<8)&8191),C=s[9]+(V>>>5|i),I=0,_=I+M*c+K*(5*A)+Q*(5*b)+z*(5*v)+P*(5*m);I=_>>>13,_&=8191,_+=D*(5*g)+w*(5*p)+x*(5*d)+B*(5*f)+C*(5*u),I+=_>>>13,_&=8191;let $=I+M*u+K*c+Q*(5*A)+z*(5*b)+P*(5*v);I=$>>>13,$&=8191,$+=D*(5*m)+w*(5*g)+x*(5*p)+B*(5*d)+C*(5*f),I+=$>>>13,$&=8191;let U=I+M*f+K*u+Q*c+z*(5*A)+P*(5*b);I=U>>>13,U&=8191,U+=D*(5*v)+w*(5*m)+x*(5*g)+B*(5*p)+C*(5*d),I+=U>>>13,U&=8191;let Y=I+M*d+K*f+Q*u+z*c+P*(5*A);I=Y>>>13,Y&=8191,Y+=D*(5*b)+w*(5*v)+x*(5*m)+B*(5*g)+C*(5*p),I+=Y>>>13,Y&=8191;let q=I+M*p+K*d+Q*f+z*u+P*c;I=q>>>13,q&=8191,q+=D*(5*A)+w*(5*b)+x*(5*v)+B*(5*m)+C*(5*g),I+=q>>>13,q&=8191;let Z=I+M*g+K*p+Q*d+z*f+P*u;I=Z>>>13,Z&=8191,Z+=D*c+w*(5*A)+x*(5*b)+B*(5*v)+C*(5*m),I+=Z>>>13,Z&=8191;let te=I+M*m+K*g+Q*p+z*d+P*f;I=te>>>13,te&=8191,te+=D*u+w*c+x*(5*A)+B*(5*b)+C*(5*v),I+=te>>>13,te&=8191;let re=I+M*v+K*m+Q*g+z*p+P*d;I=re>>>13,re&=8191,re+=D*f+w*u+x*c+B*(5*A)+C*(5*b),I+=re>>>13,re&=8191;let le=I+M*b+K*v+Q*m+z*g+P*p;I=le>>>13,le&=8191,le+=D*d+w*f+x*u+B*c+C*(5*A),I+=le>>>13,le&=8191;let ie=I+M*A+K*b+Q*v+z*m+P*g;I=ie>>>13,ie&=8191,ie+=D*p+w*d+x*f+B*u+C*c,I+=ie>>>13,ie&=8191,I=(I<<2)+I|0,I=I+_|0,_=I&8191,I=I>>>13,$+=I,s[0]=_,s[1]=$,s[2]=U,s[3]=Y,s[4]=q,s[5]=Z,s[6]=te,s[7]=re,s[8]=le,s[9]=ie}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=8192;let s=(i^1)-1;for(let c=0;c<10;c++)r[c]&=s;s=~s;for(let c=0;c<10;c++)e[c]=e[c]&s|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let c=1;c<8;c++)o=(e[c]+t[c]|0)+(o>>>16)|0,e[c]=o&65535;Sh(r)}update(e){fO(this),e=kE(e),br(e);const{buffer:t,blockLen:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}t.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){Sh(this.h,this.r,this.buffer,this.pad)}digestInto(e){fO(this),foe(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}function Poe(n){const e=(r,i)=>n(i).update(kE(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const Coe=Poe(n=>new Boe(n));function _oe(n,e,t,r,i,s=20){let o=n[0],c=n[1],u=n[2],f=n[3],d=e[0],p=e[1],g=e[2],m=e[3],v=e[4],b=e[5],A=e[6],N=e[7],R=i,O=t[0],T=t[1],k=t[2],j=o,H=c,V=u,M=f,K=d,Q=p,z=g,P=m,D=v,w=b,x=A,B=N,C=R,I=O,_=T,$=k;for(let Y=0;Y<s;Y+=2)j=j+K|0,C=tt(C^j,16),D=D+C|0,K=tt(K^D,12),j=j+K|0,C=tt(C^j,8),D=D+C|0,K=tt(K^D,7),H=H+Q|0,I=tt(I^H,16),w=w+I|0,Q=tt(Q^w,12),H=H+Q|0,I=tt(I^H,8),w=w+I|0,Q=tt(Q^w,7),V=V+z|0,_=tt(_^V,16),x=x+_|0,z=tt(z^x,12),V=V+z|0,_=tt(_^V,8),x=x+_|0,z=tt(z^x,7),M=M+P|0,$=tt($^M,16),B=B+$|0,P=tt(P^B,12),M=M+P|0,$=tt($^M,8),B=B+$|0,P=tt(P^B,7),j=j+Q|0,$=tt($^j,16),x=x+$|0,Q=tt(Q^x,12),j=j+Q|0,$=tt($^j,8),x=x+$|0,Q=tt(Q^x,7),H=H+z|0,C=tt(C^H,16),B=B+C|0,z=tt(z^B,12),H=H+z|0,C=tt(C^H,8),B=B+C|0,z=tt(z^B,7),V=V+P|0,I=tt(I^V,16),D=D+I|0,P=tt(P^D,12),V=V+P|0,I=tt(I^V,8),D=D+I|0,P=tt(P^D,7),M=M+K|0,_=tt(_^M,16),w=w+_|0,K=tt(K^w,12),M=M+K|0,_=tt(_^M,8),w=w+_|0,K=tt(K^w,7);let U=0;r[U++]=o+j|0,r[U++]=c+H|0,r[U++]=u+V|0,r[U++]=f+M|0,r[U++]=d+K|0,r[U++]=p+Q|0,r[U++]=g+z|0,r[U++]=m+P|0,r[U++]=v+D|0,r[U++]=b+w|0,r[U++]=A+x|0,r[U++]=N+B|0,r[U++]=R+C|0,r[U++]=O+I|0,r[U++]=T+_|0,r[U++]=k+$|0}const Noe=Ooe(_oe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Doe=new Uint8Array(16),gO=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(Doe.subarray(t))},$oe=new Uint8Array(32);function yO(n,e,t,r,i){const s=n(e,t,$oe),o=Coe.create(s);i&&gO(o,i),gO(o,r);const c=woe(r.length,i?i.length:0,!0);o.update(c);const u=o.digest();return Sh(s,c),u}const Toe=n=>(e,t,r)=>({encrypt(i,s){const o=i.length;s=hO(o+16,s,!1),s.set(i);const c=s.subarray(0,-16);n(e,t,c,c,1);const u=yO(n,e,t,c,r);return s.set(u,o),Sh(u),s},decrypt(i,s){s=hO(i.length-16,s,!1);const o=i.subarray(0,-16),c=i.subarray(-16),u=yO(n,e,t,o,r);if(!yoe(c,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),n(e,t,s,s,1),Sh(u),s}});moe({blockSize:64,nonceLength:12,tagLength:16},Toe(Noe));class p$ extends yw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,e$(e);const r=$o(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Yi(s)}update(e){return Ic(this),this.iHash.update(e),this}digestInto(e){Ic(this),Ji(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const g$=(n,e,t)=>new p$(n,e).update(t).digest();g$.create=(n,e)=>new p$(n,e);Uint8Array.from([0]);const dx=BigInt(0),LE=BigInt(1);function vm(n,e=""){if(typeof n!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof n)}return n}function El(n,e,t=""){const r=gw(n),i=n==null?void 0:n.length,s=e!==void 0;if(!r||s&&i!==e){const o=t&&`"${t}" `,c=s?` of length ${e}`:"",u=r?`length=${i}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+c+", got "+u)}return n}function cy(n){const e=n.toString(16);return e.length&1?"0"+e:e}function y$(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?dx:BigInt("0x"+n)}function mw(n){return y$(vf(n))}function Em(n){return Ji(n),y$(vf(Uint8Array.from(n).reverse()))}function px(n,e){return bm(n.toString(16).padStart(e*2,"0"))}function gx(n,e){return px(n,e).reverse()}function jn(n,e,t){let r;if(typeof e=="string")try{r=bm(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(gw(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}const z2=n=>typeof n=="bigint"&&dx<=n;function koe(n,e,t){return z2(n)&&z2(e)&&z2(t)&&e<=n&&n<t}function FE(n,e,t,r){if(!koe(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function m$(n){let e;for(e=0;n>dx;n>>=LE,e+=1);return e}const bg=n=>(LE<<BigInt(n))-LE;function Roe(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=r(n),o=r(n),c=0;const u=()=>{s.fill(1),o.fill(0),c=0},f=(...g)=>t(o,s,...g),d=(g=r(0))=>{o=f(i(0),g),s=f(),g.length!==0&&(o=f(i(1),g),s=f())},p=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const m=[];for(;g<e;){s=f();const v=s.slice();m.push(v),g+=s.length}return Wa(...m)};return(g,m)=>{u(),d(g);let v;for(;!(v=m(p()));)d();return u(),v}}function ww(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,s,o){const c=n[i];if(o&&c===void 0)return;const u=typeof c;if(u!==s||c===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${u}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(t).forEach(([i,s])=>r(i,s,!0))}function mO(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const Sr=BigInt(0),tr=BigInt(1),xl=BigInt(2),w$=BigInt(3),b$=BigInt(4),v$=BigInt(5),Uoe=BigInt(7),E$=BigInt(8),Loe=BigInt(9),x$=BigInt(16);function qr(n,e){const t=n%e;return t>=Sr?t:e+t}function Di(n,e,t){let r=n;for(;e-- >Sr;)r*=r,r%=t;return r}function wO(n,e){if(n===Sr)throw new Error("invert: expected non-zero number");if(e<=Sr)throw new Error("invert: expected positive modulus, got "+e);let t=qr(n,e),r=e,i=Sr,s=tr;for(;t!==Sr;){const o=r/t,c=r%t,u=i-s*o;r=t,t=c,i=s,s=u}if(r!==tr)throw new Error("invert: does not exist");return qr(i,e)}function yx(n,e,t){if(!n.eql(n.sqr(e),t))throw new Error("Cannot find square root")}function A$(n,e){const t=(n.ORDER+tr)/b$,r=n.pow(e,t);return yx(n,r,e),r}function Foe(n,e){const t=(n.ORDER-v$)/E$,r=n.mul(e,xl),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,xl),i),c=n.mul(s,n.sub(o,n.ONE));return yx(n,c,e),c}function Moe(n){const e=Nc(n),t=S$(n),r=t(e,e.neg(e.ONE)),i=t(e,r),s=t(e,e.neg(r)),o=(n+Uoe)/x$;return(c,u)=>{let f=c.pow(u,o),d=c.mul(f,r);const p=c.mul(f,i),g=c.mul(f,s),m=c.eql(c.sqr(d),u),v=c.eql(c.sqr(p),u);f=c.cmov(f,d,m),d=c.cmov(g,p,v);const b=c.eql(c.sqr(d),u),A=c.cmov(f,d,b);return yx(c,A,u),A}}function S$(n){if(n<w$)throw new Error("sqrt is not defined for small field");let e=n-tr,t=0;for(;e%xl===Sr;)e/=xl,t++;let r=xl;const i=Nc(n);for(;bO(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return A$;let s=i.pow(r,e);const o=(e+tr)/xl;return function(c,u){if(c.is0(u))return u;if(bO(c,u)!==1)throw new Error("Cannot find square root");let f=t,d=c.mul(c.ONE,s),p=c.pow(u,e),g=c.pow(u,o);for(;!c.eql(p,c.ONE);){if(c.is0(p))return c.ZERO;let m=1,v=c.sqr(p);for(;!c.eql(v,c.ONE);)if(m++,v=c.sqr(v),m===f)throw new Error("Cannot find square root");const b=tr<<BigInt(f-m-1),A=c.pow(d,b);f=m,d=c.sqr(A),p=c.mul(p,d),g=c.mul(g,A)}return g}}function joe(n){return n%b$===w$?A$:n%E$===v$?Foe:n%x$===Loe?Moe(n):S$(n)}const zoe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Hoe(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=zoe.reduce((r,i)=>(r[i]="function",r),e);return ww(n,t),n}function Voe(n,e,t){if(t<Sr)throw new Error("invalid exponent, negatives unsupported");if(t===Sr)return n.ONE;if(t===tr)return e;let r=n.ONE,i=e;for(;t>Sr;)t&tr&&(r=n.mul(r,i)),i=n.sqr(i),t>>=tr;return r}function I$(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,c,u)=>n.is0(c)?o:(r[u]=o,n.mul(o,c)),n.ONE),s=n.inv(i);return e.reduceRight((o,c,u)=>n.is0(c)?o:(r[u]=n.mul(o,r[u]),n.mul(o,c)),s),r}function bO(n,e){const t=(n.ORDER-tr)/xl,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function O$(n,e){e!==void 0&&Sc(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Nc(n,e,t=!1,r={}){if(n<=Sr)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,s,o=!1,c;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const g=e;g.BITS&&(i=g.BITS),g.sqrt&&(s=g.sqrt),typeof g.isLE=="boolean"&&(t=g.isLE),typeof g.modFromBytes=="boolean"&&(o=g.modFromBytes),c=g.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:u,nByteLength:f}=O$(n,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const p=Object.freeze({ORDER:n,isLE:t,BITS:u,BYTES:f,MASK:bg(u),ZERO:Sr,ONE:tr,allowedLengths:c,create:g=>qr(g,n),isValid:g=>{if(typeof g!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof g);return Sr<=g&&g<n},is0:g=>g===Sr,isValidNot0:g=>!p.is0(g)&&p.isValid(g),isOdd:g=>(g&tr)===tr,neg:g=>qr(-g,n),eql:(g,m)=>g===m,sqr:g=>qr(g*g,n),add:(g,m)=>qr(g+m,n),sub:(g,m)=>qr(g-m,n),mul:(g,m)=>qr(g*m,n),pow:(g,m)=>Voe(p,g,m),div:(g,m)=>qr(g*wO(m,n),n),sqrN:g=>g*g,addN:(g,m)=>g+m,subN:(g,m)=>g-m,mulN:(g,m)=>g*m,inv:g=>wO(g,n),sqrt:s||(g=>(d||(d=joe(n)),d(p,g))),toBytes:g=>t?gx(g,f):px(g,f),fromBytes:(g,m=!0)=>{if(c){if(!c.includes(g.length)||g.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+g.length);const b=new Uint8Array(f);b.set(g,t?0:b.length-g.length),g=b}if(g.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+g.length);let v=t?Em(g):mw(g);if(o&&(v=qr(v,n)),!m&&!p.isValid(v))throw new Error("invalid field element: outside of range 0..ORDER");return v},invertBatch:g=>I$(p,g),cmov:(g,m,v)=>v?m:g});return Object.freeze(p)}function B$(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function P$(n){const e=B$(n);return e+Math.ceil(e/2)}function qoe(n,e,t=!1){const r=n.length,i=B$(e),s=P$(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?Em(n):mw(n),c=qr(o,e-tr)+tr;return t?gx(c,i):px(c,i)}const Ih=BigInt(0),Al=BigInt(1);function xm(n,e){const t=e.negate();return n?t:e}function H2(n,e){const t=I$(n.Fp,e.map(r=>r.Z));return e.map((r,i)=>n.fromAffine(r.toAffine(t[i])))}function C$(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function V2(n,e){C$(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=bg(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function vO(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t;let c=Number(n&i),u=n>>o;c>r&&(c-=s,u+=Al);const f=e*r,d=f+Math.abs(c)-1,p=c===0,g=c<0,m=e%2!==0;return{nextN:u,offset:d,isZero:p,isNeg:g,isNegF:m,offsetF:f}}function Koe(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function Goe(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const q2=new WeakMap,_$=new WeakMap;function K2(n){return _$.get(n)||1}function EO(n){if(n!==Ih)throw new Error("invalid wNAF")}class Woe{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>Ih;)t&Al&&(r=r.add(i)),i=i.double(),t>>=Al;return r}precomputeWindow(e,t){const{windows:r,windowSize:i}=V2(t,this.bits),s=[];let o=e,c=o;for(let u=0;u<r;u++){c=o,s.push(c);for(let f=1;f<i;f++)c=c.add(o),s.push(c);o=c.double()}return s}wNAF(e,t,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=V2(e,this.bits);for(let c=0;c<o.windows;c++){const{nextN:u,offset:f,isZero:d,isNeg:p,isNegF:g,offsetF:m}=vO(r,c,o);r=u,d?s=s.add(xm(g,t[m])):i=i.add(xm(p,t[f]))}return EO(r),{p:i,f:s}}wNAFUnsafe(e,t,r,i=this.ZERO){const s=V2(e,this.bits);for(let o=0;o<s.windows&&r!==Ih;o++){const{nextN:c,offset:u,isZero:f,isNeg:d}=vO(r,o,s);if(r=c,!f){const p=t[u];i=i.add(d?p.negate():p)}}return EO(r),i}getPrecomputes(e,t,r){let i=q2.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof r=="function"&&(i=r(i)),q2.set(t,i))),i}cached(e,t,r){const i=K2(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){const s=K2(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),t,i)}createCache(e,t){C$(t,this.bits),_$.set(e,t),q2.delete(e)}hasCache(e){return K2(e)!==1}}function Qoe(n,e,t,r){let i=e,s=n.ZERO,o=n.ZERO;for(;t>Ih||r>Ih;)t&Al&&(s=s.add(i)),r&Al&&(o=o.add(i)),i=i.double(),t>>=Al,r>>=Al;return{p1:s,p2:o}}function Zoe(n,e,t,r){Koe(t,n),Goe(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=m$(BigInt(i));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const f=bg(u),d=new Array(Number(f)+1).fill(o),p=Math.floor((e.BITS-1)/u)*u;let g=o;for(let m=p;m>=0;m-=u){d.fill(o);for(let b=0;b<s;b++){const A=r[b],N=Number(A>>BigInt(m)&f);d[N]=d[N].add(t[b])}let v=o;for(let b=d.length-1,A=o;b>0;b--)A=A.add(d[b]),v=v.add(A);if(g=g.add(v),m!==0)for(let b=0;b<u;b++)g=g.double()}return g}function xO(n,e,t){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Hoe(e),e}else return Nc(n,{isLE:t})}function Joe(n,e,t={},r){if(r===void 0&&(r=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>Ih))throw new Error(`CURVE.${c} must be positive bigint`)}const i=xO(e.p,t.Fp,r),s=xO(e.n,t.Fn,r),o=["Gx","Gy","a","b"];for(const c of o)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),i$("HashToScalar-");const Hd=BigInt(0),Qu=BigInt(1),ly=BigInt(2);function Yoe(n){return ww(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function Xoe(n){const e=Yoe(n),{P:t,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,c=r==="x25519";if(!c&&r!=="x448")throw new Error("invalid type");const u=o||ux,f=c?255:448,d=c?32:56,p=BigInt(c?9:5),g=BigInt(c?121665:39081),m=c?ly**BigInt(254):ly**BigInt(447),v=c?BigInt(8)*ly**BigInt(251)-Qu:BigInt(4)*ly**BigInt(445)-Qu,b=m+v+Qu,A=z=>qr(z,t),N=R(p);function R(z){return gx(A(z),d)}function O(z){const P=jn("u coordinate",z,d);return c&&(P[31]&=127),A(Em(P))}function T(z){return Em(i(jn("scalar",z,d)))}function k(z,P){const D=V(O(P),T(z));if(D===Hd)throw new Error("invalid private or public key received");return R(D)}function j(z){return k(z,N)}function H(z,P,D){const w=A(z*(P-D));return P=A(P-w),D=A(D+w),{x_2:P,x_3:D}}function V(z,P){FE("u",z,Hd,t),FE("scalar",P,m,b);const D=P,w=z;let x=Qu,B=Hd,C=z,I=Qu,_=Hd;for(let U=BigInt(f-1);U>=Hd;U--){const Y=D>>U&Qu;_^=Y,{x_2:x,x_3:C}=H(_,x,C),{x_2:B,x_3:I}=H(_,B,I),_=Y;const q=x+B,Z=A(q*q),te=x-B,re=A(te*te),le=Z-re,ie=C+I,ue=C-I,Ne=A(ue*q),Re=A(ie*te),Te=Ne+Re,Ve=Ne-Re;C=A(Te*Te),I=A(w*A(Ve*Ve)),x=A(Z*re),B=A(le*(Z+A(g*le)))}({x_2:x,x_3:C}=H(_,x,C)),{x_2:B,x_3:I}=H(_,B,I);const $=s(B);return A(x*$)}const M={secretKey:d,publicKey:d,seed:d},K=(z=u(d))=>(Ji(z,M.seed),z);function Q(z){const P=K(z);return{secretKey:P,publicKey:j(P)}}return{keygen:Q,getSharedSecret:(z,P)=>k(z,P),getPublicKey:z=>j(z),scalarMult:k,scalarMultBase:j,utils:{randomSecretKey:K,randomPrivateKey:K},GuBytes:N.slice(),lengths:M}}const eae=BigInt(1),AO=BigInt(2),tae=BigInt(3),nae=BigInt(5);BigInt(8);const N$=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),rae={p:N$,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function iae(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=N$,o=n*n%s*n%s,c=Di(o,AO,s)*o%s,u=Di(c,eae,s)*n%s,f=Di(u,nae,s)*u%s,d=Di(f,e,s)*f%s,p=Di(d,t,s)*d%s,g=Di(p,r,s)*p%s,m=Di(g,i,s)*g%s,v=Di(m,i,s)*g%s,b=Di(v,e,s)*f%s;return{pow_p_5_8:Di(b,AO,s)*n%s,b2:o}}function sae(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const oae=Nc(rae.p,{isLE:!0});(()=>{const n=oae.ORDER;return Xoe({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=iae(e);return qr(Di(t,tae,n)*r,n)},adjustScalarBytes:sae})})();const SO=(n,e)=>(n+(n>=0?e:-e)/D$)/e;function aae(n,e,t){const[[r,i],[s,o]]=e,c=SO(o*n,t),u=SO(-i*n,t);let f=n-c*r-u*s,d=-c*i-u*o;const p=f<Po,g=d<Po;p&&(f=-f),g&&(d=-d);const m=bg(Math.ceil(m$(t)/2))+Ef;if(f<Po||f>=m||d<Po||d>=m)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:p,k1:f,k2neg:g,k2:d}}function ME(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function G2(n,e){const t={};for(let r of Object.keys(e))t[r]=n[r]===void 0?e[r]:n[r];return vm(t.lowS,"lowS"),vm(t.prehash,"prehash"),t.format!==void 0&&ME(t.format),t}class cae extends Error{constructor(e=""){super(e)}}const uo={Err:cae,_tlv:{encode:(n,e)=>{const{Err:t}=uo;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=cy(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?cy(i.length/2|128):"";return cy(n)+s+i+e},decode(n,e){const{Err:t}=uo;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new t("tlv.decode: length bytes not complete");if(f[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const d of f)o=o<<8|d;if(r+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=uo;if(n<Po)throw new e("integer: negative integers are not allowed");let t=cy(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=uo;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return mw(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=uo,i=jn("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,s),{v:f,l:d}=r.decode(2,u);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(f)}},hexFromSig(n){const{_tlv:e,_int:t}=uo,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},Po=BigInt(0),Ef=BigInt(1),D$=BigInt(2),uy=BigInt(3),lae=BigInt(4);function af(n,e){const{BYTES:t}=n;let r;if(typeof e=="bigint")r=e;else{let i=jn("private key",e);try{r=n.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function uae(n,e={}){const t=Joe("weierstrass",n,e),{Fp:r,Fn:i}=t;let s=t.CURVE;const{h:o,n:c}=s;ww(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=e;if(u&&(!r.is0(s.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=T$(r,i);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(z,P,D){const{x:w,y:x}=P.toAffine(),B=r.toBytes(w);if(vm(D,"isCompressed"),D){d();const C=!r.isOdd(x);return Wa($$(C),B)}else return Wa(Uint8Array.of(4),B,r.toBytes(x))}function g(z){El(z,void 0,"Point");const{publicKey:P,publicKeyUncompressed:D}=f,w=z.length,x=z[0],B=z.subarray(1);if(w===P&&(x===2||x===3)){const C=r.fromBytes(B);if(!r.isValid(C))throw new Error("bad point: is not on curve, wrong x");const I=b(C);let _;try{_=r.sqrt(I)}catch(U){const Y=U instanceof Error?": "+U.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}d();const $=r.isOdd(_);return(x&1)===1!==$&&(_=r.neg(_)),{x:C,y:_}}else if(w===D&&x===4){const C=r.BYTES,I=r.fromBytes(B.subarray(0,C)),_=r.fromBytes(B.subarray(C,C*2));if(!A(I,_))throw new Error("bad point: is not on curve");return{x:I,y:_}}else throw new Error(`bad point: got length ${w}, expected compressed=${P} or uncompressed=${D}`)}const m=e.toBytes||p,v=e.fromBytes||g;function b(z){const P=r.sqr(z),D=r.mul(P,z);return r.add(r.add(D,r.mul(z,s.a)),s.b)}function A(z,P){const D=r.sqr(P),w=b(z);return r.eql(D,w)}if(!A(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const N=r.mul(r.pow(s.a,uy),lae),R=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(N,R)))throw new Error("bad curve params: a or b");function O(z,P,D=!1){if(!r.isValid(P)||D&&r.is0(P))throw new Error(`bad point coordinate ${z}`);return P}function T(z){if(!(z instanceof M))throw new Error("ProjectivePoint expected")}function k(z){if(!u||!u.basises)throw new Error("no endo");return aae(z,u.basises,i.ORDER)}const j=mO((z,P)=>{const{X:D,Y:w,Z:x}=z;if(r.eql(x,r.ONE))return{x:D,y:w};const B=z.is0();P==null&&(P=B?r.ONE:r.inv(x));const C=r.mul(D,P),I=r.mul(w,P),_=r.mul(x,P);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(_,r.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),H=mO(z=>{if(z.is0()){if(e.allowInfinityPoint&&!r.is0(z.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:D}=z.toAffine();if(!r.isValid(P)||!r.isValid(D))throw new Error("bad point: x or y not field elements");if(!A(P,D))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function V(z,P,D,w,x){return D=new M(r.mul(D.X,z),D.Y,D.Z),P=xm(w,P),D=xm(x,D),P.add(D)}class M{constructor(P,D,w){this.X=O("x",P),this.Y=O("y",D,!0),this.Z=O("z",w),Object.freeze(this)}static CURVE(){return s}static fromAffine(P){const{x:D,y:w}=P||{};if(!P||!r.isValid(D)||!r.isValid(w))throw new Error("invalid affine point");if(P instanceof M)throw new Error("projective point not allowed");return r.is0(D)&&r.is0(w)?M.ZERO:new M(D,w,r.ONE)}static fromBytes(P){const D=M.fromAffine(v(El(P,void 0,"point")));return D.assertValidity(),D}static fromHex(P){return M.fromBytes(jn("pointHex",P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,D=!0){return Q.createCache(this,P),D||this.multiply(uy),this}assertValidity(){H(this)}hasEvenY(){const{y:P}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(P)}equals(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P,_=r.eql(r.mul(D,I),r.mul(B,x)),$=r.eql(r.mul(w,I),r.mul(C,x));return _&&$}negate(){return new M(this.X,r.neg(this.Y),this.Z)}double(){const{a:P,b:D}=s,w=r.mul(D,uy),{X:x,Y:B,Z:C}=this;let I=r.ZERO,_=r.ZERO,$=r.ZERO,U=r.mul(x,x),Y=r.mul(B,B),q=r.mul(C,C),Z=r.mul(x,B);return Z=r.add(Z,Z),$=r.mul(x,C),$=r.add($,$),I=r.mul(P,$),_=r.mul(w,q),_=r.add(I,_),I=r.sub(Y,_),_=r.add(Y,_),_=r.mul(I,_),I=r.mul(Z,I),$=r.mul(w,$),q=r.mul(P,q),Z=r.sub(U,q),Z=r.mul(P,Z),Z=r.add(Z,$),$=r.add(U,U),U=r.add($,U),U=r.add(U,q),U=r.mul(U,Z),_=r.add(_,U),q=r.mul(B,C),q=r.add(q,q),U=r.mul(q,Z),I=r.sub(I,U),$=r.mul(q,Y),$=r.add($,$),$=r.add($,$),new M(I,_,$)}add(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P;let _=r.ZERO,$=r.ZERO,U=r.ZERO;const Y=s.a,q=r.mul(s.b,uy);let Z=r.mul(D,B),te=r.mul(w,C),re=r.mul(x,I),le=r.add(D,w),ie=r.add(B,C);le=r.mul(le,ie),ie=r.add(Z,te),le=r.sub(le,ie),ie=r.add(D,x);let ue=r.add(B,I);return ie=r.mul(ie,ue),ue=r.add(Z,re),ie=r.sub(ie,ue),ue=r.add(w,x),_=r.add(C,I),ue=r.mul(ue,_),_=r.add(te,re),ue=r.sub(ue,_),U=r.mul(Y,ie),_=r.mul(q,re),U=r.add(_,U),_=r.sub(te,U),U=r.add(te,U),$=r.mul(_,U),te=r.add(Z,Z),te=r.add(te,Z),re=r.mul(Y,re),ie=r.mul(q,ie),te=r.add(te,re),re=r.sub(Z,re),re=r.mul(Y,re),ie=r.add(ie,re),Z=r.mul(te,ie),$=r.add($,Z),Z=r.mul(ue,ie),_=r.mul(le,_),_=r.sub(_,Z),Z=r.mul(le,te),U=r.mul(ue,U),U=r.add(U,Z),new M(_,$,U)}subtract(P){return this.add(P.negate())}is0(){return this.equals(M.ZERO)}multiply(P){const{endo:D}=e;if(!i.isValidNot0(P))throw new Error("invalid scalar: out of range");let w,x;const B=C=>Q.cached(this,C,I=>H2(M,I));if(D){const{k1neg:C,k1:I,k2neg:_,k2:$}=k(P),{p:U,f:Y}=B(I),{p:q,f:Z}=B($);x=Y.add(Z),w=V(D.beta,U,q,C,_)}else{const{p:C,f:I}=B(P);w=C,x=I}return H2(M,[w,x])[0]}multiplyUnsafe(P){const{endo:D}=e,w=this;if(!i.isValid(P))throw new Error("invalid scalar: out of range");if(P===Po||w.is0())return M.ZERO;if(P===Ef)return w;if(Q.hasCache(this))return this.multiply(P);if(D){const{k1neg:x,k1:B,k2neg:C,k2:I}=k(P),{p1:_,p2:$}=Qoe(M,w,B,I);return V(D.beta,_,$,x,C)}else return Q.unsafe(w,P)}multiplyAndAddUnsafe(P,D,w){const x=this.multiplyUnsafe(D).add(P.multiplyUnsafe(w));return x.is0()?void 0:x}toAffine(P){return j(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return o===Ef?!0:P?P(M,this):Q.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:P}=e;return o===Ef?this:P?P(M,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(P=!0){return vm(P,"isCompressed"),this.assertValidity(),m(M,this,P)}toHex(P=!0){return vf(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(P=!0){return this.toBytes(P)}_setWindowSize(P){this.precompute(P)}static normalizeZ(P){return H2(M,P)}static msm(P,D){return Zoe(M,i,P,D)}static fromPrivateKey(P){return M.BASE.multiply(af(i,P))}}M.BASE=new M(s.Gx,s.Gy,r.ONE),M.ZERO=new M(r.ZERO,r.ONE,r.ZERO),M.Fp=r,M.Fn=i;const K=i.BITS,Q=new Woe(M,e.endo?Math.ceil(K/2):K);return M.BASE.precompute(8),M}function $$(n){return Uint8Array.of(n?2:3)}function T$(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function fae(n,e={}){const{Fn:t}=n,r=e.randomBytes||ux,i=Object.assign(T$(n.Fp,t),{seed:P$(t.ORDER)});function s(g){try{return!!af(t,g)}catch{return!1}}function o(g,m){const{publicKey:v,publicKeyUncompressed:b}=i;try{const A=g.length;return m===!0&&A!==v||m===!1&&A!==b?!1:!!n.fromBytes(g)}catch{return!1}}function c(g=r(i.seed)){return qoe(El(g,i.seed,"seed"),t.ORDER)}function u(g,m=!0){return n.BASE.multiply(af(t,g)).toBytes(m)}function f(g){const m=c(g);return{secretKey:m,publicKey:u(m)}}function d(g){if(typeof g=="bigint")return!1;if(g instanceof n)return!0;const{secretKey:m,publicKey:v,publicKeyUncompressed:b}=i;if(t.allowedLengths||m===v)return;const A=jn("key",g).length;return A===v||A===b}function p(g,m,v=!0){if(d(g)===!0)throw new Error("first arg must be private key");if(d(m)===!1)throw new Error("second arg must be public key");const b=af(t,g);return n.fromHex(m).multiply(b).toBytes(v)}return Object.freeze({getPublicKey:u,getSharedSecret:p,keygen:f,Point:n,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:s,randomPrivateKey:c,normPrivateKeyToScalar:g=>af(t,g),precompute(g=8,m=n.BASE){return m.precompute(g,!1)}},lengths:i})}function hae(n,e,t={}){e$(e),ww(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||ux,i=t.hmac||((D,...w)=>g$(e,D,Wa(...w))),{Fp:s,Fn:o}=n,{ORDER:c,BITS:u}=o,{keygen:f,getPublicKey:d,getSharedSecret:p,utils:g,lengths:m}=fae(n,t),v={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},b="compact";function A(D){const w=c>>Ef;return D>w}function N(D,w){if(!o.isValidNot0(w))throw new Error(`invalid signature ${D}: out of range 1..Point.Fn.ORDER`);return w}function R(D,w){ME(w);const x=m.signature,B=w==="compact"?x:w==="recovered"?x+1:void 0;return El(D,B,`${w} signature`)}class O{constructor(w,x,B){this.r=N("r",w),this.s=N("s",x),B!=null&&(this.recovery=B),Object.freeze(this)}static fromBytes(w,x=b){R(w,x);let B;if(x==="der"){const{r:$,s:U}=uo.toSig(El(w));return new O($,U)}x==="recovered"&&(B=w[0],x="compact",w=w.subarray(1));const C=o.BYTES,I=w.subarray(0,C),_=w.subarray(C,C*2);return new O(o.fromBytes(I),o.fromBytes(_),B)}static fromHex(w,x){return this.fromBytes(bm(w),x)}addRecoveryBit(w){return new O(this.r,this.s,w)}recoverPublicKey(w){const x=s.ORDER,{r:B,s:C,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(c*D$<x&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const _=I===2||I===3?B+c:B;if(!s.isValid(_))throw new Error("recovery id 2 or 3 invalid");const $=s.toBytes(_),U=n.fromBytes(Wa($$((I&1)===0),$)),Y=o.inv(_),q=k(jn("msgHash",w)),Z=o.create(-q*Y),te=o.create(C*Y),re=n.BASE.multiplyUnsafe(Z).add(U.multiplyUnsafe(te));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return A(this.s)}toBytes(w=b){if(ME(w),w==="der")return bm(uo.hexFromSig(this));const x=o.toBytes(this.r),B=o.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Wa(Uint8Array.of(this.recovery),x,B)}return Wa(x,B)}toHex(w){return vf(this.toBytes(w))}assertValidity(){}static fromCompact(w){return O.fromBytes(jn("sig",w),"compact")}static fromDER(w){return O.fromBytes(jn("sig",w),"der")}normalizeS(){return this.hasHighS()?new O(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return vf(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return vf(this.toBytes("compact"))}}const T=t.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const w=mw(D),x=D.length*8-u;return x>0?w>>BigInt(x):w},k=t.bits2int_modN||function(D){return o.create(T(D))},j=bg(u);function H(D){return FE("num < 2^"+u,D,Po,j),o.toBytes(D)}function V(D,w){return El(D,void 0,"message"),w?El(e(D),void 0,"prehashed message"):D}function M(D,w,x){if(["recovered","canonical"].some(te=>te in x))throw new Error("sign() legacy options not supported");const{lowS:B,prehash:C,extraEntropy:I}=G2(x,v);D=V(D,C);const _=k(D),$=af(o,w),U=[H($),H(_)];if(I!=null&&I!==!1){const te=I===!0?r(m.secretKey):I;U.push(jn("extraEntropy",te))}const Y=Wa(...U),q=_;function Z(te){const re=T(te);if(!o.isValidNot0(re))return;const le=o.inv(re),ie=n.BASE.multiply(re).toAffine(),ue=o.create(ie.x);if(ue===Po)return;const Ne=o.create(le*o.create(q+ue*$));if(Ne===Po)return;let Re=(ie.x===ue?0:2)|Number(ie.y&Ef),Te=Ne;return B&&A(Ne)&&(Te=o.neg(Ne),Re^=1),new O(ue,Te,Re)}return{seed:Y,k2sig:Z}}function K(D,w,x={}){D=jn("message",D);const{seed:B,k2sig:C}=M(D,w,x);return Roe(e.outputLen,o.BYTES,i)(B,C)}function Q(D){let w;const x=typeof D=="string"||gw(D),B=!x&&D!==null&&typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!x&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(B)w=new O(D.r,D.s);else if(x){try{w=O.fromBytes(jn("sig",D),"der")}catch(C){if(!(C instanceof uo.Err))throw C}if(!w)try{w=O.fromBytes(jn("sig",D),"compact")}catch{return!1}}return w||!1}function z(D,w,x,B={}){const{lowS:C,prehash:I,format:_}=G2(B,v);if(x=jn("publicKey",x),w=V(jn("message",w),I),"strict"in B)throw new Error("options.strict was renamed to lowS");const $=_===void 0?Q(D):O.fromBytes(jn("sig",D),_);if($===!1)return!1;try{const U=n.fromBytes(x);if(C&&$.hasHighS())return!1;const{r:Y,s:q}=$,Z=k(w),te=o.inv(q),re=o.create(Z*te),le=o.create(Y*te),ie=n.BASE.multiplyUnsafe(re).add(U.multiplyUnsafe(le));return ie.is0()?!1:o.create(ie.x)===Y}catch{return!1}}function P(D,w,x={}){const{prehash:B}=G2(x,v);return w=V(w,B),O.fromBytes(D,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:f,getPublicKey:d,getSharedSecret:p,utils:g,lengths:m,Point:n,sign:K,verify:z,recoverPublicKey:P,Signature:O,hash:e})}function dae(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Nc(e.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),s={Fp:t,Fn:i,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function pae(n){const{CURVE:e,curveOpts:t}=dae(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,hash:n.hash,ecdsaOpts:r}}function gae(n,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},n,O$(t.Fn.ORDER,t.Fn.BITS))})}function yae(n){const{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:i}=pae(n),s=uae(e,t),o=hae(s,r,i);return gae(n,o)}function jE(n,e){const t=r=>yae({...n,hash:r});return{...t(e),create:t}}const k$={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},R$={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},U$={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},mae=Nc(k$.p),wae=Nc(R$.p),bae=Nc(U$.p);jE({...k$,Fp:mae,lowS:!1},ioe);jE({...R$,Fp:wae,lowS:!1},ooe),jE({...U$,Fp:bae,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},soe);function mx(n){return n.includes(":")}function sp(n){return mx(n)?n.split(":")[0]:n}const vae={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function IO(n,e){const{message:t,code:r}=vae[n];return{message:e?`${t} ${e}`:t,code:r}}function W2(n,e){return!!Array.isArray(n)}function gp(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function Eae({logger:n,name:e}){const t=typeof n=="string"?O3({opts:{level:n,name:e}}).logger:n;return t.level=typeof n=="string"?n:n.level,t}var fy={exports:{}},OO;function xae(){return OO||(OO=1,(function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ps<"u"&&Ps,r=(function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s})();(function(s){(function(o){var c=typeof s<"u"&&s||typeof self<"u"&&self||typeof Ps<"u"&&Ps||{},u={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function f(w){return w&&DataView.prototype.isPrototypeOf(w)}if(u.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(w){return w&&d.indexOf(Object.prototype.toString.call(w))>-1};function g(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function m(w){return typeof w!="string"&&(w=String(w)),w}function v(w){var x={next:function(){var B=w.shift();return{done:B===void 0,value:B}}};return u.iterable&&(x[Symbol.iterator]=function(){return x}),x}function b(w){this.map={},w instanceof b?w.forEach(function(x,B){this.append(B,x)},this):Array.isArray(w)?w.forEach(function(x){if(x.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+x.length);this.append(x[0],x[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(x){this.append(x,w[x])},this)}b.prototype.append=function(w,x){w=g(w),x=m(x);var B=this.map[w];this.map[w]=B?B+", "+x:x},b.prototype.delete=function(w){delete this.map[g(w)]},b.prototype.get=function(w){return w=g(w),this.has(w)?this.map[w]:null},b.prototype.has=function(w){return this.map.hasOwnProperty(g(w))},b.prototype.set=function(w,x){this.map[g(w)]=m(x)},b.prototype.forEach=function(w,x){for(var B in this.map)this.map.hasOwnProperty(B)&&w.call(x,this.map[B],B,this)},b.prototype.keys=function(){var w=[];return this.forEach(function(x,B){w.push(B)}),v(w)},b.prototype.values=function(){var w=[];return this.forEach(function(x){w.push(x)}),v(w)},b.prototype.entries=function(){var w=[];return this.forEach(function(x,B){w.push([B,x])}),v(w)},u.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function A(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function N(w){return new Promise(function(x,B){w.onload=function(){x(w.result)},w.onerror=function(){B(w.error)}})}function R(w){var x=new FileReader,B=N(x);return x.readAsArrayBuffer(w),B}function O(w){var x=new FileReader,B=N(x),C=/charset=([A-Za-z0-9_-]+)/.exec(w.type),I=C?C[1]:"utf-8";return x.readAsText(w,I),B}function T(w){for(var x=new Uint8Array(w),B=new Array(x.length),C=0;C<x.length;C++)B[C]=String.fromCharCode(x[C]);return B.join("")}function k(w){if(w.slice)return w.slice(0);var x=new Uint8Array(w.byteLength);return x.set(new Uint8Array(w)),x.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:u.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:u.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():u.arrayBuffer&&u.blob&&f(w)?(this._bodyArrayBuffer=k(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||p(w))?this._bodyArrayBuffer=k(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var w=A(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=A(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(u.blob)return this.blob().then(R);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=A(this);if(w)return w;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(K)}),this.json=function(){return this.text().then(JSON.parse)},this}var H=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function V(w){var x=w.toUpperCase();return H.indexOf(x)>-1?x:w}function M(w,x){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var B=x.body;if(w instanceof M){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,x.headers||(this.headers=new b(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!B&&w._bodyInit!=null&&(B=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new b(x.headers)),this.method=V(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal||(function(){if("AbortController"in c){var _=new AbortController;return _.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(B),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var C=/([?&])_=[^&]*/;if(C.test(this.url))this.url=this.url.replace(C,"$1_="+new Date().getTime());else{var I=/\?/;this.url+=(I.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function K(w){var x=new FormData;return w.trim().split("&").forEach(function(B){if(B){var C=B.split("="),I=C.shift().replace(/\+/g," "),_=C.join("=").replace(/\+/g," ");x.append(decodeURIComponent(I),decodeURIComponent(_))}}),x}function Q(w){var x=new b,B=w.replace(/\r?\n[\t ]+/g," ");return B.split("\r").map(function(C){return C.indexOf(`
`)===0?C.substr(1,C.length):C}).forEach(function(C){var I=C.split(":"),_=I.shift().trim();if(_){var $=I.join(":").trim();try{x.append(_,$)}catch(U){console.warn("Response "+U.message)}}}),x}j.call(M.prototype);function z(w,x){if(!(this instanceof z))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=x.statusText===void 0?"":""+x.statusText,this.headers=new b(x.headers),this.url=x.url||"",this._initBody(w)}j.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},z.error=function(){var w=new z(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var P=[301,302,303,307,308];z.redirect=function(w,x){if(P.indexOf(x)===-1)throw new RangeError("Invalid status code");return new z(null,{status:x,headers:{location:w}})},o.DOMException=c.DOMException;try{new o.DOMException}catch{o.DOMException=function(x,B){this.message=x,this.name=B;var C=Error(x);this.stack=C.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function D(w,x){return new Promise(function(B,C){var I=new M(w,x);if(I.signal&&I.signal.aborted)return C(new o.DOMException("Aborted","AbortError"));var _=new XMLHttpRequest;function $(){_.abort()}_.onload=function(){var q={statusText:_.statusText,headers:Q(_.getAllResponseHeaders()||"")};I.url.indexOf("file://")===0&&(_.status<200||_.status>599)?q.status=200:q.status=_.status,q.url="responseURL"in _?_.responseURL:q.headers.get("X-Request-URL");var Z="response"in _?_.response:_.responseText;setTimeout(function(){B(new z(Z,q))},0)},_.onerror=function(){setTimeout(function(){C(new TypeError("Network request failed"))},0)},_.ontimeout=function(){setTimeout(function(){C(new TypeError("Network request timed out"))},0)},_.onabort=function(){setTimeout(function(){C(new o.DOMException("Aborted","AbortError"))},0)};function U(q){try{return q===""&&c.location.href?c.location.href:q}catch{return q}}if(_.open(I.method,U(I.url),!0),I.credentials==="include"?_.withCredentials=!0:I.credentials==="omit"&&(_.withCredentials=!1),"responseType"in _&&(u.blob?_.responseType="blob":u.arrayBuffer&&(_.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof b||c.Headers&&x.headers instanceof c.Headers)){var Y=[];Object.getOwnPropertyNames(x.headers).forEach(function(q){Y.push(g(q)),_.setRequestHeader(q,m(x.headers[q]))}),I.headers.forEach(function(q,Z){Y.indexOf(Z)===-1&&_.setRequestHeader(Z,q)})}else I.headers.forEach(function(q,Z){_.setRequestHeader(Z,q)});I.signal&&(I.signal.addEventListener("abort",$),_.onreadystatechange=function(){_.readyState===4&&I.signal.removeEventListener("abort",$)}),_.send(typeof I._bodyInit>"u"?null:I._bodyInit)})}return D.polyfill=!0,c.fetch||(c.fetch=D,c.Headers=b,c.Request=M,c.Response=z),o.Headers=b,o.Request=M,o.Response=z,o.fetch=D,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(fy,fy.exports)),fy.exports}var Aae=xae();const BO=Jp(Aae),Sae=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),Iae=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Oae(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return Iae(n)}catch{return n}}function PO(n){return typeof n=="string"?n:Sae(n)||""}var Bae=Object.defineProperty,Pae=Object.defineProperties,Cae=Object.getOwnPropertyDescriptors,CO=Object.getOwnPropertySymbols,_ae=Object.prototype.hasOwnProperty,Nae=Object.prototype.propertyIsEnumerable,_O=(n,e,t)=>e in n?Bae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,NO=(n,e)=>{for(var t in e||(e={}))_ae.call(e,t)&&_O(n,t,e[t]);if(CO)for(var t of CO(e))Nae.call(e,t)&&_O(n,t,e[t]);return n},DO=(n,e)=>Pae(n,Cae(e));const Dae={Accept:"application/json","Content-Type":"application/json"},$ae="POST",$O={headers:Dae,method:$ae},TO=10;let L$=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Gr.EventEmitter,this.isAvailable=!1,this.registering=!1,!O5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=PO(e),r=await(await BO(this.url,DO(NO({},$O),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!O5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=PO({id:1,jsonrpc:"2.0",method:"test",params:[]});await BO(e,DO(NO({},$O),{body:t}))}this.onOpen()}catch(t){const r=this.parseError(t);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Oae(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=r.message||r.toString(),s=fw(e,i);this.events.emit("payload",s)}parseError(e,t=this.url){return OD(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>TO&&this.events.setMaxListeners(TO)}};function wx(n){return n==null||typeof n!="object"&&typeof n!="function"}function F$(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function M$(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Tae="[object RegExp]",j$="[object String]",z$="[object Number]",H$="[object Boolean]",V$="[object Arguments]",kae="[object Symbol]",Rae="[object Date]",Uae="[object Map]",Lae="[object Set]",Fae="[object Array]",Mae="[object ArrayBuffer]",jae="[object Object]",zae="[object DataView]",Hae="[object Uint8Array]",Vae="[object Uint8ClampedArray]",qae="[object Uint16Array]",Kae="[object Uint32Array]",Gae="[object Int8Array]",Wae="[object Int16Array]",Qae="[object Int32Array]",Zae="[object Float32Array]",Jae="[object Float64Array]";function bx(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Yae(n,e){return cf(n,void 0,n,new Map,e)}function cf(n,e,t,r=new Map,i=void 0){const s=i==null?void 0:i(n,e,t,r);if(s!=null)return s;if(wx(n))return n;if(r.has(n))return r.get(n);if(Array.isArray(n)){const o=new Array(n.length);r.set(n,o);for(let c=0;c<n.length;c++)o[c]=cf(n[c],c,t,r,i);return Object.hasOwn(n,"index")&&(o.index=n.index),Object.hasOwn(n,"input")&&(o.input=n.input),o}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const o=new RegExp(n.source,n.flags);return o.lastIndex=n.lastIndex,o}if(n instanceof Map){const o=new Map;r.set(n,o);for(const[c,u]of n)o.set(c,cf(u,c,t,r,i));return o}if(n instanceof Set){const o=new Set;r.set(n,o);for(const c of n)o.add(cf(c,void 0,t,r,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(bx(n)){const o=new(Object.getPrototypeOf(n)).constructor(n.length);r.set(n,o);for(let c=0;c<n.length;c++)o[c]=cf(n[c],c,t,r,i);return o}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const o=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return r.set(n,o),sl(o,n,t,r,i),o}if(typeof File<"u"&&n instanceof File){const o=new File([n],n.name,{type:n.type});return r.set(n,o),sl(o,n,t,r,i),o}if(n instanceof Blob){const o=new Blob([n],{type:n.type});return r.set(n,o),sl(o,n,t,r,i),o}if(n instanceof Error){const o=new n.constructor;return r.set(n,o),o.message=n.message,o.name=n.name,o.stack=n.stack,o.cause=n.cause,sl(o,n,t,r,i),o}if(typeof n=="object"&&Xae(n)){const o=Object.create(Object.getPrototypeOf(n));return r.set(n,o),sl(o,n,t,r,i),o}return n}function sl(n,e,t=n,r,i){const s=[...Object.keys(e),...F$(e)];for(let o=0;o<s.length;o++){const c=s[o],u=Object.getOwnPropertyDescriptor(n,c);(u==null||u.writable)&&(n[c]=cf(e[c],c,t,r,i))}}function Xae(n){switch(M$(n)){case V$:case Fae:case Mae:case zae:case H$:case Rae:case Zae:case Jae:case Gae:case Wae:case Qae:case Uae:case z$:case jae:case Tae:case Lae:case j$:case kae:case Hae:case Vae:case qae:case Kae:return!0;default:return!1}}function ece(n,e){return Yae(n,(t,r,i,s)=>{if(typeof n=="object")switch(Object.prototype.toString.call(n)){case z$:case j$:case H$:{const o=new n.constructor(n==null?void 0:n.valueOf());return sl(o,n),o}case V$:{const o={};return sl(o,n),o.length=n.length,o[Symbol.iterator]=n[Symbol.iterator],o}default:return}})}function kO(n){return ece(n)}function RO(n){return n!==null&&typeof n=="object"&&M$(n)==="[object Arguments]"}function UO(n){return typeof n=="object"&&n!==null}function tce(){}function nce(n){return bx(n)}function rce(n){var t;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!((t=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&t.writable)?!1:n.toString()===`[object ${r}]`}let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function ice(n){if(wx(n))return n;if(Array.isArray(n)||bx(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const e=Object.getPrototypeOf(n),t=e.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new t(n);if(n instanceof RegExp){const r=new t(n);return r.lastIndex=n.lastIndex,r}if(n instanceof DataView)return new t(n.buffer.slice(0));if(n instanceof Error){const r=new t(n.message);return r.stack=n.stack,r.name=n.name,r.cause=n.cause,r}if(typeof File<"u"&&n instanceof File)return new t([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const r=Object.create(e);return Object.assign(r,n)}return n}function sce(n,...e){const t=e.slice(0,-1),r=e[e.length-1];let i=n;for(let s=0;s<t.length;s++){const o=t[s];i=zE(i,o,r,new Map)}return i}function zE(n,e,t,r){if(wx(n)&&(n=Object(n)),e==null||typeof e!="object")return n;if(r.has(e))return ice(r.get(e));if(r.set(e,n),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...F$(e)];for(let s=0;s<i.length;s++){const o=i[s];let c=e[o],u=n[o];if(RO(c)&&(c={...c}),RO(u)&&(u={...u}),typeof Buffer<"u"&&Buffer.isBuffer(c)&&(c=kO(c)),Array.isArray(c))if(typeof u=="object"&&u!=null){const d=[],p=Reflect.ownKeys(u);for(let g=0;g<p.length;g++){const m=p[g];d[m]=u[m]}u=d}else u=[];const f=t(u,c,o,n,e,r);f!=null?n[o]=f:Array.isArray(c)||UO(u)&&UO(c)?n[o]=zE(u,c,t,r):u==null&&rce(c)?n[o]=zE({},c,t,r):u==null&&nce(c)?n[o]=kO(c):(u===void 0||c!==void 0)&&(n[o]=c)}return n}function oce(n,...e){return sce(n,...e,tce)}const LO="error",ace="wss://relay.walletconnect.org",cce="wc",q$="universal_provider",hy=`${cce}@2:${q$}:`,K$="https://rpc.walletconnect.org/v1/",G$="generic",lce=`${K$}bundler`,xf="call_status",uce=86400,vx={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var fce=Object.defineProperty,hce=Object.defineProperties,dce=Object.getOwnPropertyDescriptors,FO=Object.getOwnPropertySymbols,pce=Object.prototype.hasOwnProperty,gce=Object.prototype.propertyIsEnumerable,MO=(n,e,t)=>e in n?fce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dy=(n,e)=>{for(var t in e||(e={}))pce.call(e,t)&&MO(n,t,e[t]);if(FO)for(var t of FO(e))gce.call(e,t)&&MO(n,t,e[t]);return n},yce=(n,e)=>hce(n,dce(e));function W$(n,e,t){var r;const i=pp(n);return((r=e.rpcMap)==null?void 0:r[i.reference])||`${K$}?chainId=${i.namespace}:${i.reference}&projectId=${t}`}function mce(n){return n.includes(":")?n.split(":")[1]:n}function Q$(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function wce(n,e){const t=Object.keys(e.namespaces).filter(i=>i.includes(n));if(!t.length)return[];const r=[];return t.forEach(i=>{const s=e.namespaces[i].accounts;r.push(...s)}),r}function jO(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>{var r,i;return((r=t==null?void 0:t.chains)==null?void 0:r.length)&&((i=t==null?void 0:t.chains)==null?void 0:i.length)>0}))}function py(n={},e={}){const t=jO(zO(n)),r=jO(zO(e));return oce(t,r)}function zO(n){var e,t,r,i,s;const o={};if(!gp(n))return o;for(const[c,u]of Object.entries(n)){const f=mx(c)?[c]:u.chains,d=u.methods||[],p=u.events||[],g=u.rpcMap||{},m=sp(c);o[m]=yce(dy(dy({},o[m]),u),{chains:F2(f,(e=o[m])==null?void 0:e.chains),methods:F2(d,(t=o[m])==null?void 0:t.methods),events:F2(p,(r=o[m])==null?void 0:r.events)}),(gp(g)||gp(((i=o[m])==null?void 0:i.rpcMap)||{}))&&(o[m].rpcMap=dy(dy({},g),(s=o[m])==null?void 0:s.rpcMap))}return o}function HO(n){return n.includes(":")?n.split(":")[2]:n}function VO(n){const e={};for(const[t,r]of Object.entries(n)){const i=r.methods||[],s=r.events||[],o=r.accounts||[],c=mx(t)?[t]:r.chains?r.chains:Q$(r.accounts);e[t]={chains:c,methods:i,events:s,accounts:o}}return e}function Q2(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):(n=n.includes(":")?n.split(":")[1]:n,isNaN(Number(n))?n:Number(n))}function bce(n){try{const e=JSON.parse(n);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const Z$={},Af=n=>Z$[n],Z2=(n,e)=>{Z$[n]=e};var vce=Object.defineProperty,qO=Object.getOwnPropertySymbols,Ece=Object.prototype.hasOwnProperty,xce=Object.prototype.propertyIsEnumerable,KO=(n,e,t)=>e in n?vce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,GO=(n,e)=>{for(var t in e||(e={}))Ece.call(e,t)&&KO(n,t,e[t]);if(qO)for(var t of qO(e))xce.call(e,t)&&KO(n,t,e[t]);return n};const WO="eip155",Ace=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Sce=n=>n&&n.startsWith("0x")?BigInt(n).toString(10):n,J2=n=>n&&n.startsWith("0x")?n:`0x${BigInt(n).toString(16)}`,QO=n=>Object.keys(n).filter(e=>Ace.includes(e)).reduce((e,t)=>(e[t]=Ice(n[t]),e),{}),Ice=n=>typeof n=="string"&&bce(n)?JSON.parse(n):n,Oce=(n,e,t)=>{const{sessionProperties:r={},scopedProperties:i={}}=n,s={};if(!gp(i)&&!gp(r))return;const o=QO(r);for(const c of t){const u=Sce(c);if(!u)continue;s[J2(u)]=o;const f=i==null?void 0:i[`${WO}:${u}`];if(f){const d=f==null?void 0:f[`${WO}:${u}:${e}`];s[J2(u)]=GO(GO({},s[J2(u)]),QO(d||f))}}for(const[c,u]of Object.entries(s))Object.keys(u).length===0&&delete s[c];return Object.keys(s).length>0?s:void 0};var Bce=Object.defineProperty,Pce=(n,e,t)=>e in n?Bce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Cce=(n,e,t)=>Pce(n,e+"",t);let Y2,_ce=class J${constructor(e){Cce(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,t){return await this.storage.setItem(e,t)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return Y2||(Y2=new J$(e)),Y2}};var Nce=Object.defineProperty,Dce=Object.defineProperties,$ce=Object.getOwnPropertyDescriptors,ZO=Object.getOwnPropertySymbols,Tce=Object.prototype.hasOwnProperty,kce=Object.prototype.propertyIsEnumerable,JO=(n,e,t)=>e in n?Nce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rce=(n,e)=>{for(var t in e||(e={}))Tce.call(e,t)&&JO(n,t,e[t]);if(ZO)for(var t of ZO(e))kce.call(e,t)&&JO(n,t,e[t]);return n},Uce=(n,e)=>Dce(n,$ce(e));async function Lce(n,e){const t=pp(n.result.capabilities.caip345.caip2),r=n.result.capabilities.caip345.transactionHashes,i=await Promise.allSettled(r.map(p=>Fce(t.reference,p,e))),s=i.filter(p=>p.status==="fulfilled").map(p=>p.value).filter(p=>p);i.filter(p=>p.status==="rejected").forEach(p=>console.warn("Failed to fetch transaction receipt:",p.reason));const o=!s.length||s.some(p=>!p),c=s.every(p=>(p==null?void 0:p.status)==="0x1"),u=s.every(p=>(p==null?void 0:p.status)==="0x0"),f=s.some(p=>(p==null?void 0:p.status)==="0x0");let d;return o?d=100:c?d=200:u?d=500:f&&(d=600),{id:n.result.id,version:n.request.version,atomic:n.request.atomicRequired,chainId:n.request.chainId,capabilities:n.result.capabilities,receipts:s,status:d}}async function Fce(n,e,t){return await t(parseInt(n)).request(Vi("eth_getTransactionReceipt",[e]))}async function Mce({sendCalls:n,storage:e}){const t=await e.getItem(xf);await e.setItem(xf,Uce(Rce({},t),{[n.result.id]:{request:n.request,result:n.result,expiry:Ose(uce)}}))}async function jce({resultId:n,storage:e}){const t=await e.getItem(xf);if(t){delete t[n],await e.setItem(xf,t);for(const r in t)JD(t[r].expiry)&&delete t[r];await e.setItem(xf,t)}}async function zce({resultId:n,storage:e}){const t=await e.getItem(xf),r=t==null?void 0:t[n];if(r&&!JD(r.expiry))return r;await jce({resultId:n,storage:e})}var Hce=Object.defineProperty,Vce=Object.defineProperties,qce=Object.getOwnPropertyDescriptors,YO=Object.getOwnPropertySymbols,Kce=Object.prototype.hasOwnProperty,Gce=Object.prototype.propertyIsEnumerable,HE=(n,e,t)=>e in n?Hce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,X2=(n,e)=>{for(var t in e||(e={}))Kce.call(e,t)&&HE(n,t,e[t]);if(YO)for(var t of YO(e))Gce.call(e,t)&&HE(n,t,e[t]);return n},ev=(n,e)=>Vce(n,qce(e)),Jc=(n,e,t)=>HE(n,typeof e!="symbol"?e+"":e,t);class Wce{constructor(e){Jc(this,"name","eip155"),Jc(this,"client"),Jc(this,"chainId"),Jc(this,"namespace"),Jc(this,"httpProviders"),Jc(this,"events"),Jc(this,"storage"),this.namespace=e.namespace,this.events=Af("events"),this.client=Af("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=_ce.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t);const r=this.chainId;this.chainId=parseInt(e),this.events.emit(vx.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||W$(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new sx(new L$(r,Af("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=parseInt(mce(t));e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(e){const t=e||this.chainId;return this.httpProviders[t]||(this.httpProviders=ev(X2({},this.httpProviders),{[t]:this.createHttpProvider(t)}),this.httpProviders[t])}async handleSwitchChain(e){var t,r;let i=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,i,s,o;const c=(r=(t=e.request)==null?void 0:t.params)==null?void 0:r[0],u=((s=(i=e.request)==null?void 0:i.params)==null?void 0:s[1])||[];if(!c)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const f=this.client.session.get(e.topic),d=((o=f==null?void 0:f.sessionProperties)==null?void 0:o.capabilities)||{},p=`${c}${u.join(",")}`,g=d==null?void 0:d[p];if(g)return g;let m;try{m=Oce(f,c,u)}catch(b){console.warn("Failed to extract capabilities from session",b)}if(m)return m;const v=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:ev(X2({},f.sessionProperties||{}),{capabilities:ev(X2({},d||{}),{[p]:v})})})}catch(b){console.warn("Failed to update session with capabilities",b)}return v}async getCallStatus(e){var t,r,i;const s=this.client.session.get(e.topic),o=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(o){const f=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(f,e)}catch(d){console.warn("Failed to fetch call status from bundler",d,f)}}const c=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,e)}catch(f){console.warn("Failed to fetch call status from custom bundler",f,c)}const u=await zce({resultId:(i=e.request.params)==null?void 0:i[0],storage:this.storage});if(u)try{return await Lce(u,this.getHttpProvider.bind(this))}catch(f){console.warn("Failed to fetch call status from stored send calls",f,u)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Vi("eth_getUserOperationReceipt",[(r=t.request.params)==null?void 0:r[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,t){return`${lce}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}async sendCalls(e){var t,r,i;const s=await this.client.request(e),o=(t=e.request.params)==null?void 0:t[0],c=s==null?void 0:s.id,u=(s==null?void 0:s.capabilities)||{},f=(r=u==null?void 0:u.caip345)==null?void 0:r.caip2,d=(i=u==null?void 0:u.caip345)==null?void 0:i.transactionHashes;return!c||!f||!(d!=null&&d.length)||await Mce({sendCalls:{request:o,result:s},storage:this.storage}),s}}var Qce=Object.defineProperty,Zce=(n,e,t)=>e in n?Qce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Zu=(n,e,t)=>Zce(n,typeof e!="symbol"?e+"":e,t);class Jce{constructor(e){Zu(this,"name",G$),Zu(this,"client"),Zu(this,"httpProviders"),Zu(this,"events"),Zu(this,"namespace"),Zu(this,"chainId"),this.namespace=e.namespace,this.events=Af("events"),this.client=Af("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t);const r=this.chainId;this.chainId=e,this.events.emit(vx.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return pp(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const r={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(i=>{var s,o;const c=pp(i),u=(o=(s=this.namespace)==null?void 0:s.rpcMap)==null?void 0:o[`${c.namespace}:${c.reference}`];r[c.reference]=this.createHttpProvider(i,u)}),r}getHttpProvider(e){const t=pp(e).reference,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||W$(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new sx(new L$(r,Af("disableProviderPing")))}}var Yce=Object.defineProperty,Xce=Object.defineProperties,ele=Object.getOwnPropertyDescriptors,XO=Object.getOwnPropertySymbols,tle=Object.prototype.hasOwnProperty,nle=Object.prototype.propertyIsEnumerable,VE=(n,e,t)=>e in n?Yce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Vd=(n,e)=>{for(var t in e||(e={}))tle.call(e,t)&&VE(n,t,e[t]);if(XO)for(var t of XO(e))nle.call(e,t)&&VE(n,t,e[t]);return n},gy=(n,e)=>Xce(n,ele(e)),si=(n,e,t)=>VE(n,typeof e!="symbol"?e+"":e,t);class Ex{constructor(e){si(this,"client"),si(this,"namespaces"),si(this,"optionalNamespaces"),si(this,"sessionProperties"),si(this,"scopedProperties"),si(this,"events",new p3),si(this,"rpcProviders",{}),si(this,"session"),si(this,"providerOpts"),si(this,"logger"),si(this,"uri"),si(this,"disableProviderPing",!1);var t,r;this.providerOpts=e,this.logger=Eae({logger:(t=e.logger)!=null?t:LO,name:(r=this.providerOpts.name)!=null?r:q$}),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new Ex(e);return await t.initialize(),t}async request(e,t,r){const[i,s]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Vd({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,i){const s=new Date().getTime();this.request(e,r,i).then(o=>t(null,Up(s,o))).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:IO("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const s=await i();if(this.session=s.session,this.session){const o=VO(this.session.namespaces);this.namespaces=py(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const i=await r();this.session=i;const s=VO(i.namespaces);return this.namespaces=py(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,i]=this.validateChain(e);this.getProvider(r).setDefaultChain(i,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(!W2(t))return;for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}catch(t){this.logger.warn(t,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await Ese.init({core:this.providerOpts.core,logger:this.providerOpts.logger||LO,relayUrl:this.providerOpts.relayUrl||ace,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error(r,"Failed to get session"),new Error(`The provided session: ${(t=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:t.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>sp(t)))];Z2("client",this.client),Z2("events",this.events),Z2("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const r=wce(t,this.session);if((r==null?void 0:r.length)===0)return;const i=Q$(r),s=py(this.namespaces,this.optionalNamespaces),o=gy(Vd({},s[t]),{accounts:r,chains:i});switch(t){case"eip155":this.rpcProviders[t]=new Wce({namespace:o});break;default:this.rpcProviders[t]=new Jce({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;const{topic:r}=e;r===((t=this.session)==null?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;const{params:r,topic:i}=e;if(i!==((t=this.session)==null?void 0:t.topic))return;const{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&W2(o)&&this.events.emit("accountsChanged",o.map(HO))}else if(s.name==="chainChanged"){const o=r.chainId,c=r.event.data,u=sp(o),f=Q2(o)!==Q2(c)?`${u}:${Q2(c)}`:o;this.onChainChanged({currentCaipChainId:f})}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,i;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:s}=t,o=(i=this.client)==null?void 0:i.session.get(e);this.session=gy(Vd({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===((t=this.session)==null?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",gy(Vd({},IO("USER_DISCONNECTED")),{data:e.topic})))}),this.on(vx.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(gy(Vd({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[G$]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:s}=e;this.optionalNamespaces=py(t,r),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[t,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(o=>sp(o)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const i=sp(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:t,internal:r=!1}){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(this.updateNamespaceChain(i,s),r?(this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:i,currentCaipChainId:e,previousCaipChainId:t})):this.getProvider(i).setDefaultChain(s),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:t,previousCaipChainId:r}){var i,s;try{if(r===t)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const c=o.filter(u=>u.includes(`${t}:`)).map(HO);if(!W2(c))return;this.events.emit("accountsChanged",c)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,i={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${hy}/${e}${i}`,t)}async getFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${hy}/${e}${r}`)}async deleteFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${hy}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const r of t)r.startsWith(hy)&&await this.client.core.storage.removeItem(r)}catch(t){this.logger.warn(t,"Failed to cleanup storage")}}}const rle=Ex,ile="wc",sle="ethereum_provider",ole=`${ile}@2:${sle}:`,ale="https://rpc.walletconnect.org/v1/",qE=["eth_sendTransaction","personal_sign"],cle=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],KE=["chainChanged","accountsChanged"],lle=["chainChanged","accountsChanged","message","disconnect","connect"],ule=async()=>{const{createAppKit:n}=await sF(()=>import("./core-DkQIIBBu.js").then(e=>e.bK),[]);return n};var fle=Object.defineProperty,hle=Object.defineProperties,dle=Object.getOwnPropertyDescriptors,eB=Object.getOwnPropertySymbols,ple=Object.prototype.hasOwnProperty,gle=Object.prototype.propertyIsEnumerable,GE=(n,e,t)=>e in n?fle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,el=(n,e)=>{for(var t in e||(e={}))ple.call(e,t)&&GE(n,t,e[t]);if(eB)for(var t of eB(e))gle.call(e,t)&&GE(n,t,e[t]);return n},qd=(n,e)=>hle(n,dle(e)),Tr=(n,e,t)=>GE(n,typeof e!="symbol"?e+"":e,t);function Am(n){return Number(n[0].split(":")[1])}function yy(n){return`0x${n.toString(16)}`}function yle(n){const{chains:e,optionalChains:t,methods:r,optionalMethods:i,events:s,optionalEvents:o,rpcMap:c}=n;if(!eE(e))throw new Error("Invalid chains");const u={chains:e,methods:r||qE,events:s||KE,rpcMap:el({},e.length?{[Am(e)]:c[Am(e)]}:{})},f=s==null?void 0:s.filter(m=>!KE.includes(m)),d=r==null?void 0:r.filter(m=>!qE.includes(m));if(!t&&!o&&!i&&!(f!=null&&f.length)&&!(d!=null&&d.length))return{required:e.length?u:void 0};const p=(f==null?void 0:f.length)&&(d==null?void 0:d.length)||!t,g={chains:[...new Set(p?u.chains.concat(t||[]):t)],methods:[...new Set(u.methods.concat(i!=null&&i.length?i:cle))],events:[...new Set(u.events.concat(o!=null&&o.length?o:lle))],rpcMap:c};return{required:e.length?u:void 0,optional:t.length?g:void 0}}class xx{constructor(){Tr(this,"events",new Gr.EventEmitter),Tr(this,"namespace","eip155"),Tr(this,"accounts",[]),Tr(this,"signer"),Tr(this,"chainId",1),Tr(this,"modal"),Tr(this,"rpc"),Tr(this,"STORAGE_KEY",ole),Tr(this,"on",(e,t)=>(this.events.on(e,t),this)),Tr(this,"once",(e,t)=>(this.events.once(e,t),this)),Tr(this,"removeListener",(e,t)=>(this.events.removeListener(e,t),this)),Tr(this,"off",(e,t)=>(this.events.off(e,t),this)),Tr(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const t=new xx;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,r){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),r)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var t;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:i}=yle(this.rpc);try{const s=await new Promise(async(c,u)=>{var f,d;this.rpc.showQrModal&&((f=this.modal)==null||f.open(),(d=this.modal)==null||d.subscribeState(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),u(new Error("Connection request reset. Please try again.")))}));const p=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(qd(el({namespaces:el({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic,scopedProperties:p})).then(g=>{c(g)}).catch(g=>{var m;(m=this.modal)==null||m.showErrorMessage("Unable to connect"),u(new Error(g.message))})});if(!s)return;const o=PI(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:yy(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{(t=this.modal)==null||t.close()}}async authenticate(e,t){var r;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e==null?void 0:e.chains});try{const i=await new Promise(async(o,c)=>{var u,f;this.rpc.showQrModal&&((u=this.modal)==null||u.open(),(f=this.modal)==null||f.subscribeState(d=>{!d.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(qd(el({},e),{chains:this.rpc.chains}),t).then(d=>{o(d)}).catch(d=>{var p;(p=this.modal)==null||p.showErrorMessage("Unable to connect"),c(new Error(d.message))})}),s=i.session;if(s){const o=PI(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:yy(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{(r=this.modal)==null||r.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:r}=t;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",yy(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",qd(el({},KK("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",yy(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,r,i]=e.split(":");return{chainId:`${t}:${r}`,address:i}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;const i=(t=e==null?void 0:e.chains)!=null?t:[],s=(r=e==null?void 0:e.optionalChains)!=null?r:[],o=i.concat(s);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const c=i.length?(e==null?void 0:e.methods)||qE:[],u=i.length?(e==null?void 0:e.events)||KE:[],f=(e==null?void 0:e.optionalMethods)||[],d=(e==null?void 0:e.optionalEvents)||[],p=(e==null?void 0:e.rpcMap)||this.buildRpcMap(o,e.projectId),g=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:i==null?void 0:i.map(m=>this.formatChainId(m)),optionalChains:s.map(m=>this.formatChainId(m)),methods:c,events:u,optionalMethods:f,optionalEvents:d,rpcMap:p,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:g,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const r={};return e.forEach(i=>{r[i]=this.getRpcUrl(i,t)}),r}async initialize(e){var t;if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Am(this.rpc.chains):Am(this.rpc.optionalChains),this.signer=await rle.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const i=await ule(),{convertWCMToAppKitOptions:s}=await Promise.resolve().then(function(){return Ole}),o=s(qd(el({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!o.networks.length)throw new Error("No networks found for WalletConnect·");r=i(qd(el({},o),{universalProvider:this.signer,manualWCControl:!0,enableMobileFullScreen:((t=this.rpc.qrModalOptions)==null?void 0:t.enableMobileFullScreen)===!0}))}catch(i){throw console.warn(i),new Error("To use QR modal, please install @reown/appkit package")}if(r)try{this.modal=r}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:r,rpcMap:i}=e;t&&eE(t)&&(this.rpc.chains=t.map(s=>this.formatChainId(s)),t.forEach(s=>{this.rpc.rpcMap[s]=(i==null?void 0:i[s])||this.getRpcUrl(s)})),r&&eE(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r==null?void 0:r.map(s=>this.formatChainId(s)),r.forEach(s=>{this.rpc.rpcMap[s]=(i==null?void 0:i[s])||this.getRpcUrl(s)}))}getRpcUrl(e,t){var r;return((r=this.rpc.rpcMap)==null?void 0:r[e])||`${ale}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(t=>this.signer.logger.warn(t))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}var mle=Object.defineProperty,wle=Object.defineProperties,ble=Object.getOwnPropertyDescriptors,tB=Object.getOwnPropertySymbols,vle=Object.prototype.hasOwnProperty,Ele=Object.prototype.propertyIsEnumerable,nB=(n,e,t)=>e in n?mle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Y$=(n,e)=>{for(var t in e||(e={}))vle.call(e,t)&&nB(n,t,e[t]);if(tB)for(var t of tB(e))Ele.call(e,t)&&nB(n,t,e[t]);return n},xle=(n,e)=>wle(n,ble(e));function Ale(n){if(n)return{"--w3m-font-family":n["--wcm-font-family"],"--w3m-accent":n["--wcm-accent-color"],"--w3m-color-mix":n["--wcm-background-color"],"--w3m-z-index":n["--wcm-z-index"]?Number(n["--wcm-z-index"]):void 0,"--w3m-qr-color":n["--wcm-accent-color"],"--w3m-font-size-master":n["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":n["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}const Sle=n=>{const[e,t]=n.split(":");return X$({id:t,caipNetworkId:n,chainNamespace:e,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function Ile(n){var e,t,r,i,s,o,c;const u=(e=n.chains)==null?void 0:e.map(Sle).filter(Boolean);if(u.length===0)throw new Error("At least one chain must be specified");const f=u.find(p=>{var g;return p.id===((g=n.defaultChain)==null?void 0:g.id)}),d={projectId:n.projectId,networks:u,themeMode:n.themeMode,themeVariables:Ale(n.themeVariables),chainImages:n.chainImages,connectorImages:n.walletImages,defaultNetwork:f,metadata:xle(Y$({},n.metadata),{name:((t=n.metadata)==null?void 0:t.name)||"WalletConnect",description:((r=n.metadata)==null?void 0:r.description)||"Connect to WalletConnect-compatible wallets",url:((i=n.metadata)==null?void 0:i.url)||"https://walletconnect.org",icons:((s=n.metadata)==null?void 0:s.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:n.explorerRecommendedWalletIds==="NONE"?[]:Array.isArray(n.explorerRecommendedWalletIds)?n.explorerRecommendedWalletIds:[],excludeWalletIds:n.explorerExcludedWalletIds==="ALL"?[]:Array.isArray(n.explorerExcludedWalletIds)?n.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if((o=n.mobileWallets)!=null&&o.length||(c=n.desktopWallets)!=null&&c.length){const p=[...(n.mobileWallets||[]).map(v=>({id:v.id,name:v.name,links:v.links})),...(n.desktopWallets||[]).map(v=>({id:v.id,name:v.name,links:{native:v.links.native,universal:v.links.universal}}))],g=[...d.featuredWalletIds||[],...d.excludeWalletIds||[]],m=p.filter(v=>!g.includes(v.id));m.length&&(d.customWallets=m)}return d}function X$(n){return Y$({formatters:void 0,fees:void 0,serializers:void 0},n)}var Ole=Object.freeze({__proto__:null,convertWCMToAppKitOptions:Ile,defineChain:X$});function Ble(){const[n,e]=ll.useState(null),[t,r]=ll.useState(!1),[i,s]=ll.useState(!1),o={chainId:"0xa09d8624eae87e8b5f87b23fe694eea2d02dde2e",chainName:"BNB Smart Chain",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:["https://bsc-dataseed.bnbchain.org/"],blockExplorerUrls:["https://bscscan.com/"]},c=d=>(d==null?void 0:d.slice(0,6))+"..."+(d==null?void 0:d.slice(-4)),u=async()=>{try{if(r(!0),!window.ethereum){alert("MetaMask not detected! Please install it."),r(!1);return}const d=new Wy(window.ethereum),{chainId:p}=await d.getNetwork();if(p!==56)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:o.chainId}]})}catch(m){m.code===4902&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[o]})}const g=await d.send("eth_requestAccounts",[]);e(g[0]),s(!1)}catch(d){console.error(d)}finally{r(!1)}},f=async()=>{try{r(!0);const d=await xx.init({projectId:"47c64828c0d34815feee876052336fb8",chains:[56],rpcMap:{56:"https://rpc.ankr.com/bsc"},showQrModal:!0,metadata:{name:"Wintercoin",description:"BNB Smart Chain Wallet Connect",url:"https://wintercoins.vercel.app/"}});await d.enable();const m=await(await new Wy(d).getSigner()).getAddress();e(m),s(!1)}catch(d){console.error("WalletConnect error:",d)}finally{r(!1)}};return ll.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",d=>e(d[0]||null))},[]),ft.jsxs("div",{className:"relative",children:[ft.jsx("button",{onClick:()=>n?null:s(!0),disabled:t,className:"bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold px-4 py-2 rounded-lg shadow transition-all",children:t?"Connecting...":n?c(n):"Connect Wallet"}),i&&ft.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800 border border-gray-700 rounded-xl shadow-lg p-3",children:[ft.jsx("p",{className:"text-gray-300 text-sm mb-2 font-semibold",children:"Choose Wallet"}),ft.jsx("button",{onClick:u,className:"w-full text-left bg-white/10 hover:bg-white/20 text-gray-100 px-3 py-2 rounded-lg mb-2 transition",children:"🦊 MetaMask (BNB)"}),ft.jsx("button",{onClick:f,className:"w-full text-left bg-white/10 hover:bg-white/20 text-gray-100 px-3 py-2 rounded-lg transition",children:"🔗 WalletConnect (BNB)"}),ft.jsx("button",{onClick:()=>s(!1),className:"mt-3 w-full text-center text-sm text-gray-400 hover:text-gray-200",children:"Cancel"})]})]})}const tv="0xa09d8624eae87e8b5f87b23fe694eea2d02dde2e";function Ple(){const[n,e]=ll.useState(!1),t=ll.useRef(null),r=`https://pancakeswap.finance/swap?outputCurrency=${tv}`,i=async()=>{try{await navigator.clipboard.writeText(tv),e(!0),setTimeout(()=>e(!1),2e3)}catch(s){console.error("Copy failed",s)}};return ft.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-gray-900 to-slate-800 text-gray-100 font-sans",children:[ft.jsxs("header",{className:"max-w-6xl mx-auto px-6 py-6 flex items-center justify-between",children:[ft.jsxs("div",{className:"flex items-center gap-3",children:[ft.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-cyan-300 text-lg font-bold",children:"W"}),ft.jsxs("div",{children:[ft.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:"WinterCoin"}),ft.jsx("p",{className:"text-xs text-gray-400",children:"$WTC — community-driven DeFi token"})]})]}),ft.jsx(Ble,{})]}),ft.jsx("main",{className:"max-w-6xl mx-auto px-6 py-12",children:ft.jsxs("section",{className:"text-center py-12",children:[ft.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold leading-tight",children:"WinterCoin — The Future of Decentralized Power"}),ft.jsx("p",{className:"mt-6 text-gray-300 max-w-2xl mx-auto",children:"Buy and trade $WTC directly via PancakeSwap below."}),ft.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[ft.jsx("button",{onClick:i,className:"inline-flex items-center gap-2 bg-cyan-500 text-slate-900 font-semibold px-5 py-3 rounded-lg shadow hover:scale-[1.01]",children:"Copy Contract"}),n&&ft.jsx("span",{className:"ml-2 text-sm text-cyan-300",children:"Copied!"})]}),ft.jsx("div",{className:"mt-12 max-w-2xl mx-auto",children:ft.jsx("iframe",{ref:t,title:"PancakeSwap - Buy WTC",src:r,className:"w-full h-[500px] rounded-lg border border-gray-700",sandbox:"allow-forms allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"})})]})}),ft.jsxs("footer",{className:"border-t border-gray-800 mt-12 py-6 text-center text-gray-400 text-sm",children:["© 2025 WinterCoin — Contract: ",tv]})]})}lk.createRoot(document.getElementById("root")).render(ft.jsx(nk.StrictMode,{children:ft.jsx(Ple,{})}));export{Up as A,p3 as B,bV as C,xH as D,hc as E,fw as F,ms as G,yi as H,iu as I,ys as J,L$ as K,gI as P,FC as Q,sF as _,gG as a,pG as b,R_ as c,Q0 as d,Jp as e,mi as f,YI as g,me as h,lp as i,qv as j,mG as k,PM as l,bM as m,VF as n,AV as o,Gr as p,WK as q,SV as r,dG as s,Or as t,Vi as u,su as v,sx as w,ate as x,ix as y,hw as z};
