var yk=Object.defineProperty;var N4=n=>{throw TypeError(n)};var mk=(n,e,t)=>e in n?yk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ie=(n,e,t)=>mk(n,typeof e!="symbol"?e+"":e,t),xb=(n,e,t)=>e.has(n)||N4("Cannot "+t);var k=(n,e,t)=>(xb(n,e,"read from private field"),t?t.call(n):e.get(n)),ce=(n,e,t)=>e.has(n)?N4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),K=(n,e,t,r)=>(xb(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),ge=(n,e,t)=>(xb(n,e,"access private method"),t);var Td=(n,e,t,r)=>({set _(i){K(n,e,i,t)},get _(){return k(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var $s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function wk(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Ab={exports:{}},kd={},Sb={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D4;function bk(){if(D4)return ze;D4=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function p($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function A($,L,Y){this.props=$,this.context=L,this.refs=b,this.updater=Y||m}A.prototype.isReactComponent={},A.prototype.setState=function($,L){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,L,"setState")},A.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function _(){}_.prototype=A.prototype;function U($,L,Y){this.props=$,this.context=L,this.refs=b,this.updater=Y||m}var O=U.prototype=new _;O.constructor=U,v(O,A.prototype),O.isPureReactComponent=!0;var T=Array.isArray,R=Object.prototype.hasOwnProperty,j={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function V($,L,Y){var q,Z={},te=null,re=null;if(L!=null)for(q in L.ref!==void 0&&(re=L.ref),L.key!==void 0&&(te=""+L.key),L)R.call(L,q)&&!H.hasOwnProperty(q)&&(Z[q]=L[q]);var le=arguments.length-2;if(le===1)Z.children=Y;else if(1<le){for(var se=Array(le),ue=0;ue<le;ue++)se[ue]=arguments[ue+2];Z.children=se}if($&&$.defaultProps)for(q in le=$.defaultProps,le)Z[q]===void 0&&(Z[q]=le[q]);return{$$typeof:n,type:$,key:te,ref:re,props:Z,_owner:j.current}}function M($,L){return{$$typeof:n,type:$.type,key:L,ref:$.ref,props:$.props,_owner:$._owner}}function G($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function Q($){var L={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Y){return L[Y]})}var z=/\/+/g;function P($,L){return typeof $=="object"&&$!==null&&$.key!=null?Q(""+$.key):L.toString(36)}function D($,L,Y,q,Z){var te=typeof $;(te==="undefined"||te==="boolean")&&($=null);var re=!1;if($===null)re=!0;else switch(te){case"string":case"number":re=!0;break;case"object":switch($.$$typeof){case n:case e:re=!0}}if(re)return re=$,Z=Z(re),$=q===""?"."+P(re,0):q,T(Z)?(Y="",$!=null&&(Y=$.replace(z,"$&/")+"/"),D(Z,L,Y,"",function(ue){return ue})):Z!=null&&(G(Z)&&(Z=M(Z,Y+(!Z.key||re&&re.key===Z.key?"":(""+Z.key).replace(z,"$&/")+"/")+$)),L.push(Z)),1;if(re=0,q=q===""?".":q+":",T($))for(var le=0;le<$.length;le++){te=$[le];var se=q+P(te,le);re+=D(te,L,Y,se,Z)}else if(se=p($),typeof se=="function")for($=se.call($),le=0;!(te=$.next()).done;)te=te.value,se=q+P(te,le++),re+=D(te,L,Y,se,Z);else if(te==="object")throw L=String($),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return re}function w($,L,Y){if($==null)return $;var q=[],Z=0;return D($,q,"","",function(te){return L.call(Y,te,Z++)}),q}function x($){if($._status===-1){var L=$._result;L=L(),L.then(function(Y){($._status===0||$._status===-1)&&($._status=1,$._result=Y)},function(Y){($._status===0||$._status===-1)&&($._status=2,$._result=Y)}),$._status===-1&&($._status=0,$._result=L)}if($._status===1)return $._result.default;throw $._result}var B={current:null},C={transition:null},I={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:C,ReactCurrentOwner:j};function N(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:w,forEach:function($,L,Y){w($,function(){L.apply(this,arguments)},Y)},count:function($){var L=0;return w($,function(){L++}),L},toArray:function($){return w($,function(L){return L})||[]},only:function($){if(!G($))throw Error("React.Children.only expected to receive a single React element child.");return $}},ze.Component=A,ze.Fragment=t,ze.Profiler=i,ze.PureComponent=U,ze.StrictMode=r,ze.Suspense=u,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,ze.act=N,ze.cloneElement=function($,L,Y){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var q=v({},$.props),Z=$.key,te=$.ref,re=$._owner;if(L!=null){if(L.ref!==void 0&&(te=L.ref,re=j.current),L.key!==void 0&&(Z=""+L.key),$.type&&$.type.defaultProps)var le=$.type.defaultProps;for(se in L)R.call(L,se)&&!H.hasOwnProperty(se)&&(q[se]=L[se]===void 0&&le!==void 0?le[se]:L[se])}var se=arguments.length-2;if(se===1)q.children=Y;else if(1<se){le=Array(se);for(var ue=0;ue<se;ue++)le[ue]=arguments[ue+2];q.children=le}return{$$typeof:n,type:$.type,key:Z,ref:te,props:q,_owner:re}},ze.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:s,_context:$},$.Consumer=$},ze.createElement=V,ze.createFactory=function($){var L=V.bind(null,$);return L.type=$,L},ze.createRef=function(){return{current:null}},ze.forwardRef=function($){return{$$typeof:c,render:$}},ze.isValidElement=G,ze.lazy=function($){return{$$typeof:h,_payload:{_status:-1,_result:$},_init:x}},ze.memo=function($,L){return{$$typeof:f,type:$,compare:L===void 0?null:L}},ze.startTransition=function($){var L=C.transition;C.transition={};try{$()}finally{C.transition=L}},ze.unstable_act=N,ze.useCallback=function($,L){return B.current.useCallback($,L)},ze.useContext=function($){return B.current.useContext($)},ze.useDebugValue=function(){},ze.useDeferredValue=function($){return B.current.useDeferredValue($)},ze.useEffect=function($,L){return B.current.useEffect($,L)},ze.useId=function(){return B.current.useId()},ze.useImperativeHandle=function($,L,Y){return B.current.useImperativeHandle($,L,Y)},ze.useInsertionEffect=function($,L){return B.current.useInsertionEffect($,L)},ze.useLayoutEffect=function($,L){return B.current.useLayoutEffect($,L)},ze.useMemo=function($,L){return B.current.useMemo($,L)},ze.useReducer=function($,L,Y){return B.current.useReducer($,L,Y)},ze.useRef=function($){return B.current.useRef($)},ze.useState=function($){return B.current.useState($)},ze.useSyncExternalStore=function($,L,Y){return B.current.useSyncExternalStore($,L,Y)},ze.useTransition=function(){return B.current.useTransition()},ze.version="18.3.1",ze}var $4;function g3(){return $4||($4=1,Sb.exports=bk()),Sb.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T4;function vk(){if(T4)return kd;T4=1;var n=g3(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,f){var h,g={},p=null,m=null;f!==void 0&&(p=""+f),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(m=u.ref);for(h in u)r.call(u,h)&&!s.hasOwnProperty(h)&&(g[h]=u[h]);if(c&&c.defaultProps)for(h in u=c.defaultProps,u)g[h]===void 0&&(g[h]=u[h]);return{$$typeof:e,type:c,key:p,ref:m,props:g,_owner:i.current}}return kd.Fragment=t,kd.jsx=o,kd.jsxs=o,kd}var k4;function Ek(){return k4||(k4=1,Ab.exports=vk()),Ab.exports}var nt=Ek(),No=g3();const xk=fg(No);var H0={},Ib={exports:{}},ur={},Ob={exports:{}},Bb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R4;function Ak(){return R4||(R4=1,(function(n){function e(C,I){var N=C.length;C.push(I);e:for(;0<N;){var $=N-1>>>1,L=C[$];if(0<i(L,I))C[$]=I,C[N]=L,N=$;else break e}}function t(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var I=C[0],N=C.pop();if(N!==I){C[0]=N;e:for(var $=0,L=C.length,Y=L>>>1;$<Y;){var q=2*($+1)-1,Z=C[q],te=q+1,re=C[te];if(0>i(Z,N))te<L&&0>i(re,Z)?(C[$]=re,C[te]=N,$=te):(C[$]=Z,C[q]=N,$=q);else if(te<L&&0>i(re,N))C[$]=re,C[te]=N,$=te;else break e}}return I}function i(C,I){var N=C.sortIndex-I.sortIndex;return N!==0?N:C.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],f=[],h=1,g=null,p=3,m=!1,v=!1,b=!1,A=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(C){for(var I=t(f);I!==null;){if(I.callback===null)r(f);else if(I.startTime<=C)r(f),I.sortIndex=I.expirationTime,e(u,I);else break;I=t(f)}}function T(C){if(b=!1,O(C),!v)if(t(u)!==null)v=!0,x(R);else{var I=t(f);I!==null&&B(T,I.startTime-C)}}function R(C,I){v=!1,b&&(b=!1,_(V),V=-1),m=!0;var N=p;try{for(O(I),g=t(u);g!==null&&(!(g.expirationTime>I)||C&&!Q());){var $=g.callback;if(typeof $=="function"){g.callback=null,p=g.priorityLevel;var L=$(g.expirationTime<=I);I=n.unstable_now(),typeof L=="function"?g.callback=L:g===t(u)&&r(u),O(I)}else r(u);g=t(u)}if(g!==null)var Y=!0;else{var q=t(f);q!==null&&B(T,q.startTime-I),Y=!1}return Y}finally{g=null,p=N,m=!1}}var j=!1,H=null,V=-1,M=5,G=-1;function Q(){return!(n.unstable_now()-G<M)}function z(){if(H!==null){var C=n.unstable_now();G=C;var I=!0;try{I=H(!0,C)}finally{I?P():(j=!1,H=null)}}else j=!1}var P;if(typeof U=="function")P=function(){U(z)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,w=D.port2;D.port1.onmessage=z,P=function(){w.postMessage(null)}}else P=function(){A(z,0)};function x(C){H=C,j||(j=!0,P())}function B(C,I){V=A(function(){C(n.unstable_now())},I)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(C){C.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,x(R))},n.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<C?Math.floor(1e3/C):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(C){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var N=p;p=I;try{return C()}finally{p=N}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(C,I){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var N=p;p=C;try{return I()}finally{p=N}},n.unstable_scheduleCallback=function(C,I,N){var $=n.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?$+N:$):N=$,C){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=N+L,C={id:h++,callback:I,priorityLevel:C,startTime:N,expirationTime:L,sortIndex:-1},N>$?(C.sortIndex=N,e(f,C),t(u)===null&&C===t(f)&&(b?(_(V),V=-1):b=!0,B(T,N-$))):(C.sortIndex=L,e(u,C),v||m||(v=!0,x(R))),C},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(C){var I=p;return function(){var N=p;p=I;try{return C.apply(this,arguments)}finally{p=N}}}})(Bb)),Bb}var U4;function Sk(){return U4||(U4=1,Ob.exports=Ak()),Ob.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L4;function Ik(){if(L4)return ur;L4=1;var n=g3(),e=Sk();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},g={};function p(a){return u.call(g,a)?!0:u.call(h,a)?!1:f.test(a)?g[a]=!0:(h[a]=!0,!1)}function m(a,l,d,y){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function v(a,l,d,y){if(l===null||typeof l>"u"||m(a,l,d,y))return!0;if(y)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(a,l,d,y,E,S,F){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=E,this.mustUseProperty=d,this.propertyName=a,this.type=l,this.sanitizeURL=S,this.removeEmptyString=F}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){A[a]=new b(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];A[l]=new b(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){A[a]=new b(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){A[a]=new b(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){A[a]=new b(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){A[a]=new b(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){A[a]=new b(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){A[a]=new b(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){A[a]=new b(a,5,!1,a.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function U(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(_,U);A[l]=new b(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(_,U);A[l]=new b(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(_,U);A[l]=new b(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){A[a]=new b(a,1,!1,a.toLowerCase(),null,!1,!1)}),A.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){A[a]=new b(a,1,!1,a.toLowerCase(),null,!0,!0)});function O(a,l,d,y){var E=A.hasOwnProperty(l)?A[l]:null;(E!==null?E.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(v(l,d,E,y)&&(d=null),y||E===null?p(l)&&(d===null?a.removeAttribute(l):a.setAttribute(l,""+d)):E.mustUseProperty?a[E.propertyName]=d===null?E.type===3?!1:"":d:(l=E.attributeName,y=E.attributeNamespace,d===null?a.removeAttribute(l):(E=E.type,d=E===3||E===4&&d===!0?"":""+d,y?a.setAttributeNS(y,l,d):a.setAttribute(l,d))))}var T=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),j=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),Q=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),C=Symbol.iterator;function I(a){return a===null||typeof a!="object"?null:(a=C&&a[C]||a["@@iterator"],typeof a=="function"?a:null)}var N=Object.assign,$;function L(a){if($===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);$=l&&l[1]||""}return`
`+$+a}var Y=!1;function q(a,l){if(!a||Y)return"";Y=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ae){var y=ae}Reflect.construct(a,[],l)}else{try{l.call()}catch(ae){y=ae}a.call(l.prototype)}else{try{throw Error()}catch(ae){y=ae}a()}}catch(ae){if(ae&&y&&typeof ae.stack=="string"){for(var E=ae.stack.split(`
`),S=y.stack.split(`
`),F=E.length-1,W=S.length-1;1<=F&&0<=W&&E[F]!==S[W];)W--;for(;1<=F&&0<=W;F--,W--)if(E[F]!==S[W]){if(F!==1||W!==1)do if(F--,W--,0>W||E[F]!==S[W]){var J=`
`+E[F].replace(" at new "," at ");return a.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",a.displayName)),J}while(1<=F&&0<=W);break}}}finally{Y=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?L(a):""}function Z(a){switch(a.tag){case 5:return L(a.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return a=q(a.type,!1),a;case 11:return a=q(a.type.render,!1),a;case 1:return a=q(a.type,!0),a;default:return""}}function te(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case H:return"Fragment";case j:return"Portal";case M:return"Profiler";case V:return"StrictMode";case P:return"Suspense";case D:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Q:return(a.displayName||"Context")+".Consumer";case G:return(a._context.displayName||"Context")+".Provider";case z:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case w:return l=a.displayName||null,l!==null?l:te(a.type)||"Memo";case x:l=a._payload,a=a._init;try{return te(a(l))}catch{}}return null}function re(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(l);case 8:return l===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function le(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function se(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ue(a){var l=se(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,S=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return E.call(this)},set:function(F){y=""+F,S.call(this,F)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(F){y=""+F},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Ne(a){a._valueTracker||(a._valueTracker=ue(a))}function Re(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),y="";return a&&(y=se(a)?a.checked?"true":"false":a.value),a=y,a!==d?(l.setValue(a),!0):!1}function ke(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ve(a,l){var d=l.checked;return N({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??a._wrapperState.initialChecked})}function Qt(a,l){var d=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;d=le(l.value!=null?l.value:d),a._wrapperState={initialChecked:y,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function cn(a,l){l=l.checked,l!=null&&O(a,"checked",l,!1)}function xi(a,l){cn(a,l);var d=le(l.value),y=l.type;if(d!=null)y==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?bu(a,l.type,d):l.hasOwnProperty("defaultValue")&&bu(a,l.type,le(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Ms(a,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,d||l===a.value||(a.value=l),a.defaultValue=l}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function bu(a,l,d){(l!=="number"||ke(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}var Ko=Array.isArray;function ss(a,l,d,y){if(a=a.options,l){l={};for(var E=0;E<d.length;E++)l["$"+d[E]]=!0;for(d=0;d<a.length;d++)E=l.hasOwnProperty("$"+a[d].value),a[d].selected!==E&&(a[d].selected=E),E&&y&&(a[d].defaultSelected=!0)}else{for(d=""+le(d),l=null,E=0;E<a.length;E++){if(a[E].value===d){a[E].selected=!0,y&&(a[E].defaultSelected=!0);return}l!==null||a[E].disabled||(l=a[E])}l!==null&&(l.selected=!0)}}function vu(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return N({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Kh(a,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(Ko(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}a._wrapperState={initialValue:le(d)}}function Gh(a,l){var d=le(l.value),y=le(l.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),l.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),y!=null&&(a.defaultValue=""+y)}function Wh(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Qh(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zh(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Qh(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Eu,kg=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,y,E){MSApp.execUnsafeLocalFunction(function(){return a(l,d,y,E)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Eu=Eu||document.createElement("div"),Eu.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Eu.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function Mc(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var Jh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},v9=["Webkit","ms","Moz","O"];Object.keys(Jh).forEach(function(a){v9.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Jh[l]=Jh[a]})});function Kx(a,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||Jh.hasOwnProperty(a)&&Jh[a]?(""+l).trim():l+"px"}function Gx(a,l){a=a.style;for(var d in l)if(l.hasOwnProperty(d)){var y=d.indexOf("--")===0,E=Kx(d,l[d],y);d==="float"&&(d="cssFloat"),y?a.setProperty(d,E):a[d]=E}}var E9=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tw(a,l){if(l){if(E9[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function kw(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rw=null;function Uw(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Lw=null,xu=null,Au=null;function Wx(a){if(a=bd(a)){if(typeof Lw!="function")throw Error(t(280));var l=a.stateNode;l&&(l=i0(l),Lw(a.stateNode,a.type,l))}}function Qx(a){xu?Au?Au.push(a):Au=[a]:xu=a}function Zx(){if(xu){var a=xu,l=Au;if(Au=xu=null,Wx(a),l)for(a=0;a<l.length;a++)Wx(l[a])}}function Jx(a,l){return a(l)}function Yx(){}var Fw=!1;function Xx(a,l,d){if(Fw)return a(l,d);Fw=!0;try{return Jx(a,l,d)}finally{Fw=!1,(xu!==null||Au!==null)&&(Yx(),Zx())}}function Yh(a,l){var d=a.stateNode;if(d===null)return null;var y=i0(d);if(y===null)return null;d=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var Mw=!1;if(c)try{var Xh={};Object.defineProperty(Xh,"passive",{get:function(){Mw=!0}}),window.addEventListener("test",Xh,Xh),window.removeEventListener("test",Xh,Xh)}catch{Mw=!1}function x9(a,l,d,y,E,S,F,W,J){var ae=Array.prototype.slice.call(arguments,3);try{l.apply(d,ae)}catch(de){this.onError(de)}}var ed=!1,Rg=null,Ug=!1,jw=null,A9={onError:function(a){ed=!0,Rg=a}};function S9(a,l,d,y,E,S,F,W,J){ed=!1,Rg=null,x9.apply(A9,arguments)}function I9(a,l,d,y,E,S,F,W,J){if(S9.apply(this,arguments),ed){if(ed){var ae=Rg;ed=!1,Rg=null}else throw Error(t(198));Ug||(Ug=!0,jw=ae)}}function jc(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function eA(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function tA(a){if(jc(a)!==a)throw Error(t(188))}function O9(a){var l=a.alternate;if(!l){if(l=jc(a),l===null)throw Error(t(188));return l!==a?null:a}for(var d=a,y=l;;){var E=d.return;if(E===null)break;var S=E.alternate;if(S===null){if(y=E.return,y!==null){d=y;continue}break}if(E.child===S.child){for(S=E.child;S;){if(S===d)return tA(E),a;if(S===y)return tA(E),l;S=S.sibling}throw Error(t(188))}if(d.return!==y.return)d=E,y=S;else{for(var F=!1,W=E.child;W;){if(W===d){F=!0,d=E,y=S;break}if(W===y){F=!0,y=E,d=S;break}W=W.sibling}if(!F){for(W=S.child;W;){if(W===d){F=!0,d=S,y=E;break}if(W===y){F=!0,y=S,d=E;break}W=W.sibling}if(!F)throw Error(t(189))}}if(d.alternate!==y)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?a:l}function nA(a){return a=O9(a),a!==null?rA(a):null}function rA(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=rA(a);if(l!==null)return l;a=a.sibling}return null}var iA=e.unstable_scheduleCallback,sA=e.unstable_cancelCallback,B9=e.unstable_shouldYield,P9=e.unstable_requestPaint,_t=e.unstable_now,C9=e.unstable_getCurrentPriorityLevel,zw=e.unstable_ImmediatePriority,oA=e.unstable_UserBlockingPriority,Lg=e.unstable_NormalPriority,_9=e.unstable_LowPriority,aA=e.unstable_IdlePriority,Fg=null,os=null;function N9(a){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(Fg,a,void 0,(a.current.flags&128)===128)}catch{}}var Ai=Math.clz32?Math.clz32:T9,D9=Math.log,$9=Math.LN2;function T9(a){return a>>>=0,a===0?32:31-(D9(a)/$9|0)|0}var Mg=64,jg=4194304;function td(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function zg(a,l){var d=a.pendingLanes;if(d===0)return 0;var y=0,E=a.suspendedLanes,S=a.pingedLanes,F=d&268435455;if(F!==0){var W=F&~E;W!==0?y=td(W):(S&=F,S!==0&&(y=td(S)))}else F=d&~E,F!==0?y=td(F):S!==0&&(y=td(S));if(y===0)return 0;if(l!==0&&l!==y&&(l&E)===0&&(E=y&-y,S=l&-l,E>=S||E===16&&(S&4194240)!==0))return l;if((y&4)!==0&&(y|=d&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=y;0<l;)d=31-Ai(l),E=1<<d,y|=a[d],l&=~E;return y}function k9(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R9(a,l){for(var d=a.suspendedLanes,y=a.pingedLanes,E=a.expirationTimes,S=a.pendingLanes;0<S;){var F=31-Ai(S),W=1<<F,J=E[F];J===-1?((W&d)===0||(W&y)!==0)&&(E[F]=k9(W,l)):J<=l&&(a.expiredLanes|=W),S&=~W}}function Hw(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function cA(){var a=Mg;return Mg<<=1,(Mg&4194240)===0&&(Mg=64),a}function Vw(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function nd(a,l,d){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-Ai(l),a[l]=d}function U9(a,l){var d=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<d;){var E=31-Ai(d),S=1<<E;l[E]=0,y[E]=-1,a[E]=-1,d&=~S}}function qw(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var y=31-Ai(d),E=1<<y;E&l|a[y]&l&&(a[y]|=l),d&=~E}}var ot=0;function lA(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var uA,Kw,fA,hA,dA,Gw=!1,Hg=[],Go=null,Wo=null,Qo=null,rd=new Map,id=new Map,Zo=[],L9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pA(a,l){switch(a){case"focusin":case"focusout":Go=null;break;case"dragenter":case"dragleave":Wo=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":rd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(l.pointerId)}}function sd(a,l,d,y,E,S){return a===null||a.nativeEvent!==S?(a={blockedOn:l,domEventName:d,eventSystemFlags:y,nativeEvent:S,targetContainers:[E]},l!==null&&(l=bd(l),l!==null&&Kw(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,E!==null&&l.indexOf(E)===-1&&l.push(E),a)}function F9(a,l,d,y,E){switch(l){case"focusin":return Go=sd(Go,a,l,d,y,E),!0;case"dragenter":return Wo=sd(Wo,a,l,d,y,E),!0;case"mouseover":return Qo=sd(Qo,a,l,d,y,E),!0;case"pointerover":var S=E.pointerId;return rd.set(S,sd(rd.get(S)||null,a,l,d,y,E)),!0;case"gotpointercapture":return S=E.pointerId,id.set(S,sd(id.get(S)||null,a,l,d,y,E)),!0}return!1}function gA(a){var l=zc(a.target);if(l!==null){var d=jc(l);if(d!==null){if(l=d.tag,l===13){if(l=eA(d),l!==null){a.blockedOn=l,dA(a.priority,function(){fA(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Vg(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=Qw(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(d===null){d=a.nativeEvent;var y=new d.constructor(d.type,d);Rw=y,d.target.dispatchEvent(y),Rw=null}else return l=bd(d),l!==null&&Kw(l),a.blockedOn=d,!1;l.shift()}return!0}function yA(a,l,d){Vg(a)&&d.delete(l)}function M9(){Gw=!1,Go!==null&&Vg(Go)&&(Go=null),Wo!==null&&Vg(Wo)&&(Wo=null),Qo!==null&&Vg(Qo)&&(Qo=null),rd.forEach(yA),id.forEach(yA)}function od(a,l){a.blockedOn===l&&(a.blockedOn=null,Gw||(Gw=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,M9)))}function ad(a){function l(E){return od(E,a)}if(0<Hg.length){od(Hg[0],a);for(var d=1;d<Hg.length;d++){var y=Hg[d];y.blockedOn===a&&(y.blockedOn=null)}}for(Go!==null&&od(Go,a),Wo!==null&&od(Wo,a),Qo!==null&&od(Qo,a),rd.forEach(l),id.forEach(l),d=0;d<Zo.length;d++)y=Zo[d],y.blockedOn===a&&(y.blockedOn=null);for(;0<Zo.length&&(d=Zo[0],d.blockedOn===null);)gA(d),d.blockedOn===null&&Zo.shift()}var Su=T.ReactCurrentBatchConfig,qg=!0;function j9(a,l,d,y){var E=ot,S=Su.transition;Su.transition=null;try{ot=1,Ww(a,l,d,y)}finally{ot=E,Su.transition=S}}function z9(a,l,d,y){var E=ot,S=Su.transition;Su.transition=null;try{ot=4,Ww(a,l,d,y)}finally{ot=E,Su.transition=S}}function Ww(a,l,d,y){if(qg){var E=Qw(a,l,d,y);if(E===null)h1(a,l,y,Kg,d),pA(a,y);else if(F9(E,a,l,d,y))y.stopPropagation();else if(pA(a,y),l&4&&-1<L9.indexOf(a)){for(;E!==null;){var S=bd(E);if(S!==null&&uA(S),S=Qw(a,l,d,y),S===null&&h1(a,l,y,Kg,d),S===E)break;E=S}E!==null&&y.stopPropagation()}else h1(a,l,y,null,d)}}var Kg=null;function Qw(a,l,d,y){if(Kg=null,a=Uw(y),a=zc(a),a!==null)if(l=jc(a),l===null)a=null;else if(d=l.tag,d===13){if(a=eA(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Kg=a,null}function mA(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C9()){case zw:return 1;case oA:return 4;case Lg:case _9:return 16;case aA:return 536870912;default:return 16}default:return 16}}var Jo=null,Zw=null,Gg=null;function wA(){if(Gg)return Gg;var a,l=Zw,d=l.length,y,E="value"in Jo?Jo.value:Jo.textContent,S=E.length;for(a=0;a<d&&l[a]===E[a];a++);var F=d-a;for(y=1;y<=F&&l[d-y]===E[S-y];y++);return Gg=E.slice(a,1<y?1-y:void 0)}function Wg(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Qg(){return!0}function bA(){return!1}function Dr(a){function l(d,y,E,S,F){this._reactName=d,this._targetInst=E,this.type=y,this.nativeEvent=S,this.target=F,this.currentTarget=null;for(var W in a)a.hasOwnProperty(W)&&(d=a[W],this[W]=d?d(S):S[W]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Qg:bA,this.isPropagationStopped=bA,this}return N(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Qg)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Qg)},persist:function(){},isPersistent:Qg}),l}var Iu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jw=Dr(Iu),cd=N({},Iu,{view:0,detail:0}),H9=Dr(cd),Yw,Xw,ld,Zg=N({},cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t1,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ld&&(ld&&a.type==="mousemove"?(Yw=a.screenX-ld.screenX,Xw=a.screenY-ld.screenY):Xw=Yw=0,ld=a),Yw)},movementY:function(a){return"movementY"in a?a.movementY:Xw}}),vA=Dr(Zg),V9=N({},Zg,{dataTransfer:0}),q9=Dr(V9),K9=N({},cd,{relatedTarget:0}),e1=Dr(K9),G9=N({},Iu,{animationName:0,elapsedTime:0,pseudoElement:0}),W9=Dr(G9),Q9=N({},Iu,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Z9=Dr(Q9),J9=N({},Iu,{data:0}),EA=Dr(J9),Y9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tT(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=eT[a])?!!l[a]:!1}function t1(){return tT}var nT=N({},cd,{key:function(a){if(a.key){var l=Y9[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Wg(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?X9[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t1,charCode:function(a){return a.type==="keypress"?Wg(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Wg(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),rT=Dr(nT),iT=N({},Zg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xA=Dr(iT),sT=N({},cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t1}),oT=Dr(sT),aT=N({},Iu,{propertyName:0,elapsedTime:0,pseudoElement:0}),cT=Dr(aT),lT=N({},Zg,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),uT=Dr(lT),fT=[9,13,27,32],n1=c&&"CompositionEvent"in window,ud=null;c&&"documentMode"in document&&(ud=document.documentMode);var hT=c&&"TextEvent"in window&&!ud,AA=c&&(!n1||ud&&8<ud&&11>=ud),SA=" ",IA=!1;function OA(a,l){switch(a){case"keyup":return fT.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BA(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ou=!1;function dT(a,l){switch(a){case"compositionend":return BA(l);case"keypress":return l.which!==32?null:(IA=!0,SA);case"textInput":return a=l.data,a===SA&&IA?null:a;default:return null}}function pT(a,l){if(Ou)return a==="compositionend"||!n1&&OA(a,l)?(a=wA(),Gg=Zw=Jo=null,Ou=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return AA&&l.locale!=="ko"?null:l.data;default:return null}}var gT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PA(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!gT[a.type]:l==="textarea"}function CA(a,l,d,y){Qx(y),l=t0(l,"onChange"),0<l.length&&(d=new Jw("onChange","change",null,d,y),a.push({event:d,listeners:l}))}var fd=null,hd=null;function yT(a){GA(a,0)}function Jg(a){var l=Nu(a);if(Re(l))return a}function mT(a,l){if(a==="change")return l}var _A=!1;if(c){var r1;if(c){var i1="oninput"in document;if(!i1){var NA=document.createElement("div");NA.setAttribute("oninput","return;"),i1=typeof NA.oninput=="function"}r1=i1}else r1=!1;_A=r1&&(!document.documentMode||9<document.documentMode)}function DA(){fd&&(fd.detachEvent("onpropertychange",$A),hd=fd=null)}function $A(a){if(a.propertyName==="value"&&Jg(hd)){var l=[];CA(l,hd,a,Uw(a)),Xx(yT,l)}}function wT(a,l,d){a==="focusin"?(DA(),fd=l,hd=d,fd.attachEvent("onpropertychange",$A)):a==="focusout"&&DA()}function bT(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Jg(hd)}function vT(a,l){if(a==="click")return Jg(l)}function ET(a,l){if(a==="input"||a==="change")return Jg(l)}function xT(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Si=typeof Object.is=="function"?Object.is:xT;function dd(a,l){if(Si(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),y=Object.keys(l);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var E=d[y];if(!u.call(l,E)||!Si(a[E],l[E]))return!1}return!0}function TA(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function kA(a,l){var d=TA(a);a=0;for(var y;d;){if(d.nodeType===3){if(y=a+d.textContent.length,a<=l&&y>=l)return{node:d,offset:l-a};a=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=TA(d)}}function RA(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?RA(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function UA(){for(var a=window,l=ke();l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=ke(a.document)}return l}function s1(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function AT(a){var l=UA(),d=a.focusedElem,y=a.selectionRange;if(l!==d&&d&&d.ownerDocument&&RA(d.ownerDocument.documentElement,d)){if(y!==null&&s1(d)){if(l=y.start,a=y.end,a===void 0&&(a=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(a,d.value.length);else if(a=(l=d.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var E=d.textContent.length,S=Math.min(y.start,E);y=y.end===void 0?S:Math.min(y.end,E),!a.extend&&S>y&&(E=y,y=S,S=E),E=kA(d,S);var F=kA(d,y);E&&F&&(a.rangeCount!==1||a.anchorNode!==E.node||a.anchorOffset!==E.offset||a.focusNode!==F.node||a.focusOffset!==F.offset)&&(l=l.createRange(),l.setStart(E.node,E.offset),a.removeAllRanges(),S>y?(a.addRange(l),a.extend(F.node,F.offset)):(l.setEnd(F.node,F.offset),a.addRange(l)))}}for(l=[],a=d;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)a=l[d],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var ST=c&&"documentMode"in document&&11>=document.documentMode,Bu=null,o1=null,pd=null,a1=!1;function LA(a,l,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;a1||Bu==null||Bu!==ke(y)||(y=Bu,"selectionStart"in y&&s1(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),pd&&dd(pd,y)||(pd=y,y=t0(o1,"onSelect"),0<y.length&&(l=new Jw("onSelect","select",null,l,d),a.push({event:l,listeners:y}),l.target=Bu)))}function Yg(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var Pu={animationend:Yg("Animation","AnimationEnd"),animationiteration:Yg("Animation","AnimationIteration"),animationstart:Yg("Animation","AnimationStart"),transitionend:Yg("Transition","TransitionEnd")},c1={},FA={};c&&(FA=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function Xg(a){if(c1[a])return c1[a];if(!Pu[a])return a;var l=Pu[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in FA)return c1[a]=l[d];return a}var MA=Xg("animationend"),jA=Xg("animationiteration"),zA=Xg("animationstart"),HA=Xg("transitionend"),VA=new Map,qA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yo(a,l){VA.set(a,l),s(l,[a])}for(var l1=0;l1<qA.length;l1++){var u1=qA[l1],IT=u1.toLowerCase(),OT=u1[0].toUpperCase()+u1.slice(1);Yo(IT,"on"+OT)}Yo(MA,"onAnimationEnd"),Yo(jA,"onAnimationIteration"),Yo(zA,"onAnimationStart"),Yo("dblclick","onDoubleClick"),Yo("focusin","onFocus"),Yo("focusout","onBlur"),Yo(HA,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BT=new Set("cancel close invalid load scroll toggle".split(" ").concat(gd));function KA(a,l,d){var y=a.type||"unknown-event";a.currentTarget=d,I9(y,l,void 0,a),a.currentTarget=null}function GA(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var y=a[d],E=y.event;y=y.listeners;e:{var S=void 0;if(l)for(var F=y.length-1;0<=F;F--){var W=y[F],J=W.instance,ae=W.currentTarget;if(W=W.listener,J!==S&&E.isPropagationStopped())break e;KA(E,W,ae),S=J}else for(F=0;F<y.length;F++){if(W=y[F],J=W.instance,ae=W.currentTarget,W=W.listener,J!==S&&E.isPropagationStopped())break e;KA(E,W,ae),S=J}}}if(Ug)throw a=jw,Ug=!1,jw=null,a}function mt(a,l){var d=l[w1];d===void 0&&(d=l[w1]=new Set);var y=a+"__bubble";d.has(y)||(WA(l,a,2,!1),d.add(y))}function f1(a,l,d){var y=0;l&&(y|=4),WA(d,a,y,l)}var e0="_reactListening"+Math.random().toString(36).slice(2);function yd(a){if(!a[e0]){a[e0]=!0,r.forEach(function(d){d!=="selectionchange"&&(BT.has(d)||f1(d,!1,a),f1(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[e0]||(l[e0]=!0,f1("selectionchange",!1,l))}}function WA(a,l,d,y){switch(mA(l)){case 1:var E=j9;break;case 4:E=z9;break;default:E=Ww}d=E.bind(null,l,d,a),E=void 0,!Mw||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(E=!0),y?E!==void 0?a.addEventListener(l,d,{capture:!0,passive:E}):a.addEventListener(l,d,!0):E!==void 0?a.addEventListener(l,d,{passive:E}):a.addEventListener(l,d,!1)}function h1(a,l,d,y,E){var S=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var F=y.tag;if(F===3||F===4){var W=y.stateNode.containerInfo;if(W===E||W.nodeType===8&&W.parentNode===E)break;if(F===4)for(F=y.return;F!==null;){var J=F.tag;if((J===3||J===4)&&(J=F.stateNode.containerInfo,J===E||J.nodeType===8&&J.parentNode===E))return;F=F.return}for(;W!==null;){if(F=zc(W),F===null)return;if(J=F.tag,J===5||J===6){y=S=F;continue e}W=W.parentNode}}y=y.return}Xx(function(){var ae=S,de=Uw(d),ye=[];e:{var he=VA.get(a);if(he!==void 0){var Se=Jw,Pe=a;switch(a){case"keypress":if(Wg(d)===0)break e;case"keydown":case"keyup":Se=rT;break;case"focusin":Pe="focus",Se=e1;break;case"focusout":Pe="blur",Se=e1;break;case"beforeblur":case"afterblur":Se=e1;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=vA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=q9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=oT;break;case MA:case jA:case zA:Se=W9;break;case HA:Se=cT;break;case"scroll":Se=H9;break;case"wheel":Se=uT;break;case"copy":case"cut":case"paste":Se=Z9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=xA}var Ce=(l&4)!==0,Nt=!Ce&&a==="scroll",ne=Ce?he!==null?he+"Capture":null:he;Ce=[];for(var X=ae,oe;X!==null;){oe=X;var me=oe.stateNode;if(oe.tag===5&&me!==null&&(oe=me,ne!==null&&(me=Yh(X,ne),me!=null&&Ce.push(md(X,me,oe)))),Nt)break;X=X.return}0<Ce.length&&(he=new Se(he,Pe,null,d,de),ye.push({event:he,listeners:Ce}))}}if((l&7)===0){e:{if(he=a==="mouseover"||a==="pointerover",Se=a==="mouseout"||a==="pointerout",he&&d!==Rw&&(Pe=d.relatedTarget||d.fromElement)&&(zc(Pe)||Pe[js]))break e;if((Se||he)&&(he=de.window===de?de:(he=de.ownerDocument)?he.defaultView||he.parentWindow:window,Se?(Pe=d.relatedTarget||d.toElement,Se=ae,Pe=Pe?zc(Pe):null,Pe!==null&&(Nt=jc(Pe),Pe!==Nt||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(Se=null,Pe=ae),Se!==Pe)){if(Ce=vA,me="onMouseLeave",ne="onMouseEnter",X="mouse",(a==="pointerout"||a==="pointerover")&&(Ce=xA,me="onPointerLeave",ne="onPointerEnter",X="pointer"),Nt=Se==null?he:Nu(Se),oe=Pe==null?he:Nu(Pe),he=new Ce(me,X+"leave",Se,d,de),he.target=Nt,he.relatedTarget=oe,me=null,zc(de)===ae&&(Ce=new Ce(ne,X+"enter",Pe,d,de),Ce.target=oe,Ce.relatedTarget=Nt,me=Ce),Nt=me,Se&&Pe)t:{for(Ce=Se,ne=Pe,X=0,oe=Ce;oe;oe=Cu(oe))X++;for(oe=0,me=ne;me;me=Cu(me))oe++;for(;0<X-oe;)Ce=Cu(Ce),X--;for(;0<oe-X;)ne=Cu(ne),oe--;for(;X--;){if(Ce===ne||ne!==null&&Ce===ne.alternate)break t;Ce=Cu(Ce),ne=Cu(ne)}Ce=null}else Ce=null;Se!==null&&QA(ye,he,Se,Ce,!1),Pe!==null&&Nt!==null&&QA(ye,Nt,Pe,Ce,!0)}}e:{if(he=ae?Nu(ae):window,Se=he.nodeName&&he.nodeName.toLowerCase(),Se==="select"||Se==="input"&&he.type==="file")var _e=mT;else if(PA(he))if(_A)_e=ET;else{_e=bT;var De=wT}else(Se=he.nodeName)&&Se.toLowerCase()==="input"&&(he.type==="checkbox"||he.type==="radio")&&(_e=vT);if(_e&&(_e=_e(a,ae))){CA(ye,_e,d,de);break e}De&&De(a,he,ae),a==="focusout"&&(De=he._wrapperState)&&De.controlled&&he.type==="number"&&bu(he,"number",he.value)}switch(De=ae?Nu(ae):window,a){case"focusin":(PA(De)||De.contentEditable==="true")&&(Bu=De,o1=ae,pd=null);break;case"focusout":pd=o1=Bu=null;break;case"mousedown":a1=!0;break;case"contextmenu":case"mouseup":case"dragend":a1=!1,LA(ye,d,de);break;case"selectionchange":if(ST)break;case"keydown":case"keyup":LA(ye,d,de)}var $e;if(n1)e:{switch(a){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Ou?OA(a,d)&&(Ue="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Ue="onCompositionStart");Ue&&(AA&&d.locale!=="ko"&&(Ou||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Ou&&($e=wA()):(Jo=de,Zw="value"in Jo?Jo.value:Jo.textContent,Ou=!0)),De=t0(ae,Ue),0<De.length&&(Ue=new EA(Ue,a,null,d,de),ye.push({event:Ue,listeners:De}),$e?Ue.data=$e:($e=BA(d),$e!==null&&(Ue.data=$e)))),($e=hT?dT(a,d):pT(a,d))&&(ae=t0(ae,"onBeforeInput"),0<ae.length&&(de=new EA("onBeforeInput","beforeinput",null,d,de),ye.push({event:de,listeners:ae}),de.data=$e))}GA(ye,l)})}function md(a,l,d){return{instance:a,listener:l,currentTarget:d}}function t0(a,l){for(var d=l+"Capture",y=[];a!==null;){var E=a,S=E.stateNode;E.tag===5&&S!==null&&(E=S,S=Yh(a,d),S!=null&&y.unshift(md(a,S,E)),S=Yh(a,l),S!=null&&y.push(md(a,S,E))),a=a.return}return y}function Cu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function QA(a,l,d,y,E){for(var S=l._reactName,F=[];d!==null&&d!==y;){var W=d,J=W.alternate,ae=W.stateNode;if(J!==null&&J===y)break;W.tag===5&&ae!==null&&(W=ae,E?(J=Yh(d,S),J!=null&&F.unshift(md(d,J,W))):E||(J=Yh(d,S),J!=null&&F.push(md(d,J,W)))),d=d.return}F.length!==0&&a.push({event:l,listeners:F})}var PT=/\r\n?/g,CT=/\u0000|\uFFFD/g;function ZA(a){return(typeof a=="string"?a:""+a).replace(PT,`
`).replace(CT,"")}function n0(a,l,d){if(l=ZA(l),ZA(a)!==l&&d)throw Error(t(425))}function r0(){}var d1=null,p1=null;function g1(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var y1=typeof setTimeout=="function"?setTimeout:void 0,_T=typeof clearTimeout=="function"?clearTimeout:void 0,JA=typeof Promise=="function"?Promise:void 0,NT=typeof queueMicrotask=="function"?queueMicrotask:typeof JA<"u"?function(a){return JA.resolve(null).then(a).catch(DT)}:y1;function DT(a){setTimeout(function(){throw a})}function m1(a,l){var d=l,y=0;do{var E=d.nextSibling;if(a.removeChild(d),E&&E.nodeType===8)if(d=E.data,d==="/$"){if(y===0){a.removeChild(E),ad(l);return}y--}else d!=="$"&&d!=="$?"&&d!=="$!"||y++;d=E}while(d);ad(l)}function Xo(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function YA(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}var _u=Math.random().toString(36).slice(2),as="__reactFiber$"+_u,wd="__reactProps$"+_u,js="__reactContainer$"+_u,w1="__reactEvents$"+_u,$T="__reactListeners$"+_u,TT="__reactHandles$"+_u;function zc(a){var l=a[as];if(l)return l;for(var d=a.parentNode;d;){if(l=d[js]||d[as]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=YA(a);a!==null;){if(d=a[as])return d;a=YA(a)}return l}a=d,d=a.parentNode}return null}function bd(a){return a=a[as]||a[js],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Nu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function i0(a){return a[wd]||null}var b1=[],Du=-1;function ea(a){return{current:a}}function wt(a){0>Du||(a.current=b1[Du],b1[Du]=null,Du--)}function pt(a,l){Du++,b1[Du]=a.current,a.current=l}var ta={},An=ea(ta),sr=ea(!1),Hc=ta;function $u(a,l){var d=a.type.contextTypes;if(!d)return ta;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var E={},S;for(S in d)E[S]=l[S];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=E),E}function or(a){return a=a.childContextTypes,a!=null}function s0(){wt(sr),wt(An)}function XA(a,l,d){if(An.current!==ta)throw Error(t(168));pt(An,l),pt(sr,d)}function e8(a,l,d){var y=a.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return d;y=y.getChildContext();for(var E in y)if(!(E in l))throw Error(t(108,re(a)||"Unknown",E));return N({},d,y)}function o0(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ta,Hc=An.current,pt(An,a),pt(sr,sr.current),!0}function t8(a,l,d){var y=a.stateNode;if(!y)throw Error(t(169));d?(a=e8(a,l,Hc),y.__reactInternalMemoizedMergedChildContext=a,wt(sr),wt(An),pt(An,a)):wt(sr),pt(sr,d)}var zs=null,a0=!1,v1=!1;function n8(a){zs===null?zs=[a]:zs.push(a)}function kT(a){a0=!0,n8(a)}function na(){if(!v1&&zs!==null){v1=!0;var a=0,l=ot;try{var d=zs;for(ot=1;a<d.length;a++){var y=d[a];do y=y(!0);while(y!==null)}zs=null,a0=!1}catch(E){throw zs!==null&&(zs=zs.slice(a+1)),iA(zw,na),E}finally{ot=l,v1=!1}}return null}var Tu=[],ku=0,c0=null,l0=0,Yr=[],Xr=0,Vc=null,Hs=1,Vs="";function qc(a,l){Tu[ku++]=l0,Tu[ku++]=c0,c0=a,l0=l}function r8(a,l,d){Yr[Xr++]=Hs,Yr[Xr++]=Vs,Yr[Xr++]=Vc,Vc=a;var y=Hs;a=Vs;var E=32-Ai(y)-1;y&=~(1<<E),d+=1;var S=32-Ai(l)+E;if(30<S){var F=E-E%5;S=(y&(1<<F)-1).toString(32),y>>=F,E-=F,Hs=1<<32-Ai(l)+E|d<<E|y,Vs=S+a}else Hs=1<<S|d<<E|y,Vs=a}function E1(a){a.return!==null&&(qc(a,1),r8(a,1,0))}function x1(a){for(;a===c0;)c0=Tu[--ku],Tu[ku]=null,l0=Tu[--ku],Tu[ku]=null;for(;a===Vc;)Vc=Yr[--Xr],Yr[Xr]=null,Vs=Yr[--Xr],Yr[Xr]=null,Hs=Yr[--Xr],Yr[Xr]=null}var $r=null,Tr=null,vt=!1,Ii=null;function i8(a,l){var d=ri(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=a,l=a.deletions,l===null?(a.deletions=[d],a.flags|=16):l.push(d)}function s8(a,l){switch(a.tag){case 5:var d=a.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,$r=a,Tr=Xo(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,$r=a,Tr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Vc!==null?{id:Hs,overflow:Vs}:null,a.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=ri(18,null,null,0),d.stateNode=l,d.return=a,a.child=d,$r=a,Tr=null,!0):!1;default:return!1}}function A1(a){return(a.mode&1)!==0&&(a.flags&128)===0}function S1(a){if(vt){var l=Tr;if(l){var d=l;if(!s8(a,l)){if(A1(a))throw Error(t(418));l=Xo(d.nextSibling);var y=$r;l&&s8(a,l)?i8(y,d):(a.flags=a.flags&-4097|2,vt=!1,$r=a)}}else{if(A1(a))throw Error(t(418));a.flags=a.flags&-4097|2,vt=!1,$r=a}}}function o8(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;$r=a}function u0(a){if(a!==$r)return!1;if(!vt)return o8(a),vt=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!g1(a.type,a.memoizedProps)),l&&(l=Tr)){if(A1(a))throw a8(),Error(t(418));for(;l;)i8(a,l),l=Xo(l.nextSibling)}if(o8(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(l===0){Tr=Xo(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}a=a.nextSibling}Tr=null}}else Tr=$r?Xo(a.stateNode.nextSibling):null;return!0}function a8(){for(var a=Tr;a;)a=Xo(a.nextSibling)}function Ru(){Tr=$r=null,vt=!1}function I1(a){Ii===null?Ii=[a]:Ii.push(a)}var RT=T.ReactCurrentBatchConfig;function vd(a,l,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var y=d.stateNode}if(!y)throw Error(t(147,a));var E=y,S=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===S?l.ref:(l=function(F){var W=E.refs;F===null?delete W[S]:W[S]=F},l._stringRef=S,l)}if(typeof a!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,a))}return a}function f0(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function c8(a){var l=a._init;return l(a._payload)}function l8(a){function l(ne,X){if(a){var oe=ne.deletions;oe===null?(ne.deletions=[X],ne.flags|=16):oe.push(X)}}function d(ne,X){if(!a)return null;for(;X!==null;)l(ne,X),X=X.sibling;return null}function y(ne,X){for(ne=new Map;X!==null;)X.key!==null?ne.set(X.key,X):ne.set(X.index,X),X=X.sibling;return ne}function E(ne,X){return ne=ua(ne,X),ne.index=0,ne.sibling=null,ne}function S(ne,X,oe){return ne.index=oe,a?(oe=ne.alternate,oe!==null?(oe=oe.index,oe<X?(ne.flags|=2,X):oe):(ne.flags|=2,X)):(ne.flags|=1048576,X)}function F(ne){return a&&ne.alternate===null&&(ne.flags|=2),ne}function W(ne,X,oe,me){return X===null||X.tag!==6?(X=yb(oe,ne.mode,me),X.return=ne,X):(X=E(X,oe),X.return=ne,X)}function J(ne,X,oe,me){var _e=oe.type;return _e===H?de(ne,X,oe.props.children,me,oe.key):X!==null&&(X.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===x&&c8(_e)===X.type)?(me=E(X,oe.props),me.ref=vd(ne,X,oe),me.return=ne,me):(me=k0(oe.type,oe.key,oe.props,null,ne.mode,me),me.ref=vd(ne,X,oe),me.return=ne,me)}function ae(ne,X,oe,me){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=mb(oe,ne.mode,me),X.return=ne,X):(X=E(X,oe.children||[]),X.return=ne,X)}function de(ne,X,oe,me,_e){return X===null||X.tag!==7?(X=Xc(oe,ne.mode,me,_e),X.return=ne,X):(X=E(X,oe),X.return=ne,X)}function ye(ne,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number")return X=yb(""+X,ne.mode,oe),X.return=ne,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case R:return oe=k0(X.type,X.key,X.props,null,ne.mode,oe),oe.ref=vd(ne,null,X),oe.return=ne,oe;case j:return X=mb(X,ne.mode,oe),X.return=ne,X;case x:var me=X._init;return ye(ne,me(X._payload),oe)}if(Ko(X)||I(X))return X=Xc(X,ne.mode,oe,null),X.return=ne,X;f0(ne,X)}return null}function he(ne,X,oe,me){var _e=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return _e!==null?null:W(ne,X,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case R:return oe.key===_e?J(ne,X,oe,me):null;case j:return oe.key===_e?ae(ne,X,oe,me):null;case x:return _e=oe._init,he(ne,X,_e(oe._payload),me)}if(Ko(oe)||I(oe))return _e!==null?null:de(ne,X,oe,me,null);f0(ne,oe)}return null}function Se(ne,X,oe,me,_e){if(typeof me=="string"&&me!==""||typeof me=="number")return ne=ne.get(oe)||null,W(X,ne,""+me,_e);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case R:return ne=ne.get(me.key===null?oe:me.key)||null,J(X,ne,me,_e);case j:return ne=ne.get(me.key===null?oe:me.key)||null,ae(X,ne,me,_e);case x:var De=me._init;return Se(ne,X,oe,De(me._payload),_e)}if(Ko(me)||I(me))return ne=ne.get(oe)||null,de(X,ne,me,_e,null);f0(X,me)}return null}function Pe(ne,X,oe,me){for(var _e=null,De=null,$e=X,Ue=X=0,Yt=null;$e!==null&&Ue<oe.length;Ue++){$e.index>Ue?(Yt=$e,$e=null):Yt=$e.sibling;var Ze=he(ne,$e,oe[Ue],me);if(Ze===null){$e===null&&($e=Yt);break}a&&$e&&Ze.alternate===null&&l(ne,$e),X=S(Ze,X,Ue),De===null?_e=Ze:De.sibling=Ze,De=Ze,$e=Yt}if(Ue===oe.length)return d(ne,$e),vt&&qc(ne,Ue),_e;if($e===null){for(;Ue<oe.length;Ue++)$e=ye(ne,oe[Ue],me),$e!==null&&(X=S($e,X,Ue),De===null?_e=$e:De.sibling=$e,De=$e);return vt&&qc(ne,Ue),_e}for($e=y(ne,$e);Ue<oe.length;Ue++)Yt=Se($e,ne,Ue,oe[Ue],me),Yt!==null&&(a&&Yt.alternate!==null&&$e.delete(Yt.key===null?Ue:Yt.key),X=S(Yt,X,Ue),De===null?_e=Yt:De.sibling=Yt,De=Yt);return a&&$e.forEach(function(fa){return l(ne,fa)}),vt&&qc(ne,Ue),_e}function Ce(ne,X,oe,me){var _e=I(oe);if(typeof _e!="function")throw Error(t(150));if(oe=_e.call(oe),oe==null)throw Error(t(151));for(var De=_e=null,$e=X,Ue=X=0,Yt=null,Ze=oe.next();$e!==null&&!Ze.done;Ue++,Ze=oe.next()){$e.index>Ue?(Yt=$e,$e=null):Yt=$e.sibling;var fa=he(ne,$e,Ze.value,me);if(fa===null){$e===null&&($e=Yt);break}a&&$e&&fa.alternate===null&&l(ne,$e),X=S(fa,X,Ue),De===null?_e=fa:De.sibling=fa,De=fa,$e=Yt}if(Ze.done)return d(ne,$e),vt&&qc(ne,Ue),_e;if($e===null){for(;!Ze.done;Ue++,Ze=oe.next())Ze=ye(ne,Ze.value,me),Ze!==null&&(X=S(Ze,X,Ue),De===null?_e=Ze:De.sibling=Ze,De=Ze);return vt&&qc(ne,Ue),_e}for($e=y(ne,$e);!Ze.done;Ue++,Ze=oe.next())Ze=Se($e,ne,Ue,Ze.value,me),Ze!==null&&(a&&Ze.alternate!==null&&$e.delete(Ze.key===null?Ue:Ze.key),X=S(Ze,X,Ue),De===null?_e=Ze:De.sibling=Ze,De=Ze);return a&&$e.forEach(function(gk){return l(ne,gk)}),vt&&qc(ne,Ue),_e}function Nt(ne,X,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===H&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case R:e:{for(var _e=oe.key,De=X;De!==null;){if(De.key===_e){if(_e=oe.type,_e===H){if(De.tag===7){d(ne,De.sibling),X=E(De,oe.props.children),X.return=ne,ne=X;break e}}else if(De.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===x&&c8(_e)===De.type){d(ne,De.sibling),X=E(De,oe.props),X.ref=vd(ne,De,oe),X.return=ne,ne=X;break e}d(ne,De);break}else l(ne,De);De=De.sibling}oe.type===H?(X=Xc(oe.props.children,ne.mode,me,oe.key),X.return=ne,ne=X):(me=k0(oe.type,oe.key,oe.props,null,ne.mode,me),me.ref=vd(ne,X,oe),me.return=ne,ne=me)}return F(ne);case j:e:{for(De=oe.key;X!==null;){if(X.key===De)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){d(ne,X.sibling),X=E(X,oe.children||[]),X.return=ne,ne=X;break e}else{d(ne,X);break}else l(ne,X);X=X.sibling}X=mb(oe,ne.mode,me),X.return=ne,ne=X}return F(ne);case x:return De=oe._init,Nt(ne,X,De(oe._payload),me)}if(Ko(oe))return Pe(ne,X,oe,me);if(I(oe))return Ce(ne,X,oe,me);f0(ne,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,X!==null&&X.tag===6?(d(ne,X.sibling),X=E(X,oe),X.return=ne,ne=X):(d(ne,X),X=yb(oe,ne.mode,me),X.return=ne,ne=X),F(ne)):d(ne,X)}return Nt}var Uu=l8(!0),u8=l8(!1),h0=ea(null),d0=null,Lu=null,O1=null;function B1(){O1=Lu=d0=null}function P1(a){var l=h0.current;wt(h0),a._currentValue=l}function C1(a,l,d){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===d)break;a=a.return}}function Fu(a,l){d0=a,O1=Lu=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(ar=!0),a.firstContext=null)}function ei(a){var l=a._currentValue;if(O1!==a)if(a={context:a,memoizedValue:l,next:null},Lu===null){if(d0===null)throw Error(t(308));Lu=a,d0.dependencies={lanes:0,firstContext:a}}else Lu=Lu.next=a;return l}var Kc=null;function _1(a){Kc===null?Kc=[a]:Kc.push(a)}function f8(a,l,d,y){var E=l.interleaved;return E===null?(d.next=d,_1(l)):(d.next=E.next,E.next=d),l.interleaved=d,qs(a,y)}function qs(a,l){a.lanes|=l;var d=a.alternate;for(d!==null&&(d.lanes|=l),d=a,a=a.return;a!==null;)a.childLanes|=l,d=a.alternate,d!==null&&(d.childLanes|=l),d=a,a=a.return;return d.tag===3?d.stateNode:null}var ra=!1;function N1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h8(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Ks(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function ia(a,l,d){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Qe&2)!==0){var E=y.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),y.pending=l,qs(a,d)}return E=y.interleaved,E===null?(l.next=l,_1(y)):(l.next=E.next,E.next=l),y.interleaved=l,qs(a,d)}function p0(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var y=l.lanes;y&=a.pendingLanes,d|=y,l.lanes=d,qw(a,d)}}function d8(a,l){var d=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var E=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var F={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?E=S=F:S=S.next=F,d=d.next}while(d!==null);S===null?E=S=l:S=S.next=l}else E=S=l;d={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:S,shared:y.shared,effects:y.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}function g0(a,l,d,y){var E=a.updateQueue;ra=!1;var S=E.firstBaseUpdate,F=E.lastBaseUpdate,W=E.shared.pending;if(W!==null){E.shared.pending=null;var J=W,ae=J.next;J.next=null,F===null?S=ae:F.next=ae,F=J;var de=a.alternate;de!==null&&(de=de.updateQueue,W=de.lastBaseUpdate,W!==F&&(W===null?de.firstBaseUpdate=ae:W.next=ae,de.lastBaseUpdate=J))}if(S!==null){var ye=E.baseState;F=0,de=ae=J=null,W=S;do{var he=W.lane,Se=W.eventTime;if((y&he)===he){de!==null&&(de=de.next={eventTime:Se,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var Pe=a,Ce=W;switch(he=l,Se=d,Ce.tag){case 1:if(Pe=Ce.payload,typeof Pe=="function"){ye=Pe.call(Se,ye,he);break e}ye=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ce.payload,he=typeof Pe=="function"?Pe.call(Se,ye,he):Pe,he==null)break e;ye=N({},ye,he);break e;case 2:ra=!0}}W.callback!==null&&W.lane!==0&&(a.flags|=64,he=E.effects,he===null?E.effects=[W]:he.push(W))}else Se={eventTime:Se,lane:he,tag:W.tag,payload:W.payload,callback:W.callback,next:null},de===null?(ae=de=Se,J=ye):de=de.next=Se,F|=he;if(W=W.next,W===null){if(W=E.shared.pending,W===null)break;he=W,W=he.next,he.next=null,E.lastBaseUpdate=he,E.shared.pending=null}}while(!0);if(de===null&&(J=ye),E.baseState=J,E.firstBaseUpdate=ae,E.lastBaseUpdate=de,l=E.shared.interleaved,l!==null){E=l;do F|=E.lane,E=E.next;while(E!==l)}else S===null&&(E.shared.lanes=0);Qc|=F,a.lanes=F,a.memoizedState=ye}}function p8(a,l,d){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var y=a[l],E=y.callback;if(E!==null){if(y.callback=null,y=d,typeof E!="function")throw Error(t(191,E));E.call(y)}}}var Ed={},cs=ea(Ed),xd=ea(Ed),Ad=ea(Ed);function Gc(a){if(a===Ed)throw Error(t(174));return a}function D1(a,l){switch(pt(Ad,l),pt(xd,a),pt(cs,Ed),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Zh(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Zh(l,a)}wt(cs),pt(cs,l)}function Mu(){wt(cs),wt(xd),wt(Ad)}function g8(a){Gc(Ad.current);var l=Gc(cs.current),d=Zh(l,a.type);l!==d&&(pt(xd,a),pt(cs,d))}function $1(a){xd.current===a&&(wt(cs),wt(xd))}var At=ea(0);function y0(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var T1=[];function k1(){for(var a=0;a<T1.length;a++)T1[a]._workInProgressVersionPrimary=null;T1.length=0}var m0=T.ReactCurrentDispatcher,R1=T.ReactCurrentBatchConfig,Wc=0,St=null,Mt=null,Zt=null,w0=!1,Sd=!1,Id=0,UT=0;function Sn(){throw Error(t(321))}function U1(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!Si(a[d],l[d]))return!1;return!0}function L1(a,l,d,y,E,S){if(Wc=S,St=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,m0.current=a===null||a.memoizedState===null?jT:zT,a=d(y,E),Sd){S=0;do{if(Sd=!1,Id=0,25<=S)throw Error(t(301));S+=1,Zt=Mt=null,l.updateQueue=null,m0.current=HT,a=d(y,E)}while(Sd)}if(m0.current=E0,l=Mt!==null&&Mt.next!==null,Wc=0,Zt=Mt=St=null,w0=!1,l)throw Error(t(300));return a}function F1(){var a=Id!==0;return Id=0,a}function ls(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?St.memoizedState=Zt=a:Zt=Zt.next=a,Zt}function ti(){if(Mt===null){var a=St.alternate;a=a!==null?a.memoizedState:null}else a=Mt.next;var l=Zt===null?St.memoizedState:Zt.next;if(l!==null)Zt=l,Mt=a;else{if(a===null)throw Error(t(310));Mt=a,a={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Zt===null?St.memoizedState=Zt=a:Zt=Zt.next=a}return Zt}function Od(a,l){return typeof l=="function"?l(a):l}function M1(a){var l=ti(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=a;var y=Mt,E=y.baseQueue,S=d.pending;if(S!==null){if(E!==null){var F=E.next;E.next=S.next,S.next=F}y.baseQueue=E=S,d.pending=null}if(E!==null){S=E.next,y=y.baseState;var W=F=null,J=null,ae=S;do{var de=ae.lane;if((Wc&de)===de)J!==null&&(J=J.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),y=ae.hasEagerState?ae.eagerState:a(y,ae.action);else{var ye={lane:de,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};J===null?(W=J=ye,F=y):J=J.next=ye,St.lanes|=de,Qc|=de}ae=ae.next}while(ae!==null&&ae!==S);J===null?F=y:J.next=W,Si(y,l.memoizedState)||(ar=!0),l.memoizedState=y,l.baseState=F,l.baseQueue=J,d.lastRenderedState=y}if(a=d.interleaved,a!==null){E=a;do S=E.lane,St.lanes|=S,Qc|=S,E=E.next;while(E!==a)}else E===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function j1(a){var l=ti(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=a;var y=d.dispatch,E=d.pending,S=l.memoizedState;if(E!==null){d.pending=null;var F=E=E.next;do S=a(S,F.action),F=F.next;while(F!==E);Si(S,l.memoizedState)||(ar=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),d.lastRenderedState=S}return[S,y]}function y8(){}function m8(a,l){var d=St,y=ti(),E=l(),S=!Si(y.memoizedState,E);if(S&&(y.memoizedState=E,ar=!0),y=y.queue,z1(v8.bind(null,d,y,a),[a]),y.getSnapshot!==l||S||Zt!==null&&Zt.memoizedState.tag&1){if(d.flags|=2048,Bd(9,b8.bind(null,d,y,E,l),void 0,null),Jt===null)throw Error(t(349));(Wc&30)!==0||w8(d,l,E)}return E}function w8(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=St.updateQueue,l===null?(l={lastEffect:null,stores:null},St.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function b8(a,l,d,y){l.value=d,l.getSnapshot=y,E8(l)&&x8(a)}function v8(a,l,d){return d(function(){E8(l)&&x8(a)})}function E8(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!Si(a,d)}catch{return!0}}function x8(a){var l=qs(a,1);l!==null&&Ci(l,a,1,-1)}function A8(a){var l=ls();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Od,lastRenderedState:a},l.queue=a,a=a.dispatch=MT.bind(null,St,a),[l.memoizedState,a]}function Bd(a,l,d,y){return a={tag:a,create:l,destroy:d,deps:y,next:null},l=St.updateQueue,l===null?(l={lastEffect:null,stores:null},St.updateQueue=l,l.lastEffect=a.next=a):(d=l.lastEffect,d===null?l.lastEffect=a.next=a:(y=d.next,d.next=a,a.next=y,l.lastEffect=a)),a}function S8(){return ti().memoizedState}function b0(a,l,d,y){var E=ls();St.flags|=a,E.memoizedState=Bd(1|l,d,void 0,y===void 0?null:y)}function v0(a,l,d,y){var E=ti();y=y===void 0?null:y;var S=void 0;if(Mt!==null){var F=Mt.memoizedState;if(S=F.destroy,y!==null&&U1(y,F.deps)){E.memoizedState=Bd(l,d,S,y);return}}St.flags|=a,E.memoizedState=Bd(1|l,d,S,y)}function I8(a,l){return b0(8390656,8,a,l)}function z1(a,l){return v0(2048,8,a,l)}function O8(a,l){return v0(4,2,a,l)}function B8(a,l){return v0(4,4,a,l)}function P8(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function C8(a,l,d){return d=d!=null?d.concat([a]):null,v0(4,4,P8.bind(null,l,a),d)}function H1(){}function _8(a,l){var d=ti();l=l===void 0?null:l;var y=d.memoizedState;return y!==null&&l!==null&&U1(l,y[1])?y[0]:(d.memoizedState=[a,l],a)}function N8(a,l){var d=ti();l=l===void 0?null:l;var y=d.memoizedState;return y!==null&&l!==null&&U1(l,y[1])?y[0]:(a=a(),d.memoizedState=[a,l],a)}function D8(a,l,d){return(Wc&21)===0?(a.baseState&&(a.baseState=!1,ar=!0),a.memoizedState=d):(Si(d,l)||(d=cA(),St.lanes|=d,Qc|=d,a.baseState=!0),l)}function LT(a,l){var d=ot;ot=d!==0&&4>d?d:4,a(!0);var y=R1.transition;R1.transition={};try{a(!1),l()}finally{ot=d,R1.transition=y}}function $8(){return ti().memoizedState}function FT(a,l,d){var y=ca(a);if(d={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null},T8(a))k8(l,d);else if(d=f8(a,l,d,y),d!==null){var E=Kn();Ci(d,a,y,E),R8(d,l,y)}}function MT(a,l,d){var y=ca(a),E={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null};if(T8(a))k8(l,E);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var F=l.lastRenderedState,W=S(F,d);if(E.hasEagerState=!0,E.eagerState=W,Si(W,F)){var J=l.interleaved;J===null?(E.next=E,_1(l)):(E.next=J.next,J.next=E),l.interleaved=E;return}}catch{}finally{}d=f8(a,l,E,y),d!==null&&(E=Kn(),Ci(d,a,y,E),R8(d,l,y))}}function T8(a){var l=a.alternate;return a===St||l!==null&&l===St}function k8(a,l){Sd=w0=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function R8(a,l,d){if((d&4194240)!==0){var y=l.lanes;y&=a.pendingLanes,d|=y,l.lanes=d,qw(a,d)}}var E0={readContext:ei,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useInsertionEffect:Sn,useLayoutEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useMutableSource:Sn,useSyncExternalStore:Sn,useId:Sn,unstable_isNewReconciler:!1},jT={readContext:ei,useCallback:function(a,l){return ls().memoizedState=[a,l===void 0?null:l],a},useContext:ei,useEffect:I8,useImperativeHandle:function(a,l,d){return d=d!=null?d.concat([a]):null,b0(4194308,4,P8.bind(null,l,a),d)},useLayoutEffect:function(a,l){return b0(4194308,4,a,l)},useInsertionEffect:function(a,l){return b0(4,2,a,l)},useMemo:function(a,l){var d=ls();return l=l===void 0?null:l,a=a(),d.memoizedState=[a,l],a},useReducer:function(a,l,d){var y=ls();return l=d!==void 0?d(l):l,y.memoizedState=y.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},y.queue=a,a=a.dispatch=FT.bind(null,St,a),[y.memoizedState,a]},useRef:function(a){var l=ls();return a={current:a},l.memoizedState=a},useState:A8,useDebugValue:H1,useDeferredValue:function(a){return ls().memoizedState=a},useTransition:function(){var a=A8(!1),l=a[0];return a=LT.bind(null,a[1]),ls().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,d){var y=St,E=ls();if(vt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),Jt===null)throw Error(t(349));(Wc&30)!==0||w8(y,l,d)}E.memoizedState=d;var S={value:d,getSnapshot:l};return E.queue=S,I8(v8.bind(null,y,S,a),[a]),y.flags|=2048,Bd(9,b8.bind(null,y,S,d,l),void 0,null),d},useId:function(){var a=ls(),l=Jt.identifierPrefix;if(vt){var d=Vs,y=Hs;d=(y&~(1<<32-Ai(y)-1)).toString(32)+d,l=":"+l+"R"+d,d=Id++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=UT++,l=":"+l+"r"+d.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},zT={readContext:ei,useCallback:_8,useContext:ei,useEffect:z1,useImperativeHandle:C8,useInsertionEffect:O8,useLayoutEffect:B8,useMemo:N8,useReducer:M1,useRef:S8,useState:function(){return M1(Od)},useDebugValue:H1,useDeferredValue:function(a){var l=ti();return D8(l,Mt.memoizedState,a)},useTransition:function(){var a=M1(Od)[0],l=ti().memoizedState;return[a,l]},useMutableSource:y8,useSyncExternalStore:m8,useId:$8,unstable_isNewReconciler:!1},HT={readContext:ei,useCallback:_8,useContext:ei,useEffect:z1,useImperativeHandle:C8,useInsertionEffect:O8,useLayoutEffect:B8,useMemo:N8,useReducer:j1,useRef:S8,useState:function(){return j1(Od)},useDebugValue:H1,useDeferredValue:function(a){var l=ti();return Mt===null?l.memoizedState=a:D8(l,Mt.memoizedState,a)},useTransition:function(){var a=j1(Od)[0],l=ti().memoizedState;return[a,l]},useMutableSource:y8,useSyncExternalStore:m8,useId:$8,unstable_isNewReconciler:!1};function Oi(a,l){if(a&&a.defaultProps){l=N({},l),a=a.defaultProps;for(var d in a)l[d]===void 0&&(l[d]=a[d]);return l}return l}function V1(a,l,d,y){l=a.memoizedState,d=d(y,l),d=d==null?l:N({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var x0={isMounted:function(a){return(a=a._reactInternals)?jc(a)===a:!1},enqueueSetState:function(a,l,d){a=a._reactInternals;var y=Kn(),E=ca(a),S=Ks(y,E);S.payload=l,d!=null&&(S.callback=d),l=ia(a,S,E),l!==null&&(Ci(l,a,E,y),p0(l,a,E))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var y=Kn(),E=ca(a),S=Ks(y,E);S.tag=1,S.payload=l,d!=null&&(S.callback=d),l=ia(a,S,E),l!==null&&(Ci(l,a,E,y),p0(l,a,E))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=Kn(),y=ca(a),E=Ks(d,y);E.tag=2,l!=null&&(E.callback=l),l=ia(a,E,y),l!==null&&(Ci(l,a,y,d),p0(l,a,y))}};function U8(a,l,d,y,E,S,F){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,S,F):l.prototype&&l.prototype.isPureReactComponent?!dd(d,y)||!dd(E,S):!0}function L8(a,l,d){var y=!1,E=ta,S=l.contextType;return typeof S=="object"&&S!==null?S=ei(S):(E=or(l)?Hc:An.current,y=l.contextTypes,S=(y=y!=null)?$u(a,E):ta),l=new l(d,S),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=x0,a.stateNode=l,l._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=E,a.__reactInternalMemoizedMaskedChildContext=S),l}function F8(a,l,d,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,y),l.state!==a&&x0.enqueueReplaceState(l,l.state,null)}function q1(a,l,d,y){var E=a.stateNode;E.props=d,E.state=a.memoizedState,E.refs={},N1(a);var S=l.contextType;typeof S=="object"&&S!==null?E.context=ei(S):(S=or(l)?Hc:An.current,E.context=$u(a,S)),E.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(V1(a,l,S,d),E.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(l=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),l!==E.state&&x0.enqueueReplaceState(E,E.state,null),g0(a,d,E,y),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308)}function ju(a,l){try{var d="",y=l;do d+=Z(y),y=y.return;while(y);var E=d}catch(S){E=`
Error generating stack: `+S.message+`
`+S.stack}return{value:a,source:l,stack:E,digest:null}}function K1(a,l,d){return{value:a,source:null,stack:d??null,digest:l??null}}function G1(a,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var VT=typeof WeakMap=="function"?WeakMap:Map;function M8(a,l,d){d=Ks(-1,d),d.tag=3,d.payload={element:null};var y=l.value;return d.callback=function(){C0||(C0=!0,cb=y),G1(a,l)},d}function j8(a,l,d){d=Ks(-1,d),d.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var E=l.value;d.payload=function(){return y(E)},d.callback=function(){G1(a,l)}}var S=a.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){G1(a,l),typeof y!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var F=l.stack;this.componentDidCatch(l.value,{componentStack:F!==null?F:""})}),d}function z8(a,l,d){var y=a.pingCache;if(y===null){y=a.pingCache=new VT;var E=new Set;y.set(l,E)}else E=y.get(l),E===void 0&&(E=new Set,y.set(l,E));E.has(d)||(E.add(d),a=ik.bind(null,a,l,d),l.then(a,a))}function H8(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function V8(a,l,d,y,E){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Ks(-1,1),l.tag=2,ia(d,l,1))),d.lanes|=1),a):(a.flags|=65536,a.lanes=E,a)}var qT=T.ReactCurrentOwner,ar=!1;function qn(a,l,d,y){l.child=a===null?u8(l,null,d,y):Uu(l,a.child,d,y)}function q8(a,l,d,y,E){d=d.render;var S=l.ref;return Fu(l,E),y=L1(a,l,d,y,S,E),d=F1(),a!==null&&!ar?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~E,Gs(a,l,E)):(vt&&d&&E1(l),l.flags|=1,qn(a,l,y,E),l.child)}function K8(a,l,d,y,E){if(a===null){var S=d.type;return typeof S=="function"&&!gb(S)&&S.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=S,G8(a,l,S,y,E)):(a=k0(d.type,null,y,l,l.mode,E),a.ref=l.ref,a.return=l,l.child=a)}if(S=a.child,(a.lanes&E)===0){var F=S.memoizedProps;if(d=d.compare,d=d!==null?d:dd,d(F,y)&&a.ref===l.ref)return Gs(a,l,E)}return l.flags|=1,a=ua(S,y),a.ref=l.ref,a.return=l,l.child=a}function G8(a,l,d,y,E){if(a!==null){var S=a.memoizedProps;if(dd(S,y)&&a.ref===l.ref)if(ar=!1,l.pendingProps=y=S,(a.lanes&E)!==0)(a.flags&131072)!==0&&(ar=!0);else return l.lanes=a.lanes,Gs(a,l,E)}return W1(a,l,d,y,E)}function W8(a,l,d){var y=l.pendingProps,E=y.children,S=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Hu,kr),kr|=d;else{if((d&1073741824)===0)return a=S!==null?S.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,pt(Hu,kr),kr|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=S!==null?S.baseLanes:d,pt(Hu,kr),kr|=y}else S!==null?(y=S.baseLanes|d,l.memoizedState=null):y=d,pt(Hu,kr),kr|=y;return qn(a,l,E,d),l.child}function Q8(a,l){var d=l.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function W1(a,l,d,y,E){var S=or(d)?Hc:An.current;return S=$u(l,S),Fu(l,E),d=L1(a,l,d,y,S,E),y=F1(),a!==null&&!ar?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~E,Gs(a,l,E)):(vt&&y&&E1(l),l.flags|=1,qn(a,l,d,E),l.child)}function Z8(a,l,d,y,E){if(or(d)){var S=!0;o0(l)}else S=!1;if(Fu(l,E),l.stateNode===null)S0(a,l),L8(l,d,y),q1(l,d,y,E),y=!0;else if(a===null){var F=l.stateNode,W=l.memoizedProps;F.props=W;var J=F.context,ae=d.contextType;typeof ae=="object"&&ae!==null?ae=ei(ae):(ae=or(d)?Hc:An.current,ae=$u(l,ae));var de=d.getDerivedStateFromProps,ye=typeof de=="function"||typeof F.getSnapshotBeforeUpdate=="function";ye||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(W!==y||J!==ae)&&F8(l,F,y,ae),ra=!1;var he=l.memoizedState;F.state=he,g0(l,y,F,E),J=l.memoizedState,W!==y||he!==J||sr.current||ra?(typeof de=="function"&&(V1(l,d,de,y),J=l.memoizedState),(W=ra||U8(l,d,W,y,he,J,ae))?(ye||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(l.flags|=4194308)):(typeof F.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=J),F.props=y,F.state=J,F.context=ae,y=W):(typeof F.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{F=l.stateNode,h8(a,l),W=l.memoizedProps,ae=l.type===l.elementType?W:Oi(l.type,W),F.props=ae,ye=l.pendingProps,he=F.context,J=d.contextType,typeof J=="object"&&J!==null?J=ei(J):(J=or(d)?Hc:An.current,J=$u(l,J));var Se=d.getDerivedStateFromProps;(de=typeof Se=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(W!==ye||he!==J)&&F8(l,F,y,J),ra=!1,he=l.memoizedState,F.state=he,g0(l,y,F,E);var Pe=l.memoizedState;W!==ye||he!==Pe||sr.current||ra?(typeof Se=="function"&&(V1(l,d,Se,y),Pe=l.memoizedState),(ae=ra||U8(l,d,ae,y,he,Pe,J)||!1)?(de||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(y,Pe,J),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(y,Pe,J)),typeof F.componentDidUpdate=="function"&&(l.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof F.componentDidUpdate!="function"||W===a.memoizedProps&&he===a.memoizedState||(l.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||W===a.memoizedProps&&he===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Pe),F.props=y,F.state=Pe,F.context=J,y=ae):(typeof F.componentDidUpdate!="function"||W===a.memoizedProps&&he===a.memoizedState||(l.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||W===a.memoizedProps&&he===a.memoizedState||(l.flags|=1024),y=!1)}return Q1(a,l,d,y,S,E)}function Q1(a,l,d,y,E,S){Q8(a,l);var F=(l.flags&128)!==0;if(!y&&!F)return E&&t8(l,d,!1),Gs(a,l,S);y=l.stateNode,qT.current=l;var W=F&&typeof d.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,a!==null&&F?(l.child=Uu(l,a.child,null,S),l.child=Uu(l,null,W,S)):qn(a,l,W,S),l.memoizedState=y.state,E&&t8(l,d,!0),l.child}function J8(a){var l=a.stateNode;l.pendingContext?XA(a,l.pendingContext,l.pendingContext!==l.context):l.context&&XA(a,l.context,!1),D1(a,l.containerInfo)}function Y8(a,l,d,y,E){return Ru(),I1(E),l.flags|=256,qn(a,l,d,y),l.child}var Z1={dehydrated:null,treeContext:null,retryLane:0};function J1(a){return{baseLanes:a,cachePool:null,transitions:null}}function X8(a,l,d){var y=l.pendingProps,E=At.current,S=!1,F=(l.flags&128)!==0,W;if((W=F)||(W=a!==null&&a.memoizedState===null?!1:(E&2)!==0),W?(S=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(E|=1),pt(At,E&1),a===null)return S1(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(F=y.children,a=y.fallback,S?(y=l.mode,S=l.child,F={mode:"hidden",children:F},(y&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=F):S=R0(F,y,0,null),a=Xc(a,y,d,null),S.return=l,a.return=l,S.sibling=a,l.child=S,l.child.memoizedState=J1(d),l.memoizedState=Z1,a):Y1(l,F));if(E=a.memoizedState,E!==null&&(W=E.dehydrated,W!==null))return KT(a,l,F,y,W,E,d);if(S){S=y.fallback,F=l.mode,E=a.child,W=E.sibling;var J={mode:"hidden",children:y.children};return(F&1)===0&&l.child!==E?(y=l.child,y.childLanes=0,y.pendingProps=J,l.deletions=null):(y=ua(E,J),y.subtreeFlags=E.subtreeFlags&14680064),W!==null?S=ua(W,S):(S=Xc(S,F,d,null),S.flags|=2),S.return=l,y.return=l,y.sibling=S,l.child=y,y=S,S=l.child,F=a.child.memoizedState,F=F===null?J1(d):{baseLanes:F.baseLanes|d,cachePool:null,transitions:F.transitions},S.memoizedState=F,S.childLanes=a.childLanes&~d,l.memoizedState=Z1,y}return S=a.child,a=S.sibling,y=ua(S,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=d),y.return=l,y.sibling=null,a!==null&&(d=l.deletions,d===null?(l.deletions=[a],l.flags|=16):d.push(a)),l.child=y,l.memoizedState=null,y}function Y1(a,l){return l=R0({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function A0(a,l,d,y){return y!==null&&I1(y),Uu(l,a.child,null,d),a=Y1(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function KT(a,l,d,y,E,S,F){if(d)return l.flags&256?(l.flags&=-257,y=K1(Error(t(422))),A0(a,l,F,y)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(S=y.fallback,E=l.mode,y=R0({mode:"visible",children:y.children},E,0,null),S=Xc(S,E,F,null),S.flags|=2,y.return=l,S.return=l,y.sibling=S,l.child=y,(l.mode&1)!==0&&Uu(l,a.child,null,F),l.child.memoizedState=J1(F),l.memoizedState=Z1,S);if((l.mode&1)===0)return A0(a,l,F,null);if(E.data==="$!"){if(y=E.nextSibling&&E.nextSibling.dataset,y)var W=y.dgst;return y=W,S=Error(t(419)),y=K1(S,y,void 0),A0(a,l,F,y)}if(W=(F&a.childLanes)!==0,ar||W){if(y=Jt,y!==null){switch(F&-F){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(y.suspendedLanes|F))!==0?0:E,E!==0&&E!==S.retryLane&&(S.retryLane=E,qs(a,E),Ci(y,a,E,-1))}return pb(),y=K1(Error(t(421))),A0(a,l,F,y)}return E.data==="$?"?(l.flags|=128,l.child=a.child,l=sk.bind(null,a),E._reactRetry=l,null):(a=S.treeContext,Tr=Xo(E.nextSibling),$r=l,vt=!0,Ii=null,a!==null&&(Yr[Xr++]=Hs,Yr[Xr++]=Vs,Yr[Xr++]=Vc,Hs=a.id,Vs=a.overflow,Vc=l),l=Y1(l,y.children),l.flags|=4096,l)}function e4(a,l,d){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),C1(a.return,l,d)}function X1(a,l,d,y,E){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:E}:(S.isBackwards=l,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=d,S.tailMode=E)}function t4(a,l,d){var y=l.pendingProps,E=y.revealOrder,S=y.tail;if(qn(a,l,y.children,d),y=At.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&e4(a,d,l);else if(a.tag===19)e4(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(pt(At,y),(l.mode&1)===0)l.memoizedState=null;else switch(E){case"forwards":for(d=l.child,E=null;d!==null;)a=d.alternate,a!==null&&y0(a)===null&&(E=d),d=d.sibling;d=E,d===null?(E=l.child,l.child=null):(E=d.sibling,d.sibling=null),X1(l,!1,E,d,S);break;case"backwards":for(d=null,E=l.child,l.child=null;E!==null;){if(a=E.alternate,a!==null&&y0(a)===null){l.child=E;break}a=E.sibling,E.sibling=d,d=E,E=a}X1(l,!0,d,null,S);break;case"together":X1(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function S0(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Gs(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),Qc|=l.lanes,(d&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,d=ua(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=ua(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function GT(a,l,d){switch(l.tag){case 3:J8(l),Ru();break;case 5:g8(l);break;case 1:or(l.type)&&o0(l);break;case 4:D1(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,E=l.memoizedProps.value;pt(h0,y._currentValue),y._currentValue=E;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(pt(At,At.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?X8(a,l,d):(pt(At,At.current&1),a=Gs(a,l,d),a!==null?a.sibling:null);pt(At,At.current&1);break;case 19:if(y=(d&l.childLanes)!==0,(a.flags&128)!==0){if(y)return t4(a,l,d);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),pt(At,At.current),y)break;return null;case 22:case 23:return l.lanes=0,W8(a,l,d)}return Gs(a,l,d)}var n4,eb,r4,i4;n4=function(a,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},eb=function(){},r4=function(a,l,d,y){var E=a.memoizedProps;if(E!==y){a=l.stateNode,Gc(cs.current);var S=null;switch(d){case"input":E=Ve(a,E),y=Ve(a,y),S=[];break;case"select":E=N({},E,{value:void 0}),y=N({},y,{value:void 0}),S=[];break;case"textarea":E=vu(a,E),y=vu(a,y),S=[];break;default:typeof E.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=r0)}Tw(d,y);var F;d=null;for(ae in E)if(!y.hasOwnProperty(ae)&&E.hasOwnProperty(ae)&&E[ae]!=null)if(ae==="style"){var W=E[ae];for(F in W)W.hasOwnProperty(F)&&(d||(d={}),d[F]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(i.hasOwnProperty(ae)?S||(S=[]):(S=S||[]).push(ae,null));for(ae in y){var J=y[ae];if(W=E!=null?E[ae]:void 0,y.hasOwnProperty(ae)&&J!==W&&(J!=null||W!=null))if(ae==="style")if(W){for(F in W)!W.hasOwnProperty(F)||J&&J.hasOwnProperty(F)||(d||(d={}),d[F]="");for(F in J)J.hasOwnProperty(F)&&W[F]!==J[F]&&(d||(d={}),d[F]=J[F])}else d||(S||(S=[]),S.push(ae,d)),d=J;else ae==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,W=W?W.__html:void 0,J!=null&&W!==J&&(S=S||[]).push(ae,J)):ae==="children"?typeof J!="string"&&typeof J!="number"||(S=S||[]).push(ae,""+J):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(i.hasOwnProperty(ae)?(J!=null&&ae==="onScroll"&&mt("scroll",a),S||W===J||(S=[])):(S=S||[]).push(ae,J))}d&&(S=S||[]).push("style",d);var ae=S;(l.updateQueue=ae)&&(l.flags|=4)}},i4=function(a,l,d,y){d!==y&&(l.flags|=4)};function Pd(a,l){if(!vt)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function In(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,y=0;if(l)for(var E=a.child;E!==null;)d|=E.lanes|E.childLanes,y|=E.subtreeFlags&14680064,y|=E.flags&14680064,E.return=a,E=E.sibling;else for(E=a.child;E!==null;)d|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=a,E=E.sibling;return a.subtreeFlags|=y,a.childLanes=d,l}function WT(a,l,d){var y=l.pendingProps;switch(x1(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(l),null;case 1:return or(l.type)&&s0(),In(l),null;case 3:return y=l.stateNode,Mu(),wt(sr),wt(An),k1(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(u0(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ii!==null&&(fb(Ii),Ii=null))),eb(a,l),In(l),null;case 5:$1(l);var E=Gc(Ad.current);if(d=l.type,a!==null&&l.stateNode!=null)r4(a,l,d,y,E),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return In(l),null}if(a=Gc(cs.current),u0(l)){y=l.stateNode,d=l.type;var S=l.memoizedProps;switch(y[as]=l,y[wd]=S,a=(l.mode&1)!==0,d){case"dialog":mt("cancel",y),mt("close",y);break;case"iframe":case"object":case"embed":mt("load",y);break;case"video":case"audio":for(E=0;E<gd.length;E++)mt(gd[E],y);break;case"source":mt("error",y);break;case"img":case"image":case"link":mt("error",y),mt("load",y);break;case"details":mt("toggle",y);break;case"input":Qt(y,S),mt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!S.multiple},mt("invalid",y);break;case"textarea":Kh(y,S),mt("invalid",y)}Tw(d,S),E=null;for(var F in S)if(S.hasOwnProperty(F)){var W=S[F];F==="children"?typeof W=="string"?y.textContent!==W&&(S.suppressHydrationWarning!==!0&&n0(y.textContent,W,a),E=["children",W]):typeof W=="number"&&y.textContent!==""+W&&(S.suppressHydrationWarning!==!0&&n0(y.textContent,W,a),E=["children",""+W]):i.hasOwnProperty(F)&&W!=null&&F==="onScroll"&&mt("scroll",y)}switch(d){case"input":Ne(y),Ms(y,S,!0);break;case"textarea":Ne(y),Wh(y);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(y.onclick=r0)}y=E,l.updateQueue=y,y!==null&&(l.flags|=4)}else{F=E.nodeType===9?E:E.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Qh(d)),a==="http://www.w3.org/1999/xhtml"?d==="script"?(a=F.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=F.createElement(d,{is:y.is}):(a=F.createElement(d),d==="select"&&(F=a,y.multiple?F.multiple=!0:y.size&&(F.size=y.size))):a=F.createElementNS(a,d),a[as]=l,a[wd]=y,n4(a,l,!1,!1),l.stateNode=a;e:{switch(F=kw(d,y),d){case"dialog":mt("cancel",a),mt("close",a),E=y;break;case"iframe":case"object":case"embed":mt("load",a),E=y;break;case"video":case"audio":for(E=0;E<gd.length;E++)mt(gd[E],a);E=y;break;case"source":mt("error",a),E=y;break;case"img":case"image":case"link":mt("error",a),mt("load",a),E=y;break;case"details":mt("toggle",a),E=y;break;case"input":Qt(a,y),E=Ve(a,y),mt("invalid",a);break;case"option":E=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},E=N({},y,{value:void 0}),mt("invalid",a);break;case"textarea":Kh(a,y),E=vu(a,y),mt("invalid",a);break;default:E=y}Tw(d,E),W=E;for(S in W)if(W.hasOwnProperty(S)){var J=W[S];S==="style"?Gx(a,J):S==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&kg(a,J)):S==="children"?typeof J=="string"?(d!=="textarea"||J!=="")&&Mc(a,J):typeof J=="number"&&Mc(a,""+J):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?J!=null&&S==="onScroll"&&mt("scroll",a):J!=null&&O(a,S,J,F))}switch(d){case"input":Ne(a),Ms(a,y,!1);break;case"textarea":Ne(a),Wh(a);break;case"option":y.value!=null&&a.setAttribute("value",""+le(y.value));break;case"select":a.multiple=!!y.multiple,S=y.value,S!=null?ss(a,!!y.multiple,S,!1):y.defaultValue!=null&&ss(a,!!y.multiple,y.defaultValue,!0);break;default:typeof E.onClick=="function"&&(a.onclick=r0)}switch(d){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return In(l),null;case 6:if(a&&l.stateNode!=null)i4(a,l,a.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(d=Gc(Ad.current),Gc(cs.current),u0(l)){if(y=l.stateNode,d=l.memoizedProps,y[as]=l,(S=y.nodeValue!==d)&&(a=$r,a!==null))switch(a.tag){case 3:n0(y.nodeValue,d,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&n0(y.nodeValue,d,(a.mode&1)!==0)}S&&(l.flags|=4)}else y=(d.nodeType===9?d:d.ownerDocument).createTextNode(y),y[as]=l,l.stateNode=y}return In(l),null;case 13:if(wt(At),y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(vt&&Tr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)a8(),Ru(),l.flags|=98560,S=!1;else if(S=u0(l),y!==null&&y.dehydrated!==null){if(a===null){if(!S)throw Error(t(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[as]=l}else Ru(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;In(l),S=!1}else Ii!==null&&(fb(Ii),Ii=null),S=!0;if(!S)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(At.current&1)!==0?jt===0&&(jt=3):pb())),l.updateQueue!==null&&(l.flags|=4),In(l),null);case 4:return Mu(),eb(a,l),a===null&&yd(l.stateNode.containerInfo),In(l),null;case 10:return P1(l.type._context),In(l),null;case 17:return or(l.type)&&s0(),In(l),null;case 19:if(wt(At),S=l.memoizedState,S===null)return In(l),null;if(y=(l.flags&128)!==0,F=S.rendering,F===null)if(y)Pd(S,!1);else{if(jt!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(F=y0(a),F!==null){for(l.flags|=128,Pd(S,!1),y=F.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=d,d=l.child;d!==null;)S=d,a=y,S.flags&=14680066,F=S.alternate,F===null?(S.childLanes=0,S.lanes=a,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=F.childLanes,S.lanes=F.lanes,S.child=F.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=F.memoizedProps,S.memoizedState=F.memoizedState,S.updateQueue=F.updateQueue,S.type=F.type,a=F.dependencies,S.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return pt(At,At.current&1|2),l.child}a=a.sibling}S.tail!==null&&_t()>Vu&&(l.flags|=128,y=!0,Pd(S,!1),l.lanes=4194304)}else{if(!y)if(a=y0(F),a!==null){if(l.flags|=128,y=!0,d=a.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Pd(S,!0),S.tail===null&&S.tailMode==="hidden"&&!F.alternate&&!vt)return In(l),null}else 2*_t()-S.renderingStartTime>Vu&&d!==1073741824&&(l.flags|=128,y=!0,Pd(S,!1),l.lanes=4194304);S.isBackwards?(F.sibling=l.child,l.child=F):(d=S.last,d!==null?d.sibling=F:l.child=F,S.last=F)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=_t(),l.sibling=null,d=At.current,pt(At,y?d&1|2:d&1),l):(In(l),null);case 22:case 23:return db(),y=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(kr&1073741824)!==0&&(In(l),l.subtreeFlags&6&&(l.flags|=8192)):In(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function QT(a,l){switch(x1(l),l.tag){case 1:return or(l.type)&&s0(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Mu(),wt(sr),wt(An),k1(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return $1(l),null;case 13:if(wt(At),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Ru()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return wt(At),null;case 4:return Mu(),null;case 10:return P1(l.type._context),null;case 22:case 23:return db(),null;case 24:return null;default:return null}}var I0=!1,On=!1,ZT=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function zu(a,l){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){Ot(a,l,y)}else d.current=null}function tb(a,l,d){try{d()}catch(y){Ot(a,l,y)}}var s4=!1;function JT(a,l){if(d1=qg,a=UA(),s1(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var E=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break e}var F=0,W=-1,J=-1,ae=0,de=0,ye=a,he=null;t:for(;;){for(var Se;ye!==d||E!==0&&ye.nodeType!==3||(W=F+E),ye!==S||y!==0&&ye.nodeType!==3||(J=F+y),ye.nodeType===3&&(F+=ye.nodeValue.length),(Se=ye.firstChild)!==null;)he=ye,ye=Se;for(;;){if(ye===a)break t;if(he===d&&++ae===E&&(W=F),he===S&&++de===y&&(J=F),(Se=ye.nextSibling)!==null)break;ye=he,he=ye.parentNode}ye=Se}d=W===-1||J===-1?null:{start:W,end:J}}else d=null}d=d||{start:0,end:0}}else d=null;for(p1={focusedElem:a,selectionRange:d},qg=!1,Ie=l;Ie!==null;)if(l=Ie,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Ie=a;else for(;Ie!==null;){l=Ie;try{var Pe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Ce=Pe.memoizedProps,Nt=Pe.memoizedState,ne=l.stateNode,X=ne.getSnapshotBeforeUpdate(l.elementType===l.type?Ce:Oi(l.type,Ce),Nt);ne.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var oe=l.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(me){Ot(l,l.return,me)}if(a=l.sibling,a!==null){a.return=l.return,Ie=a;break}Ie=l.return}return Pe=s4,s4=!1,Pe}function Cd(a,l,d){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var E=y=y.next;do{if((E.tag&a)===a){var S=E.destroy;E.destroy=void 0,S!==void 0&&tb(l,d,S)}E=E.next}while(E!==y)}}function O0(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&a)===a){var y=d.create;d.destroy=y()}d=d.next}while(d!==l)}}function nb(a){var l=a.ref;if(l!==null){var d=a.stateNode;switch(a.tag){case 5:a=d;break;default:a=d}typeof l=="function"?l(a):l.current=a}}function o4(a){var l=a.alternate;l!==null&&(a.alternate=null,o4(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[as],delete l[wd],delete l[w1],delete l[$T],delete l[TT])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function a4(a){return a.tag===5||a.tag===3||a.tag===4}function c4(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||a4(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function rb(a,l,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(a,l):d.insertBefore(a,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(a,d)):(l=d,l.appendChild(a)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=r0));else if(y!==4&&(a=a.child,a!==null))for(rb(a,l,d),a=a.sibling;a!==null;)rb(a,l,d),a=a.sibling}function ib(a,l,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(ib(a,l,d),a=a.sibling;a!==null;)ib(a,l,d),a=a.sibling}var ln=null,Bi=!1;function sa(a,l,d){for(d=d.child;d!==null;)l4(a,l,d),d=d.sibling}function l4(a,l,d){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(Fg,d)}catch{}switch(d.tag){case 5:On||zu(d,l);case 6:var y=ln,E=Bi;ln=null,sa(a,l,d),ln=y,Bi=E,ln!==null&&(Bi?(a=ln,d=d.stateNode,a.nodeType===8?a.parentNode.removeChild(d):a.removeChild(d)):ln.removeChild(d.stateNode));break;case 18:ln!==null&&(Bi?(a=ln,d=d.stateNode,a.nodeType===8?m1(a.parentNode,d):a.nodeType===1&&m1(a,d),ad(a)):m1(ln,d.stateNode));break;case 4:y=ln,E=Bi,ln=d.stateNode.containerInfo,Bi=!0,sa(a,l,d),ln=y,Bi=E;break;case 0:case 11:case 14:case 15:if(!On&&(y=d.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){E=y=y.next;do{var S=E,F=S.destroy;S=S.tag,F!==void 0&&((S&2)!==0||(S&4)!==0)&&tb(d,l,F),E=E.next}while(E!==y)}sa(a,l,d);break;case 1:if(!On&&(zu(d,l),y=d.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=d.memoizedProps,y.state=d.memoizedState,y.componentWillUnmount()}catch(W){Ot(d,l,W)}sa(a,l,d);break;case 21:sa(a,l,d);break;case 22:d.mode&1?(On=(y=On)||d.memoizedState!==null,sa(a,l,d),On=y):sa(a,l,d);break;default:sa(a,l,d)}}function u4(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new ZT),l.forEach(function(y){var E=ok.bind(null,a,y);d.has(y)||(d.add(y),y.then(E,E))})}}function Pi(a,l){var d=l.deletions;if(d!==null)for(var y=0;y<d.length;y++){var E=d[y];try{var S=a,F=l,W=F;e:for(;W!==null;){switch(W.tag){case 5:ln=W.stateNode,Bi=!1;break e;case 3:ln=W.stateNode.containerInfo,Bi=!0;break e;case 4:ln=W.stateNode.containerInfo,Bi=!0;break e}W=W.return}if(ln===null)throw Error(t(160));l4(S,F,E),ln=null,Bi=!1;var J=E.alternate;J!==null&&(J.return=null),E.return=null}catch(ae){Ot(E,l,ae)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)f4(l,a),l=l.sibling}function f4(a,l){var d=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Pi(l,a),us(a),y&4){try{Cd(3,a,a.return),O0(3,a)}catch(Ce){Ot(a,a.return,Ce)}try{Cd(5,a,a.return)}catch(Ce){Ot(a,a.return,Ce)}}break;case 1:Pi(l,a),us(a),y&512&&d!==null&&zu(d,d.return);break;case 5:if(Pi(l,a),us(a),y&512&&d!==null&&zu(d,d.return),a.flags&32){var E=a.stateNode;try{Mc(E,"")}catch(Ce){Ot(a,a.return,Ce)}}if(y&4&&(E=a.stateNode,E!=null)){var S=a.memoizedProps,F=d!==null?d.memoizedProps:S,W=a.type,J=a.updateQueue;if(a.updateQueue=null,J!==null)try{W==="input"&&S.type==="radio"&&S.name!=null&&cn(E,S),kw(W,F);var ae=kw(W,S);for(F=0;F<J.length;F+=2){var de=J[F],ye=J[F+1];de==="style"?Gx(E,ye):de==="dangerouslySetInnerHTML"?kg(E,ye):de==="children"?Mc(E,ye):O(E,de,ye,ae)}switch(W){case"input":xi(E,S);break;case"textarea":Gh(E,S);break;case"select":var he=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!S.multiple;var Se=S.value;Se!=null?ss(E,!!S.multiple,Se,!1):he!==!!S.multiple&&(S.defaultValue!=null?ss(E,!!S.multiple,S.defaultValue,!0):ss(E,!!S.multiple,S.multiple?[]:"",!1))}E[wd]=S}catch(Ce){Ot(a,a.return,Ce)}}break;case 6:if(Pi(l,a),us(a),y&4){if(a.stateNode===null)throw Error(t(162));E=a.stateNode,S=a.memoizedProps;try{E.nodeValue=S}catch(Ce){Ot(a,a.return,Ce)}}break;case 3:if(Pi(l,a),us(a),y&4&&d!==null&&d.memoizedState.isDehydrated)try{ad(l.containerInfo)}catch(Ce){Ot(a,a.return,Ce)}break;case 4:Pi(l,a),us(a);break;case 13:Pi(l,a),us(a),E=a.child,E.flags&8192&&(S=E.memoizedState!==null,E.stateNode.isHidden=S,!S||E.alternate!==null&&E.alternate.memoizedState!==null||(ab=_t())),y&4&&u4(a);break;case 22:if(de=d!==null&&d.memoizedState!==null,a.mode&1?(On=(ae=On)||de,Pi(l,a),On=ae):Pi(l,a),us(a),y&8192){if(ae=a.memoizedState!==null,(a.stateNode.isHidden=ae)&&!de&&(a.mode&1)!==0)for(Ie=a,de=a.child;de!==null;){for(ye=Ie=de;Ie!==null;){switch(he=Ie,Se=he.child,he.tag){case 0:case 11:case 14:case 15:Cd(4,he,he.return);break;case 1:zu(he,he.return);var Pe=he.stateNode;if(typeof Pe.componentWillUnmount=="function"){y=he,d=he.return;try{l=y,Pe.props=l.memoizedProps,Pe.state=l.memoizedState,Pe.componentWillUnmount()}catch(Ce){Ot(y,d,Ce)}}break;case 5:zu(he,he.return);break;case 22:if(he.memoizedState!==null){p4(ye);continue}}Se!==null?(Se.return=he,Ie=Se):p4(ye)}de=de.sibling}e:for(de=null,ye=a;;){if(ye.tag===5){if(de===null){de=ye;try{E=ye.stateNode,ae?(S=E.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(W=ye.stateNode,J=ye.memoizedProps.style,F=J!=null&&J.hasOwnProperty("display")?J.display:null,W.style.display=Kx("display",F))}catch(Ce){Ot(a,a.return,Ce)}}}else if(ye.tag===6){if(de===null)try{ye.stateNode.nodeValue=ae?"":ye.memoizedProps}catch(Ce){Ot(a,a.return,Ce)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===a)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===a)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===a)break e;de===ye&&(de=null),ye=ye.return}de===ye&&(de=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:Pi(l,a),us(a),y&4&&u4(a);break;case 21:break;default:Pi(l,a),us(a)}}function us(a){var l=a.flags;if(l&2){try{e:{for(var d=a.return;d!==null;){if(a4(d)){var y=d;break e}d=d.return}throw Error(t(160))}switch(y.tag){case 5:var E=y.stateNode;y.flags&32&&(Mc(E,""),y.flags&=-33);var S=c4(a);ib(a,S,E);break;case 3:case 4:var F=y.stateNode.containerInfo,W=c4(a);rb(a,W,F);break;default:throw Error(t(161))}}catch(J){Ot(a,a.return,J)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function YT(a,l,d){Ie=a,h4(a)}function h4(a,l,d){for(var y=(a.mode&1)!==0;Ie!==null;){var E=Ie,S=E.child;if(E.tag===22&&y){var F=E.memoizedState!==null||I0;if(!F){var W=E.alternate,J=W!==null&&W.memoizedState!==null||On;W=I0;var ae=On;if(I0=F,(On=J)&&!ae)for(Ie=E;Ie!==null;)F=Ie,J=F.child,F.tag===22&&F.memoizedState!==null?g4(E):J!==null?(J.return=F,Ie=J):g4(E);for(;S!==null;)Ie=S,h4(S),S=S.sibling;Ie=E,I0=W,On=ae}d4(a)}else(E.subtreeFlags&8772)!==0&&S!==null?(S.return=E,Ie=S):d4(a)}}function d4(a){for(;Ie!==null;){var l=Ie;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:On||O0(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!On)if(d===null)y.componentDidMount();else{var E=l.elementType===l.type?d.memoizedProps:Oi(l.type,d.memoizedProps);y.componentDidUpdate(E,d.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var S=l.updateQueue;S!==null&&p8(l,S,y);break;case 3:var F=l.updateQueue;if(F!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}p8(l,F,d)}break;case 5:var W=l.stateNode;if(d===null&&l.flags&4){d=W;var J=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&d.focus();break;case"img":J.src&&(d.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ae=l.alternate;if(ae!==null){var de=ae.memoizedState;if(de!==null){var ye=de.dehydrated;ye!==null&&ad(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}On||l.flags&512&&nb(l)}catch(he){Ot(l,l.return,he)}}if(l===a){Ie=null;break}if(d=l.sibling,d!==null){d.return=l.return,Ie=d;break}Ie=l.return}}function p4(a){for(;Ie!==null;){var l=Ie;if(l===a){Ie=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Ie=d;break}Ie=l.return}}function g4(a){for(;Ie!==null;){var l=Ie;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{O0(4,l)}catch(J){Ot(l,d,J)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var E=l.return;try{y.componentDidMount()}catch(J){Ot(l,E,J)}}var S=l.return;try{nb(l)}catch(J){Ot(l,S,J)}break;case 5:var F=l.return;try{nb(l)}catch(J){Ot(l,F,J)}}}catch(J){Ot(l,l.return,J)}if(l===a){Ie=null;break}var W=l.sibling;if(W!==null){W.return=l.return,Ie=W;break}Ie=l.return}}var XT=Math.ceil,B0=T.ReactCurrentDispatcher,sb=T.ReactCurrentOwner,ni=T.ReactCurrentBatchConfig,Qe=0,Jt=null,Rt=null,un=0,kr=0,Hu=ea(0),jt=0,_d=null,Qc=0,P0=0,ob=0,Nd=null,cr=null,ab=0,Vu=1/0,Ws=null,C0=!1,cb=null,oa=null,_0=!1,aa=null,N0=0,Dd=0,lb=null,D0=-1,$0=0;function Kn(){return(Qe&6)!==0?_t():D0!==-1?D0:D0=_t()}function ca(a){return(a.mode&1)===0?1:(Qe&2)!==0&&un!==0?un&-un:RT.transition!==null?($0===0&&($0=cA()),$0):(a=ot,a!==0||(a=window.event,a=a===void 0?16:mA(a.type)),a)}function Ci(a,l,d,y){if(50<Dd)throw Dd=0,lb=null,Error(t(185));nd(a,d,y),((Qe&2)===0||a!==Jt)&&(a===Jt&&((Qe&2)===0&&(P0|=d),jt===4&&la(a,un)),lr(a,y),d===1&&Qe===0&&(l.mode&1)===0&&(Vu=_t()+500,a0&&na()))}function lr(a,l){var d=a.callbackNode;R9(a,l);var y=zg(a,a===Jt?un:0);if(y===0)d!==null&&sA(d),a.callbackNode=null,a.callbackPriority=0;else if(l=y&-y,a.callbackPriority!==l){if(d!=null&&sA(d),l===1)a.tag===0?kT(m4.bind(null,a)):n8(m4.bind(null,a)),NT(function(){(Qe&6)===0&&na()}),d=null;else{switch(lA(y)){case 1:d=zw;break;case 4:d=oA;break;case 16:d=Lg;break;case 536870912:d=aA;break;default:d=Lg}d=I4(d,y4.bind(null,a))}a.callbackPriority=l,a.callbackNode=d}}function y4(a,l){if(D0=-1,$0=0,(Qe&6)!==0)throw Error(t(327));var d=a.callbackNode;if(qu()&&a.callbackNode!==d)return null;var y=zg(a,a===Jt?un:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||l)l=T0(a,y);else{l=y;var E=Qe;Qe|=2;var S=b4();(Jt!==a||un!==l)&&(Ws=null,Vu=_t()+500,Jc(a,l));do try{nk();break}catch(W){w4(a,W)}while(!0);B1(),B0.current=S,Qe=E,Rt!==null?l=0:(Jt=null,un=0,l=jt)}if(l!==0){if(l===2&&(E=Hw(a),E!==0&&(y=E,l=ub(a,E))),l===1)throw d=_d,Jc(a,0),la(a,y),lr(a,_t()),d;if(l===6)la(a,y);else{if(E=a.current.alternate,(y&30)===0&&!ek(E)&&(l=T0(a,y),l===2&&(S=Hw(a),S!==0&&(y=S,l=ub(a,S))),l===1))throw d=_d,Jc(a,0),la(a,y),lr(a,_t()),d;switch(a.finishedWork=E,a.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:Yc(a,cr,Ws);break;case 3:if(la(a,y),(y&130023424)===y&&(l=ab+500-_t(),10<l)){if(zg(a,0)!==0)break;if(E=a.suspendedLanes,(E&y)!==y){Kn(),a.pingedLanes|=a.suspendedLanes&E;break}a.timeoutHandle=y1(Yc.bind(null,a,cr,Ws),l);break}Yc(a,cr,Ws);break;case 4:if(la(a,y),(y&4194240)===y)break;for(l=a.eventTimes,E=-1;0<y;){var F=31-Ai(y);S=1<<F,F=l[F],F>E&&(E=F),y&=~S}if(y=E,y=_t()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*XT(y/1960))-y,10<y){a.timeoutHandle=y1(Yc.bind(null,a,cr,Ws),y);break}Yc(a,cr,Ws);break;case 5:Yc(a,cr,Ws);break;default:throw Error(t(329))}}}return lr(a,_t()),a.callbackNode===d?y4.bind(null,a):null}function ub(a,l){var d=Nd;return a.current.memoizedState.isDehydrated&&(Jc(a,l).flags|=256),a=T0(a,l),a!==2&&(l=cr,cr=d,l!==null&&fb(l)),a}function fb(a){cr===null?cr=a:cr.push.apply(cr,a)}function ek(a){for(var l=a;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var y=0;y<d.length;y++){var E=d[y],S=E.getSnapshot;E=E.value;try{if(!Si(S(),E))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function la(a,l){for(l&=~ob,l&=~P0,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var d=31-Ai(l),y=1<<d;a[d]=-1,l&=~y}}function m4(a){if((Qe&6)!==0)throw Error(t(327));qu();var l=zg(a,0);if((l&1)===0)return lr(a,_t()),null;var d=T0(a,l);if(a.tag!==0&&d===2){var y=Hw(a);y!==0&&(l=y,d=ub(a,y))}if(d===1)throw d=_d,Jc(a,0),la(a,l),lr(a,_t()),d;if(d===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Yc(a,cr,Ws),lr(a,_t()),null}function hb(a,l){var d=Qe;Qe|=1;try{return a(l)}finally{Qe=d,Qe===0&&(Vu=_t()+500,a0&&na())}}function Zc(a){aa!==null&&aa.tag===0&&(Qe&6)===0&&qu();var l=Qe;Qe|=1;var d=ni.transition,y=ot;try{if(ni.transition=null,ot=1,a)return a()}finally{ot=y,ni.transition=d,Qe=l,(Qe&6)===0&&na()}}function db(){kr=Hu.current,wt(Hu)}function Jc(a,l){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,_T(d)),Rt!==null)for(d=Rt.return;d!==null;){var y=d;switch(x1(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&s0();break;case 3:Mu(),wt(sr),wt(An),k1();break;case 5:$1(y);break;case 4:Mu();break;case 13:wt(At);break;case 19:wt(At);break;case 10:P1(y.type._context);break;case 22:case 23:db()}d=d.return}if(Jt=a,Rt=a=ua(a.current,null),un=kr=l,jt=0,_d=null,ob=P0=Qc=0,cr=Nd=null,Kc!==null){for(l=0;l<Kc.length;l++)if(d=Kc[l],y=d.interleaved,y!==null){d.interleaved=null;var E=y.next,S=d.pending;if(S!==null){var F=S.next;S.next=E,y.next=F}d.pending=y}Kc=null}return a}function w4(a,l){do{var d=Rt;try{if(B1(),m0.current=E0,w0){for(var y=St.memoizedState;y!==null;){var E=y.queue;E!==null&&(E.pending=null),y=y.next}w0=!1}if(Wc=0,Zt=Mt=St=null,Sd=!1,Id=0,sb.current=null,d===null||d.return===null){jt=1,_d=l,Rt=null;break}e:{var S=a,F=d.return,W=d,J=l;if(l=un,W.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var ae=J,de=W,ye=de.tag;if((de.mode&1)===0&&(ye===0||ye===11||ye===15)){var he=de.alternate;he?(de.updateQueue=he.updateQueue,de.memoizedState=he.memoizedState,de.lanes=he.lanes):(de.updateQueue=null,de.memoizedState=null)}var Se=H8(F);if(Se!==null){Se.flags&=-257,V8(Se,F,W,S,l),Se.mode&1&&z8(S,ae,l),l=Se,J=ae;var Pe=l.updateQueue;if(Pe===null){var Ce=new Set;Ce.add(J),l.updateQueue=Ce}else Pe.add(J);break e}else{if((l&1)===0){z8(S,ae,l),pb();break e}J=Error(t(426))}}else if(vt&&W.mode&1){var Nt=H8(F);if(Nt!==null){(Nt.flags&65536)===0&&(Nt.flags|=256),V8(Nt,F,W,S,l),I1(ju(J,W));break e}}S=J=ju(J,W),jt!==4&&(jt=2),Nd===null?Nd=[S]:Nd.push(S),S=F;do{switch(S.tag){case 3:S.flags|=65536,l&=-l,S.lanes|=l;var ne=M8(S,J,l);d8(S,ne);break e;case 1:W=J;var X=S.type,oe=S.stateNode;if((S.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(oa===null||!oa.has(oe)))){S.flags|=65536,l&=-l,S.lanes|=l;var me=j8(S,W,l);d8(S,me);break e}}S=S.return}while(S!==null)}E4(d)}catch(_e){l=_e,Rt===d&&d!==null&&(Rt=d=d.return);continue}break}while(!0)}function b4(){var a=B0.current;return B0.current=E0,a===null?E0:a}function pb(){(jt===0||jt===3||jt===2)&&(jt=4),Jt===null||(Qc&268435455)===0&&(P0&268435455)===0||la(Jt,un)}function T0(a,l){var d=Qe;Qe|=2;var y=b4();(Jt!==a||un!==l)&&(Ws=null,Jc(a,l));do try{tk();break}catch(E){w4(a,E)}while(!0);if(B1(),Qe=d,B0.current=y,Rt!==null)throw Error(t(261));return Jt=null,un=0,jt}function tk(){for(;Rt!==null;)v4(Rt)}function nk(){for(;Rt!==null&&!B9();)v4(Rt)}function v4(a){var l=S4(a.alternate,a,kr);a.memoizedProps=a.pendingProps,l===null?E4(a):Rt=l,sb.current=null}function E4(a){var l=a;do{var d=l.alternate;if(a=l.return,(l.flags&32768)===0){if(d=WT(d,l,kr),d!==null){Rt=d;return}}else{if(d=QT(d,l),d!==null){d.flags&=32767,Rt=d;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{jt=6,Rt=null;return}}if(l=l.sibling,l!==null){Rt=l;return}Rt=l=a}while(l!==null);jt===0&&(jt=5)}function Yc(a,l,d){var y=ot,E=ni.transition;try{ni.transition=null,ot=1,rk(a,l,d,y)}finally{ni.transition=E,ot=y}return null}function rk(a,l,d,y){do qu();while(aa!==null);if((Qe&6)!==0)throw Error(t(327));d=a.finishedWork;var E=a.finishedLanes;if(d===null)return null;if(a.finishedWork=null,a.finishedLanes=0,d===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var S=d.lanes|d.childLanes;if(U9(a,S),a===Jt&&(Rt=Jt=null,un=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||_0||(_0=!0,I4(Lg,function(){return qu(),null})),S=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||S){S=ni.transition,ni.transition=null;var F=ot;ot=1;var W=Qe;Qe|=4,sb.current=null,JT(a,d),f4(d,a),AT(p1),qg=!!d1,p1=d1=null,a.current=d,YT(d),P9(),Qe=W,ot=F,ni.transition=S}else a.current=d;if(_0&&(_0=!1,aa=a,N0=E),S=a.pendingLanes,S===0&&(oa=null),N9(d.stateNode),lr(a,_t()),l!==null)for(y=a.onRecoverableError,d=0;d<l.length;d++)E=l[d],y(E.value,{componentStack:E.stack,digest:E.digest});if(C0)throw C0=!1,a=cb,cb=null,a;return(N0&1)!==0&&a.tag!==0&&qu(),S=a.pendingLanes,(S&1)!==0?a===lb?Dd++:(Dd=0,lb=a):Dd=0,na(),null}function qu(){if(aa!==null){var a=lA(N0),l=ni.transition,d=ot;try{if(ni.transition=null,ot=16>a?16:a,aa===null)var y=!1;else{if(a=aa,aa=null,N0=0,(Qe&6)!==0)throw Error(t(331));var E=Qe;for(Qe|=4,Ie=a.current;Ie!==null;){var S=Ie,F=S.child;if((Ie.flags&16)!==0){var W=S.deletions;if(W!==null){for(var J=0;J<W.length;J++){var ae=W[J];for(Ie=ae;Ie!==null;){var de=Ie;switch(de.tag){case 0:case 11:case 15:Cd(8,de,S)}var ye=de.child;if(ye!==null)ye.return=de,Ie=ye;else for(;Ie!==null;){de=Ie;var he=de.sibling,Se=de.return;if(o4(de),de===ae){Ie=null;break}if(he!==null){he.return=Se,Ie=he;break}Ie=Se}}}var Pe=S.alternate;if(Pe!==null){var Ce=Pe.child;if(Ce!==null){Pe.child=null;do{var Nt=Ce.sibling;Ce.sibling=null,Ce=Nt}while(Ce!==null)}}Ie=S}}if((S.subtreeFlags&2064)!==0&&F!==null)F.return=S,Ie=F;else e:for(;Ie!==null;){if(S=Ie,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Cd(9,S,S.return)}var ne=S.sibling;if(ne!==null){ne.return=S.return,Ie=ne;break e}Ie=S.return}}var X=a.current;for(Ie=X;Ie!==null;){F=Ie;var oe=F.child;if((F.subtreeFlags&2064)!==0&&oe!==null)oe.return=F,Ie=oe;else e:for(F=X;Ie!==null;){if(W=Ie,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:O0(9,W)}}catch(_e){Ot(W,W.return,_e)}if(W===F){Ie=null;break e}var me=W.sibling;if(me!==null){me.return=W.return,Ie=me;break e}Ie=W.return}}if(Qe=E,na(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(Fg,a)}catch{}y=!0}return y}finally{ot=d,ni.transition=l}}return!1}function x4(a,l,d){l=ju(d,l),l=M8(a,l,1),a=ia(a,l,1),l=Kn(),a!==null&&(nd(a,1,l),lr(a,l))}function Ot(a,l,d){if(a.tag===3)x4(a,a,d);else for(;l!==null;){if(l.tag===3){x4(l,a,d);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(oa===null||!oa.has(y))){a=ju(d,a),a=j8(l,a,1),l=ia(l,a,1),a=Kn(),l!==null&&(nd(l,1,a),lr(l,a));break}}l=l.return}}function ik(a,l,d){var y=a.pingCache;y!==null&&y.delete(l),l=Kn(),a.pingedLanes|=a.suspendedLanes&d,Jt===a&&(un&d)===d&&(jt===4||jt===3&&(un&130023424)===un&&500>_t()-ab?Jc(a,0):ob|=d),lr(a,l)}function A4(a,l){l===0&&((a.mode&1)===0?l=1:(l=jg,jg<<=1,(jg&130023424)===0&&(jg=4194304)));var d=Kn();a=qs(a,l),a!==null&&(nd(a,l,d),lr(a,d))}function sk(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),A4(a,d)}function ok(a,l){var d=0;switch(a.tag){case 13:var y=a.stateNode,E=a.memoizedState;E!==null&&(d=E.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),A4(a,d)}var S4;S4=function(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps||sr.current)ar=!0;else{if((a.lanes&d)===0&&(l.flags&128)===0)return ar=!1,GT(a,l,d);ar=(a.flags&131072)!==0}else ar=!1,vt&&(l.flags&1048576)!==0&&r8(l,l0,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;S0(a,l),a=l.pendingProps;var E=$u(l,An.current);Fu(l,d),E=L1(null,l,y,a,E,d);var S=F1();return l.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,or(y)?(S=!0,o0(l)):S=!1,l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,N1(l),E.updater=x0,l.stateNode=E,E._reactInternals=l,q1(l,y,a,d),l=Q1(null,l,y,!0,S,d)):(l.tag=0,vt&&S&&E1(l),qn(null,l,E,d),l=l.child),l;case 16:y=l.elementType;e:{switch(S0(a,l),a=l.pendingProps,E=y._init,y=E(y._payload),l.type=y,E=l.tag=ck(y),a=Oi(y,a),E){case 0:l=W1(null,l,y,a,d);break e;case 1:l=Z8(null,l,y,a,d);break e;case 11:l=q8(null,l,y,a,d);break e;case 14:l=K8(null,l,y,Oi(y.type,a),d);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Oi(y,E),W1(a,l,y,E,d);case 1:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Oi(y,E),Z8(a,l,y,E,d);case 3:e:{if(J8(l),a===null)throw Error(t(387));y=l.pendingProps,S=l.memoizedState,E=S.element,h8(a,l),g0(l,y,null,d);var F=l.memoizedState;if(y=F.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){E=ju(Error(t(423)),l),l=Y8(a,l,y,d,E);break e}else if(y!==E){E=ju(Error(t(424)),l),l=Y8(a,l,y,d,E);break e}else for(Tr=Xo(l.stateNode.containerInfo.firstChild),$r=l,vt=!0,Ii=null,d=u8(l,null,y,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ru(),y===E){l=Gs(a,l,d);break e}qn(a,l,y,d)}l=l.child}return l;case 5:return g8(l),a===null&&S1(l),y=l.type,E=l.pendingProps,S=a!==null?a.memoizedProps:null,F=E.children,g1(y,E)?F=null:S!==null&&g1(y,S)&&(l.flags|=32),Q8(a,l),qn(a,l,F,d),l.child;case 6:return a===null&&S1(l),null;case 13:return X8(a,l,d);case 4:return D1(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=Uu(l,null,y,d):qn(a,l,y,d),l.child;case 11:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Oi(y,E),q8(a,l,y,E,d);case 7:return qn(a,l,l.pendingProps,d),l.child;case 8:return qn(a,l,l.pendingProps.children,d),l.child;case 12:return qn(a,l,l.pendingProps.children,d),l.child;case 10:e:{if(y=l.type._context,E=l.pendingProps,S=l.memoizedProps,F=E.value,pt(h0,y._currentValue),y._currentValue=F,S!==null)if(Si(S.value,F)){if(S.children===E.children&&!sr.current){l=Gs(a,l,d);break e}}else for(S=l.child,S!==null&&(S.return=l);S!==null;){var W=S.dependencies;if(W!==null){F=S.child;for(var J=W.firstContext;J!==null;){if(J.context===y){if(S.tag===1){J=Ks(-1,d&-d),J.tag=2;var ae=S.updateQueue;if(ae!==null){ae=ae.shared;var de=ae.pending;de===null?J.next=J:(J.next=de.next,de.next=J),ae.pending=J}}S.lanes|=d,J=S.alternate,J!==null&&(J.lanes|=d),C1(S.return,d,l),W.lanes|=d;break}J=J.next}}else if(S.tag===10)F=S.type===l.type?null:S.child;else if(S.tag===18){if(F=S.return,F===null)throw Error(t(341));F.lanes|=d,W=F.alternate,W!==null&&(W.lanes|=d),C1(F,d,l),F=S.sibling}else F=S.child;if(F!==null)F.return=S;else for(F=S;F!==null;){if(F===l){F=null;break}if(S=F.sibling,S!==null){S.return=F.return,F=S;break}F=F.return}S=F}qn(a,l,E.children,d),l=l.child}return l;case 9:return E=l.type,y=l.pendingProps.children,Fu(l,d),E=ei(E),y=y(E),l.flags|=1,qn(a,l,y,d),l.child;case 14:return y=l.type,E=Oi(y,l.pendingProps),E=Oi(y.type,E),K8(a,l,y,E,d);case 15:return G8(a,l,l.type,l.pendingProps,d);case 17:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Oi(y,E),S0(a,l),l.tag=1,or(y)?(a=!0,o0(l)):a=!1,Fu(l,d),L8(l,y,E),q1(l,y,E,d),Q1(null,l,y,!0,a,d);case 19:return t4(a,l,d);case 22:return W8(a,l,d)}throw Error(t(156,l.tag))};function I4(a,l){return iA(a,l)}function ak(a,l,d,y){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(a,l,d,y){return new ak(a,l,d,y)}function gb(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ck(a){if(typeof a=="function")return gb(a)?1:0;if(a!=null){if(a=a.$$typeof,a===z)return 11;if(a===w)return 14}return 2}function ua(a,l){var d=a.alternate;return d===null?(d=ri(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&14680064,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function k0(a,l,d,y,E,S){var F=2;if(y=a,typeof a=="function")gb(a)&&(F=1);else if(typeof a=="string")F=5;else e:switch(a){case H:return Xc(d.children,E,S,l);case V:F=8,E|=8;break;case M:return a=ri(12,d,l,E|2),a.elementType=M,a.lanes=S,a;case P:return a=ri(13,d,l,E),a.elementType=P,a.lanes=S,a;case D:return a=ri(19,d,l,E),a.elementType=D,a.lanes=S,a;case B:return R0(d,E,S,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case G:F=10;break e;case Q:F=9;break e;case z:F=11;break e;case w:F=14;break e;case x:F=16,y=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=ri(F,d,l,E),l.elementType=a,l.type=y,l.lanes=S,l}function Xc(a,l,d,y){return a=ri(7,a,y,l),a.lanes=d,a}function R0(a,l,d,y){return a=ri(22,a,y,l),a.elementType=B,a.lanes=d,a.stateNode={isHidden:!1},a}function yb(a,l,d){return a=ri(6,a,null,l),a.lanes=d,a}function mb(a,l,d){return l=ri(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function lk(a,l,d,y,E){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vw(0),this.expirationTimes=Vw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vw(0),this.identifierPrefix=y,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function wb(a,l,d,y,E,S,F,W,J){return a=new lk(a,l,d,W,J),l===1?(l=1,S===!0&&(l|=8)):l=0,S=ri(3,null,null,l),a.current=S,S.stateNode=a,S.memoizedState={element:y,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},N1(S),a}function uk(a,l,d){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:y==null?null:""+y,children:a,containerInfo:l,implementation:d}}function O4(a){if(!a)return ta;a=a._reactInternals;e:{if(jc(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(or(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var d=a.type;if(or(d))return e8(a,d,l)}return l}function B4(a,l,d,y,E,S,F,W,J){return a=wb(d,y,!0,a,E,S,F,W,J),a.context=O4(null),d=a.current,y=Kn(),E=ca(d),S=Ks(y,E),S.callback=l??null,ia(d,S,E),a.current.lanes=E,nd(a,E,y),lr(a,y),a}function U0(a,l,d,y){var E=l.current,S=Kn(),F=ca(E);return d=O4(d),l.context===null?l.context=d:l.pendingContext=d,l=Ks(S,F),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=ia(E,l,F),a!==null&&(Ci(a,E,F,S),p0(a,E,F)),F}function L0(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function P4(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function bb(a,l){P4(a,l),(a=a.alternate)&&P4(a,l)}function fk(){return null}var C4=typeof reportError=="function"?reportError:function(a){console.error(a)};function vb(a){this._internalRoot=a}F0.prototype.render=vb.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));U0(a,l,null,null)},F0.prototype.unmount=vb.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Zc(function(){U0(null,a,null,null)}),l[js]=null}};function F0(a){this._internalRoot=a}F0.prototype.unstable_scheduleHydration=function(a){if(a){var l=hA();a={blockedOn:null,target:a,priority:l};for(var d=0;d<Zo.length&&l!==0&&l<Zo[d].priority;d++);Zo.splice(d,0,a),d===0&&gA(a)}};function Eb(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function M0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function _4(){}function hk(a,l,d,y,E){if(E){if(typeof y=="function"){var S=y;y=function(){var ae=L0(F);S.call(ae)}}var F=B4(l,y,a,0,null,!1,!1,"",_4);return a._reactRootContainer=F,a[js]=F.current,yd(a.nodeType===8?a.parentNode:a),Zc(),F}for(;E=a.lastChild;)a.removeChild(E);if(typeof y=="function"){var W=y;y=function(){var ae=L0(J);W.call(ae)}}var J=wb(a,0,!1,null,null,!1,!1,"",_4);return a._reactRootContainer=J,a[js]=J.current,yd(a.nodeType===8?a.parentNode:a),Zc(function(){U0(l,J,d,y)}),J}function j0(a,l,d,y,E){var S=d._reactRootContainer;if(S){var F=S;if(typeof E=="function"){var W=E;E=function(){var J=L0(F);W.call(J)}}U0(l,F,a,E)}else F=hk(d,l,a,E,y);return L0(F)}uA=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var d=td(l.pendingLanes);d!==0&&(qw(l,d|1),lr(l,_t()),(Qe&6)===0&&(Vu=_t()+500,na()))}break;case 13:Zc(function(){var y=qs(a,1);if(y!==null){var E=Kn();Ci(y,a,1,E)}}),bb(a,1)}},Kw=function(a){if(a.tag===13){var l=qs(a,134217728);if(l!==null){var d=Kn();Ci(l,a,134217728,d)}bb(a,134217728)}},fA=function(a){if(a.tag===13){var l=ca(a),d=qs(a,l);if(d!==null){var y=Kn();Ci(d,a,l,y)}bb(a,l)}},hA=function(){return ot},dA=function(a,l){var d=ot;try{return ot=a,l()}finally{ot=d}},Lw=function(a,l,d){switch(l){case"input":if(xi(a,d),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var y=d[l];if(y!==a&&y.form===a.form){var E=i0(y);if(!E)throw Error(t(90));Re(y),xi(y,E)}}}break;case"textarea":Gh(a,d);break;case"select":l=d.value,l!=null&&ss(a,!!d.multiple,l,!1)}},Jx=hb,Yx=Zc;var dk={usingClientEntryPoint:!1,Events:[bd,Nu,i0,Qx,Zx,hb]},$d={findFiberByHostInstance:zc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pk={bundleType:$d.bundleType,version:$d.version,rendererPackageName:$d.rendererPackageName,rendererConfig:$d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=nA(a),a===null?null:a.stateNode},findFiberByHostInstance:$d.findFiberByHostInstance||fk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var z0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!z0.isDisabled&&z0.supportsFiber)try{Fg=z0.inject(pk),os=z0}catch{}}return ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dk,ur.createPortal=function(a,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eb(l))throw Error(t(200));return uk(a,l,null,d)},ur.createRoot=function(a,l){if(!Eb(a))throw Error(t(299));var d=!1,y="",E=C4;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),l=wb(a,1,!1,null,null,d,!1,y,E),a[js]=l.current,yd(a.nodeType===8?a.parentNode:a),new vb(l)},ur.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=nA(l),a=a===null?null:a.stateNode,a},ur.flushSync=function(a){return Zc(a)},ur.hydrate=function(a,l,d){if(!M0(l))throw Error(t(200));return j0(null,a,l,!0,d)},ur.hydrateRoot=function(a,l,d){if(!Eb(a))throw Error(t(405));var y=d!=null&&d.hydratedSources||null,E=!1,S="",F=C4;if(d!=null&&(d.unstable_strictMode===!0&&(E=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(F=d.onRecoverableError)),l=B4(l,null,a,1,d??null,E,!1,S,F),a[js]=l.current,yd(a),y)for(a=0;a<y.length;a++)d=y[a],E=d._getVersion,E=E(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,E]:l.mutableSourceEagerHydrationData.push(d,E);return new F0(l)},ur.render=function(a,l,d){if(!M0(l))throw Error(t(200));return j0(null,a,l,!1,d)},ur.unmountComponentAtNode=function(a){if(!M0(a))throw Error(t(40));return a._reactRootContainer?(Zc(function(){j0(null,null,a,!1,function(){a._reactRootContainer=null,a[js]=null})}),!0):!1},ur.unstable_batchedUpdates=hb,ur.unstable_renderSubtreeIntoContainer=function(a,l,d,y){if(!M0(d))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return j0(a,l,d,!1,y)},ur.version="18.3.1-next-f1338f8080-20240426",ur}var F4;function Ok(){if(F4)return Ib.exports;F4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ib.exports=Ik(),Ib.exports}var M4;function Bk(){if(M4)return H0;M4=1;var n=Ok();return H0.createRoot=n.createRoot,H0.hydrateRoot=n.hydrateRoot,H0}var Pk=Bk();const Ck=fg(Pk),_k="6.15.0";function Nk(n,e,t){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=n,i}async function Qn(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Te(n,e,t){for(let r in e){let i=e[r];const s=t?t[r]:null;s&&Nk(i,s,r),Object.defineProperty(n,r,{enumerable:!0,value:i,writable:!1})}}function df(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>df(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let i=0;i<n.length;i++)r+=t[n[i]>>4],r+=t[n[i]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return df(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(r=>`${df(r,e)}: ${df(n[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function wn(n,e){return n&&n.code===e}function y3(n){return wn(n,"CALL_EXCEPTION")}function Et(n,e,t){let r=n;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${df(t)}`);for(const o in t){if(o==="shortMessage")continue;const c=t[o];s.push(o+"="+df(c))}}s.push(`code=${e}`),s.push(`version=${_k}`),s.length&&(n+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(n);break;default:i=new Error(n)}return Te(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&Te(i,{shortMessage:r}),i}function fe(n,e,t,r){if(!n)throw Et(e,t,r)}function ee(n,e,t,r){fe(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function SB(n,e,t){t==null&&(t=""),t&&(t=": "+t),fe(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),fe(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");n.push(e)}catch{}return n},[]);function hg(n,e,t){if(t==null&&(t=""),n!==e){let r=t,i="new";t&&(r+=".",i+=" "+t),fe(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function IB(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(n.substring(i,i+2),16),i+=2;return r}ee(!1,"invalid BytesLike value",e||"value",n)}function je(n,e){return IB(n,e,!1)}function Zn(n,e){return IB(n,e,!0)}function yt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function m3(n){return yt(n,!0)||n instanceof Uint8Array}const j4="0123456789abcdef";function Ae(n){const e=je(n);let t="0x";for(let r=0;r<e.length;r++){const i=e[r];t+=j4[(i&240)>>4]+j4[i&15]}return t}function Ct(n){return"0x"+n.map(e=>Ae(e).substring(2)).join("")}function Sf(n){return yt(n,!0)?(n.length-2)/2:je(n).length}function Pt(n,e,t){const r=je(n);return t!=null&&t>r.length&&fe(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),Ae(r.slice(e??0,t??r.length))}function OB(n,e,t){const r=je(n);fe(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(r,e-r.length):i.set(r,0),Ae(i)}function jo(n,e){return OB(n,e,!0)}function Dk(n,e){return OB(n,e,!1)}const Km=BigInt(0),Zi=BigInt(1),pf=9007199254740991;function Zy(n,e){const t=Gm(n,"value"),r=BigInt(Me(e,"width"));if(fe(t>>r===Km,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-Zi){const i=(Zi<<r)-Zi;return-((~t&i)+Zi)}return t}function BB(n,e){let t=Be(n,"value");const r=BigInt(Me(e,"width")),i=Zi<<r-Zi;if(t<Km){t=-t,fe(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const s=(Zi<<r)-Zi;return(~t&s)+Zi}else fe(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function bl(n,e){const t=Gm(n,"value"),r=BigInt(Me(e,"bits"));return t&(Zi<<r)-Zi}function Be(n,e){switch(typeof n){case"bigint":return n;case"number":return ee(Number.isInteger(n),"underflow",e||"value",n),ee(n>=-pf&&n<=pf,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){ee(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}ee(!1,"invalid BigNumberish value",e||"value",n)}function Gm(n,e){const t=Be(n,e);return fe(t>=Km,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const z4="0123456789abcdef";function Wm(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=z4[t>>4],e+=z4[t&15];return BigInt(e)}return Be(n)}function Me(n,e){switch(typeof n){case"bigint":return ee(n>=-pf&&n<=pf,"overflow",e||"value",n),Number(n);case"number":return ee(Number.isInteger(n),"underflow",e||"value",n),ee(n>=-pf&&n<=pf,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return Me(BigInt(n),e)}catch(t){ee(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}ee(!1,"invalid numeric value",e||"value",n)}function $k(n){return Me(Wm(n))}function Ic(n,e){let r=Gm(n,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=Me(e,"width");for(fe(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<i*2;)r="0"+r}return"0x"+r}function Wt(n){const e=Gm(n,"value");if(e===Km)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const r=new Uint8Array(t.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(t.substring(s,s+2),16)}return r}function Wi(n){let e=Ae(m3(n)?n:Wt(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const H4="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const V4=BigInt(58);function Tk(n){const e=je(n);let t=Wm(e),r="";for(;t;)r=H4[Number(t%V4)]+r,t/=V4;for(let i=0;i<e.length&&!e[i];i++)r=H4[0]+r;return r}function kk(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return je(e)}function Rk(n){const e=je(n);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}var Lf;class PB{constructor(e,t,r){ie(this,"filter");ie(this,"emitter");ce(this,Lf);K(this,Lf,t),Te(this,{emitter:e,filter:r})}async removeListener(){k(this,Lf)!=null&&await this.emitter.off(this.filter,k(this,Lf))}}Lf=new WeakMap;function Uk(n,e,t,r,i){ee(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function CB(n,e,t,r,i){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n==="OVERRUN"?t.length-e-1:0}function Lk(n,e,t,r,i){return n==="OVERLONG"?(ee(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),CB(n,e,t))}const Fk=Object.freeze({error:Uk,ignore:CB,replace:Lk});function Mk(n,e){e==null&&(e=Fk.error);const t=je(n,"bytes"),r=[];let i=0;for(;i<t.length;){const s=t[i++];if(s>>7===0){r.push(s);continue}let o=null,c=null;if((s&224)===192)o=1,c=127;else if((s&240)===224)o=2,c=2047;else if((s&248)===240)o=3,c=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,r):i+=e("BAD_PREFIX",i-1,t,r);continue}if(i-1+o>=t.length){i+=e("OVERRUN",i-1,t,r);continue}let u=s&(1<<8-o-1)-1;for(let f=0;f<o;f++){let h=t[i];if((h&192)!=128){i+=e("MISSING_CONTINUE",i,t,r),u=null;break}u=u<<6|h&63,i++}if(u!==null){if(u>1114111){i+=e("OUT_OF_RANGE",i-1-o,t,r,u);continue}if(u>=55296&&u<=57343){i+=e("UTF16_SURROGATE",i-1-o,t,r,u);continue}if(u<=c){i+=e("OVERLONG",i-1-o,t,r,u);continue}r.push(u)}}return r}function Ro(n,e){ee(typeof n=="string","invalid string value","str",n);let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);ee(r<n.length&&(s&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function jk(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Jy(n,e){return jk(Mk(n,e))}function _B(n){async function e(t,r){fe(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();fe(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),fe(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,c=setTimeout(()=>{s=Et("request timeout","TIMEOUT"),o.abort()},t.timeout);r&&r.addListener(()=>{s=Et("request cancelled","CANCELLED"),o.abort()});const u=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let f;try{f=await fetch(t.url,u)}catch(m){throw clearTimeout(c),s||m}clearTimeout(c);const h={};f.headers.forEach((m,v)=>{h[v.toLowerCase()]=m});const g=await f.arrayBuffer(),p=g==null?null:new Uint8Array(g);return{statusCode:f.status,statusMessage:f.statusText,headers:h,body:p}}return e}const zk=12,Hk=250;let q4=_B();const Vk=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),qk=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Pb=!1;async function NB(n,e){try{const t=n.match(Vk);if(!t)throw new Error("invalid data");return new Ec(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?kk(t[3]):Gk(t[3]))}catch{return new Ec(599,"BAD REQUEST (invalid data: URI)",{},null,new Oc(n))}}function DB(n){async function e(t,r){try{const i=t.match(qk);if(!i)throw new Error("invalid link");return new Oc(`${n}${i[2]}`)}catch{return new Ec(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Oc(t))}}return e}const V0={data:NB,ipfs:DB("https://gateway.ipfs.io/ipfs/")},$B=new WeakMap;var Tl,rc;class Kk{constructor(e){ce(this,Tl);ce(this,rc);K(this,Tl,[]),K(this,rc,!1),$B.set(e,()=>{if(!k(this,rc)){K(this,rc,!0);for(const t of k(this,Tl))setTimeout(()=>{t()},0);K(this,Tl,[])}})}addListener(e){fe(!k(this,rc),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),k(this,Tl).push(e)}get cancelled(){return k(this,rc)}checkSignal(){fe(!this.cancelled,"cancelled","CANCELLED",{})}}Tl=new WeakMap,rc=new WeakMap;function q0(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var Ff,Mf,zi,wo,jf,zf,nn,jr,bo,kl,Rl,Ul,Ss,Hi,ic,Ll,cp;const Fm=class Fm{constructor(e){ce(this,Ll);ce(this,Ff);ce(this,Mf);ce(this,zi);ce(this,wo);ce(this,jf);ce(this,zf);ce(this,nn);ce(this,jr);ce(this,bo);ce(this,kl);ce(this,Rl);ce(this,Ul);ce(this,Ss);ce(this,Hi);ce(this,ic);K(this,zf,String(e)),K(this,Ff,!1),K(this,Mf,!0),K(this,zi,{}),K(this,wo,""),K(this,jf,3e5),K(this,Hi,{slotInterval:Hk,maxAttempts:zk}),K(this,ic,null)}get url(){return k(this,zf)}set url(e){K(this,zf,String(e))}get body(){return k(this,nn)==null?null:new Uint8Array(k(this,nn))}set body(e){if(e==null)K(this,nn,void 0),K(this,jr,void 0);else if(typeof e=="string")K(this,nn,Ro(e)),K(this,jr,"text/plain");else if(e instanceof Uint8Array)K(this,nn,e),K(this,jr,"application/octet-stream");else if(typeof e=="object")K(this,nn,Ro(JSON.stringify(e))),K(this,jr,"application/json");else throw new Error("invalid body")}hasBody(){return k(this,nn)!=null}get method(){return k(this,wo)?k(this,wo):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),K(this,wo,String(e).toUpperCase())}get headers(){const e=Object.assign({},k(this,zi));return k(this,bo)&&(e.authorization=`Basic ${Rk(Ro(k(this,bo)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&k(this,jr)&&(e["content-type"]=k(this,jr)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){k(this,zi)[String(e).toLowerCase()]=String(t)}clearHeaders(){K(this,zi,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return k(this,bo)||null}setCredentials(e,t){ee(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),K(this,bo,`${e}:${t}`)}get allowGzip(){return k(this,Mf)}set allowGzip(e){K(this,Mf,!!e)}get allowInsecureAuthentication(){return!!k(this,Ff)}set allowInsecureAuthentication(e){K(this,Ff,!!e)}get timeout(){return k(this,jf)}set timeout(e){ee(e>=0,"timeout must be non-zero","timeout",e),K(this,jf,e)}get preflightFunc(){return k(this,kl)||null}set preflightFunc(e){K(this,kl,e)}get processFunc(){return k(this,Rl)||null}set processFunc(e){K(this,Rl,e)}get retryFunc(){return k(this,Ul)||null}set retryFunc(e){K(this,Ul,e)}get getUrlFunc(){return k(this,ic)||q4}set getUrlFunc(e){K(this,ic,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${k(this,nn)?Ae(k(this,nn)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(k(this,Hi).slotInterval=e.slotInterval),e.maxAttempts!=null&&(k(this,Hi).maxAttempts=e.maxAttempts)}send(){return fe(k(this,Ss)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),K(this,Ss,new Kk(this)),ge(this,Ll,cp).call(this,0,K4()+this.timeout,0,this,new Ec(0,"",{},null,this))}cancel(){fe(k(this,Ss)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=$B.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();fe(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Fm(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,K(i,zi,Object.assign({},k(this,zi))),k(this,nn)&&K(i,nn,new Uint8Array(k(this,nn))),K(i,jr,k(this,jr)),i}clone(){const e=new Fm(this.url);return K(e,wo,k(this,wo)),k(this,nn)&&K(e,nn,k(this,nn)),K(e,jr,k(this,jr)),K(e,zi,Object.assign({},k(this,zi))),K(e,bo,k(this,bo)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),K(e,kl,k(this,kl)),K(e,Rl,k(this,Rl)),K(e,Ul,k(this,Ul)),K(e,Hi,Object.assign({},k(this,Hi))),K(e,ic,k(this,ic)),e}static lockConfig(){Pb=!0}static getGateway(e){return V0[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Pb)throw new Error("gateways locked");V0[e]=t}static registerGetUrl(e){if(Pb)throw new Error("gateways locked");q4=e}static createGetUrlFunc(e){return _B(e)}static createDataGateway(){return NB}static createIpfsGatewayFunc(e){return DB(e)}};Ff=new WeakMap,Mf=new WeakMap,zi=new WeakMap,wo=new WeakMap,jf=new WeakMap,zf=new WeakMap,nn=new WeakMap,jr=new WeakMap,bo=new WeakMap,kl=new WeakMap,Rl=new WeakMap,Ul=new WeakMap,Ss=new WeakMap,Hi=new WeakMap,ic=new WeakMap,Ll=new WeakSet,cp=async function(e,t,r,i,s){var h,g,p;if(e>=k(this,Hi).maxAttempts)return s.makeServerError("exceeded maximum retry limit");fe(K4()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await Wk(r);let o=this.clone();const c=(o.url.split(":")[0]||"").toLowerCase();if(c in V0){const m=await V0[c](o.url,q0(k(i,Ss)));if(m instanceof Ec){let v=m;if(this.processFunc){q0(k(i,Ss));try{v=await this.processFunc(o,v)}catch(b){(b.throttle==null||typeof b.stall!="number")&&v.makeServerError("error in post-processing function",b).assertOk()}}return v}o=m}this.preflightFunc&&(o=await this.preflightFunc(o));const u=await this.getUrlFunc(o,q0(k(i,Ss)));let f=new Ec(u.statusCode,u.statusMessage,u.headers,u.body,i);if(f.statusCode===301||f.statusCode===302){try{const m=f.headers.location||"";return ge(h=o.redirect(m),Ll,cp).call(h,e+1,t,0,i,f)}catch{}return f}else if(f.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,f,e))){const m=f.headers["retry-after"];let v=k(this,Hi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof m=="string"&&m.match(/^[1-9][0-9]*$/)&&(v=parseInt(m)),ge(g=o.clone(),Ll,cp).call(g,e+1,t,v,i,f)}if(this.processFunc){q0(k(i,Ss));try{f=await this.processFunc(o,f)}catch(m){(m.throttle==null||typeof m.stall!="number")&&f.makeServerError("error in post-processing function",m).assertOk();let v=k(this,Hi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return m.stall>=0&&(v=m.stall),ge(p=o.clone(),Ll,cp).call(p,e+1,t,v,i,f)}}return f};let Oc=Fm;var Xp,eg,tg,zr,Hf,Fl;const Hx=class Hx{constructor(e,t,r,i,s){ce(this,Xp);ce(this,eg);ce(this,tg);ce(this,zr);ce(this,Hf);ce(this,Fl);K(this,Xp,e),K(this,eg,t),K(this,tg,Object.keys(r).reduce((o,c)=>(o[c.toLowerCase()]=String(r[c]),o),{})),K(this,zr,i==null?null:new Uint8Array(i)),K(this,Hf,s||null),K(this,Fl,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${k(this,zr)?Ae(k(this,zr)):"null"}>`}get statusCode(){return k(this,Xp)}get statusMessage(){return k(this,eg)}get headers(){return Object.assign({},k(this,tg))}get body(){return k(this,zr)==null?null:new Uint8Array(k(this,zr))}get bodyText(){try{return k(this,zr)==null?"":Jy(k(this,zr))}catch{fe(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{fe(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new Hx(599,r,this.headers,this.body,k(this,Hf)||void 0);return K(i,Fl,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:ee(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw Te(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return k(this,zr)!=null}get request(){return k(this,Hf)}ok(){return k(this,Fl).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=k(this,Fl);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{k(this,zr)&&(i=Jy(k(this,zr)))}catch{}fe(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Xp=new WeakMap,eg=new WeakMap,tg=new WeakMap,zr=new WeakMap,Hf=new WeakMap,Fl=new WeakMap;let Ec=Hx;function K4(){return new Date().getTime()}function Gk(n){return Ro(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Wk(n){return new Promise(e=>setTimeout(e,n))}const Qk=BigInt(-1),Ri=BigInt(0),gf=BigInt(1),Zk=BigInt(5),Ku={};let If="0000";for(;If.length<80;)If+=If;function el(n){let e=If;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function Rd(n,e,t){const r=BigInt(e.width);if(e.signed){const i=gf<<r-gf;fe(t==null||n>=-i&&n<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>Ri?n=Zy(bl(n,r),r):n=-Zy(bl(-n,r),r)}else{const i=gf<<r;fe(t==null||n>=0&&n<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%i+i)%i&i-gf}return n}function Cb(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const s=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);ee(s,"invalid fixed format","format",n),e=s[1]!=="u",t=parseInt(s[2]),r=parseInt(s[3])}}else if(n){const s=n,o=(c,u,f)=>s[c]==null?f:(ee(typeof s[c]===u,"invalid fixed format ("+c+" not "+u+")","format."+c,s[c]),s[c]);e=o("signed","boolean",e),t=o("width","number",t),r=o("decimals","number",r)}ee(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),ee(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(t)+"x"+String(r);return{signed:e,width:t,decimals:r,name:i}}function Jk(n,e){let t="";n<Ri&&(t="-",n*=Qk);let r=n.toString();if(e===0)return t+r;for(;r.length<=e;)r=If+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return t+r}var Vi,ct,Gn,it,al,io,bv,vv,Ev,xv;const Ja=class Ja{constructor(e,t,r){ce(this,it);ie(this,"format");ce(this,Vi);ce(this,ct);ce(this,Gn);ie(this,"_value");hg(e,Ku,"FixedNumber"),K(this,ct,t),K(this,Vi,r);const i=Jk(t,r.decimals);Te(this,{format:r.name,_value:i}),K(this,Gn,el(r.decimals))}get signed(){return k(this,Vi).signed}get width(){return k(this,Vi).width}get decimals(){return k(this,Vi).decimals}get value(){return k(this,ct)}addUnsafe(e){return ge(this,it,bv).call(this,e)}add(e){return ge(this,it,bv).call(this,e,"add")}subUnsafe(e){return ge(this,it,vv).call(this,e)}sub(e){return ge(this,it,vv).call(this,e,"sub")}mulUnsafe(e){return ge(this,it,Ev).call(this,e)}mul(e){return ge(this,it,Ev).call(this,e,"mul")}mulSignal(e){ge(this,it,al).call(this,e);const t=k(this,ct)*k(e,ct);return fe(t%k(this,Gn)===Ri,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),ge(this,it,io).call(this,t/k(this,Gn),"mulSignal")}divUnsafe(e){return ge(this,it,xv).call(this,e)}div(e){return ge(this,it,xv).call(this,e,"div")}divSignal(e){fe(k(e,ct)!==Ri,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ge(this,it,al).call(this,e);const t=k(this,ct)*k(this,Gn);return fe(t%k(e,ct)===Ri,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),ge(this,it,io).call(this,t/k(e,ct),"divSignal")}cmp(e){let t=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=el(i):i<0&&(t*=el(-i)),t<r?-1:t>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=k(this,ct);return k(this,ct)<Ri&&(e-=k(this,Gn)-gf),e=k(this,ct)/k(this,Gn)*k(this,Gn),ge(this,it,io).call(this,e,"floor")}ceiling(){let e=k(this,ct);return k(this,ct)>Ri&&(e+=k(this,Gn)-gf),e=k(this,ct)/k(this,Gn)*k(this,Gn),ge(this,it,io).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,r=Zk*el(t-1);let i=this.value+r;const s=el(t);return i=i/s*s,Rd(i,k(this,Vi),"round"),new Ja(Ku,i,k(this,Vi))}isZero(){return k(this,ct)===Ri}isNegative(){return k(this,ct)<Ri}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ja.fromString(this.toString(),e)}static fromValue(e,t,r){const i=t==null?0:Me(t),s=Cb(r);let o=Be(e,"value");const c=i-s.decimals;if(c>0){const u=el(c);fe(o%u===Ri,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=u}else c<0&&(o*=el(-c));return Rd(o,s,"fromValue"),new Ja(Ku,o,s)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);ee(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=Cb(t);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=If;fe(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const c=BigInt(r[1]+s+o);return Rd(c,i,"fromString"),new Ja(Ku,c,i)}static fromBytes(e,t){let r=Wm(je(e,"value"));const i=Cb(t);return i.signed&&(r=Zy(r,i.width)),Rd(r,i,"fromBytes"),new Ja(Ku,r,i)}};Vi=new WeakMap,ct=new WeakMap,Gn=new WeakMap,it=new WeakSet,al=function(e){ee(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},io=function(e,t){return e=Rd(e,k(this,Vi),t),new Ja(Ku,e,k(this,Vi))},bv=function(e,t){return ge(this,it,al).call(this,e),ge(this,it,io).call(this,k(this,ct)+k(e,ct),t)},vv=function(e,t){return ge(this,it,al).call(this,e),ge(this,it,io).call(this,k(this,ct)-k(e,ct),t)},Ev=function(e,t){return ge(this,it,al).call(this,e),ge(this,it,io).call(this,k(this,ct)*k(e,ct)/k(this,Gn),t)},xv=function(e,t){return fe(k(e,ct)!==Ri,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ge(this,it,al).call(this,e),ge(this,it,io).call(this,k(this,ct)*k(this,Gn)/k(e,ct),t)};let wv=Ja;function Yk(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function G4(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function W4(n,e,t,r){const i=[];for(;t<e+1+r;){const s=TB(n,t);i.push(s.result),t+=s.consumed,fe(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:i}}function TB(n,e){fe(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{fe(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const i=G4(n,e+1,r);return t(e+1+r+i),W4(n,e,e+1+r,r+i)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),W4(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const i=G4(n,e+1,r);t(e+1+r+i);const s=Ae(n.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const i=Ae(n.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:Yk(n[e])}}function dg(n){const e=je(n,"data"),t=TB(e,0);return ee(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function Q4(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function kB(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(kB(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=Q4(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(je(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=Q4(e.length);return t.unshift(183+t.length),t.concat(e)}const Z4="0123456789abcdef";function Bc(n){let e="0x";for(const t of kB(n))e+=Z4[t>>4],e+=Z4[t&15];return e}function Xk(n,e){ee(typeof n=="string","value must be a string","value",n);let t=18;return t=Me(e,"unit"),wv.fromString(n,{decimals:t,width:512}).value}function eR(n){return Xk(n,18)}const Jn=32,Av=new Uint8Array(Jn),tR=["then"],K0={},RB=new WeakMap;function fl(n){return RB.get(n)}function J4(n,e){RB.set(n,e)}function Ud(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function Sv(n,e,t){return n.indexOf(null)>=0?e.map((r,i)=>r instanceof Sh?Sv(fl(r),r,t):r):n.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(t&&o instanceof Sh&&(o=Sv(fl(o),o,t)),r[i]=o),r},{})}var Vf;const Ef=class Ef extends Array{constructor(...t){const r=t[0];let i=t[1],s=(t[2]||[]).slice(),o=!0;r!==K0&&(i=t,s=[],o=!1);super(i.length);ce(this,Vf);i.forEach((f,h)=>{this[h]=f});const c=s.reduce((f,h)=>(typeof h=="string"&&f.set(h,(f.get(h)||0)+1),f),new Map);if(J4(this,Object.freeze(i.map((f,h)=>{const g=s[h];return g!=null&&c.get(g)===1?g:null}))),K(this,Vf,[]),k(this,Vf)==null&&k(this,Vf),!o)return;Object.freeze(this);const u=new Proxy(this,{get:(f,h,g)=>{if(typeof h=="string"){if(h.match(/^[0-9]+$/)){const m=Me(h,"%index");if(m<0||m>=this.length)throw new RangeError("out of result range");const v=f[m];return v instanceof Error&&Ud(`index ${m}`,v),v}if(tR.indexOf(h)>=0)return Reflect.get(f,h,g);const p=f[h];if(p instanceof Function)return function(...m){return p.apply(this===g?f:this,m)};if(!(h in f))return f.getValue.apply(this===g?f:this,[h])}return Reflect.get(f,h,g)}});return J4(u,fl(this)),u}toArray(t){const r=[];return this.forEach((i,s)=>{i instanceof Error&&Ud(`index ${s}`,i),t&&i instanceof Ef&&(i=i.toArray(t)),r.push(i)}),r}toObject(t){const r=fl(this);return r.reduce((i,s,o)=>(fe(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Sv(r,this,t)),{})}slice(t,r){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=fl(this),s=[],o=[];for(let c=t;c<r;c++)s.push(this[c]),o.push(i[c]);return new Ef(K0,s,o)}filter(t,r){const i=fl(this),s=[],o=[];for(let c=0;c<this.length;c++){const u=this[c];u instanceof Error&&Ud(`index ${c}`,u),t.call(r,u,c,this)&&(s.push(u),o.push(i[c]))}return new Ef(K0,s,o)}map(t,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&Ud(`index ${s}`,o),i.push(t.call(r,o,s,this))}return i}getValue(t){const r=fl(this).indexOf(t);if(r===-1)return;const i=this[r];return i instanceof Error&&Ud(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,r){return new Ef(K0,t,r)}};Vf=new WeakMap;let Sh=Ef;function Y4(n){let e=Wt(n);return fe(e.length<=Jn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Jn,offset:e.length}),e.length!==Jn&&(e=Zn(Ct([Av.slice(e.length%Jn),e]))),e}class qo{constructor(e,t,r,i){ie(this,"name");ie(this,"type");ie(this,"localName");ie(this,"dynamic");Te(this,{name:e,type:t,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){ee(!1,e,this.localName,t)}}var vo,Ml,qf,Dy;class Iv{constructor(){ce(this,qf);ce(this,vo);ce(this,Ml);K(this,vo,[]),K(this,Ml,0)}get data(){return Ct(k(this,vo))}get length(){return k(this,Ml)}appendWriter(e){return ge(this,qf,Dy).call(this,Zn(e.data))}writeBytes(e){let t=Zn(e);const r=t.length%Jn;return r&&(t=Zn(Ct([t,Av.slice(r)]))),ge(this,qf,Dy).call(this,t)}writeValue(e){return ge(this,qf,Dy).call(this,Y4(e))}writeUpdatableValue(){const e=k(this,vo).length;return k(this,vo).push(Av),K(this,Ml,k(this,Ml)+Jn),t=>{k(this,vo)[e]=Y4(t)}}}vo=new WeakMap,Ml=new WeakMap,qf=new WeakSet,Dy=function(e){return k(this,vo).push(e),K(this,Ml,k(this,Ml)+e.length),e.length};var gr,Hr,jl,zl,sc,fu,Bv,UB;const Vx=class Vx{constructor(e,t,r){ce(this,fu);ie(this,"allowLoose");ce(this,gr);ce(this,Hr);ce(this,jl);ce(this,zl);ce(this,sc);Te(this,{allowLoose:!!t}),K(this,gr,Zn(e)),K(this,jl,0),K(this,zl,null),K(this,sc,r??1024),K(this,Hr,0)}get data(){return Ae(k(this,gr))}get dataLength(){return k(this,gr).length}get consumed(){return k(this,Hr)}get bytes(){return new Uint8Array(k(this,gr))}subReader(e){const t=new Vx(k(this,gr).slice(k(this,Hr)+e),this.allowLoose,k(this,sc));return K(t,zl,this),t}readBytes(e,t){let r=ge(this,fu,UB).call(this,0,e,!!t);return ge(this,fu,Bv).call(this,e),K(this,Hr,k(this,Hr)+r.length),r.slice(0,e)}readValue(){return Wm(this.readBytes(Jn))}readIndex(){return $k(this.readBytes(Jn))}};gr=new WeakMap,Hr=new WeakMap,jl=new WeakMap,zl=new WeakMap,sc=new WeakMap,fu=new WeakSet,Bv=function(e){var t;if(k(this,zl))return ge(t=k(this,zl),fu,Bv).call(t,e);K(this,jl,k(this,jl)+e),fe(k(this,sc)<1||k(this,jl)<=k(this,sc)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${k(this,sc)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Zn(k(this,gr)),offset:k(this,Hr),length:e,info:{bytesRead:k(this,jl),dataLength:this.dataLength}})},UB=function(e,t,r){let i=Math.ceil(t/Jn)*Jn;return k(this,Hr)+i>k(this,gr).length&&(this.allowLoose&&r&&k(this,Hr)+t<=k(this,gr).length?i=t:fe(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Zn(k(this,gr)),length:k(this,gr).length,offset:k(this,Hr)+i})),k(this,gr).slice(k(this,Hr),k(this,Hr)+i)};let Ov=Vx;function X4(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function LB(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Yy(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function FB(n,e){LB(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nR=n=>n instanceof Uint8Array,rR=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),_b=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),fs=(n,e)=>n<<32-e|n>>>e,iR=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!iR)throw new Error("Non little-endian hardware is not supported");function sR(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function w3(n){if(typeof n=="string"&&(n=sR(n)),!nR(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}let MB=class{clone(){return this._cloneInto()}};function b3(n){const e=r=>n().update(w3(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function oR(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}let jB=class extends MB{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_b(this.buffer)}update(e){Yy(this);const{view:t,buffer:r,blockLen:i}=this;e=w3(e);const s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=_b(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Yy(this),FB(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let g=o;g<i;g++)t[g]=0;oR(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=_b(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)c.setUint32(4*g,h[g],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}};const aR=(n,e,t)=>n&e^~n&t,cR=(n,e,t)=>n&e^n&t^e&t,lR=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ha=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),da=new Uint32Array(64);let uR=class extends jB{constructor(){super(64,32,8,!1),this.A=ha[0]|0,this.B=ha[1]|0,this.C=ha[2]|0,this.D=ha[3]|0,this.E=ha[4]|0,this.F=ha[5]|0,this.G=ha[6]|0,this.H=ha[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let g=0;g<16;g++,t+=4)da[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const p=da[g-15],m=da[g-2],v=fs(p,7)^fs(p,18)^p>>>3,b=fs(m,17)^fs(m,19)^m>>>10;da[g]=b+da[g-7]+v+da[g-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:h}=this;for(let g=0;g<64;g++){const p=fs(c,6)^fs(c,11)^fs(c,25),m=h+p+aR(c,u,f)+lR[g]+da[g]|0,b=(fs(r,2)^fs(r,13)^fs(r,22))+cR(r,i,s)|0;h=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+b|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(r,i,s,o,c,u,f,h)}roundClean(){da.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const fR=b3(()=>new uR),G0=BigInt(2**32-1),Pv=BigInt(32);function zB(n,e=!1){return e?{h:Number(n&G0),l:Number(n>>Pv&G0)}:{h:Number(n>>Pv&G0)|0,l:Number(n&G0)|0}}function HB(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=zB(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const hR=(n,e)=>BigInt(n>>>0)<<Pv|BigInt(e>>>0),dR=(n,e,t)=>n>>>t,pR=(n,e,t)=>n<<32-t|e>>>t,gR=(n,e,t)=>n>>>t|e<<32-t,yR=(n,e,t)=>n<<32-t|e>>>t,mR=(n,e,t)=>n<<64-t|e>>>t-32,wR=(n,e,t)=>n>>>t-32|e<<64-t,bR=(n,e)=>e,vR=(n,e)=>n,VB=(n,e,t)=>n<<t|e>>>32-t,qB=(n,e,t)=>e<<t|n>>>32-t,KB=(n,e,t)=>e<<t-32|n>>>64-t,GB=(n,e,t)=>n<<t-32|e>>>64-t;function ER(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const xR=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),AR=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,SR=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),IR=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,OR=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),BR=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Le={fromBig:zB,split:HB,toBig:hR,shrSH:dR,shrSL:pR,rotrSH:gR,rotrSL:yR,rotrBH:mR,rotrBL:wR,rotr32H:bR,rotr32L:vR,rotlSH:VB,rotlSL:qB,rotlBH:KB,rotlBL:GB,add:ER,add3L:xR,add3H:AR,add4L:SR,add4H:IR,add5H:BR,add5L:OR},[PR,CR]=Le.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),pa=new Uint32Array(80),ga=new Uint32Array(80);class _R extends jB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:f,El:h,Fh:g,Fl:p,Gh:m,Gl:v,Hh:b,Hl:A}=this;return[e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=h|0,this.Fh=g|0,this.Fl=p|0,this.Gh=m|0,this.Gl=v|0,this.Hh=b|0,this.Hl=A|0}process(e,t){for(let O=0;O<16;O++,t+=4)pa[O]=e.getUint32(t),ga[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const T=pa[O-15]|0,R=ga[O-15]|0,j=Le.rotrSH(T,R,1)^Le.rotrSH(T,R,8)^Le.shrSH(T,R,7),H=Le.rotrSL(T,R,1)^Le.rotrSL(T,R,8)^Le.shrSL(T,R,7),V=pa[O-2]|0,M=ga[O-2]|0,G=Le.rotrSH(V,M,19)^Le.rotrBH(V,M,61)^Le.shrSH(V,M,6),Q=Le.rotrSL(V,M,19)^Le.rotrBL(V,M,61)^Le.shrSL(V,M,6),z=Le.add4L(H,Q,ga[O-7],ga[O-16]),P=Le.add4H(z,j,G,pa[O-7],pa[O-16]);pa[O]=P|0,ga[O]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:f,Dl:h,Eh:g,El:p,Fh:m,Fl:v,Gh:b,Gl:A,Hh:_,Hl:U}=this;for(let O=0;O<80;O++){const T=Le.rotrSH(g,p,14)^Le.rotrSH(g,p,18)^Le.rotrBH(g,p,41),R=Le.rotrSL(g,p,14)^Le.rotrSL(g,p,18)^Le.rotrBL(g,p,41),j=g&m^~g&b,H=p&v^~p&A,V=Le.add5L(U,R,H,CR[O],ga[O]),M=Le.add5H(V,_,T,j,PR[O],pa[O]),G=V|0,Q=Le.rotrSH(r,i,28)^Le.rotrBH(r,i,34)^Le.rotrBH(r,i,39),z=Le.rotrSL(r,i,28)^Le.rotrBL(r,i,34)^Le.rotrBL(r,i,39),P=r&s^r&c^s&c,D=i&o^i&u^o&u;_=b|0,U=A|0,b=m|0,A=v|0,m=g|0,v=p|0,{h:g,l:p}=Le.add(f|0,h|0,M|0,G|0),f=c|0,h=u|0,c=s|0,u=o|0,s=r|0,o=i|0;const w=Le.add3L(G,z,D);r=Le.add3H(w,M,Q,P),i=w|0}({h:r,l:i}=Le.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Le.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=Le.add(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:h}=Le.add(this.Dh|0,this.Dl|0,f|0,h|0),{h:g,l:p}=Le.add(this.Eh|0,this.El|0,g|0,p|0),{h:m,l:v}=Le.add(this.Fh|0,this.Fl|0,m|0,v|0),{h:b,l:A}=Le.add(this.Gh|0,this.Gl|0,b|0,A|0),{h:_,l:U}=Le.add(this.Hh|0,this.Hl|0,_|0,U|0),this.set(r,i,s,o,c,u,f,h,g,p,m,v,b,A,_,U)}roundClean(){pa.fill(0),ga.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const NR=b3(()=>new _R);function DR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const eS=DR();eS.crypto||eS.msCrypto;function $R(n){switch(n){case"sha256":return fR.create();case"sha512":return NR.create()}ee(!1,"invalid hashing algorithm name","algorithm",n)}const[WB,QB,ZB]=[[],[],[]],TR=BigInt(0),Ld=BigInt(1),kR=BigInt(2),RR=BigInt(7),UR=BigInt(256),LR=BigInt(113);for(let n=0,e=Ld,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],WB.push(2*(5*r+t)),QB.push((n+1)*(n+2)/2%64);let i=TR;for(let s=0;s<7;s++)e=(e<<Ld^(e>>RR)*LR)%UR,e&kR&&(i^=Ld<<(Ld<<BigInt(s))-Ld);ZB.push(i)}const[FR,MR]=HB(ZB,!0),tS=(n,e,t)=>t>32?KB(n,e,t):VB(n,e,t),nS=(n,e,t)=>t>32?GB(n,e,t):qB(n,e,t);function jR(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=t[u],h=t[u+1],g=tS(f,h,1)^t[c],p=nS(f,h,1)^t[c+1];for(let m=0;m<50;m+=10)n[o+m]^=g,n[o+m+1]^=p}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=QB[o],u=tS(i,s,c),f=nS(i,s,c),h=WB[o];i=n[h],s=n[h+1],n[h]=u,n[h+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=FR[r],n[1]^=MR[r]}t.fill(0)}let zR=class JB extends MB{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,X4(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=rR(this.state)}keccak(){jR(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Yy(this);const{blockLen:t,state:r}=this;e=w3(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Yy(this,!1),LB(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return X4(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(FB(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new JB(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const HR=(n,e,t)=>b3(()=>new zR(e,n,t)),VR=HR(1,136,256/8);let YB=!1;const XB=function(n){return VR(n)};let eP=XB;function Ft(n){const e=je(n,"data");return Ae(eP(e))}Ft._=XB;Ft.lock=function(){YB=!0};Ft.register=function(n){if(YB)throw new TypeError("keccak256 is locked");eP=n};Object.freeze(Ft);const tP=function(n){return $R("sha256").update(n).digest()};let nP=tP,rP=!1;function jh(n){const e=je(n,"data");return Ae(nP(e))}jh._=tP;jh.lock=function(){rP=!0};jh.register=function(n){if(rP)throw new Error("sha256 is locked");nP=n};Object.freeze(jh);Object.freeze(jh);function rS(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function iP(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function qR(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");rS(n.outputLen),rS(n.blockLen)}function Xy(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function KR(n,e){iP(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Nb=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sP=n=>n instanceof Uint8Array,Db=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),hs=(n,e)=>n<<32-e|n>>>e,GR=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!GR)throw new Error("Non little-endian hardware is not supported");function WR(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function v3(n){if(typeof n=="string"&&(n=WR(n)),!sP(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function QR(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!sP(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}let oP=class{clone(){return this._cloneInto()}};function ZR(n){const e=r=>n().update(v3(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function JR(n=32){if(Nb&&typeof Nb.getRandomValues=="function")return Nb.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function YR(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}class XR extends oP{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Db(this.buffer)}update(e){Xy(this);const{view:t,buffer:r,blockLen:i}=this;e=v3(e);const s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=Db(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Xy(this),KR(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let g=o;g<i;g++)t[g]=0;YR(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=Db(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)c.setUint32(4*g,h[g],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const e7=(n,e,t)=>n&e^~n&t,t7=(n,e,t)=>n&e^n&t^e&t,n7=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ya=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ma=new Uint32Array(64);let r7=class extends XR{constructor(){super(64,32,8,!1),this.A=ya[0]|0,this.B=ya[1]|0,this.C=ya[2]|0,this.D=ya[3]|0,this.E=ya[4]|0,this.F=ya[5]|0,this.G=ya[6]|0,this.H=ya[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let g=0;g<16;g++,t+=4)ma[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const p=ma[g-15],m=ma[g-2],v=hs(p,7)^hs(p,18)^p>>>3,b=hs(m,17)^hs(m,19)^m>>>10;ma[g]=b+ma[g-7]+v+ma[g-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:h}=this;for(let g=0;g<64;g++){const p=hs(c,6)^hs(c,11)^hs(c,25),m=h+p+e7(c,u,f)+n7[g]+ma[g]|0,b=(hs(r,2)^hs(r,13)^hs(r,22))+t7(r,i,s)|0;h=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+b|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(r,i,s,o,c,u,f,h)}roundClean(){ma.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const i7=ZR(()=>new r7);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const aP=BigInt(0),Qm=BigInt(1),s7=BigInt(2),Zm=n=>n instanceof Uint8Array,o7=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Ih(n){if(!Zm(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=o7[n[t]];return e}function cP(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function E3(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Oh(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const i=r*2,s=n.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function eu(n){return E3(Ih(n))}function x3(n){if(!Zm(n))throw new Error("Uint8Array expected");return E3(Ih(Uint8Array.from(n).reverse()))}function Bh(n,e){return Oh(n.toString(16).padStart(e*2,"0"))}function A3(n,e){return Bh(n,e).reverse()}function a7(n){return Oh(cP(n))}function ji(n,e,t){let r;if(typeof e=="string")try{r=Oh(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Zm(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function Np(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!Zm(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function c7(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function l7(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function u7(n){let e;for(e=0;n>aP;n>>=Qm,e+=1);return e}function f7(n,e){return n>>BigInt(e)&Qm}const h7=(n,e,t)=>n|(t?Qm:aP)<<BigInt(e),S3=n=>(s7<<BigInt(n-1))-Qm,$b=n=>new Uint8Array(n),iS=n=>Uint8Array.from(n);function lP(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=$b(n),i=$b(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},c=(...g)=>t(i,r,...g),u=(g=$b())=>{i=c(iS([0]),g),r=c(),g.length!==0&&(i=c(iS([1]),g),r=c())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const p=[];for(;g<e;){r=c();const m=r.slice();p.push(m),g+=r.length}return Np(...p)};return(g,p)=>{o(),u(g);let m;for(;!(m=p(f()));)u();return o(),m}}const d7={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function pg(n,e,t={}){const r=(i,s,o)=>{const c=d7[s];if(typeof c!="function")throw new Error(`Invalid validator "${s}", expected function`);const u=n[i];if(!(o&&u===void 0)&&!c(u,n))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const p7=Object.freeze(Object.defineProperty({__proto__:null,bitGet:f7,bitLen:u7,bitMask:S3,bitSet:h7,bytesToHex:Ih,bytesToNumberBE:eu,bytesToNumberLE:x3,concatBytes:Np,createHmacDrbg:lP,ensureBytes:ji,equalBytes:c7,hexToBytes:Oh,hexToNumber:E3,numberToBytesBE:Bh,numberToBytesLE:A3,numberToHexUnpadded:cP,numberToVarBytesBE:a7,utf8ToBytes:l7,validateObject:pg},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const on=BigInt(0),Tt=BigInt(1),hl=BigInt(2),g7=BigInt(3),Cv=BigInt(4),sS=BigInt(5),oS=BigInt(8);BigInt(9);BigInt(16);function mr(n,e){const t=n%e;return t>=on?t:e+t}function y7(n,e,t){if(t<=on||e<on)throw new Error("Expected power/modulo > 0");if(t===Tt)return on;let r=Tt;for(;e>on;)e&Tt&&(r=r*n%t),n=n*n%t,e>>=Tt;return r}function ii(n,e,t){let r=n;for(;e-- >on;)r*=r,r%=t;return r}function _v(n,e){if(n===on||e<=on)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=mr(n,e),r=e,i=on,s=Tt;for(;t!==on;){const c=r/t,u=r%t,f=i-s*c;r=t,t=u,i=s,s=f}if(r!==Tt)throw new Error("invert: does not exist");return mr(i,e)}function m7(n){const e=(n-Tt)/hl;let t,r,i;for(t=n-Tt,r=0;t%hl===on;t/=hl,r++);for(i=hl;i<n&&y7(i,e,n)!==n-Tt;i++);if(r===1){const o=(n+Tt)/Cv;return function(u,f){const h=u.pow(f,o);if(!u.eql(u.sqr(h),f))throw new Error("Cannot find square root");return h}}const s=(t+Tt)/hl;return function(c,u){if(c.pow(u,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let f=r,h=c.pow(c.mul(c.ONE,i),t),g=c.pow(u,s),p=c.pow(u,t);for(;!c.eql(p,c.ONE);){if(c.eql(p,c.ZERO))return c.ZERO;let m=1;for(let b=c.sqr(p);m<f&&!c.eql(b,c.ONE);m++)b=c.sqr(b);const v=c.pow(h,Tt<<BigInt(f-m-1));h=c.sqr(v),g=c.mul(g,v),p=c.mul(p,h),f=m}return g}}function w7(n){if(n%Cv===g7){const e=(n+Tt)/Cv;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%oS===sS){const e=(n-sS)/oS;return function(r,i){const s=r.mul(i,hl),o=r.pow(s,e),c=r.mul(i,o),u=r.mul(r.mul(c,hl),o),f=r.mul(c,r.sub(u,r.ONE));if(!r.eql(r.sqr(f),i))throw new Error("Cannot find square root");return f}}return m7(n)}const b7=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function v7(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=b7.reduce((r,i)=>(r[i]="function",r),e);return pg(n,t)}function E7(n,e,t){if(t<on)throw new Error("Expected power > 0");if(t===on)return n.ONE;if(t===Tt)return e;let r=n.ONE,i=e;for(;t>on;)t&Tt&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Tt;return r}function x7(n,e){const t=new Array(e.length),r=e.reduce((s,o,c)=>n.is0(o)?s:(t[c]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,c)=>n.is0(o)?s:(t[c]=n.mul(s,t[c]),n.mul(s,o)),i),t}function uP(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function A7(n,e,t=!1,r={}){if(n<=on)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=uP(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=w7(n),c=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:S3(i),ZERO:on,ONE:Tt,create:u=>mr(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return on<=u&&u<n},is0:u=>u===on,isOdd:u=>(u&Tt)===Tt,neg:u=>mr(-u,n),eql:(u,f)=>u===f,sqr:u=>mr(u*u,n),add:(u,f)=>mr(u+f,n),sub:(u,f)=>mr(u-f,n),mul:(u,f)=>mr(u*f,n),pow:(u,f)=>E7(c,u,f),div:(u,f)=>mr(u*_v(f,n),n),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>_v(u,n),sqrt:r.sqrt||(u=>o(c,u)),invertBatch:u=>x7(c,u),cmov:(u,f,h)=>h?f:u,toBytes:u=>t?A3(u,s):Bh(u,s),fromBytes:u=>{if(u.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${u.length}`);return t?x3(u):eu(u)}});return Object.freeze(c)}function fP(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function hP(n){const e=fP(n);return e+Math.ceil(e/2)}function S7(n,e,t=!1){const r=n.length,i=fP(e),s=hP(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=t?eu(n):x3(n),c=mr(o,e-Tt)+Tt;return t?A3(c,i):Bh(c,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const I7=BigInt(0),Tb=BigInt(1);function O7(n,e){const t=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=n.ZERO,c=i;for(;s>I7;)s&Tb&&(o=o.add(c)),c=c.double(),s>>=Tb;return o},precomputeWindow(i,s){const{windows:o,windowSize:c}=r(s),u=[];let f=i,h=f;for(let g=0;g<o;g++){h=f,u.push(h);for(let p=1;p<c;p++)h=h.add(f),u.push(h);f=h.double()}return u},wNAF(i,s,o){const{windows:c,windowSize:u}=r(i);let f=n.ZERO,h=n.BASE;const g=BigInt(2**i-1),p=2**i,m=BigInt(i);for(let v=0;v<c;v++){const b=v*u;let A=Number(o&g);o>>=m,A>u&&(A-=p,o+=Tb);const _=b,U=b+Math.abs(A)-1,O=v%2!==0,T=A<0;A===0?h=h.add(t(O,s[_])):f=f.add(t(T,s[U]))}return{p:f,f:h}},wNAFCached(i,s,o,c){const u=i._WINDOW_SIZE||1;let f=s.get(i);return f||(f=this.precomputeWindow(i,u),u!==1&&s.set(i,c(f))),this.wNAF(u,f,o)}}}function dP(n){return v7(n.Fp),pg(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...uP(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function B7(n){const e=dP(n);pg(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:P7,hexToBytes:C7}=p7,vl={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=vl;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:P7(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=vl,t=typeof n=="string"?C7(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=vl._parseInt(t.subarray(2)),{d:o,l:c}=vl._parseInt(s);if(c.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(n){const e=f=>Number.parseInt(f[0],16)&8?"00"+f:f,t=f=>{const h=f.toString(16);return h.length&1?`0${h}`:h},r=e(t(n.s)),i=e(t(n.r)),s=r.length/2,o=i.length/2,c=t(s),u=t(o);return`30${t(o+s+4)}02${u}${i}02${c}${r}`}},Co=BigInt(0),mi=BigInt(1);BigInt(2);const aS=BigInt(3);BigInt(4);function _7(n){const e=B7(n),{Fp:t}=e,r=e.toBytes||((v,b,A)=>{const _=b.toAffine();return Np(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=e.fromBytes||(v=>{const b=v.subarray(1),A=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:A,y:_}});function s(v){const{a:b,b:A}=e,_=t.sqr(v),U=t.mul(_,v);return t.add(t.add(U,t.mul(v,b)),A)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(v){return typeof v=="bigint"&&Co<v&&v<e.n}function c(v){if(!o(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(v){const{allowedPrivateKeyLengths:b,nByteLength:A,wrapPrivateKey:_,n:U}=e;if(b&&typeof v!="bigint"){if(v instanceof Uint8Array&&(v=Ih(v)),typeof v!="string"||!b.includes(v.length))throw new Error("Invalid key");v=v.padStart(A*2,"0")}let O;try{O=typeof v=="bigint"?v:eu(ji("private key",v,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof v}`)}return _&&(O=mr(O,U)),c(O),O}const f=new Map;function h(v){if(!(v instanceof g))throw new Error("ProjectivePoint expected")}class g{constructor(b,A,_){if(this.px=b,this.py=A,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:A,y:_}=b||{};if(!b||!t.isValid(A)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof g)throw new Error("projective point not allowed");const U=O=>t.eql(O,t.ZERO);return U(A)&&U(_)?g.ZERO:new g(A,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const A=t.invertBatch(b.map(_=>_.pz));return b.map((_,U)=>_.toAffine(A[U])).map(g.fromAffine)}static fromHex(b){const A=g.fromAffine(i(ji("pointHex",b)));return A.assertValidity(),A}static fromPrivateKey(b){return g.BASE.multiply(u(b))}_setWindowSize(b){this._WINDOW_SIZE=b,f.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:b,y:A}=this.toAffine();if(!t.isValid(b)||!t.isValid(A))throw new Error("bad point: x or y not FE");const _=t.sqr(A),U=s(b);if(!t.eql(_,U))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){h(b);const{px:A,py:_,pz:U}=this,{px:O,py:T,pz:R}=b,j=t.eql(t.mul(A,R),t.mul(O,U)),H=t.eql(t.mul(_,R),t.mul(T,U));return j&&H}negate(){return new g(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:A}=e,_=t.mul(A,aS),{px:U,py:O,pz:T}=this;let R=t.ZERO,j=t.ZERO,H=t.ZERO,V=t.mul(U,U),M=t.mul(O,O),G=t.mul(T,T),Q=t.mul(U,O);return Q=t.add(Q,Q),H=t.mul(U,T),H=t.add(H,H),R=t.mul(b,H),j=t.mul(_,G),j=t.add(R,j),R=t.sub(M,j),j=t.add(M,j),j=t.mul(R,j),R=t.mul(Q,R),H=t.mul(_,H),G=t.mul(b,G),Q=t.sub(V,G),Q=t.mul(b,Q),Q=t.add(Q,H),H=t.add(V,V),V=t.add(H,V),V=t.add(V,G),V=t.mul(V,Q),j=t.add(j,V),G=t.mul(O,T),G=t.add(G,G),V=t.mul(G,Q),R=t.sub(R,V),H=t.mul(G,M),H=t.add(H,H),H=t.add(H,H),new g(R,j,H)}add(b){h(b);const{px:A,py:_,pz:U}=this,{px:O,py:T,pz:R}=b;let j=t.ZERO,H=t.ZERO,V=t.ZERO;const M=e.a,G=t.mul(e.b,aS);let Q=t.mul(A,O),z=t.mul(_,T),P=t.mul(U,R),D=t.add(A,_),w=t.add(O,T);D=t.mul(D,w),w=t.add(Q,z),D=t.sub(D,w),w=t.add(A,U);let x=t.add(O,R);return w=t.mul(w,x),x=t.add(Q,P),w=t.sub(w,x),x=t.add(_,U),j=t.add(T,R),x=t.mul(x,j),j=t.add(z,P),x=t.sub(x,j),V=t.mul(M,w),j=t.mul(G,P),V=t.add(j,V),j=t.sub(z,V),V=t.add(z,V),H=t.mul(j,V),z=t.add(Q,Q),z=t.add(z,Q),P=t.mul(M,P),w=t.mul(G,w),z=t.add(z,P),P=t.sub(Q,P),P=t.mul(M,P),w=t.add(w,P),Q=t.mul(z,w),H=t.add(H,Q),Q=t.mul(x,w),j=t.mul(D,j),j=t.sub(j,Q),Q=t.mul(D,z),V=t.mul(x,V),V=t.add(V,Q),new g(j,H,V)}subtract(b){return this.add(b.negate())}is0(){return this.equals(g.ZERO)}wNAF(b){return m.wNAFCached(this,f,b,A=>{const _=t.invertBatch(A.map(U=>U.pz));return A.map((U,O)=>U.toAffine(_[O])).map(g.fromAffine)})}multiplyUnsafe(b){const A=g.ZERO;if(b===Co)return A;if(c(b),b===mi)return this;const{endo:_}=e;if(!_)return m.unsafeLadder(this,b);let{k1neg:U,k1:O,k2neg:T,k2:R}=_.splitScalar(b),j=A,H=A,V=this;for(;O>Co||R>Co;)O&mi&&(j=j.add(V)),R&mi&&(H=H.add(V)),V=V.double(),O>>=mi,R>>=mi;return U&&(j=j.negate()),T&&(H=H.negate()),H=new g(t.mul(H.px,_.beta),H.py,H.pz),j.add(H)}multiply(b){c(b);let A=b,_,U;const{endo:O}=e;if(O){const{k1neg:T,k1:R,k2neg:j,k2:H}=O.splitScalar(A);let{p:V,f:M}=this.wNAF(R),{p:G,f:Q}=this.wNAF(H);V=m.constTimeNegate(T,V),G=m.constTimeNegate(j,G),G=new g(t.mul(G.px,O.beta),G.py,G.pz),_=V.add(G),U=M.add(Q)}else{const{p:T,f:R}=this.wNAF(A);_=T,U=R}return g.normalizeZ([_,U])[0]}multiplyAndAddUnsafe(b,A,_){const U=g.BASE,O=(R,j)=>j===Co||j===mi||!R.equals(U)?R.multiplyUnsafe(j):R.multiply(j),T=O(this,A).add(O(b,_));return T.is0()?void 0:T}toAffine(b){const{px:A,py:_,pz:U}=this,O=this.is0();b==null&&(b=O?t.ONE:t.inv(U));const T=t.mul(A,b),R=t.mul(_,b),j=t.mul(U,b);if(O)return{x:t.ZERO,y:t.ZERO};if(!t.eql(j,t.ONE))throw new Error("invZ was invalid");return{x:T,y:R}}isTorsionFree(){const{h:b,isTorsionFree:A}=e;if(b===mi)return!0;if(A)return A(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:A}=e;return b===mi?this:A?A(g,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),r(g,this,b)}toHex(b=!0){return Ih(this.toRawBytes(b))}}g.BASE=new g(e.Gx,e.Gy,t.ONE),g.ZERO=new g(t.ZERO,t.ONE,t.ZERO);const p=e.nBitLength,m=O7(g,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:o}}function N7(n){const e=dP(n);return pg(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function D7(n){const e=N7(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(w){return Co<w&&w<t.ORDER}function c(w){return mr(w,r)}function u(w){return _v(w,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:h,weierstrassEquation:g,isWithinCurveOrder:p}=_7({...e,toBytes(w,x,B){const C=x.toAffine(),I=t.toBytes(C.x),N=Np;return B?N(Uint8Array.from([x.hasEvenY()?2:3]),I):N(Uint8Array.from([4]),I,t.toBytes(C.y))},fromBytes(w){const x=w.length,B=w[0],C=w.subarray(1);if(x===i&&(B===2||B===3)){const I=eu(C);if(!o(I))throw new Error("Point is not on curve");const N=g(I);let $=t.sqrt(N);const L=($&mi)===mi;return(B&1)===1!==L&&($=t.neg($)),{x:I,y:$}}else if(x===s&&B===4){const I=t.fromBytes(C.subarray(0,t.BYTES)),N=t.fromBytes(C.subarray(t.BYTES,2*t.BYTES));return{x:I,y:N}}else throw new Error(`Point of length ${x} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),m=w=>Ih(Bh(w,e.nByteLength));function v(w){const x=r>>mi;return w>x}function b(w){return v(w)?c(-w):w}const A=(w,x,B)=>eu(w.slice(x,B));class _{constructor(x,B,C){this.r=x,this.s=B,this.recovery=C,this.assertValidity()}static fromCompact(x){const B=e.nByteLength;return x=ji("compactSignature",x,B*2),new _(A(x,0,B),A(x,B,2*B))}static fromDER(x){const{r:B,s:C}=vl.toSig(ji("DER",x));return new _(B,C)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(x){return new _(this.r,this.s,x)}recoverPublicKey(x){const{r:B,s:C,recovery:I}=this,N=H(ji("msgHash",x));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");const $=I===2||I===3?B+e.n:B;if($>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=(I&1)===0?"02":"03",Y=f.fromHex(L+m($)),q=u($),Z=c(-N*q),te=c(C*q),re=f.BASE.multiplyAndAddUnsafe(Y,Z,te);if(!re)throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Oh(this.toDERHex())}toDERHex(){return vl.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Oh(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const U={isValidPrivateKey(w){try{return h(w),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const w=hP(e.n);return S7(e.randomBytes(w),e.n)},precompute(w=8,x=f.BASE){return x._setWindowSize(w),x.multiply(BigInt(3)),x}};function O(w,x=!0){return f.fromPrivateKey(w).toRawBytes(x)}function T(w){const x=w instanceof Uint8Array,B=typeof w=="string",C=(x||B)&&w.length;return x?C===i||C===s:B?C===2*i||C===2*s:w instanceof f}function R(w,x,B=!0){if(T(w))throw new Error("first arg must be private key");if(!T(x))throw new Error("second arg must be public key");return f.fromHex(x).multiply(h(w)).toRawBytes(B)}const j=e.bits2int||function(w){const x=eu(w),B=w.length*8-e.nBitLength;return B>0?x>>BigInt(B):x},H=e.bits2int_modN||function(w){return c(j(w))},V=S3(e.nBitLength);function M(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(Co<=w&&w<V))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Bh(w,e.nByteLength)}function G(w,x,B=Q){if(["recovered","canonical"].some(se=>se in B))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:I}=e;let{lowS:N,prehash:$,extraEntropy:L}=B;N==null&&(N=!0),w=ji("msgHash",w),$&&(w=ji("prehashed msgHash",C(w)));const Y=H(w),q=h(x),Z=[M(q),M(Y)];if(L!=null){const se=L===!0?I(t.BYTES):L;Z.push(ji("extraEntropy",se))}const te=Np(...Z),re=Y;function le(se){const ue=j(se);if(!p(ue))return;const Ne=u(ue),Re=f.BASE.multiply(ue).toAffine(),ke=c(Re.x);if(ke===Co)return;const Ve=c(Ne*c(re+ke*q));if(Ve===Co)return;let Qt=(Re.x===ke?0:2)|Number(Re.y&mi),cn=Ve;return N&&v(Ve)&&(cn=b(Ve),Qt^=1),new _(ke,cn,Qt)}return{seed:te,k2sig:le}}const Q={lowS:e.lowS,prehash:!1},z={lowS:e.lowS,prehash:!1};function P(w,x,B=Q){const{seed:C,k2sig:I}=G(w,x,B),N=e;return lP(N.hash.outputLen,N.nByteLength,N.hmac)(C,I)}f.BASE._setWindowSize(8);function D(w,x,B,C=z){var Re;const I=w;if(x=ji("msgHash",x),B=ji("publicKey",B),"strict"in C)throw new Error("options.strict was renamed to lowS");const{lowS:N,prehash:$}=C;let L,Y;try{if(typeof I=="string"||I instanceof Uint8Array)try{L=_.fromDER(I)}catch(ke){if(!(ke instanceof vl.Err))throw ke;L=_.fromCompact(I)}else if(typeof I=="object"&&typeof I.r=="bigint"&&typeof I.s=="bigint"){const{r:ke,s:Ve}=I;L=new _(ke,Ve)}else throw new Error("PARSE");Y=f.fromHex(B)}catch(ke){if(ke.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(N&&L.hasHighS())return!1;$&&(x=e.hash(x));const{r:q,s:Z}=L,te=H(x),re=u(Z),le=c(te*re),se=c(q*re),ue=(Re=f.BASE.multiplyAndAddUnsafe(Y,le,se))==null?void 0:Re.toAffine();return ue?c(ue.x)===q:!1}return{CURVE:e,getPublicKey:O,getSharedSecret:R,sign:P,verify:D,ProjectivePoint:f,Signature:_,utils:U}}let pP=class extends oP{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,qR(e);const r=v3(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Xy(this),this.iHash.update(e),this}digestInto(e){Xy(this),iP(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const gP=(n,e,t)=>new pP(n,e).update(t).digest();gP.create=(n,e)=>new pP(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $7(n){return{hash:n,hmac:(e,...t)=>gP(n,e,QR(...t)),randomBytes:JR}}function T7(n,e){const t=r=>D7({...n,...$7(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yP=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),cS=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),k7=BigInt(1),Nv=BigInt(2),lS=(n,e)=>(n+e/Nv)/e;function R7(n){const e=yP,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),c=BigInt(44),u=BigInt(88),f=n*n*n%e,h=f*f*n%e,g=ii(h,t,e)*h%e,p=ii(g,t,e)*h%e,m=ii(p,Nv,e)*f%e,v=ii(m,i,e)*m%e,b=ii(v,s,e)*v%e,A=ii(b,c,e)*b%e,_=ii(A,u,e)*A%e,U=ii(_,c,e)*b%e,O=ii(U,t,e)*h%e,T=ii(O,o,e)*v%e,R=ii(T,r,e)*f%e,j=ii(R,Nv,e);if(!Dv.eql(Dv.sqr(j),n))throw new Error("Cannot find square root");return j}const Dv=A7(yP,void 0,void 0,{sqrt:R7}),Ma=T7({a:BigInt(0),b:BigInt(7),Fp:Dv,n:cS,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=cS,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-k7*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),c=lS(s*n,e),u=lS(-r*n,e);let f=mr(n-c*t-u*i,e),h=mr(-c*r-u*s,e);const g=f>o,p=h>o;if(g&&(f=e-f),p&&(h=e-h),f>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:g,k1:f,k2neg:p,k2:h}}}},i7);BigInt(0);Ma.ProjectivePoint;const Dp="0x0000000000000000000000000000000000000000",uS="0x0000000000000000000000000000000000000000000000000000000000000000",fS=BigInt(0),hS=BigInt(1),dS=BigInt(2),pS=BigInt(27),gS=BigInt(28),W0=BigInt(35),Gu={};function yS(n){return jo(Wt(n),32)}var Kf,Is,Gf,Hl;const Mi=class Mi{constructor(e,t,r,i){ce(this,Kf);ce(this,Is);ce(this,Gf);ce(this,Hl);hg(e,Gu,"Signature"),K(this,Kf,t),K(this,Is,r),K(this,Gf,i),K(this,Hl,null)}get r(){return k(this,Kf)}set r(e){ee(Sf(e)===32,"invalid r","value",e),K(this,Kf,Ae(e))}get s(){return ee(parseInt(k(this,Is).substring(0,3))<8,"non-canonical s; use ._s","s",k(this,Is)),k(this,Is)}set s(e){ee(Sf(e)===32,"invalid s","value",e),K(this,Is,Ae(e))}get _s(){return k(this,Is)}isValid(){return parseInt(k(this,Is).substring(0,3))<8}get v(){return k(this,Gf)}set v(e){const t=Me(e,"value");ee(t===27||t===28,"invalid v","v",e),K(this,Gf,t)}get networkV(){return k(this,Hl)}get legacyChainId(){const e=this.networkV;return e==null?null:Mi.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=je(this.s);return this.yParity&&(e[0]|=128),Ae(e)}get compactSerialized(){return Ct([this.r,this.yParityAndS])}get serialized(){return Ct([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Mi(Gu,this.r,this._s,this.v);return this.networkV&&K(e,Hl,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=Be(e,"v");return t==pS||t==gS?fS:(ee(t>=W0,"invalid EIP-155 v","v",e),(t-W0)/dS)}static getChainIdV(e,t){return Be(e)*dS+BigInt(35+t-27)}static getNormalizedV(e){const t=Be(e);return t===fS||t===pS?27:t===hS||t===gS?28:(ee(t>=W0,"invalid v","v",e),t&hS?27:28)}static from(e){function t(f,h){ee(f,h,"signature",e)}if(e==null)return new Mi(Gu,uS,uS,27);if(typeof e=="string"){const f=je(e,"signature");if(f.length===64){const h=Ae(f.slice(0,32)),g=f.slice(32,64),p=g[0]&128?28:27;return g[0]&=127,new Mi(Gu,h,Ae(g),p)}if(f.length===65){const h=Ae(f.slice(0,32)),g=Ae(f.slice(32,64)),p=Mi.getNormalizedV(f[64]);return new Mi(Gu,h,g,p)}t(!1,"invalid raw signature length")}if(e instanceof Mi)return e.clone();const r=e.r;t(r!=null,"missing r");const i=yS(r),s=(function(f,h){if(f!=null)return yS(f);if(h!=null){t(yt(h,32),"invalid yParityAndS");const g=je(h);return g[0]&=127,Ae(g)}t(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:c}=(function(f,h,g){if(f!=null){const p=Be(f);return{networkV:p>=W0?p:void 0,v:Mi.getNormalizedV(p)}}if(h!=null)return t(yt(h,32),"invalid yParityAndS"),{v:je(h)[0]&128?28:27};if(g!=null){switch(Me(g,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),u=new Mi(Gu,i,s,c);return o&&K(u,Hl,o),t(e.yParity==null||Me(e.yParity,"sig.yParity")===u.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===u.yParityAndS,"yParityAndS mismatch"),u}};Kf=new WeakMap,Is=new WeakMap,Gf=new WeakMap,Hl=new WeakMap;let Pr=Mi;var Eo;const yl=class yl{constructor(e){ce(this,Eo);ee(Sf(e)===32,"invalid private key","privateKey","[REDACTED]"),K(this,Eo,Ae(e))}get privateKey(){return k(this,Eo)}get publicKey(){return yl.computePublicKey(k(this,Eo))}get compressedPublicKey(){return yl.computePublicKey(k(this,Eo),!0)}sign(e){ee(Sf(e)===32,"invalid digest length","digest",e);const t=Ma.sign(Zn(e),Zn(k(this,Eo)),{lowS:!0});return Pr.from({r:Ic(t.r,32),s:Ic(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=yl.computePublicKey(e);return Ae(Ma.getSharedSecret(Zn(k(this,Eo)),je(t),!1))}static computePublicKey(e,t){let r=je(e,"key");if(r.length===32){const s=Ma.getPublicKey(r,!!t);return Ae(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Ma.ProjectivePoint.fromHex(r);return Ae(i.toRawBytes(t))}static recoverPublicKey(e,t){ee(Sf(e)===32,"invalid digest length","digest",e);const r=Pr.from(t);let i=Ma.Signature.fromCompact(Zn(Ct([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(Zn(e));return ee(s!=null,"invalid signature for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,r){const i=Ma.ProjectivePoint.fromHex(yl.computePublicKey(e).substring(2)),s=Ma.ProjectivePoint.fromHex(yl.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!r)}};Eo=new WeakMap;let $p=yl;const U7=BigInt(0),L7=BigInt(36);function mS(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=je(Ft(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const I3={};for(let n=0;n<10;n++)I3[String(n)]=String(n);for(let n=0;n<26;n++)I3[String.fromCharCode(65+n)]=String(10+n);const wS=15;function F7(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>I3[r]).join("");for(;e.length>=wS;){let r=e.substring(0,wS);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const M7=(function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n})();function j7(n){n=n.toLowerCase();let e=U7;for(let t=0;t<n.length;t++)e=e*L7+M7[n[t]];return e}function st(n){if(ee(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=mS(n);return ee(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ee(n.substring(2,4)===F7(n),"bad icap checksum","address",n);let e=j7(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return mS("0x"+e)}ee(!1,"invalid address","address",n)}function z7(n){const e=st(n.from);let r=Be(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,st(Pt(Ft(Bc([e,r])),12))}function mP(n){return n&&typeof n.getAddress=="function"}async function kb(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(fe(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),ee(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),st(t)}function Yn(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?st(n):(fe(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),kb(n,e.resolveName(n)));if(mP(n))return kb(n,n.getAddress());if(n&&typeof n.then=="function")return kb(n,n);ee(!1,"unsupported addressable value","target",n)}const lo={};function Oe(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new Vn(lo,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function Je(n,e){return new Vn(lo,`bytes${e||""}`,n,{size:e})}const bS=Symbol.for("_ethers_typed");var Vl;const fo=class fo{constructor(e,t,r,i){ie(this,"type");ie(this,"value");ce(this,Vl);ie(this,"_typedSymbol");i==null&&(i=null),hg(lo,e,"Typed"),Te(this,{_typedSymbol:bS,type:t,value:r}),K(this,Vl,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return k(this,Vl)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return k(this,Vl)===!0?-1:k(this,Vl)===!1?this.value.length:null}static from(e,t){return new fo(lo,e,t)}static uint8(e){return Oe(e,8)}static uint16(e){return Oe(e,16)}static uint24(e){return Oe(e,24)}static uint32(e){return Oe(e,32)}static uint40(e){return Oe(e,40)}static uint48(e){return Oe(e,48)}static uint56(e){return Oe(e,56)}static uint64(e){return Oe(e,64)}static uint72(e){return Oe(e,72)}static uint80(e){return Oe(e,80)}static uint88(e){return Oe(e,88)}static uint96(e){return Oe(e,96)}static uint104(e){return Oe(e,104)}static uint112(e){return Oe(e,112)}static uint120(e){return Oe(e,120)}static uint128(e){return Oe(e,128)}static uint136(e){return Oe(e,136)}static uint144(e){return Oe(e,144)}static uint152(e){return Oe(e,152)}static uint160(e){return Oe(e,160)}static uint168(e){return Oe(e,168)}static uint176(e){return Oe(e,176)}static uint184(e){return Oe(e,184)}static uint192(e){return Oe(e,192)}static uint200(e){return Oe(e,200)}static uint208(e){return Oe(e,208)}static uint216(e){return Oe(e,216)}static uint224(e){return Oe(e,224)}static uint232(e){return Oe(e,232)}static uint240(e){return Oe(e,240)}static uint248(e){return Oe(e,248)}static uint256(e){return Oe(e,256)}static uint(e){return Oe(e,256)}static int8(e){return Oe(e,-8)}static int16(e){return Oe(e,-16)}static int24(e){return Oe(e,-24)}static int32(e){return Oe(e,-32)}static int40(e){return Oe(e,-40)}static int48(e){return Oe(e,-48)}static int56(e){return Oe(e,-56)}static int64(e){return Oe(e,-64)}static int72(e){return Oe(e,-72)}static int80(e){return Oe(e,-80)}static int88(e){return Oe(e,-88)}static int96(e){return Oe(e,-96)}static int104(e){return Oe(e,-104)}static int112(e){return Oe(e,-112)}static int120(e){return Oe(e,-120)}static int128(e){return Oe(e,-128)}static int136(e){return Oe(e,-136)}static int144(e){return Oe(e,-144)}static int152(e){return Oe(e,-152)}static int160(e){return Oe(e,-160)}static int168(e){return Oe(e,-168)}static int176(e){return Oe(e,-176)}static int184(e){return Oe(e,-184)}static int192(e){return Oe(e,-192)}static int200(e){return Oe(e,-200)}static int208(e){return Oe(e,-208)}static int216(e){return Oe(e,-216)}static int224(e){return Oe(e,-224)}static int232(e){return Oe(e,-232)}static int240(e){return Oe(e,-240)}static int248(e){return Oe(e,-248)}static int256(e){return Oe(e,-256)}static int(e){return Oe(e,-256)}static bytes1(e){return Je(e,1)}static bytes2(e){return Je(e,2)}static bytes3(e){return Je(e,3)}static bytes4(e){return Je(e,4)}static bytes5(e){return Je(e,5)}static bytes6(e){return Je(e,6)}static bytes7(e){return Je(e,7)}static bytes8(e){return Je(e,8)}static bytes9(e){return Je(e,9)}static bytes10(e){return Je(e,10)}static bytes11(e){return Je(e,11)}static bytes12(e){return Je(e,12)}static bytes13(e){return Je(e,13)}static bytes14(e){return Je(e,14)}static bytes15(e){return Je(e,15)}static bytes16(e){return Je(e,16)}static bytes17(e){return Je(e,17)}static bytes18(e){return Je(e,18)}static bytes19(e){return Je(e,19)}static bytes20(e){return Je(e,20)}static bytes21(e){return Je(e,21)}static bytes22(e){return Je(e,22)}static bytes23(e){return Je(e,23)}static bytes24(e){return Je(e,24)}static bytes25(e){return Je(e,25)}static bytes26(e){return Je(e,26)}static bytes27(e){return Je(e,27)}static bytes28(e){return Je(e,28)}static bytes29(e){return Je(e,29)}static bytes30(e){return Je(e,30)}static bytes31(e){return Je(e,31)}static bytes32(e){return Je(e,32)}static address(e){return new fo(lo,"address",e)}static bool(e){return new fo(lo,"bool",!!e)}static bytes(e){return new fo(lo,"bytes",e)}static string(e){return new fo(lo,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new fo(lo,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===bS}static dereference(e,t){if(fo.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Vl=new WeakMap;let Vn=fo;class H7 extends qo{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=Vn.dereference(t,"string");try{r=st(r)}catch(i){return this._throwError(i.message,t)}return e.writeValue(r)}decode(e){return st(Ic(e.readValue(),20))}}class V7 extends qo{constructor(t){super(t.name,t.type,"_",t.dynamic);ie(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,r){return this.coder.encode(t,r)}decode(t){return this.coder.decode(t)}}function wP(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let u={};r=e.map(f=>{const h=f.localName;return fe(h,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:t}),fe(!u[h],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:t}),u[h]=!0,t[h]})}else ee(!1,"invalid tuple value","tuple",t);ee(e.length===r.length,"types/value length mismatch","tuple",t);let i=new Iv,s=new Iv,o=[];e.forEach((u,f)=>{let h=r[f];if(u.dynamic){let g=s.length;u.encode(s,h);let p=i.writeUpdatableValue();o.push(m=>{p(m+g)})}else u.encode(i,h)}),o.forEach(u=>{u(i.length)});let c=n.appendWriter(i);return c+=n.appendWriter(s),c}function bP(n,e){let t=[],r=[],i=n.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let c=n.readIndex(),u=i.subReader(c);try{o=s.decode(u)}catch(f){if(wn(f,"BUFFER_OVERRUN"))throw f;o=f,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(c){if(wn(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");t.push(o),r.push(s.localName||null)}),Sh.fromItems(t,r)}class q7 extends qo{constructor(t,r,i){const s=t.type+"["+(r>=0?r:"")+"]",o=r===-1||t.dynamic;super("array",s,i,o);ie(this,"coder");ie(this,"length");Te(this,{coder:t,length:r})}defaultValue(){const t=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(t);return r}encode(t,r){const i=Vn.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,t.writeValue(i.length)),SB(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let c=0;c<i.length;c++)o.push(this.coder);return wP(t,o,i)}decode(t){let r=this.length;r===-1&&(r=t.readIndex(),fe(r*Jn<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:r*Jn,length:t.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new V7(this.coder));return bP(t,i)}}class K7 extends qo{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=Vn.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class vP extends qo{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Zn(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class G7 extends vP{constructor(e){super("bytes",e)}decode(e){return Ae(super.decode(e))}}class W7 extends qo{constructor(t,r){let i="bytes"+String(t);super(i,i,r,!1);ie(this,"size");Te(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,r){let i=Zn(Vn.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),t.writeBytes(i)}decode(t){return Ae(t.readBytes(this.size))}}const Q7=new Uint8Array([]);class Z7 extends qo{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(Q7)}decode(e){return e.readBytes(0),null}}const J7=BigInt(0),Y7=BigInt(1),X7=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class eU extends qo{constructor(t,r,i){const s=(r?"int":"uint")+t*8;super(s,s,i,!1);ie(this,"size");ie(this,"signed");Te(this,{size:t,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,r){let i=Be(Vn.dereference(r,this.type)),s=bl(X7,Jn*8);if(this.signed){let o=bl(s,this.size*8-1);(i>o||i<-(o+Y7))&&this._throwError("value out-of-bounds",r),i=BB(i,8*Jn)}else(i<J7||i>bl(s,this.size*8))&&this._throwError("value out-of-bounds",r);return t.writeValue(i)}decode(t){let r=bl(t.readValue(),this.size*8);return this.signed&&(r=Zy(r,this.size*8)),r}}class tU extends vP{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Ro(Vn.dereference(t,"string")))}decode(e){return Jy(super.decode(e))}}class Q0 extends qo{constructor(t,r){let i=!1;const s=[];t.forEach(c=>{c.dynamic&&(i=!0),s.push(c.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);ie(this,"coders");Te(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),t[o]==null&&(t[o]=t[s]))}),Object.freeze(t)}encode(t,r){const i=Vn.dereference(r,"tuple");return wP(t,this.coders,i)}decode(t){return bP(t,this.coders)}}function Rb(n,e){return{address:st(n),storageKeys:e.map((t,r)=>(ee(yt(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function hu(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(ee(t.length===2,"invalid slot set",`value[${r}]`,t),Rb(t[0],t[1])):(ee(t!=null&&typeof t=="object","invalid address-slot set","value",n),Rb(t.address,t.storageKeys)));ee(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return Rb(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function EP(n){return{address:st(n.address),nonce:Be(n.nonce!=null?n.nonce:0),chainId:Be(n.chainId!=null?n.chainId:0),signature:Pr.from(n.signature)}}function nU(n){let e;return typeof n=="string"?e=$p.computePublicKey(n,!1):e=n.publicKey,st(Ft("0x"+e.substring(4)).substring(26))}function rU(n,e){return nU($p.recoverPublicKey(n,e))}const sn=BigInt(0),iU=BigInt(2),sU=BigInt(27),oU=BigInt(28),aU=BigInt(35),cU=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ub=4096*32;function lU(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return je(n.blobToKzgCommitment(Ae(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return je(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return je(n.blobToKZGCommitment(Ae(r)));ee(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return je(n.computeBlobProof(Ae(r),Ae(i)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return je(n.computeBlobKZGProof(Ae(r),Ae(i)));ee(!1,"unsupported KZG library","kzg",n)}}}function vS(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=jh(e).substring(4),"0x"+t}function zh(n){return n==="0x"?null:st(n)}function Jm(n,e){try{return hu(n)}catch(t){ee(!1,t.message,e,n)}}function uU(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let r=0;r<n.length;r++){const i=n[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);t.push({address:zh(i[1]),nonce:lt(i[2],"nonce"),chainId:lt(i[0],"chainId"),signature:Pr.from({yParity:du(i[3],"yParity"),r:jo(i[4],32),s:jo(i[5],32)})})}return t}catch(t){ee(!1,t.message,e,n)}}function du(n,e){return n==="0x"?0:Me(n,e)}function lt(n,e){if(n==="0x")return sn;const t=Be(n,e);return ee(t<=cU,"value exceeds uint size",e,t),t}function We(n,e){const t=Be(n,"value"),r=Wt(t);return ee(r.length<=32,"value too large",`tx.${e}`,t),r}function Ym(n){return hu(n).map(e=>[e.address,e.storageKeys])}function fU(n){return n.map(e=>[We(e.chainId,"chainId"),e.address,We(e.nonce,"nonce"),We(e.signature.yParity,"yParity"),Wt(e.signature.r),Wt(e.signature.s)])}function hU(n,e){ee(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)ee(yt(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function dU(n){const e=dg(n);ee(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:du(e[0],"nonce"),gasPrice:lt(e[1],"gasPrice"),gasLimit:lt(e[2],"gasLimit"),to:zh(e[3]),value:lt(e[4],"value"),data:Ae(e[5]),chainId:sn};if(e.length===6)return t;const r=lt(e[6],"v"),i=lt(e[7],"r"),s=lt(e[8],"s");if(i===sn&&s===sn)t.chainId=r;else{let o=(r-aU)/iU;o<sn&&(o=sn),t.chainId=o,ee(o!==sn||r===sU||r===oU,"non-canonical legacy v","v",e[6]),t.signature=Pr.from({r:jo(e[7],32),s:jo(e[8],32),v:r})}return t}function pU(n,e){const t=[We(n.nonce,"nonce"),We(n.gasPrice||0,"gasPrice"),We(n.gasLimit,"gasLimit"),n.to||"0x",We(n.value,"value"),n.data];let r=sn;if(n.chainId!=sn)r=Be(n.chainId,"tx.chainId"),ee(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const s=n.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==sn&&(t.push(Wt(r)),t.push("0x"),t.push("0x")),Bc(t);let i=BigInt(27+e.yParity);return r!==sn?i=Pr.getChainIdV(r,e.v):BigInt(e.v)!==i&&ee(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Wt(i)),t.push(Wt(e.r)),t.push(Wt(e.s)),Bc(t)}function Xm(n,e){let t;try{if(t=du(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{ee(!1,"invalid yParity","yParity",e[0])}const r=jo(e[1],32),i=jo(e[2],32),s=Pr.from({r,s:i,yParity:t});n.signature=s}function gU(n){const e=dg(je(n).slice(1));ee(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ae(n));const t={type:2,chainId:lt(e[0],"chainId"),nonce:du(e[1],"nonce"),maxPriorityFeePerGas:lt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:lt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:lt(e[4],"gasLimit"),to:zh(e[5]),value:lt(e[6],"value"),data:Ae(e[7]),accessList:Jm(e[8],"accessList")};return e.length===9||Xm(t,e.slice(9)),t}function yU(n,e){const t=[We(n.chainId,"chainId"),We(n.nonce,"nonce"),We(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),We(n.maxFeePerGas||0,"maxFeePerGas"),We(n.gasLimit,"gasLimit"),n.to||"0x",We(n.value,"value"),n.data,Ym(n.accessList||[])];return e&&(t.push(We(e.yParity,"yParity")),t.push(Wt(e.r)),t.push(Wt(e.s))),Ct(["0x02",Bc(t)])}function mU(n){const e=dg(je(n).slice(1));ee(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ae(n));const t={type:1,chainId:lt(e[0],"chainId"),nonce:du(e[1],"nonce"),gasPrice:lt(e[2],"gasPrice"),gasLimit:lt(e[3],"gasLimit"),to:zh(e[4]),value:lt(e[5],"value"),data:Ae(e[6]),accessList:Jm(e[7],"accessList")};return e.length===8||Xm(t,e.slice(8)),t}function wU(n,e){const t=[We(n.chainId,"chainId"),We(n.nonce,"nonce"),We(n.gasPrice||0,"gasPrice"),We(n.gasLimit,"gasLimit"),n.to||"0x",We(n.value,"value"),n.data,Ym(n.accessList||[])];return e&&(t.push(We(e.yParity,"recoveryParam")),t.push(Wt(e.r)),t.push(Wt(e.s))),Ct(["0x01",Bc(t)])}function bU(n){let e=dg(je(n).slice(1)),t="3",r=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const s=e[1],o=e[2],c=e[3];ee(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),ee(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),ee(Array.isArray(c),"invalid network format: proofs not an array","fields[3]",c),ee(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),ee(s.length===c.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let u=0;u<e[1].length;u++)r.push({data:s[u],commitment:o[u],proof:c[u]});e=e[0]}ee(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",Ae(n));const i={type:3,chainId:lt(e[0],"chainId"),nonce:du(e[1],"nonce"),maxPriorityFeePerGas:lt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:lt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:lt(e[4],"gasLimit"),to:zh(e[5]),value:lt(e[6],"value"),data:Ae(e[7]),accessList:Jm(e[8],"accessList"),maxFeePerBlobGas:lt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),ee(i.to!=null,`invalid address for transaction type: ${t}`,"data",n),ee(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let s=0;s<i.blobVersionedHashes.length;s++)ee(yt(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",n);return e.length===11||Xm(i,e.slice(11)),i}function vU(n,e,t){const r=[We(n.chainId,"chainId"),We(n.nonce,"nonce"),We(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),We(n.maxFeePerGas||0,"maxFeePerGas"),We(n.gasLimit,"gasLimit"),n.to||Dp,We(n.value,"value"),n.data,Ym(n.accessList||[]),We(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),hU(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(We(e.yParity,"yParity")),r.push(Wt(e.r)),r.push(Wt(e.s)),t)?Ct(["0x03",Bc([r,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):Ct(["0x03",Bc(r)])}function EU(n){const e=dg(je(n).slice(1));ee(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Ae(n));const t={type:4,chainId:lt(e[0],"chainId"),nonce:du(e[1],"nonce"),maxPriorityFeePerGas:lt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:lt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:lt(e[4],"gasLimit"),to:zh(e[5]),value:lt(e[6],"value"),data:Ae(e[7]),accessList:Jm(e[8],"accessList"),authorizationList:uU(e[9],"authorizationList")};return e.length===10||Xm(t,e.slice(10)),t}function xU(n,e){const t=[We(n.chainId,"chainId"),We(n.nonce,"nonce"),We(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),We(n.maxFeePerGas||0,"maxFeePerGas"),We(n.gasLimit,"gasLimit"),n.to||"0x",We(n.value,"value"),n.data,Ym(n.accessList||[]),fU(n.authorizationList||[])];return e&&(t.push(We(e.yParity,"yParity")),t.push(Wt(e.r)),t.push(Wt(e.s))),Ct(["0x04",Bc(t)])}var qi,Wf,Qf,Zf,Jf,Yf,Xf,eh,th,nh,rh,ih,ql,oc,Os,ac,sh,oh,$y;const As=class As{constructor(){ce(this,oh);ce(this,qi);ce(this,Wf);ce(this,Qf);ce(this,Zf);ce(this,Jf);ce(this,Yf);ce(this,Xf);ce(this,eh);ce(this,th);ce(this,nh);ce(this,rh);ce(this,ih);ce(this,ql);ce(this,oc);ce(this,Os);ce(this,ac);ce(this,sh);K(this,qi,null),K(this,Wf,null),K(this,Zf,0),K(this,Jf,sn),K(this,Yf,null),K(this,Xf,null),K(this,eh,null),K(this,Qf,"0x"),K(this,th,sn),K(this,nh,sn),K(this,rh,null),K(this,ih,null),K(this,ql,null),K(this,oc,null),K(this,Os,null),K(this,ac,null),K(this,sh,null)}get type(){return k(this,qi)}set type(e){switch(e){case null:K(this,qi,null);break;case 0:case"legacy":K(this,qi,0);break;case 1:case"berlin":case"eip-2930":K(this,qi,1);break;case 2:case"london":case"eip-1559":K(this,qi,2);break;case 3:case"cancun":case"eip-4844":K(this,qi,3);break;case 4:case"pectra":case"eip-7702":K(this,qi,4);break;default:ee(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=k(this,Wf);return e==null&&this.type===3?Dp:e}set to(e){K(this,Wf,e==null?null:st(e))}get nonce(){return k(this,Zf)}set nonce(e){K(this,Zf,Me(e,"value"))}get gasLimit(){return k(this,Jf)}set gasLimit(e){K(this,Jf,Be(e))}get gasPrice(){const e=k(this,Yf);return e==null&&(this.type===0||this.type===1)?sn:e}set gasPrice(e){K(this,Yf,e==null?null:Be(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=k(this,Xf);return e??(this.type===2||this.type===3?sn:null)}set maxPriorityFeePerGas(e){K(this,Xf,e==null?null:Be(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=k(this,eh);return e??(this.type===2||this.type===3?sn:null)}set maxFeePerGas(e){K(this,eh,e==null?null:Be(e,"maxFeePerGas"))}get data(){return k(this,Qf)}set data(e){K(this,Qf,Ae(e))}get value(){return k(this,th)}set value(e){K(this,th,Be(e,"value"))}get chainId(){return k(this,nh)}set chainId(e){K(this,nh,Be(e))}get signature(){return k(this,rh)||null}set signature(e){K(this,rh,e==null?null:Pr.from(e))}get accessList(){const e=k(this,ih)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){K(this,ih,e==null?null:hu(e))}get authorizationList(){const e=k(this,sh)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){K(this,sh,e==null?null:e.map(t=>EP(t)))}get maxFeePerBlobGas(){const e=k(this,ql);return e==null&&this.type===3?sn:e}set maxFeePerBlobGas(e){K(this,ql,e==null?null:Be(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=k(this,oc);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ee(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)ee(yt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}K(this,oc,e)}get blobs(){return k(this,ac)==null?null:k(this,ac).map(e=>Object.assign({},e))}set blobs(e){if(e==null){K(this,ac,null);return}const t=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(m3(s)){fe(k(this,Os),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=je(s);if(ee(o.length<=Ub,"blob is too large",`blobs[${i}]`,s),o.length!==Ub){const f=new Uint8Array(Ub);f.set(o),o=f}const c=k(this,Os).blobToKzgCommitment(o),u=Ae(k(this,Os).computeBlobKzgProof(o,c));t.push({data:Ae(o),commitment:Ae(c),proof:u}),r.push(vS(1,c))}else{const o=Ae(s.commitment);t.push({data:Ae(s.data),commitment:o,proof:Ae(s.proof)}),r.push(vS(1,o))}}K(this,ac,t),K(this,oc,r)}get kzg(){return k(this,Os)}set kzg(e){e==null?K(this,Os,null):K(this,Os,lU(e))}get hash(){return this.signature==null?null:Ft(ge(this,oh,$y).call(this,!0,!1))}get unsignedHash(){return Ft(this.unsignedSerialized)}get from(){return this.signature==null?null:rU(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:$p.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ge(this,oh,$y).call(this,!0,!0)}get unsignedSerialized(){return ge(this,oh,$y).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=k(this,ql)!=null||k(this,oc);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&fe(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),fe(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),fe(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return As.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new As;if(typeof e=="string"){const r=je(e);if(r[0]>=127)return As.from(dU(r));switch(r[0]){case 1:return As.from(mU(r));case 2:return As.from(gU(r));case 3:return As.from(bU(r));case 4:return As.from(EU(r))}fe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new As;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Pr.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(ee(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ee(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ee(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ee(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};qi=new WeakMap,Wf=new WeakMap,Qf=new WeakMap,Zf=new WeakMap,Jf=new WeakMap,Yf=new WeakMap,Xf=new WeakMap,eh=new WeakMap,th=new WeakMap,nh=new WeakMap,rh=new WeakMap,ih=new WeakMap,ql=new WeakMap,oc=new WeakMap,Os=new WeakMap,ac=new WeakMap,sh=new WeakMap,oh=new WeakSet,$y=function(e,t){fe(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return pU(this,r);case 1:return wU(this,r);case 2:return yU(this,r);case 3:return vU(this,r,t?this.blobs:null);case 4:return xU(this,r)}fe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let em=As;function iu(n){return Ft(Ro(n))}var AU="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const ES=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),xS=4;function SU(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let R=1;R<r;R++)s.push(i+=t());let o=t(),c=e;e+=o;let u=0,f=0;function h(){return u==0&&(f=f<<8|n[e++],u=8),f>>--u&1}const g=31,p=2**g,m=p>>>1,v=m>>1,b=p-1;let A=0;for(let R=0;R<g;R++)A=A<<1|h();let _=[],U=0,O=p;for(;;){let R=Math.floor(((A-U+1)*i-1)/O),j=0,H=r;for(;H-j>1;){let G=j+H>>>1;R<s[G]?H=G:j=G}if(j==0)break;_.push(j);let V=U+Math.floor(O*s[j]/i),M=U+Math.floor(O*s[j+1]/i)-1;for(;((V^M)&m)==0;)A=A<<1&b|h(),V=V<<1&b,M=M<<1&b|1;for(;V&~M&v;)A=A&m|A<<1&b>>>1|h(),V=V<<1^m,M=(M^m)<<1|m|1;U=V,O=1+M-V}let T=r-4;return _.map(R=>{switch(R-T){case 3:return T+65792+(n[c++]<<16|n[c++]<<8|n[c++]);case 2:return T+256+(n[c++]<<8|n[c++]);case 1:return T+n[c++];default:return R-1}})}function IU(n){let e=0;return()=>n[e++]}function xP(n){return IU(SU(OU(n)))}function OU(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=n.length,r=new Uint8Array(6*t>>3);for(let i=0,s=0,o=0,c=0;i<t;i++)c=c<<6|e[n.charCodeAt(i)],o+=6,o>=8&&(r[s++]=c>>(o-=8));return r}function BU(n){return n&1?~n>>1:n>>1}function PU(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=BU(e());return t}function Tp(n,e=0){let t=[];for(;;){let r=n(),i=n();if(!i)break;e+=r;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function AP(n){return kp(()=>{let e=Tp(n);if(e.length)return e})}function SP(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(CU(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(_U(t,n))}return e.flat()}function kp(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function IP(n,e,t){let r=Array(n).fill().map(()=>[]);for(let i=0;i<e;i++)PU(n,t).forEach((s,o)=>r[o].push(s));return r}function CU(n,e){let t=1+e(),r=e(),i=kp(e);return IP(i.length,1+n,e).flatMap((o,c)=>{let[u,...f]=o;return Array(i[c]).fill().map((h,g)=>{let p=g*r;return[u+g*t,f.map(m=>m+p)]})})}function _U(n,e){let t=1+e();return IP(t,1+n,e).map(i=>[i[0],i.slice(1)])}function NU(n){let e=[],t=Tp(n);return i(r([]),[]),e;function r(s){let o=n(),c=kp(()=>{let u=Tp(n).map(f=>t[f]);if(u.length)return r(u)});return{S:o,B:c,Q:s}}function i({S:s,B:o},c,u){if(!(s&4&&u===c[c.length-1])){s&2&&(u=c[c.length-1]),s&1&&e.push(c);for(let f of o)for(let h of f.Q)i(f,[...c,h],u)}}}function DU(n){return n.toString(16).toUpperCase().padStart(2,"0")}function OP(n){return`{${DU(n)}}`}function $U(n){let e=[];for(let t=0,r=n.length;t<r;){let i=n.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function Ph(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...n.slice(i,i+=4096)));return r.join("")}function TU(n,e){let t=n.length,r=t-e.length;for(let i=0;r==0&&i<t;i++)r=n[i]-e[i];return r}var kU="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Rp=44032,tm=4352,nm=4449,rm=4519,BP=19,PP=21,Ch=28,im=PP*Ch,RU=BP*im,UU=Rp+RU,LU=tm+BP,FU=nm+PP,MU=rm+Ch;function lp(n){return n>>24&255}function CP(n){return n&16777215}let $v,AS,Tv,Ty;function jU(){let n=xP(kU);$v=new Map(AP(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),AS=new Set(Tp(n)),Tv=new Map,Ty=new Map;for(let[e,t]of SP(n)){if(!AS.has(e)&&t.length==2){let[r,i]=t,s=Ty.get(r);s||(s=new Map,Ty.set(r,s)),s.set(i,e)}Tv.set(e,t.reverse())}}function _P(n){return n>=Rp&&n<UU}function zU(n,e){if(n>=tm&&n<LU&&e>=nm&&e<FU)return Rp+(n-tm)*im+(e-nm)*Ch;if(_P(n)&&e>rm&&e<MU&&(n-Rp)%Ch==0)return n+(e-rm);{let t=Ty.get(n);return t&&(t=t.get(e),t)?t:-1}}function NP(n){$v||jU();let e=[],t=[],r=!1;function i(s){let o=$v.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of n)for(;;){if(s<128)e.push(s);else if(_P(s)){let o=s-Rp,c=o/im|0,u=o%im/Ch|0,f=o%Ch;i(tm+c),i(nm+u),f>0&&i(rm+f)}else{let o=Tv.get(s);o?t.push(...o):i(s)}if(!t.length)break;s=t.pop()}if(r&&e.length>1){let s=lp(e[0]);for(let o=1;o<e.length;o++){let c=lp(e[o]);if(c==0||s<=c){s=c;continue}let u=o-1;for(;;){let f=e[u+1];if(e[u+1]=e[u],e[u]=f,!u||(s=lp(e[--u]),s<=c))break}s=lp(e[o])}}return e}function HU(n){let e=[],t=[],r=-1,i=0;for(let s of n){let o=lp(s),c=CP(s);if(r==-1)o==0?r=c:e.push(c);else if(i>0&&i>=o)o==0?(e.push(r,...t),t.length=0,r=c):t.push(c),i=o;else{let u=zU(r,c);u>=0?r=u:i==0&&o==0?(e.push(r),r=c):(t.push(c),i=o)}}return r>=0&&e.push(r,...t),e}function DP(n){return NP(n).map(CP)}function VU(n){return HU(NP(n))}const SS=45,$P=".",TP=65039,kP=1,sm=n=>Array.from(n);function Up(n,e){return n.P.has(e)||n.Q.has(e)}class qU extends Array{get is_emoji(){return!0}}let kv,RP,El,Rv,UP,Of,Lb,lf,cl,IS,Uv;function O3(){if(kv)return;let n=xP(AU);const e=()=>Tp(n),t=()=>new Set(e()),r=(h,g)=>g.forEach(p=>h.add(p));kv=new Map(SP(n)),RP=t(),El=e(),Rv=new Set(e().map(h=>El[h])),El=new Set(El),UP=t(),t();let i=AP(n),s=n();const o=()=>{let h=new Set;return e().forEach(g=>r(h,i[g])),r(h,e()),h};Of=kp(h=>{let g=kp(n).map(p=>p+96);if(g.length){let p=h>=s;g[0]-=32,g=Ph(g),p&&(g=`Restricted[${g}]`);let m=o(),v=o(),b=!n();return{N:g,P:m,Q:v,M:b,R:p}}}),Lb=t(),lf=new Map;let c=e().concat(sm(Lb)).sort((h,g)=>h-g);c.forEach((h,g)=>{let p=n(),m=c[g]=p?c[g-p]:{V:[],M:new Map};m.V.push(h),Lb.has(h)||lf.set(h,m)});for(let{V:h,M:g}of new Set(lf.values())){let p=[];for(let v of h){let b=Of.filter(_=>Up(_,v)),A=p.find(({G:_})=>b.some(U=>_.has(U)));A||(A={G:new Set,V:[]},p.push(A)),A.V.push(v),r(A.G,b)}let m=p.flatMap(v=>sm(v.G));for(let{G:v,V:b}of p){let A=new Set(m.filter(_=>!v.has(_)));for(let _ of b)g.set(_,A)}}cl=new Set;let u=new Set;const f=h=>cl.has(h)?u.add(h):cl.add(h);for(let h of Of){for(let g of h.P)f(g);for(let g of h.Q)f(g)}for(let h of cl)!lf.has(h)&&!u.has(h)&&lf.set(h,kP);r(cl,DP(cl)),IS=NU(n).map(h=>qU.from(h)).sort(TU),Uv=new Map;for(let h of IS){let g=[Uv];for(let p of h){let m=g.map(v=>{let b=v.get(p);return b||(b=new Map,v.set(p,b)),b});p===TP?g.push(...m):g=m}for(let p of g)p.V=h}}function B3(n){return(LP(n)?"":`${P3(ew([n]))} `)+OP(n)}function P3(n){return`"${n}"‎`}function KU(n){if(n.length>=4&&n[2]==SS&&n[3]==SS)throw new Error(`invalid label extension: "${Ph(n.slice(0,4))}"`)}function GU(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function WU(n){let e=n[0],t=ES.get(e);if(t)throw Ep(`leading ${t}`);let r=n.length,i=-1;for(let s=1;s<r;s++){e=n[s];let o=ES.get(e);if(o){if(i==s)throw Ep(`${t} + ${o}`);i=s+1,t=o}}if(i==r)throw Ep(`trailing ${t}`)}function ew(n,e=1/0,t=OP){let r=[];QU(n[0])&&r.push("◌"),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let i=0,s=n.length;for(let o=0;o<s;o++){let c=n[o];LP(c)&&(r.push(Ph(n.slice(i,o))),r.push(t(c)),i=o+1)}return r.push(Ph(n.slice(i,s))),r.join("")}function QU(n){return O3(),El.has(n)}function LP(n){return O3(),UP.has(n)}function ZU(n){return eL(JU(n,VU,rL))}function JU(n,e,t){if(!n)return[];O3();let r=0;return n.split($P).map(i=>{let s=$U(i),o={input:s,offset:r};r+=s.length+1;try{let c=o.tokens=nL(s,e,t),u=c.length,f;if(!u)throw new Error("empty label");let h=o.output=c.flat();if(GU(h),!(o.emoji=u>1||c[0].is_emoji)&&h.every(p=>p<128))KU(h),f="ASCII";else{let p=c.flatMap(m=>m.is_emoji?[]:m);if(!p.length)f="Emoji";else{if(El.has(h[0]))throw Ep("leading combining mark");for(let b=1;b<u;b++){let A=c[b];if(!A.is_emoji&&El.has(A[0]))throw Ep(`emoji + combining mark: "${Ph(c[b-1])} + ${ew([A[0]])}"`)}WU(h);let m=sm(new Set(p)),[v]=XU(m);tL(v,p),YU(v,m),f=v.N}}o.type=f}catch(c){o.error=c}return o})}function YU(n,e){let t,r=[];for(let i of e){let s=lf.get(i);if(s===kP)return;if(s){let o=s.M.get(i);if(t=t?t.filter(c=>o.has(c)):sm(o),!t.length)return}else r.push(i)}if(t){for(let i of t)if(r.every(s=>Up(i,s)))throw new Error(`whole-script confusable: ${n.N}/${i.N}`)}}function XU(n){let e=Of;for(let t of n){let r=e.filter(i=>Up(i,t));if(!r.length)throw Of.some(i=>Up(i,t))?MP(e[0],t):FP(t);if(e=r,r.length==1)break}return e}function eL(n){return n.map(({input:e,error:t,output:r})=>{if(t){let i=t.message;throw new Error(n.length==1?i:`Invalid label ${P3(ew(e,63))}: ${i}`)}return Ph(r)}).join($P)}function FP(n){return new Error(`disallowed character: ${B3(n)}`)}function MP(n,e){let t=B3(e),r=Of.find(i=>i.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Ep(n){return new Error(`illegal placement: ${n}`)}function tL(n,e){for(let t of e)if(!Up(n,t))throw MP(n,t);if(n.M){let t=DP(e);for(let r=1,i=t.length;r<i;r++)if(Rv.has(t[r])){let s=r+1;for(let o;s<i&&Rv.has(o=t[s]);s++)for(let c=r;c<s;c++)if(t[c]==o)throw new Error(`duplicate non-spacing marks: ${B3(o)}`);if(s-r>xS)throw new Error(`excessive non-spacing marks: ${P3(ew(t.slice(r-1,s)))} (${s-r}/${xS})`);r=s}}}function nL(n,e,t){let r=[],i=[];for(n=n.slice().reverse();n.length;){let s=iL(n);if(s)i.length&&(r.push(e(i)),i=[]),r.push(t(s));else{let o=n.pop();if(cl.has(o))i.push(o);else{let c=kv.get(o);if(c)i.push(...c);else if(!RP.has(o))throw FP(o)}}}return i.length&&r.push(e(i)),r}function rL(n){return n.filter(e=>e!=TP)}function iL(n,e){let t=Uv,r,i=n.length;for(;i&&(t=t.get(n[--i]),!!t);){let{V:s}=t;s&&(r=s,n.length=i)}return r}const jP=new Uint8Array(32);jP.fill(0);function OS(n){return ee(n.length!==0,"invalid ENS name; empty component","comp",n),n}function zP(n){const e=Ro(sL(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(OS(e.slice(r,i))),r=i+1);return ee(r<e.length,"invalid ENS name; empty component","name",n),t.push(OS(e.slice(r))),t}function sL(n){try{if(n.length===0)throw new Error("empty label");return ZU(n)}catch(e){ee(!1,`invalid ENS name (${e.message})`,"name",n)}}function Lv(n){ee(typeof n=="string","invalid ENS name; not a string","name",n),ee(n.length,"invalid ENS name (empty label)","name",n);let e=jP;const t=zP(n);for(;t.length;)e=Ft(Ct([e,Ft(t.pop())]));return Ae(e)}function oL(n,e){const t=e;return ee(t<=255,"DNS encoded label cannot exceed 255","length",t),Ae(Ct(zP(n).map(r=>{ee(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}const HP=new Uint8Array(32);HP.fill(0);const aL=BigInt(-1),VP=BigInt(0),qP=BigInt(1),cL=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function lL(n){const e=je(n),t=e.length%32;return t?Ct([e,HP.slice(t)]):Ae(e)}const uL=Ic(qP,32),fL=Ic(VP,32),BS={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Fb=["name","version","chainId","verifyingContract","salt"];function PS(n){return function(e){return ee(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const hL={name:PS("name"),version:PS("version"),chainId:function(n){const e=Be(n,"domain.chainId");return ee(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Wi(e)},verifyingContract:function(n){try{return st(n).toLowerCase()}catch{}ee(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=je(n,"domain.salt");return ee(e.length===32,'invalid domain value "salt"',"domain.salt",n),Ae(e)}};function Mb(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);ee(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const i=bl(cL,t?r-1:r),s=t?(i+qP)*aL:VP;return function(o){const c=Be(o,"value");return ee(c>=s&&c<=i,`value out-of-bounds for ${n}`,"value",c),Ic(t?BB(c,256):c,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return ee(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const i=je(r);return ee(i.length===t,`invalid length for ${n}`,"value",r),lL(r)}}}switch(n){case"address":return function(e){return jo(st(e),32)};case"bool":return function(e){return e?uL:fL};case"bytes":return function(e){return Ft(e)};case"string":return function(e){return iu(e)}}return null}function CS(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function Z0(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var ng,xo,ah,Mm,KP;const ui=class ui{constructor(e){ce(this,Mm);ie(this,"primaryType");ce(this,ng);ce(this,xo);ce(this,ah);K(this,xo,new Map),K(this,ah,new Map);const t=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(u=>{s[u]=e[u].map(({name:f,type:h})=>{let{base:g,index:p}=Z0(h);return g==="int"&&!e.int&&(g="int256"),g==="uint"&&!e.uint&&(g="uint256"),{name:f,type:g+(p||"")}}),t.set(u,new Set),r.set(u,[]),i.set(u,new Set)}),K(this,ng,JSON.stringify(s));for(const u in s){const f=new Set;for(const h of s[u]){ee(!f.has(h.name),`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(u)}`,"types",e),f.add(h.name);const g=Z0(h.type).base;ee(g!==u,`circular type reference to ${JSON.stringify(g)}`,"types",e),!Mb(g)&&(ee(r.has(g),`unknown type ${JSON.stringify(g)}`,"types",e),r.get(g).push(u),t.get(u).add(g))}}const o=Array.from(r.keys()).filter(u=>r.get(u).length===0);ee(o.length!==0,"missing primary type","types",e),ee(o.length===1,`ambiguous primary types or unused types: ${o.map(u=>JSON.stringify(u)).join(", ")}`,"types",e),Te(this,{primaryType:o[0]});function c(u,f){ee(!f.has(u),`circular type reference to ${JSON.stringify(u)}`,"types",e),f.add(u);for(const h of t.get(u))if(r.has(h)){c(h,f);for(const g of f)i.get(g).add(h)}f.delete(u)}c(this.primaryType,new Set);for(const[u,f]of i){const h=Array.from(f);h.sort(),k(this,xo).set(u,CS(u,s[u])+h.map(g=>CS(g,s[g])).join(""))}}get types(){return JSON.parse(k(this,ng))}getEncoder(e){let t=k(this,ah).get(e);return t||(t=ge(this,Mm,KP).call(this,e),k(this,ah).set(e,t)),t}encodeType(e){const t=k(this,xo).get(e);return ee(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Ft(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Mb(e))return r(e,t);const i=Z0(e).array;if(i)return ee(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:c,type:u})=>(o[c]=this._visit(u,t[c],r),o),{});ee(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new ui(e)}static getPrimaryType(e){return ui.from(e).primaryType}static hashStruct(e,t,r){return ui.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const i=BS[r];ee(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Fb.indexOf(r.name)-Fb.indexOf(i.name)),ui.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Ct(["0x1901",ui.hashDomain(e),ui.from(t).hash(r)])}static hash(e,t,r){return Ft(ui.encode(e,t,r))}static async resolveNames(e,t,r,i){e=Object.assign({},e);for(const c in e)e[c]==null&&delete e[c];const s={};e.verifyingContract&&!yt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=ui.from(t);o.visit(r,(c,u)=>(c==="address"&&!yt(u,20)&&(s[u]="0x"),u));for(const c in s)s[c]=await i(c);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(c,u)=>c==="address"&&s[u]?s[u]:u),{domain:e,value:r}}static getPayload(e,t,r){ui.hashDomain(e);const i={},s=[];Fb.forEach(u=>{const f=e[u];f!=null&&(i[u]=hL[u](f),s.push({name:u,type:BS[u]}))});const o=ui.from(t);t=o.types;const c=Object.assign({},t);return ee(c.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),c.EIP712Domain=s,o.encode(r),{types:c,domain:i,primaryType:o.primaryType,message:o.visit(r,(u,f)=>{if(u.match(/^bytes(\d*)/))return Ae(je(f));if(u.match(/^u?int/))return Be(f).toString();switch(u){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return ee(typeof f=="string","invalid string","value",f),f}ee(!1,"unsupported type","type",u)})}}};ng=new WeakMap,xo=new WeakMap,ah=new WeakMap,Mm=new WeakSet,KP=function(e){{const i=Mb(e);if(i)return i}const t=Z0(e).array;if(t){const i=t.prefix,s=this.getEncoder(i);return o=>{ee(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let c=o.map(s);return k(this,xo).has(i)&&(c=c.map(Ft)),Ft(Ct(c))}}const r=this.types[e];if(r){const i=iu(k(this,xo).get(e));return s=>{const o=r.map(({name:c,type:u})=>{const f=this.getEncoder(u)(s[c]);return k(this,xo).has(u)?Ft(f):f});return o.unshift(i),Ct(o)}}ee(!1,`unknown type: ${e}`,"type",e)};let om=ui;function Xn(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const dL="external public payable override",pL=Xn(dL.split(" ")),GP="constant external internal payable private public pure view override",gL=Xn(GP.split(" ")),WP="constructor error event fallback function receive struct",QP=Xn(WP.split(" ")),ZP="calldata memory storage payable indexed",yL=Xn(ZP.split(" ")),mL="tuple returns",wL=[WP,ZP,mL,GP].join(" "),bL=Xn(wL.split(" ")),vL={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},EL=new RegExp("^(\\s*)"),xL=new RegExp("^([0-9]+)"),AL=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),JP=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),YP=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var yn,Ki,rg,Fv;const jm=class jm{constructor(e){ce(this,rg);ce(this,yn);ce(this,Ki);K(this,yn,0),K(this,Ki,e.slice())}get offset(){return k(this,yn)}get length(){return k(this,Ki).length-k(this,yn)}clone(){return new jm(k(this,Ki))}reset(){K(this,yn,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=ge(this,rg,Fv).call(this,k(this,yn)+1,e.match+1);return K(this,yn,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;k(this,yn)<e.match-1;){const r=this.peek().linkNext;t.push(ge(this,rg,Fv).call(this,k(this,yn)+1,r)),K(this,yn,r)}return K(this,yn,e.match+1),t}peek(){if(k(this,yn)>=k(this,Ki).length)throw new Error("out-of-bounds");return k(this,Ki)[k(this,yn)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return Td(this,yn)._++,e}toString(){const e=[];for(let t=k(this,yn);t<k(this,Ki).length;t++){const r=k(this,Ki)[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};yn=new WeakMap,Ki=new WeakMap,rg=new WeakSet,Fv=function(e=0,t=0){return new jm(k(this,Ki).slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Yi=jm;function kc(n){const e=[],t=o=>{const c=s<n.length?JSON.stringify(n[s]):"$EOI";throw new Error(`invalid token ${c} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<n.length;){let o=n.substring(s),c=o.match(EL);c&&(s+=c[1].length,o=n.substring(s));const u={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(u);let f=vL[o[0]]||"";if(f){if(u.type=f,u.text=o[0],s++,f==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(f=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),u.match=r.pop(),e[u.match].match=e.length-1,u.depth--,u.linkBack=i.pop(),e[u.linkBack].linkNext=e.length-1;else if(f==="COMMA")u.linkBack=i.pop(),e[u.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(f==="OPEN_BRACKET")u.type="BRACKET";else if(f==="CLOSE_BRACKET"){let h=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const g=e.pop().text;h=g+h,e[e.length-1].value=Me(g)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=h}continue}if(c=o.match(AL),c){if(u.text=c[1],s+=u.text.length,bL.has(u.text)){u.type="KEYWORD";continue}if(u.text.match(YP)){u.type="TYPE";continue}u.type="ID";continue}if(c=o.match(xL),c){u.text=c[1],u.type="NUMBER",s+=u.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new Yi(e.map(o=>Object.freeze(o)))}function _S(n,e){let t=[];for(const r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function tw(n,e){if(e.peekKeyword(QP)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function zo(n,e){const t=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function XP(n){let e=zo(n,gL);return _S(e,Xn("constant payable nonpayable".split(" "))),_S(e,Xn("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Uo(n,e){return n.popParams().map(t=>bn.from(t,e))}function eC(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return Be(n.pop().text);throw new Error("invalid gas")}return null}function su(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const SL=new RegExp(/^(.*)\[([0-9]*)\]$/);function NS(n){const e=n.match(YP);if(ee(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);ee(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);ee(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const It={},_r=Symbol.for("_ethers_internal"),DS="_ParamTypeInternal",$S="_ErrorInternal",TS="_EventInternal",kS="_ConstructorInternal",RS="_FallbackInternal",US="_FunctionInternal",LS="_StructInternal";var ch,ky;const fi=class fi{constructor(e,t,r,i,s,o,c,u){ce(this,ch);ie(this,"name");ie(this,"type");ie(this,"baseType");ie(this,"indexed");ie(this,"components");ie(this,"arrayLength");ie(this,"arrayChildren");if(hg(e,It,"ParamType"),Object.defineProperty(this,_r,{value:DS}),o&&(o=Object.freeze(o.slice())),i==="array"){if(c==null||u==null)throw new Error("")}else if(c!=null||u!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Te(this,{name:t,type:r,baseType:i,indexed:s,components:o,arrayLength:c,arrayChildren:u})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const r=[],i=[e];return ge(this,ch,ky).call(this,r,e,t,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,t){if(fi.isParamType(e))return e;if(typeof e=="string")try{return fi.from(kc(e),t)}catch{ee(!1,"invalid param type","obj",e)}else if(e instanceof Yi){let c="",u="",f=null;zo(e,Xn(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(u="tuple",f=e.popParams().map(b=>fi.from(b)),c=`tuple(${f.map(b=>b.format()).join(",")})`):(c=NS(e.popType("TYPE")),u=c);let h=null,g=null;for(;e.length&&e.peekType("BRACKET");){const b=e.pop();h=new fi(It,"",c,u,null,f,g,h),g=b.value,c+=b.text,u="array",f=null}let p=null;if(zo(e,yL).has("indexed")){if(!t)throw new Error("");p=!0}const v=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new fi(It,v,c,u,p,f,g,h)}const r=e.name;ee(!r||typeof r=="string"&&r.match(JP),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(ee(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(SL);if(o){const c=parseInt(o[2]||"-1"),u=fi.from({type:o[1],components:e.components});return new fi(It,r||"",s,"array",i,null,c,u)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const c=e.components!=null?e.components.map(f=>fi.from(f)):null;return new fi(It,r||"",s,"tuple",i,c,null,null)}return s=NS(e.type),new fi(It,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[_r]===DS}};ch=new WeakSet,ky=function(e,t,r,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,c=t.slice();c.forEach((u,f)=>{var h;ge(h=o,ch,ky).call(h,e,u,r,g=>{c[f]=g})}),i(c);return}if(this.isTuple()){const o=this.components;let c;if(Array.isArray(t))c=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");c=o.map(u=>{if(!u.name)throw new Error("cannot use object value with unnamed components");if(!(u.name in t))throw new Error(`missing value for component ${u.name}`);return t[u.name]})}if(c.length!==this.components.length)throw new Error("array is wrong length");c.forEach((u,f)=>{var h;ge(h=o[f],ch,ky).call(h,e,u,r,g=>{c[f]=g})}),i(c);return}const s=r(this.type,t);s.then?e.push((async function(){i(await s)})()):i(s)};let bn=fi;class ou{constructor(e,t,r){ie(this,"type");ie(this,"inputs");hg(e,It,"Fragment"),r=Object.freeze(r.slice()),Te(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{ou.from(JSON.parse(e))}catch{}return ou.from(kc(e))}if(e instanceof Yi)switch(e.peekKeyword(QP)){case"constructor":return Do.from(e);case"error":return Ar.from(e);case"event":return Ts.from(e);case"fallback":case"receive":return ho.from(e);case"function":return ks.from(e);case"struct":return tu.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Do.from(e);case"error":return Ar.from(e);case"event":return Ts.from(e);case"fallback":case"receive":return ho.from(e);case"function":return ks.from(e);case"struct":return tu.from(e)}fe(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ee(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Do.isFragment(e)}static isError(e){return Ar.isFragment(e)}static isEvent(e){return Ts.isFragment(e)}static isFunction(e){return ks.isFragment(e)}static isStruct(e){return tu.isFragment(e)}}class nw extends ou{constructor(t,r,i,s){super(t,r,s);ie(this,"name");ee(typeof i=="string"&&i.match(JP),"invalid identifier","name",i),s=Object.freeze(s.slice()),Te(this,{name:i})}}function Lp(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class Ar extends nw{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,_r,{value:$S})}get selector(){return iu(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+Lp(e,this.inputs)),t.join(" ")}static from(e){if(Ar.isFragment(e))return e;if(typeof e=="string")return Ar.from(kc(e));if(e instanceof Yi){const t=tw("error",e),r=Uo(e);return su(e),new Ar(It,t,r)}return new Ar(It,e.name,e.inputs?e.inputs.map(bn.from):[])}static isFragment(e){return e&&e[_r]===$S}}class Ts extends nw{constructor(t,r,i,s){super(t,"event",r,i);ie(this,"anonymous");Object.defineProperty(this,_r,{value:TS}),Te(this,{anonymous:s})}get topicHash(){return iu(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("event"),r.push(this.name+Lp(t,this.inputs)),t!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(t,r){return r=(r||[]).map(s=>bn.from(s)),new Ts(It,t,r,!1).topicHash}static from(t){if(Ts.isFragment(t))return t;if(typeof t=="string")try{return Ts.from(kc(t))}catch{ee(!1,"invalid event fragment","obj",t)}else if(t instanceof Yi){const r=tw("event",t),i=Uo(t,!0),s=!!zo(t,Xn(["anonymous"])).has("anonymous");return su(t),new Ts(It,r,i,s)}return new Ts(It,t.name,t.inputs?t.inputs.map(r=>bn.from(r,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[_r]===TS}}class Do extends ou{constructor(t,r,i,s,o){super(t,r,i);ie(this,"payable");ie(this,"gas");Object.defineProperty(this,_r,{value:kS}),Te(this,{payable:s,gas:o})}format(t){if(fe(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[`constructor${Lp(t,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(t){if(Do.isFragment(t))return t;if(typeof t=="string")try{return Do.from(kc(t))}catch{ee(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Yi){zo(t,Xn(["constructor"]));const r=Uo(t),i=!!zo(t,pL).has("payable"),s=eC(t);return su(t),new Do(It,"constructor",r,i,s)}return new Do(It,"constructor",t.inputs?t.inputs.map(bn.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[_r]===kS}}class ho extends ou{constructor(t,r,i){super(t,"fallback",r);ie(this,"payable");Object.defineProperty(this,_r,{value:RS}),Te(this,{payable:i})}format(t){const r=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(t){if(ho.isFragment(t))return t;if(typeof t=="string")try{return ho.from(kc(t))}catch{ee(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Yi){const r=t.toString(),i=t.peekKeyword(Xn(["fallback","receive"]));if(ee(i,"type must be fallback or receive","obj",r),t.popKeyword(Xn(["fallback","receive"]))==="receive"){const u=Uo(t);return ee(u.length===0,"receive cannot have arguments","obj.inputs",u),zo(t,Xn(["payable"])),su(t),new ho(It,[],!0)}let o=Uo(t);o.length?ee(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(u=>u.format("minimal")).join(", ")):o=[bn.from("bytes")];const c=XP(t);if(ee(c==="nonpayable"||c==="payable","fallback cannot be constants","obj.stateMutability",c),zo(t,Xn(["returns"])).has("returns")){const u=Uo(t);ee(u.length===1&&u[0].type==="bytes","invalid fallback outputs","obj.outputs",u.map(f=>f.format("minimal")).join(", "))}return su(t),new ho(It,o,c==="payable")}if(t.type==="receive")return new ho(It,[],!0);if(t.type==="fallback"){const r=[bn.from("bytes")],i=t.stateMutability==="payable";return new ho(It,r,i)}ee(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[_r]===RS}}class ks extends nw{constructor(t,r,i,s,o,c){super(t,"function",r,s);ie(this,"constant");ie(this,"outputs");ie(this,"stateMutability");ie(this,"payable");ie(this,"gas");Object.defineProperty(this,_r,{value:US}),o=Object.freeze(o.slice()),Te(this,{constant:i==="view"||i==="pure",gas:c,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return iu(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("function"),r.push(this.name+Lp(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Lp(t,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(t,r){return r=(r||[]).map(s=>bn.from(s)),new ks(It,t,"view",r,[],null).selector}static from(t){if(ks.isFragment(t))return t;if(typeof t=="string")try{return ks.from(kc(t))}catch{ee(!1,"invalid function fragment","obj",t)}else if(t instanceof Yi){const i=tw("function",t),s=Uo(t),o=XP(t);let c=[];zo(t,Xn(["returns"])).has("returns")&&(c=Uo(t));const u=eC(t);return su(t),new ks(It,i,o,s,c,u)}let r=t.stateMutability;return r==null&&(r="payable",typeof t.constant=="boolean"?(r="view",t.constant||(r="payable",typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable")),new ks(It,t.name,r,t.inputs?t.inputs.map(bn.from):[],t.outputs?t.outputs.map(bn.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[_r]===US}}class tu extends nw{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,_r,{value:LS})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return tu.from(kc(e))}catch{ee(!1,"invalid struct fragment","obj",e)}else if(e instanceof Yi){const t=tw("struct",e),r=Uo(e);return su(e),new tu(It,t,r)}return new tu(It,e.name,e.inputs?e.inputs.map(bn.from):[])}static isFragment(e){return e&&e[_r]===LS}}const is=new Map;is.set(0,"GENERIC_PANIC");is.set(1,"ASSERT_FALSE");is.set(17,"OVERFLOW");is.set(18,"DIVIDE_BY_ZERO");is.set(33,"ENUM_RANGE_ERROR");is.set(34,"BAD_STORAGE_DATA");is.set(49,"STACK_UNDERFLOW");is.set(50,"ARRAY_RANGE_ERROR");is.set(65,"OUT_OF_MEMORY");is.set(81,"UNINITIALIZED_FUNCTION_CALL");const IL=new RegExp(/^bytes([0-9]*)$/),OL=new RegExp(/^(u?int)([0-9]*)$/);let jb=null,FS=1024;function BL(n,e,t,r){let i="missing revert data",s=null;const o=null;let c=null;if(t){i="execution reverted";const f=je(t);if(t=Ae(t),f.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(f.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Ae(f.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],f.slice(4))[0],c={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Ae(f.slice(0,4))==="0x4e487b71")try{const h=Number(r.decode(["uint256"],f.slice(4))[0]);c={signature:"Panic(uint256)",name:"Panic",args:[h]},s=`Panic due to ${is.get(h)||"UNKNOWN"}(${h})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const u={to:e.to?st(e.to):null,data:e.data||"0x"};return e.from&&(u.from=st(e.from)),Et(i,"CALL_EXCEPTION",{action:n,data:t,reason:s,transaction:u,invocation:o,revert:c})}var cc,uf;const zm=class zm{constructor(){ce(this,cc)}getDefaultValue(e){const t=e.map(i=>ge(this,cc,uf).call(this,bn.from(i)));return new Q0(t,"_").defaultValue()}encode(e,t){SB(t.length,e.length,"types/values length mismatch");const r=e.map(o=>ge(this,cc,uf).call(this,bn.from(o))),i=new Q0(r,"_"),s=new Iv;return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>ge(this,cc,uf).call(this,bn.from(o)));return new Q0(i,"_").decode(new Ov(t,r,FS))}static _setDefaultMaxInflation(e){ee(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),FS=e}static defaultAbiCoder(){return jb==null&&(jb=new zm),jb}static getBuiltinCallException(e,t,r){return BL(e,t,r,zm.defaultAbiCoder())}};cc=new WeakSet,uf=function(e){if(e.isArray())return new q7(ge(this,cc,uf).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Q0(e.components.map(r=>ge(this,cc,uf).call(this,r)),e.name);switch(e.baseType){case"address":return new H7(e.name);case"bool":return new K7(e.name);case"string":return new tU(e.name);case"bytes":return new G7(e.name);case"":return new Z7(e.name)}let t=e.type.match(OL);if(t){let r=parseInt(t[2]||"256");return ee(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new eU(r/8,t[1]==="int",e.name)}if(t=e.type.match(IL),t){let r=parseInt(t[1]);return ee(r!==0&&r<=32,"invalid bytes length","param",e),new W7(r,e.name)}ee(!1,"invalid type","type",e.type)};let Fp=zm;class PL{constructor(e,t,r){ie(this,"fragment");ie(this,"name");ie(this,"signature");ie(this,"topic");ie(this,"args");const i=e.name,s=e.format();Te(this,{fragment:e,name:i,signature:s,topic:t,args:r})}}class CL{constructor(e,t,r,i){ie(this,"fragment");ie(this,"name");ie(this,"args");ie(this,"signature");ie(this,"selector");ie(this,"value");const s=e.name,o=e.format();Te(this,{fragment:e,name:s,args:r,signature:o,selector:t,value:i})}}class _L{constructor(e,t,r){ie(this,"fragment");ie(this,"name");ie(this,"args");ie(this,"signature");ie(this,"selector");const i=e.name,s=e.format();Te(this,{fragment:e,name:i,args:r,signature:s,selector:t})}}class MS{constructor(e){ie(this,"hash");ie(this,"_isIndexed");Te(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const jS={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},zS={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&jS[n.toString()]&&(e=jS[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};var Bs,Ps,Cs,Ln,Ls,Ry,Uy;const ml=class ml{constructor(e){ce(this,Ls);ie(this,"fragments");ie(this,"deploy");ie(this,"fallback");ie(this,"receive");ce(this,Bs);ce(this,Ps);ce(this,Cs);ce(this,Ln);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,K(this,Cs,new Map),K(this,Bs,new Map),K(this,Ps,new Map);const r=[];for(const o of t)try{r.push(ou.from(o))}catch(c){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,c.message)}Te(this,{fragments:Object.freeze(r)});let i=null,s=!1;K(this,Ln,this.getAbiCoder()),this.fragments.forEach((o,c)=>{let u;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Te(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(ee(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${c}]`,o),i=o,s=i.payable);return;case"function":u=k(this,Cs);break;case"event":u=k(this,Ps);break;case"error":u=k(this,Bs);break;default:return}const f=o.format();u.has(f)||u.set(f,o)}),this.deploy||Te(this,{deploy:Do.from("constructor()")}),Te(this,{fallback:i,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return Fp.defaultAbiCoder()}getFunctionName(e){const t=ge(this,Ls,Ry).call(this,e,null,!1);return ee(t,"no matching function","key",e),t.name}hasFunction(e){return!!ge(this,Ls,Ry).call(this,e,null,!1)}getFunction(e,t){return ge(this,Ls,Ry).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(k(this,Cs).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(k(this,Cs).get(i),r)}}getEventName(e){const t=ge(this,Ls,Uy).call(this,e,null,!1);return ee(t,"no matching event","key",e),t.name}hasEvent(e){return!!ge(this,Ls,Uy).call(this,e,null,!1)}getEvent(e,t){return ge(this,Ls,Uy).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(k(this,Ps).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(k(this,Ps).get(i),r)}}getError(e,t){if(yt(e)){const i=e.toLowerCase();if(zS[i])return Ar.from(zS[i].signature);for(const s of k(this,Bs).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of k(this,Bs))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?Ar.from("error Error(string)"):e==="Panic"?Ar.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");ee(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=Ar.from(e).format(),e==="Error(string)")return Ar.from("error Error(string)");if(e==="Panic(uint256)")return Ar.from("error Panic(uint256)");const r=k(this,Bs).get(e);return r||null}forEachError(e){const t=Array.from(k(this,Bs).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(k(this,Bs).get(i),r)}}_decodeParams(e,t){return k(this,Ln).decode(e,t)}_encodeParams(e,t){return k(this,Ln).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);ee(r,"unknown error","fragment",e),e=r}return ee(Pt(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Pt(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);ee(r,"unknown error","fragment",e),e=r}return Ct([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);ee(r,"unknown function","fragment",e),e=r}return ee(Pt(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Pt(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);ee(r,"unknown function","fragment",e),e=r}return Ct([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);ee(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=Zn(t);if(i.length%32===0)try{return k(this,Ln).decode(e.outputs,i)}catch{r="could not decode result data"}fe(!1,r,"BAD_DATA",{value:Ae(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=je(e,"data"),i=Fp.getBuiltinCallException("call",t,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const c=Ae(r.slice(0,4)),u=this.getError(c);if(u)try{const f=k(this,Ln).decode(u.inputs,r.slice(4));i.revert={name:u.name,signature:u.format(),args:f},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);ee(r,"unknown function","fragment",e),e=r}return Ae(k(this,Ln).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const s=this.getEvent(e);ee(s,"unknown event","eventFragment",e),e=s}fe(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?iu(o):s.type==="bytes"?Ft(Ae(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=Ic(o):s.type.match(/^bytes/)?o=Dk(o,32):s.type==="address"&&k(this,Ln).encode(["address"],[o]),jo(Ae(o),32));for(t.forEach((s,o)=>{const c=e.inputs[o];if(!c.indexed){ee(s==null,"cannot filter non-indexed parameters; must be null","contract."+c.name,s);return}s==null?r.push(null):c.baseType==="array"||c.baseType==="tuple"?ee(!1,"filtering with tuples or arrays not supported","contract."+c.name,s):Array.isArray(s)?r.push(s.map(u=>i(c,u))):r.push(i(c,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);ee(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),ee(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,c)=>{const u=t[c];if(o.indexed)if(o.type==="string")r.push(iu(u));else if(o.type==="bytes")r.push(Ft(u));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(k(this,Ln).encode([o.type],[u]))}else i.push(o),s.push(u)}),{data:k(this,Ln).encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){const m=this.getEvent(e);ee(m,"unknown event","eventFragment",e),e=m}if(r!=null&&!e.anonymous){const m=e.topicHash;ee(yt(r[0],32)&&r[0].toLowerCase()===m,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((m,v)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(i.push(bn.from({type:"bytes32",name:m.name})),o.push(!0)):(i.push(m),o.push(!1)):(s.push(m),o.push(!1))});const c=r!=null?k(this,Ln).decode(i,Ct(r)):null,u=k(this,Ln).decode(s,t,!0),f=[],h=[];let g=0,p=0;return e.inputs.forEach((m,v)=>{let b=null;if(m.indexed)if(c==null)b=new MS(null);else if(o[v])b=new MS(c[p++]);else try{b=c[p++]}catch(A){b=A}else try{b=u[g++]}catch(A){b=A}f.push(b),h.push(m.name||null)}),Sh.fromItems(f,h)}parseTransaction(e){const t=je(e.data,"tx.data"),r=Be(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(Ae(t.slice(0,4)));if(!i)return null;const s=k(this,Ln).decode(i.inputs,t.slice(4));return new CL(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new PL(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Ae(e),r=this.getError(Pt(t,0,4));if(!r)return null;const i=k(this,Ln).decode(r.inputs,Pt(t,4));return new _L(r,r.selector,i)}static from(e){return e instanceof ml?e:typeof e=="string"?new ml(JSON.parse(e)):typeof e.formatJson=="function"?new ml(e.formatJson()):typeof e.format=="function"?new ml(e.format("json")):new ml(e)}};Bs=new WeakMap,Ps=new WeakMap,Cs=new WeakMap,Ln=new WeakMap,Ls=new WeakSet,Ry=function(e,t,r){if(yt(e)){const s=e.toLowerCase();for(const o of k(this,Cs).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,c]of k(this,Cs))o.split("(")[0]===e&&s.push(c);if(t){const o=t.length>0?t[t.length-1]:null;let c=t.length,u=!0;Vn.isTyped(o)&&o.type==="overrides"&&(u=!1,c--);for(let f=s.length-1;f>=0;f--){const h=s[f].inputs.length;h!==c&&(!u||h!==c-1)&&s.splice(f,1)}for(let f=s.length-1;f>=0;f--){const h=s[f].inputs;for(let g=0;g<t.length;g++)if(Vn.isTyped(t[g])){if(g>=h.length){if(t[g].type==="overrides")continue;s.splice(f,1);break}if(t[g].type!==h[g].baseType){s.splice(f,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(c=>JSON.stringify(c.format())).join(", ");ee(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=k(this,Cs).get(ks.from(e).format());return i||null},Uy=function(e,t,r){if(yt(e)){const s=e.toLowerCase();for(const o of k(this,Ps).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,c]of k(this,Ps))o.split("(")[0]===e&&s.push(c);if(t){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<t.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const c=s[o].inputs;for(let u=0;u<t.length;u++)if(Vn.isTyped(t[u])&&t[u].type!==c[u].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(c=>JSON.stringify(c.format())).join(", ");ee(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=k(this,Ps).get(Ts.from(e).format());return i||null};let Mv=ml;const tC=BigInt(0);function Bf(n){return n??null}function $t(n){return n==null?null:n.toString()}class HS{constructor(e,t,r){ie(this,"gasPrice");ie(this,"maxFeePerGas");ie(this,"maxPriorityFeePerGas");Te(this,{gasPrice:Bf(e),maxFeePerGas:Bf(t),maxPriorityFeePerGas:Bf(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:$t(e),maxFeePerGas:$t(t),maxPriorityFeePerGas:$t(r)}}}function am(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=Ae(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in n)||n[i]==null||(e[i]=Be(n[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in n)||n[i]==null||(e[i]=Me(n[i],`request.${i}`));return n.accessList&&(e.accessList=hu(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(i=>m3(i)?Ae(i):Object.assign({},i))),e}var Ao;class NL{constructor(e,t){ie(this,"provider");ie(this,"number");ie(this,"hash");ie(this,"timestamp");ie(this,"parentHash");ie(this,"parentBeaconBlockRoot");ie(this,"nonce");ie(this,"difficulty");ie(this,"gasLimit");ie(this,"gasUsed");ie(this,"stateRoot");ie(this,"receiptsRoot");ie(this,"blobGasUsed");ie(this,"excessBlobGas");ie(this,"miner");ie(this,"prevRandao");ie(this,"extraData");ie(this,"baseFeePerGas");ce(this,Ao);K(this,Ao,e.transactions.map(r=>typeof r!="string"?new Mp(r,t):r)),Te(this,{provider:t,hash:Bf(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Bf(e.prevRandao),extraData:e.extraData,baseFeePerGas:Bf(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return k(this,Ao).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=k(this,Ao).slice();return e.length===0?[]:(fe(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:c,prevRandao:u,nonce:f,number:h,parentHash:g,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:v,timestamp:b,transactions:A}=this;return{_type:"Block",baseFeePerGas:$t(e),difficulty:$t(t),extraData:r,gasLimit:$t(i),gasUsed:$t(s),blobGasUsed:$t(this.blobGasUsed),excessBlobGas:$t(this.excessBlobGas),hash:o,miner:c,prevRandao:u,nonce:f,number:h,parentHash:g,timestamp:b,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:v,transactions:A}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return k(this,Ao).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=k(this,Ao)[e];else{const r=e.toLowerCase();for(const i of k(this,Ao))if(typeof i=="string"){if(i!==r)continue;t=i;break}else{if(i.hash!==r)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;ee(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return DL(this)}}Ao=new WeakMap;class gg{constructor(e,t){ie(this,"provider");ie(this,"transactionHash");ie(this,"blockHash");ie(this,"blockNumber");ie(this,"removed");ie(this,"address");ie(this,"data");ie(this,"topics");ie(this,"index");ie(this,"transactionIndex");this.provider=t;const r=Object.freeze(e.topics.slice());Te(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:i,index:s,removed:o,topics:c,transactionHash:u,transactionIndex:f}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:i,index:s,removed:o,topics:c,transactionHash:u,transactionIndex:f}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return fe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return fe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return fe(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return $L(this)}}var ig;class nC{constructor(e,t){ie(this,"provider");ie(this,"to");ie(this,"from");ie(this,"contractAddress");ie(this,"hash");ie(this,"index");ie(this,"blockHash");ie(this,"blockNumber");ie(this,"logsBloom");ie(this,"gasUsed");ie(this,"blobGasUsed");ie(this,"cumulativeGasUsed");ie(this,"gasPrice");ie(this,"blobGasPrice");ie(this,"type");ie(this,"status");ie(this,"root");ce(this,ig);K(this,ig,Object.freeze(e.logs.map(i=>new gg(i,t))));let r=tC;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Te(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return k(this,ig)}toJSON(){const{to:e,from:t,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:c,logsBloom:u,logs:f,status:h,root:g}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:c,contractAddress:r,cumulativeGasUsed:$t(this.cumulativeGasUsed),from:t,gasPrice:$t(this.gasPrice),blobGasUsed:$t(this.blobGasUsed),blobGasPrice:$t(this.blobGasPrice),gasUsed:$t(this.gasUsed),hash:i,index:s,logs:f,logsBloom:u,root:g,status:h,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return iC(this)}reorderedEvent(e){return fe(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),rC(this,e)}}ig=new WeakMap;var lc;const qx=class qx{constructor(e,t){ie(this,"provider");ie(this,"blockNumber");ie(this,"blockHash");ie(this,"index");ie(this,"hash");ie(this,"type");ie(this,"to");ie(this,"from");ie(this,"nonce");ie(this,"gasLimit");ie(this,"gasPrice");ie(this,"maxPriorityFeePerGas");ie(this,"maxFeePerGas");ie(this,"maxFeePerBlobGas");ie(this,"data");ie(this,"value");ie(this,"chainId");ie(this,"signature");ie(this,"accessList");ie(this,"blobVersionedHashes");ie(this,"authorizationList");ce(this,lc);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,K(this,lc,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:i,type:s,to:o,from:c,nonce:u,data:f,signature:h,accessList:g,blobVersionedHashes:p}=this;return{_type:"TransactionResponse",accessList:g,blockNumber:e,blockHash:t,blobVersionedHashes:p,chainId:$t(this.chainId),data:f,from:c,gasLimit:$t(this.gasLimit),gasPrice:$t(this.gasPrice),hash:i,maxFeePerGas:$t(this.maxFeePerGas),maxPriorityFeePerGas:$t(this.maxPriorityFeePerGas),maxFeePerBlobGas:$t(this.maxFeePerBlobGas),nonce:u,signature:h,to:o,index:r,type:s,value:$t(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:r}=await Qn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=e??1,i=t??0;let s=k(this,lc),o=-1,c=s===-1;const u=async()=>{if(c)return null;const{blockNumber:p,nonce:m}=await Qn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(m<this.nonce){s=p;return}if(c)return null;const v=await this.getTransaction();if(!(v&&v.blockNumber!=null))for(o===-1&&(o=s-3,o<k(this,lc)&&(o=k(this,lc)));o<=p;){if(c)return null;const b=await this.provider.getBlock(o,!0);if(b==null)return;for(const A of b)if(A===this.hash)return;for(let A=0;A<b.length;A++){const _=await b.getTransaction(A);if(_.from===this.from&&_.nonce===this.nonce){if(c)return null;const U=await this.provider.getTransactionReceipt(_.hash);if(U==null||p-U.blockNumber+1<r)return;let O="replaced";_.data===this.data&&_.to===this.to&&_.value===this.value?O="repriced":_.data==="0x"&&_.from===_.to&&_.value===tC&&(O="cancelled"),fe(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:O==="replaced"||O==="cancelled",reason:O,replacement:_.replaceableTransaction(s),hash:_.hash,receipt:U})}}o++}},f=p=>{if(p==null||p.status!==0)return p;fe(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:p.to,from:p.from,data:""},receipt:p})},h=await this.provider.getTransactionReceipt(this.hash);if(r===0)return f(h);if(h){if(r===1||await h.confirmations()>=r)return f(h)}else if(await u(),r===0)return null;return await new Promise((p,m)=>{const v=[],b=()=>{v.forEach(_=>_())};if(v.push(()=>{c=!0}),i>0){const _=setTimeout(()=>{b(),m(Et("wait for transaction timeout","TIMEOUT"))},i);v.push(()=>{clearTimeout(_)})}const A=async _=>{if(await _.confirmations()>=r){b();try{p(f(_))}catch(U){m(U)}}};if(v.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),s>=0){const _=async()=>{try{await u()}catch(U){if(wn(U,"TRANSACTION_REPLACED")){b(),m(U);return}}c||this.provider.once("block",_)};v.push(()=>{this.provider.off("block",_)}),this.provider.once("block",_)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return fe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),iC(this)}reorderedEvent(e){return fe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),fe(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),rC(this,e)}replaceableTransaction(e){ee(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new qx(this,this.provider);return K(t,lc,e),t}};lc=new WeakMap;let Mp=qx;function DL(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function rC(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function iC(n){return{orphan:"drop-transaction",tx:n}}function $L(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class C3 extends gg{constructor(t,r,i){super(t,t.provider);ie(this,"interface");ie(this,"fragment");ie(this,"args");const s=r.decodeEventLog(i,t.data,t.topics);Te(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class sC extends gg{constructor(t,r){super(t,t.provider);ie(this,"error");Te(this,{error:r})}}var lh;class TL extends nC{constructor(t,r,i){super(i,r);ce(this,lh);K(this,lh,t)}get logs(){return super.logs.map(t=>{const r=t.topics.length?k(this,lh).getEvent(t.topics[0]):null;if(r)try{return new C3(t,k(this,lh),r)}catch(i){return new sC(t,i)}return t})}}lh=new WeakMap;var sg;class _3 extends Mp{constructor(t,r,i){super(i,r);ce(this,sg);K(this,sg,t)}async wait(t,r){const i=await super.wait(t,r);return i==null?null:new TL(k(this,sg),this.provider,i)}}sg=new WeakMap;class oC extends PB{constructor(t,r,i,s){super(t,r,i);ie(this,"log");Te(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class kL extends oC{constructor(e,t,r,i,s){super(e,t,r,new C3(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Te(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const VS=BigInt(0);function aC(n){return n&&typeof n.call=="function"}function cC(n){return n&&typeof n.estimateGas=="function"}function rw(n){return n&&typeof n.resolveName=="function"}function lC(n){return n&&typeof n.sendTransaction=="function"}function uC(n){if(n!=null){if(rw(n))return n;if(n.provider)return n.provider}}var og;class RL{constructor(e,t,r){ce(this,og);ie(this,"fragment");if(Te(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const i=au(e.runner,"resolveName"),s=rw(i)?i:null;K(this,og,(async function(){const o=await Promise.all(t.inputs.map((c,u)=>r[u]==null?null:c.walkAsync(r[u],(h,g)=>h==="address"?Array.isArray(g)?Promise.all(g.map(p=>Yn(p,s))):Yn(g,s):g)));return e.interface.encodeFilterTopics(t,o)})())}getTopicFilter(){return k(this,og)}}og=new WeakMap;function au(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function xl(n){return n==null?null:n.provider||null}async function fC(n,e){const t=Vn.dereference(n,"overrides");ee(typeof t=="object","invalid overrides parameter","overrides",n);const r=am(t);return ee(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),ee(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function UL(n,e,t){const r=au(n,"resolveName"),i=rw(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(t[o],(c,u)=>(u=Vn.dereference(u,c),c==="address"?Yn(u,i):u))))}function LL(n){const e=async function(o){const c=await fC(o,["data"]);c.to=await n.getAddress(),c.from&&(c.from=await Yn(c.from,uC(n.runner)));const u=n.interface,f=Be(c.value||VS,"overrides.value")===VS,h=(c.data||"0x")==="0x";u.fallback&&!u.fallback.payable&&u.receive&&!h&&!f&&ee(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),ee(u.fallback||h,"cannot send data to receive-only contract","overrides.data",c.data);const g=u.receive||u.fallback&&u.fallback.payable;return ee(g||f,"cannot send value to non-payable fallback","overrides.value",c.value),ee(u.fallback||h,"cannot send data to receive-only contract","overrides.data",c.data),c},t=async function(o){const c=au(n.runner,"call");fe(aC(c),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const u=await e(o);try{return await c.call(u)}catch(f){throw y3(f)&&f.data?n.interface.makeError(f.data,u):f}},r=async function(o){const c=n.runner;fe(lC(c),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const u=await c.sendTransaction(await e(o)),f=xl(n.runner);return new _3(n.interface,f,u)},i=async function(o){const c=au(n.runner,"estimateGas");return fe(cC(c),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await c.estimateGas(await e(o))},s=async o=>await r(o);return Te(s,{_contract:n,estimateGas:i,populateTransaction:e,send:r,staticCall:t}),s}function FL(n,e){const t=function(...f){const h=n.interface.getFunction(e,f);return fe(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:f}}),h},r=async function(...f){const h=t(...f);let g={};if(h.inputs.length+1===f.length&&(g=await fC(f.pop()),g.from&&(g.from=await Yn(g.from,uC(n.runner)))),h.inputs.length!==f.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await UL(n.runner,h.inputs,f);return Object.assign({},g,await Qn({to:n.getAddress(),data:n.interface.encodeFunctionData(h,p)}))},i=async function(...f){const h=await c(...f);return h.length===1?h[0]:h},s=async function(...f){const h=n.runner;fe(lC(h),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const g=await h.sendTransaction(await r(...f)),p=xl(n.runner);return new _3(n.interface,p,g)},o=async function(...f){const h=au(n.runner,"estimateGas");return fe(cC(h),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await h.estimateGas(await r(...f))},c=async function(...f){const h=au(n.runner,"call");fe(aC(h),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const g=await r(...f);let p="0x";try{p=await h.call(g)}catch(v){throw y3(v)&&v.data?n.interface.makeError(v.data,g):v}const m=t(...f);return n.interface.decodeFunctionResult(m,p)},u=async(...f)=>t(...f).constant?await i(...f):await s(...f);return Te(u,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:c}),Object.defineProperty(u,"fragment",{configurable:!1,enumerable:!0,get:()=>{const f=n.interface.getFunction(e);return fe(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),f}}),u}function ML(n,e){const t=function(...i){const s=n.interface.getEvent(e,i);return fe(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new RL(n,t(...i),i)};return Te(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=n.interface.getEvent(e);return fe(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const cm=Symbol.for("_ethersInternal_contract"),hC=new WeakMap;function jL(n,e){hC.set(n[cm],e)}function Mr(n){return hC.get(n[cm])}function zL(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function N3(n,e){let t,r=null;if(Array.isArray(e)){const s=function(o){if(yt(o,32))return o;const c=n.interface.getEvent(o);return ee(c,"unknown fragment","name",o),c.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?t=[null]:typeof e=="string"?yt(e,32)?t=[e]:(r=n.interface.getEvent(e),ee(r,"unknown fragment","event",e),t=[r.topicHash]):zL(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):ee(!1,"unknown event name","event",e);t=t.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(c=>c.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=t.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:t}}async function up(n,e){const{subs:t}=Mr(n);return t.get((await N3(n,e)).tag)||null}async function qS(n,e,t){const r=xl(n.runner);fe(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await N3(n,t),{addr:c,subs:u}=Mr(n);let f=u.get(s);if(!f){const g={address:c||n,topics:o},p=A=>{let _=i;if(_==null)try{_=n.interface.getEvent(A.topics[0])}catch{}if(_){const U=_,O=i?n.interface.decodeEventLog(i,A.data,A.topics):[];zv(n,t,O,T=>new kL(n,T,t,U,A))}else zv(n,t,[],U=>new oC(n,U,t,A))};let m=[];f={tag:s,listeners:[],start:()=>{m.length||m.push(r.on(g,p))},stop:async()=>{if(m.length==0)return;let A=m;m=[],await Promise.all(A),r.off(g,p)}},u.set(s,f)}return f}let jv=Promise.resolve();async function HL(n,e,t,r){await jv;const i=await up(n,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:c})=>{const u=Array.from(t);r&&u.push(r(c?null:o));try{o.call(n,...u)}catch{}return!c}),i.listeners.length===0&&(i.stop(),Mr(n).subs.delete(i.tag)),s>0}async function zv(n,e,t,r){try{await jv}catch{}const i=HL(n,e,t,r);return jv=i,await i}const J0=["then"];var AB;AB=cm;const _p=class _p{constructor(e,t,r,i){ie(this,"target");ie(this,"interface");ie(this,"runner");ie(this,"filters");ie(this,AB);ie(this,"fallback");ee(typeof e=="string"||mP(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=Mv.from(t);Te(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,cm,{value:{}});let o,c=null,u=null;if(i){const g=xl(r);u=new _3(this.interface,g,i)}let f=new Map;if(typeof e=="string")if(yt(e))c=e,o=Promise.resolve(e);else{const g=au(r,"resolveName");if(!rw(g))throw Et("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=g.resolveName(e).then(p=>{if(p==null)throw Et("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Mr(this).addr=p,p})}else o=e.getAddress().then(g=>{if(g==null)throw new Error("TODO");return Mr(this).addr=g,g});jL(this,{addrPromise:o,addr:c,deployTx:u,subs:f});const h=new Proxy({},{get:(g,p,m)=>{if(typeof p=="symbol"||J0.indexOf(p)>=0)return Reflect.get(g,p,m);try{return this.getEvent(p)}catch(v){if(!wn(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(g,p)=>J0.indexOf(p)>=0?Reflect.has(g,p):Reflect.has(g,p)||this.interface.hasEvent(String(p))});return Te(this,{filters:h}),Te(this,{fallback:s.receive||s.fallback?LL(this):null}),new Proxy(this,{get:(g,p,m)=>{if(typeof p=="symbol"||p in g||J0.indexOf(p)>=0)return Reflect.get(g,p,m);try{return g.getFunction(p)}catch(v){if(!wn(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(g,p)=>typeof p=="symbol"||p in g||J0.indexOf(p)>=0?Reflect.has(g,p):g.interface.hasFunction(p)})}connect(e){return new _p(this.target,this.interface,e)}attach(e){return new _p(e,this.interface,this.runner)}async getAddress(){return await Mr(this).addrPromise}async getDeployedCode(){const e=xl(this.runner);fe(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=xl(this.runner);return fe(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(c){s(c)}};o()})}deploymentTransaction(){return Mr(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),FL(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),ML(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Mr(this),o=i||await s,{fragment:c,topics:u}=await N3(this,e),f={address:o,topics:u,fromBlock:t,toBlock:r},h=xl(this.runner);return fe(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(f)).map(g=>{let p=c;if(p==null)try{p=this.interface.getEvent(g.topics[0])}catch{}if(p)try{return new C3(g,this.interface,p)}catch(m){return new sC(g,m)}return new gg(g,h)})}async on(e,t){const r=await qS(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await qS(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await zv(this,e,t,null)}async listenerCount(e){if(e){const i=await up(this,e);return i?i.listeners.length:0}const{subs:t}=Mr(this);let r=0;for(const{listeners:i}of t.values())r+=i.length;return r}async listeners(e){if(e){const i=await up(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:t}=Mr(this);let r=[];for(const{listeners:i}of t.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,t){const r=await up(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(t==null||r.listeners.length===0)&&(r.stop(),Mr(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await up(this,e);if(!t)return this;t.stop(),Mr(this).subs.delete(t.tag)}else{const{subs:t}=Mr(this);for(const{tag:r,stop:i}of t.values())i(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends _p{constructor(i,s=null){super(i,e,s)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}};let Hv=_p;function VL(){return Hv}class Pf extends VL(){}function zb(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):ee(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class qL{constructor(e){ie(this,"name");Te(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const dC=new RegExp("^(ipfs)://(.*)$","i"),KS=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),dC,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var uc,Kl,fc,ff,Hm,pC;const xf=class xf{constructor(e,t,r){ce(this,fc);ie(this,"provider");ie(this,"address");ie(this,"name");ce(this,uc);ce(this,Kl);Te(this,{provider:e,address:t,name:r}),K(this,uc,null),K(this,Kl,new Pf(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return k(this,uc)==null&&K(this,uc,(async()=>{try{return await k(this,Kl).supportsInterface("0x9061b923")}catch(e){if(wn(e,"CALL_EXCEPTION"))return!1;throw K(this,uc,null),e}})()),await k(this,uc)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await ge(this,fc,ff).call(this,"addr(bytes32)");return s==null||s===Dp?null:s}catch(s){if(wn(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await ge(this,fc,ff).call(this,"addr(bytes32,uint)",[s]);if(yt(o,20))return st(o)}let t=null;for(const s of this.provider.plugins)if(s instanceof qL&&s.supportsCoinType(e)){t=s;break}if(t==null)return null;const r=await ge(this,fc,ff).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await t.decodeAddress(e,r);if(i!=null)return i;fe(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await ge(this,fc,ff).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await ge(this,fc,ff).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===s*2)return`${i}://${Tk("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;fe(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<KS.length;r++){const i=t.match(KS[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=zb(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:t});const c=await this.getAddress();if(c==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const u=(i[2]||"").split("/");if(u.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const f=u[1],h=new Pf(u[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const b=await h.ownerOf(f);if(c!==b)return e.push({type:"!owner",value:b}),{url:null,linkage:e};e.push({type:"owner",value:b})}else if(s==="erc1155"){const b=await h.balanceOf(c,f);if(!b)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:b.toString()})}let g=await h[o](f);if(g==null||g==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:g}),s==="erc1155"&&(g=g.replace("{id}",Ic(f,32).substring(2)),e.push({type:"metadata-url-expanded",value:g})),g.match(/^ipfs:/i)&&(g=zb(g)),e.push({type:"metadata-url",value:g});let p={};const m=await new Oc(g).send();m.assertOk();try{p=m.bodyJson}catch{try{e.push({type:"!metadata",value:m.bodyText})}catch{const _=m.body;return _&&e.push({type:"!metadata",value:Ae(_)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!p)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(p)});let v=p.image;if(typeof v!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!v.match(/^(https:\/\/|data:)/i)){if(v.match(dC)==null)return e.push({type:"!imageUrl-ipfs",value:v}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:v}),v=zb(v)}return e.push({type:"url",value:v}),{linkage:e,url:v}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return fe(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async fromName(e,t){var i;let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const s=await ge(i=xf,Hm,pC).call(i,e,r);if(s!=null){const o=new xf(e,s,t);return r!==t&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};uc=new WeakMap,Kl=new WeakMap,fc=new WeakSet,ff=async function(e,t){t=(t||[]).slice();const r=k(this,Kl).interface;t.unshift(Lv(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),fe(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[oL(this.name,255),r.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await k(this,Kl)[e](...t);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!wn(s,"CALL_EXCEPTION"))throw s}return null},Hm=new WeakSet,pC=async function(e,t){const r=await xf.getEnsAddress(e);try{const s=await new Pf(r,["function resolver(bytes32) view returns (address)"],e).resolver(Lv(t),{enableCcipRead:!0});return s===Dp?null:s}catch(i){throw i}return null},ce(xf,Hm);let lm=xf;const GS=BigInt(0);function Ge(n,e){return(function(t){return t==null?e:n(t)})}function jp(n,e){return(t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))})}function yg(n,e){return(t=>{const r={};for(const i in n){let s=i;if(e&&i in e&&!(s in t)){for(const o of e[i])if(o in t){s=o;break}}try{const o=n[i](t[s]);o!==void 0&&(r[i]=o)}catch(o){const c=o instanceof Error?o.message:"not-an-error";fe(!1,`invalid value for value.${i} (${c})`,"BAD_DATA",{value:t})}}return r})}function KL(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}ee(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function _h(n){return ee(yt(n,!0),"invalid data","value",n),n}function mn(n){return ee(yt(n,32),"invalid hash","value",n),n}const GL=yg({address:st,blockHash:mn,blockNumber:Me,data:_h,index:Me,removed:Ge(KL,!1),topics:jp(mn),transactionHash:mn,transactionIndex:Me},{index:["logIndex"]});function WL(n){return GL(n)}const QL=yg({hash:Ge(mn),parentHash:mn,parentBeaconBlockRoot:Ge(mn,null),number:Me,timestamp:Me,nonce:Ge(_h),difficulty:Be,gasLimit:Be,gasUsed:Be,stateRoot:Ge(mn,null),receiptsRoot:Ge(mn,null),blobGasUsed:Ge(Be,null),excessBlobGas:Ge(Be,null),miner:Ge(st),prevRandao:Ge(mn,null),extraData:_h,baseFeePerGas:Ge(Be)},{prevRandao:["mixHash"]});function ZL(n){const e=QL(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:gC(t)),e}const JL=yg({transactionIndex:Me,blockNumber:Me,transactionHash:mn,address:st,topics:jp(mn),data:_h,index:Me,blockHash:mn},{index:["logIndex"]});function YL(n){return JL(n)}const XL=yg({to:Ge(st,null),from:Ge(st,null),contractAddress:Ge(st,null),index:Me,root:Ge(Ae),gasUsed:Be,blobGasUsed:Ge(Be,null),logsBloom:Ge(_h),blockHash:mn,hash:mn,logs:jp(YL),blockNumber:Me,cumulativeGasUsed:Be,effectiveGasPrice:Ge(Be),blobGasPrice:Ge(Be,null),status:Ge(Me),type:Ge(Me,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function eF(n){return XL(n)}function gC(n){n.to&&Be(n.to)===GS&&(n.to="0x0000000000000000000000000000000000000000");const e=yg({hash:mn,index:Ge(Me,void 0),type:t=>t==="0x"||t==null?0:Me(t),accessList:Ge(hu,null),blobVersionedHashes:Ge(jp(mn,!0),null),authorizationList:Ge(jp(t=>{let r;if(t.signature)r=t.signature;else{let i=t.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},t,{yParity:i})}return{address:st(t.address),chainId:Be(t.chainId),nonce:Be(t.nonce),signature:Pr.from(r)}},!1),null),blockHash:Ge(mn,null),blockNumber:Ge(Me,null),transactionIndex:Ge(Me,null),from:st,gasPrice:Ge(Be),maxPriorityFeePerGas:Ge(Be),maxFeePerGas:Ge(Be),maxFeePerBlobGas:Ge(Be,null),gasLimit:Be,to:Ge(st,null),value:Be,nonce:Me,data:_h,creates:Ge(st,null),chainId:Ge(Be,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=z7(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=Pr.from(n.signature):e.signature=Pr.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Be(e.blockHash)===GS&&(e.blockHash=null),e}const tF="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class mg{constructor(e){ie(this,"name");Te(this,{name:e})}clone(){return new mg(this.name)}}class iw extends mg{constructor(t,r){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);ie(this,"effectiveBlock");ie(this,"txBase");ie(this,"txCreate");ie(this,"txDataZero");ie(this,"txDataNonzero");ie(this,"txAccessListStorageKey");ie(this,"txAccessListAddress");const i={effectiveBlock:t};function s(o,c){let u=(r||{})[o];u==null&&(u=c),ee(typeof u=="number",`invalud value for ${o}`,"costs",r),i[o]=u}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),Te(this,i)}clone(){return new iw(this.effectiveBlock,this)}}class sw extends mg{constructor(t,r){super("org.ethers.plugins.network.Ens");ie(this,"address");ie(this,"targetNetwork");Te(this,{address:t||tF,targetNetwork:r??1})}clone(){return new sw(this.address,this.targetNetwork)}}var ag,cg;class nF extends mg{constructor(t,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");ce(this,ag);ce(this,cg);K(this,ag,t),K(this,cg,r)}get url(){return k(this,ag)}get processFunc(){return k(this,cg)}clone(){return this}}ag=new WeakMap,cg=new WeakMap;const Hb=new Map;var uh,fh,hc;const Af=class Af{constructor(e,t){ce(this,uh);ce(this,fh);ce(this,hc);K(this,uh,e),K(this,fh,Be(t)),K(this,hc,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return k(this,uh)}set name(e){K(this,uh,e)}get chainId(){return k(this,fh)}set chainId(e){K(this,fh,Be(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Be(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Be(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Be(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(k(this,hc).values())}attachPlugin(e){if(k(this,hc).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return k(this,hc).set(e.name,e.clone()),this}getPlugin(e){return k(this,hc).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Af(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new iw;let r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const i=hu(e.accessList);for(const s in i)r+=t.txAccessListAddress+t.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(rF(),e==null)return Af.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Hb.get(e);if(t)return t();if(typeof e=="bigint")return new Af("unknown",e);ee(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){ee(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new Af(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new sw(e.ensAddress,e.ensNetwork)),t}ee(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const r=Hb.get(e);r&&ee(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Hb.set(e,t)}};uh=new WeakMap,fh=new WeakMap,hc=new WeakMap;let Rs=Af;function WS(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function QS(n){return new nF(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const c=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:WS(c.maxFee,9),maxPriorityFeePerGas:WS(c.maxPriorityFee,9)}}catch(s){fe(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let ZS=!1;function rF(){if(ZS)return;ZS=!0;function n(e,t,r){const i=function(){const s=new Rs(e,t);return r.ensNetwork!=null&&s.attachPlugin(new sw(null,r.ensNetwork)),s.attachPlugin(new iw),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Rs.register(e,i),Rs.register(t,i),r.altNames&&r.altNames.forEach(s=>{Rs.register(s,i)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[QS("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[QS("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function Vv(n){return JSON.parse(JSON.stringify(n))}var So,di,dc,_s,hh,Ly;class iF{constructor(e){ce(this,hh);ce(this,So);ce(this,di);ce(this,dc);ce(this,_s);K(this,So,e),K(this,di,null),K(this,dc,4e3),K(this,_s,-2)}get pollingInterval(){return k(this,dc)}set pollingInterval(e){K(this,dc,e)}start(){k(this,di)||(K(this,di,k(this,So)._setTimeout(ge(this,hh,Ly).bind(this),k(this,dc))),ge(this,hh,Ly).call(this))}stop(){k(this,di)&&(k(this,So)._clearTimeout(k(this,di)),K(this,di,null))}pause(e){this.stop(),e&&K(this,_s,-2)}resume(){this.start()}}So=new WeakMap,di=new WeakMap,dc=new WeakMap,_s=new WeakMap,hh=new WeakSet,Ly=async function(){try{const e=await k(this,So).getBlockNumber();if(k(this,_s)===-2){K(this,_s,e);return}if(e!==k(this,_s)){for(let t=k(this,_s)+1;t<=e;t++){if(k(this,di)==null)return;await k(this,So).emit("block",t)}K(this,_s,e)}}catch{}k(this,di)!=null&&K(this,di,k(this,So)._setTimeout(ge(this,hh,Ly).bind(this),k(this,dc)))};var Gl,Wl,pc;class D3{constructor(e){ce(this,Gl);ce(this,Wl);ce(this,pc);K(this,Gl,e),K(this,pc,!1),K(this,Wl,t=>{this._poll(t,k(this,Gl))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){k(this,pc)||(K(this,pc,!0),k(this,Wl).call(this,-2),k(this,Gl).on("block",k(this,Wl)))}stop(){k(this,pc)&&(K(this,pc,!1),k(this,Gl).off("block",k(this,Wl)))}pause(e){this.stop()}resume(){this.start()}}Gl=new WeakMap,Wl=new WeakMap,pc=new WeakMap;var dh,Io;class sF extends D3{constructor(t,r){super(t);ce(this,dh);ce(this,Io);K(this,dh,r),K(this,Io,-2)}pause(t){t&&K(this,Io,-2),super.pause(t)}async _poll(t,r){const i=await r.getBlock(k(this,dh));i!=null&&(k(this,Io)===-2?K(this,Io,i.number):i.number>k(this,Io)&&(r.emit(k(this,dh),i.number),K(this,Io,i.number)))}}dh=new WeakMap,Io=new WeakMap;var Vm;class oF extends D3{constructor(t,r){super(t);ce(this,Vm);K(this,Vm,Vv(r))}async _poll(t,r){throw new Error("@TODO")}}Vm=new WeakMap;var ph;class aF extends D3{constructor(t,r){super(t);ce(this,ph);K(this,ph,r)}async _poll(t,r){const i=await r.getTransactionReceipt(k(this,ph));i&&r.emit(k(this,ph),i)}}ph=new WeakMap;var Oo,gh,yh,gc,pi,qm,yC;class $3{constructor(e,t){ce(this,qm);ce(this,Oo);ce(this,gh);ce(this,yh);ce(this,gc);ce(this,pi);K(this,Oo,e),K(this,gh,Vv(t)),K(this,yh,ge(this,qm,yC).bind(this)),K(this,gc,!1),K(this,pi,-2)}start(){k(this,gc)||(K(this,gc,!0),k(this,pi)===-2&&k(this,Oo).getBlockNumber().then(e=>{K(this,pi,e)}),k(this,Oo).on("block",k(this,yh)))}stop(){k(this,gc)&&(K(this,gc,!1),k(this,Oo).off("block",k(this,yh)))}pause(e){this.stop(),e&&K(this,pi,-2)}resume(){this.start()}}Oo=new WeakMap,gh=new WeakMap,yh=new WeakMap,gc=new WeakMap,pi=new WeakMap,qm=new WeakSet,yC=async function(e){if(k(this,pi)===-2)return;const t=Vv(k(this,gh));t.fromBlock=k(this,pi)+1,t.toBlock=e;const r=await k(this,Oo).getLogs(t);if(r.length===0){k(this,pi)<e-60&&K(this,pi,e-60);return}for(const i of r)k(this,Oo).emit(k(this,gh),i),K(this,pi,i.blockNumber)};const cF=BigInt(2),lF=10;function Y0(n){return n&&typeof n.then=="function"}function Fy(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class mC{constructor(e){ie(this,"name");Te(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function uF(n){return JSON.parse(JSON.stringify(n))}function qv(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function Vb(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(yt(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:Fy("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:Fy("orphan",t),filter:uF(t)}}if(n.address||n.topics){const t=n,r={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?qv(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],s=[],o=c=>{yt(c)?i.push(c):s.push((async()=>{i.push(await Yn(c,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),s.length&&await Promise.all(s),r.address=qv(i.map(c=>c.toLowerCase()))}return{filter:r,tag:Fy("event",r),type:"event"}}ee(!1,"unknown ProviderEvent","event",n)}function qb(){return new Date().getTime()}const fF={cacheTimeout:250,pollingInterval:4e3};var Fn,yc,Mn,mh,Vr,Ql,mc,Bo,lg,gi,wh,bh,He,Lr,Kv,Gv,fp,Wv,hp,My;class hF{constructor(e,t){ce(this,He);ce(this,Fn);ce(this,yc);ce(this,Mn);ce(this,mh);ce(this,Vr);ce(this,Ql);ce(this,mc);ce(this,Bo);ce(this,lg);ce(this,gi);ce(this,wh);ce(this,bh);if(K(this,bh,Object.assign({},fF,t||{})),e==="any")K(this,Ql,!0),K(this,Vr,null);else if(e){const r=Rs.from(e);K(this,Ql,!1),K(this,Vr,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else K(this,Ql,!1),K(this,Vr,null);K(this,Bo,-1),K(this,mc,new Map),K(this,Fn,new Map),K(this,yc,new Map),K(this,Mn,null),K(this,mh,!1),K(this,lg,1),K(this,gi,new Map),K(this,wh,!1)}get pollingInterval(){return k(this,bh).pollingInterval}get provider(){return this}get plugins(){return Array.from(k(this,yc).values())}attachPlugin(e){if(k(this,yc).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return k(this,yc).set(e.name,e.connect(this)),this}getPlugin(e){return k(this,yc).get(e)||null}get disableCcipRead(){return k(this,wh)}set disableCcipRead(e){K(this,wh,!!e)}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let c=0;c<r.length;c++){const u=r[c],f=u.replace("{sender}",i).replace("{data}",s),h=new Oc(f);u.indexOf("{data}")===-1&&(h.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:h,index:c,urls:r});let g="unknown error",p;try{p=await h.send()}catch(m){o.push(m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:{error:m}});continue}try{const m=p.bodyJson;if(m.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:h,result:m}),m.data;m.message&&(g=m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:m})}catch{}fe(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${g}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:u,errorMessage:g}}),o.push(g)}fe(!1,`error encountered during CCIP fetch: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,t){return new NL(ZL(e),this)}_wrapLog(e,t){return new gg(WL(e),this)}_wrapTransactionReceipt(e,t){return new nC(eF(e),this)}_wrapTransactionResponse(e,t){return new Mp(gC(e),this)}_detectNetwork(){fe(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){fe(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Me(await ge(this,He,Lr).call(this,{method:"getBlockNumber"}),"%response");return k(this,Bo)>=0&&K(this,Bo,e),e}_getAddress(e){return Yn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(yt(e))return yt(e,32)?e:Wi(e);if(typeof e=="bigint"&&(e=Me(e,"blockTag")),typeof e=="number")return e>=0?Wi(e):k(this,Bo)>=0?Wi(k(this,Bo)+e):this.getBlockNumber().then(t=>Wi(t+e));ee(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(u=>u==null?null:Array.isArray(u)?qv(u.map(f=>f.toLowerCase())):u.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(u,f,h)=>{let g;switch(u.length){case 0:break;case 1:g=u[0];break;default:u.sort(),g=u}if(r&&(f!=null||h!=null))throw new Error("invalid filter");const p={};return g&&(p.address=g),t.length&&(p.topics=t),f&&(p.fromBlock=f),h&&(p.toBlock=h),r&&(p.blockHash=r),p};let s=[];if(e.address)if(Array.isArray(e.address))for(const u of e.address)s.push(this._getAddress(u));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let c;return"toBlock"in e&&(c=this._getBlockTag(e.toBlock)),s.filter(u=>typeof u!="string").length||o!=null&&typeof o!="string"||c!=null&&typeof c!="string"?Promise.all([Promise.all(s),o,c]).then(u=>i(u[0],u[1],u[2])):i(s,o,c)}_getTransactionRequest(e){const t=am(e),r=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const s=Yn(t[i],this);Y0(s)?r.push((async function(){t[i]=await s})()):t[i]=s}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);Y0(i)?r.push((async function(){t.blockTag=await i})()):t.blockTag=i}return r.length?(async function(){return await Promise.all(r),t})():t}async getNetwork(){if(k(this,Vr)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw k(this,Vr)===i&&K(this,Vr,null),s}})();return K(this,Vr,i),(await i).clone()}const e=k(this,Vr),[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(k(this,Ql)?(this.emit("network",r,t),k(this,Vr)===e&&K(this,Vr,Promise.resolve(r))):fe(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await Qn({_block:ge(this,He,Wv).call(this,"latest",!1),gasPrice:(async()=>{try{const h=await ge(this,He,Lr).call(this,{method:"getGasPrice"});return Be(h,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const h=await ge(this,He,Lr).call(this,{method:"getPriorityFee"});return Be(h,"%response")}catch{}return null})()});let c=null,u=null;const f=this._wrapBlock(i,e);return f&&f.baseFeePerGas&&(u=o??BigInt("1000000000"),c=f.baseFeePerGas*cF+u),new HS(s,c,u)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Oc(r.url),s=await r.processFunc(t,this,i);return new HS(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return Y0(t)&&(t=await t),Be(await ge(this,He,Lr).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:r}=await Qn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await ge(this,He,Gv).call(this,ge(this,He,Kv).call(this,t,r,e.enableCcipRead?0:-1))}async getBalance(e,t){return Be(await ge(this,He,fp).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Me(await ge(this,He,fp).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Ae(await ge(this,He,fp).call(this,{method:"getCode"},e,t))}async getStorage(e,t,r){const i=Be(t,"position");return Ae(await ge(this,He,fp).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:i}=await Qn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=em.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(t)}async getBlock(e,t){const{network:r,params:i}=await Qn({network:this.getNetwork(),params:ge(this,He,Wv).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:t,params:r}=await Qn({network:this.getNetwork(),params:ge(this,He,Lr).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await Qn({network:this.getNetwork(),params:ge(this,He,Lr).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await ge(this,He,Lr).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await Qn({network:this.getNetwork(),result:ge(this,He,Lr).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:Ae(t)}async getLogs(e){let t=this._getFilter(e);Y0(t)&&(t=await t);const{network:r,params:i}=await Qn({network:this.getNetwork(),params:ge(this,He,Lr).call(this,{method:"getLogs",filter:t})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){fe(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await lm.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=st(e);const t=Lv(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await lm.getEnsAddress(this),s=await new Pf(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(s==null||s===Dp)return null;const c=await new Pf(s,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(c)!==e?null:c}catch(r){if(wn(r,"BAD_DATA")&&r.value==="0x"||wn(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let c=null;const u=(async f=>{try{const h=await this.getTransactionReceipt(e);if(h!=null&&f-h.blockNumber+1>=i){s(h),c&&(clearTimeout(c),c=null);return}}catch(h){console.log("EEE",h)}this.once("block",u)});r!=null&&(c=setTimeout(()=>{c!=null&&(c=null,this.off("block",u),o(Et("timeout","TIMEOUT",{reason:"timeout"})))},r)),u(await this.getBlockNumber())})}async waitForBlock(e){fe(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=k(this,gi).get(e);t&&(t.timer&&clearTimeout(t.timer),k(this,gi).delete(e))}_setTimeout(e,t){t==null&&(t=0);const r=Td(this,lg)._++,i=()=>{k(this,gi).delete(r),e()};if(this.paused)k(this,gi).set(r,{timer:null,func:i,time:t});else{const s=setTimeout(i,t);k(this,gi).set(r,{timer:s,func:i,time:qb()})}return r}_forEachSubscriber(e){for(const t of k(this,Fn).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new mC(e.type);case"block":{const t=new iF(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new sF(this,e.type);case"event":return new $3(this,e.filter);case"transaction":return new aF(this,e.hash);case"orphan":return new oF(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of k(this,Fn).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),k(this,Mn)!=null&&t.pause(k(this,Mn));break}}async on(e,t){const r=await ge(this,He,My).call(this,e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,k(this,Mn)!=null&&r.subscriber.pause(k(this,Mn))),this}async once(e,t){const r=await ge(this,He,My).call(this,e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,k(this,Mn)!=null&&r.subscriber.pause(k(this,Mn))),this}async emit(e,...t){const r=await ge(this,He,hp).call(this,e,t);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const c=new PB(this,o?null:s,e);try{s.call(this,...t,c)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),k(this,Fn).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await ge(this,He,hp).call(this,e);return r?r.listeners.length:0}let t=0;for(const{listeners:r}of k(this,Fn).values())t+=r.length;return t}async listeners(e){if(e){const r=await ge(this,He,hp).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:r}of k(this,Fn).values())t=t.concat(r.map(({listener:i})=>i));return t}async off(e,t){const r=await ge(this,He,hp).call(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),k(this,Fn).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:i}=await ge(this,He,My).call(this,e);r&&i.stop(),k(this,Fn).delete(t)}else for(const[t,{started:r,subscriber:i}]of k(this,Fn))r&&i.stop(),k(this,Fn).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return k(this,mh)}destroy(){this.removeAllListeners();for(const e of k(this,gi).keys())this._clearTimeout(e);K(this,mh,!0)}get paused(){return k(this,Mn)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(K(this,Bo,-1),k(this,Mn)!=null){if(k(this,Mn)==!!e)return;fe(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),K(this,Mn,!!e);for(const t of k(this,gi).values())t.timer&&clearTimeout(t.timer),t.time=qb()-t.time}resume(){if(k(this,Mn)!=null){this._forEachSubscriber(e=>e.resume()),K(this,Mn,null);for(const e of k(this,gi).values()){let t=e.time;t<0&&(t=0),e.time=qb(),setTimeout(e.func,t)}}}}Fn=new WeakMap,yc=new WeakMap,Mn=new WeakMap,mh=new WeakMap,Vr=new WeakMap,Ql=new WeakMap,mc=new WeakMap,Bo=new WeakMap,lg=new WeakMap,gi=new WeakMap,wh=new WeakMap,bh=new WeakMap,He=new WeakSet,Lr=async function(e){const t=k(this,bh).cacheTimeout;if(t<0)return await this._perform(e);const r=Fy(e.method,e);let i=k(this,mc).get(r);return i||(i=this._perform(e),k(this,mc).set(r,i),setTimeout(()=>{k(this,mc).get(r)===i&&k(this,mc).delete(r)},t)),await i},Kv=async function(e,t,r){fe(r<lF,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=am(e);try{return Ae(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(s){if(!this.disableCcipRead&&y3(s)&&s.data&&r>=0&&t==="latest"&&i.to!=null&&Pt(s.data,0,4)==="0x556f1830"){const o=s.data,c=await Yn(i.to,this);let u;try{u=mF(Pt(s.data,4))}catch(g){fe(!1,g.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}fe(u.sender.toLowerCase()===c.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:u.errorArgs}});const f=await this.ccipReadFetch(i,u.calldata,u.urls);fe(f!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:u.errorArgs}});const h={to:c,data:Ct([u.selector,yF([f,u.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:h});try{const g=await ge(this,He,Kv).call(this,h,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},h),result:g}),g}catch(g){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},h),error:g}),g}}throw s}},Gv=async function(e){const{value:t}=await Qn({network:this.getNetwork(),value:e});return t},fp=async function(e,t,r){let i=this._getAddress(t),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await ge(this,He,Gv).call(this,ge(this,He,Lr).call(this,Object.assign(e,{address:i,blockTag:s})))},Wv=async function(e,t){if(yt(e,32))return await ge(this,He,Lr).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await ge(this,He,Lr).call(this,{method:"getBlock",blockTag:r,includeTransactions:t})},hp=async function(e,t){let r=await Vb(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await Vb({orphan:"drop-log",log:t[0]},this)),k(this,Fn).get(r.tag)||null},My=async function(e){const t=await Vb(e,this),r=t.tag;let i=k(this,Fn).get(r);return i||(i={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},k(this,Fn).set(r,i)),i};function dF(n,e){try{const t=Qv(n,e);if(t)return Jy(t)}catch{}return null}function Qv(n,e){if(n==="0x")return null;try{const t=Me(Pt(n,e,e+32)),r=Me(Pt(n,t,t+32));return Pt(n,t+32,t+32+r)}catch{}return null}function JS(n){const e=Wt(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function pF(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const gF=new Uint8Array([]);function yF(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(gF),t+=32;for(let r=0;r<n.length;r++){const i=je(n[r]);e[r]=JS(t),e.push(JS(i.length)),e.push(pF(i)),t+=32+Math.ceil(i.length/32)*32}return Ct(e)}const YS="0x0000000000000000000000000000000000000000000000000000000000000000";function mF(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};fe(Sf(n)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Pt(n,0,32);fe(Pt(t,0,12)===Pt(YS,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Pt(t,12);try{const r=[],i=Me(Pt(n,32,64)),s=Me(Pt(n,i,i+32)),o=Pt(n,i+32);for(let c=0;c<s;c++){const u=dF(o,c*32);if(u==null)throw new Error("abort");r.push(u)}e.urls=r}catch{fe(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Qv(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{fe(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}fe(Pt(n,100,128)===Pt(YS,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Pt(n,96,100);try{const r=Qv(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{fe(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function tl(n,e){if(n.provider)return n.provider;fe(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function XS(n,e){let t=am(e);if(t.to!=null&&(t.to=Yn(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),Yn(r,n)]).then(([i,s])=>(ee(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else t.from=n.getAddress();return await Qn(t)}class wF{constructor(e){ie(this,"provider");Te(this,{provider:e||null})}async getNonce(e){return tl(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await XS(this,e)}async populateTransaction(e){const t=tl(this,"populateTransaction"),r=await XS(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=Be(r.chainId);ee(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?ee(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&ee(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await t.getFeeData();fe(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const c=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=c,r.maxPriorityFeePerGas=c}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(fe(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):fe(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Qn(r)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await tl(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return tl(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return tl(this,"call").call(await this.populateCall(e))}async resolveName(e){return await tl(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=tl(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=em.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){fe(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function bF(n){return JSON.parse(JSON.stringify(n))}var Wn,Ns,Zl,wc,Jl,vh,Tc,Zv,Jv;class wC{constructor(e){ce(this,Tc);ce(this,Wn);ce(this,Ns);ce(this,Zl);ce(this,wc);ce(this,Jl);ce(this,vh);K(this,Wn,e),K(this,Ns,null),K(this,Zl,ge(this,Tc,Zv).bind(this)),K(this,wc,!1),K(this,Jl,null),K(this,vh,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){k(this,wc)||(K(this,wc,!0),ge(this,Tc,Zv).call(this,-2))}stop(){k(this,wc)&&(K(this,wc,!1),K(this,vh,!0),ge(this,Tc,Jv).call(this),k(this,Wn).off("block",k(this,Zl)))}pause(e){e&&ge(this,Tc,Jv).call(this),k(this,Wn).off("block",k(this,Zl))}resume(){this.start()}}Wn=new WeakMap,Ns=new WeakMap,Zl=new WeakMap,wc=new WeakMap,Jl=new WeakMap,vh=new WeakMap,Tc=new WeakSet,Zv=async function(e){try{k(this,Ns)==null&&K(this,Ns,this._subscribe(k(this,Wn)));let t=null;try{t=await k(this,Ns)}catch(s){if(!wn(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(t==null){K(this,Ns,null),k(this,Wn)._recoverSubscriber(this,this._recover(k(this,Wn)));return}const r=await k(this,Wn).getNetwork();if(k(this,Jl)||K(this,Jl,r),k(this,Jl).chainId!==r.chainId)throw new Error("chaid changed");if(k(this,vh))return;const i=await k(this,Wn).send("eth_getFilterChanges",[t]);await this._emitResults(k(this,Wn),i)}catch(t){console.log("@TODO",t)}k(this,Wn).once("block",k(this,Zl))},Jv=function(){const e=k(this,Ns);e&&(K(this,Ns,null),e.then(t=>{k(this,Wn).destroyed||k(this,Wn).send("eth_uninstallFilter",[t])}))};var Yl;class vF extends wC{constructor(t,r){super(t);ce(this,Yl);K(this,Yl,bF(r))}_recover(t){return new $3(t,k(this,Yl))}async _subscribe(t){return await t.send("eth_newFilter",[k(this,Yl)])}async _emitResults(t,r){for(const i of r)t.emit(k(this,Yl),t._wrapLog(i,t._network))}}Yl=new WeakMap;class EF extends wC{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const xF="bigint,boolean,function,number,string,symbol".split(/,/g);function jy(n){if(n==null||xF.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(jy);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function AF(n){return new Promise(e=>{setTimeout(e,n)})}function Wu(n){return n&&n.toLowerCase()}function eI(n){return n&&typeof n.pollingInterval=="number"}const bC={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Kb extends wF{constructor(t,r){super(t);ie(this,"address");r=st(r),Te(this,{address:r})}connect(t){fe(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const r=jy(t),i=[];if(r.from){const o=r.from;i.push((async()=>{const c=await Yn(o,this.provider);ee(c!=null&&c.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=c})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await Yn(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(t){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((s,o)=>{const c=[1e3,100];let u=0;const f=async()=>{try{const h=await this.provider.getTransaction(i);if(h!=null){s(h.replaceableTransaction(r));return}}catch(h){if(wn(h,"CANCELLED")||wn(h,"BAD_DATA")||wn(h,"NETWORK_ERROR")||wn(h,"UNSUPPORTED_OPERATION")){h.info==null&&(h.info={}),h.info.sendTransactionHash=i,o(h);return}if(wn(h,"INVALID_ARGUMENT")&&(u++,h.info==null&&(h.info={}),h.info.sendTransactionHash=i,u>10)){o(h);return}this.provider.emit("error",Et("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:h}))}this.provider._setTimeout(()=>{f()},c.pop()||4e3)};f()})}async signTransaction(t){const r=jy(t);if(r.from){const s=await Yn(r.from,this.provider);ee(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const r=typeof t=="string"?Ro(t):t;return await this.provider.send("personal_sign",[Ae(r),this.address.toLowerCase()])}async signTypedData(t,r,i){const s=jy(i),o=await om.resolveNames(t,r,s,async c=>{const u=await Yn(c);return ee(u!=null,"TypedData does not support null address","value",c),u});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(om.getPayload(o.domain,r,o.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const r=typeof t=="string"?Ro(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ae(r)])}}var Xl,Eh,Po,Ds,Gi,yi,yr,ug,Yv;class SF extends hF{constructor(t,r){super(t,r);ce(this,ug);ce(this,Xl);ce(this,Eh);ce(this,Po);ce(this,Ds);ce(this,Gi);ce(this,yi);ce(this,yr);K(this,Eh,1),K(this,Xl,Object.assign({},bC,r||{})),K(this,Po,[]),K(this,Ds,null),K(this,yi,null),K(this,yr,null);{let s=null;const o=new Promise(c=>{s=c});K(this,Gi,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(ee(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&t!=null&&K(this,yi,Rs.from(t))):i&&(ee(t==null||i.matches(t),"staticNetwork MUST match network object","options",r),K(this,yi,i))}_getOption(t){return k(this,Xl)[t]}get _network(){return fe(k(this,yi),"network is not available yet","NETWORK_ERROR"),k(this,yi)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&Be(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(t);return r!=null?await this.send(r.method,r.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(k(this,yi))return k(this,yi)}else return t;return k(this,yr)?await k(this,yr):this.ready?(K(this,yr,(async()=>{try{const r=Rs.from(Be(await this.send("eth_chainId",[])));return K(this,yr,null),r}catch(r){throw K(this,yr,null),r}})()),await k(this,yr)):(K(this,yr,(async()=>{const r={id:Td(this,Eh)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],K(this,yr,null)}catch(s){throw K(this,yr,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Rs.from(Be(i.result));throw this.getRpcError(r,i)})()),await k(this,yr))}_start(){k(this,Gi)==null||k(this,Gi).resolve==null||(k(this,Gi).resolve(),K(this,Gi,null),(async()=>{for(;k(this,yi)==null&&!this.destroyed;)try{K(this,yi,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Et("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await AF(1e3)}ge(this,ug,Yv).call(this)})())}async _waitUntilReady(){if(k(this,Gi)!=null)return await k(this,Gi).promise}_getSubscriber(t){return t.type==="pending"?new EF(this):t.type==="event"?this._getOption("polling")?new $3(this,t.filter):new vF(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new mC("orphan"):super._getSubscriber(t)}get ready(){return k(this,Gi)==null}getRpcTransaction(t){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=Wi(Be(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(r[i]=Ae(t[i]))}),t.accessList&&(r.accessList=hu(t.accessList)),t.blobVersionedHashes&&(r.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),t.authorizationList&&(r.authorizationList=t.authorizationList.map(i=>{const s=EP(i);return{address:s.address,nonce:Wi(s.nonce),chainId:Wi(s.chainId),yParity:Wi(s.signature.yParity),r:Wi(s.signature.r),s:Wi(s.signature.s)}})),r}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Wu(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Wu(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[Wu(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Wu(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(Wu):t.filter.address=Wu(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,r){const{method:i}=t,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const u=s.message;if(!u.match(/revert/i)&&u.match(/insufficient funds/i))return Et("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:s}});if(u.match(/nonce/i)&&u.match(/too low/i))return Et("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const u=Xv(s),f=Fp.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],u?u.data:null);return f.info={error:s,payload:t},f}const o=JSON.stringify(OF(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Et("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const u=t.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Et("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:u,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Et("nonce has already been used","NONCE_EXPIRED",{transaction:u,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Et("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:u,info:{error:s}});if(o.match(/only replay-protected/i))return Et("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:u,info:{error:s}}})}let c=!!o.match(/the method .* does not exist/i);return c||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(c=!0),c?Et("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:s,payload:t}}):Et("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:t})}send(t,r){if(this.destroyed)return Promise.reject(Et("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=Td(this,Eh)._++,s=new Promise((o,c)=>{k(this,Po).push({resolve:o,reject:c,payload:{method:t,params:r,id:i,jsonrpc:"2.0"}})});return ge(this,ug,Yv).call(this),s}async getSigner(t){t==null&&(t=0);const r=this.send("eth_accounts",[]);if(typeof t=="number"){const s=await r;if(t>=s.length)throw new Error("no such account");return new Kb(this,s[t])}const{accounts:i}=await Qn({network:this.getNetwork(),accounts:r});t=st(t);for(const s of i)if(st(s)===t)return new Kb(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new Kb(this,r))}destroy(){k(this,Ds)&&(clearTimeout(k(this,Ds)),K(this,Ds,null));for(const{payload:t,reject:r}of k(this,Po))r(Et("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));K(this,Po,[]),super.destroy()}}Xl=new WeakMap,Eh=new WeakMap,Po=new WeakMap,Ds=new WeakMap,Gi=new WeakMap,yi=new WeakMap,yr=new WeakMap,ug=new WeakSet,Yv=function(){if(k(this,Ds))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");K(this,Ds,setTimeout(()=>{K(this,Ds,null);const r=k(this,Po);for(K(this,Po,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==k(this,Xl).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>k(this,Xl).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:c,reject:u,payload:f}of i){if(this.destroyed){u(Et("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:f.method}));continue}const h=o.filter(g=>g.id===f.id)[0];if(h==null){const g=Et("missing response for request","BAD_DATA",{value:o,info:{payload:f}});this.emit("error",g),u(g);continue}if("error"in h){u(this.getRpcError(f,h));continue}c(h.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:c}of i)c(o)}})()}},t))};var bc;class IF extends SF{constructor(t,r){super(t,r);ce(this,bc);let i=this._getOption("pollingInterval");i==null&&(i=bC.pollingInterval),K(this,bc,i)}_getSubscriber(t){const r=super._getSubscriber(t);return eI(r)&&(r.pollingInterval=k(this,bc)),r}get pollingInterval(){return k(this,bc)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");K(this,bc,t),this._forEachSubscriber(r=>{eI(r)&&(r.pollingInterval=k(this,bc))})}}bc=new WeakMap;function Xv(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&yt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=Xv(n[e]);if(t)return t}return null}if(typeof n=="string")try{return Xv(JSON.parse(n))}catch{}return null}function eE(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)eE(n[t],e);if(typeof n=="string")try{return eE(JSON.parse(n),e)}catch{}}}function OF(n){const e=[];return eE(n,e),e}var xh,Ah;const wl=class wl extends IF{constructor(t,r,i){const s=Object.assign({},i??{},{batchMaxCount:1});ee(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(r,s);ce(this,xh);ce(this,Ah);K(this,Ah,null),i&&i.providerInfo&&K(this,Ah,i.providerInfo),K(this,xh,async(o,c)=>{const u={method:o,params:c};this.emit("debug",{action:"sendEip1193Request",payload:u});try{const f=await t.request(u);return this.emit("debug",{action:"receiveEip1193Result",result:f}),f}catch(f){const h=new Error(f.message);throw h.code=f.code,h.data=f.data,h.payload=u,this.emit("debug",{action:"receiveEip1193Error",error:h}),h}})}get providerInfo(){return k(this,Ah)}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){ee(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const r=await k(this,xh).call(this,t.method,t.params||[]);return[{id:t.id,result:r}]}catch(r){return[{id:t.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(t,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(t,r)}async hasSigner(t){t==null&&(t=0);const r=await this.send("eth_accounts",[]);return typeof t=="number"?r.length>t:(t=t.toLowerCase(),r.filter(i=>i.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await k(this,xh).call(this,"eth_requestAccounts",[])}catch(r){const i=r.payload;throw this.getRpcError(i,{id:i.id,error:r})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new wl(t.provider);const r=t.window?t.window:typeof window<"u"?window:null;if(r==null)return null;const i=t.anyProvider;if(i&&r.ethereum)return new wl(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const s=t.timeout?t.timeout:300;return s===0?null:await new Promise((o,c)=>{let u=[];const f=p=>{u.push(p.detail),i&&h()},h=()=>{if(clearTimeout(g),u.length)if(t&&t.filter){const p=t.filter(u.map(m=>Object.assign({},m.info)));if(p==null)o(null);else if(p instanceof wl)o(p);else{let m=null;if(p.uuid&&(m=u.filter(b=>p.uuid===b.info.uuid)[0]),m){const{provider:v,info:b}=m;o(new wl(v,void 0,{providerInfo:b}))}else c(Et("filter returned unknown info","UNSUPPORTED_OPERATION",{value:p}))}}else{const{provider:p,info:m}=u[0];o(new wl(p,void 0,{providerInfo:m}))}else o(null);r.removeEventListener("eip6963:announceProvider",f)},g=setTimeout(()=>{h()},s);r.addEventListener("eip6963:announceProvider",f),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};xh=new WeakMap,Ah=new WeakMap;let Nh=wl;const BF="modulepreload",PF=function(n){return"/"+n},tI={},CF=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=o(t.map(f=>{if(f=PF(f),f in tI)return;tI[f]=!0;const h=f.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":BF,h||(p.as="script"),p.crossOrigin="",p.href=f,u&&p.setAttribute("nonce",u),document.head.appendChild(p),h)return new Promise((m,v)=>{p.addEventListener("load",m),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};var X0={exports:{}},nI;function _F(){if(nI)return X0.exports;nI=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(R,j,H){return Function.prototype.apply.call(R,j,H)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:t=function(R){return Object.getOwnPropertyNames(R)};function r(T){console&&console.warn&&console.warn(T)}var i=Number.isNaN||function(R){return R!==R};function s(){s.init.call(this)}X0.exports=s,X0.exports.once=_,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function c(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||i(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this};function u(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(R){for(var j=[],H=1;H<arguments.length;H++)j.push(arguments[H]);var V=R==="error",M=this._events;if(M!==void 0)V=V&&M.error===void 0;else if(!V)return!1;if(V){var G;if(j.length>0&&(G=j[0]),G instanceof Error)throw G;var Q=new Error("Unhandled error."+(G?" ("+G.message+")":""));throw Q.context=G,Q}var z=M[R];if(z===void 0)return!1;if(typeof z=="function")e(z,this,j);else for(var P=z.length,D=v(z,P),H=0;H<P;++H)e(D[H],this,j);return!0};function f(T,R,j,H){var V,M,G;if(c(j),M=T._events,M===void 0?(M=T._events=Object.create(null),T._eventsCount=0):(M.newListener!==void 0&&(T.emit("newListener",R,j.listener?j.listener:j),M=T._events),G=M[R]),G===void 0)G=M[R]=j,++T._eventsCount;else if(typeof G=="function"?G=M[R]=H?[j,G]:[G,j]:H?G.unshift(j):G.push(j),V=u(T),V>0&&G.length>V&&!G.warned){G.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=T,Q.type=R,Q.count=G.length,r(Q)}return T}s.prototype.addListener=function(R,j){return f(this,R,j,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(R,j){return f(this,R,j,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(T,R,j){var H={fired:!1,wrapFn:void 0,target:T,type:R,listener:j},V=h.bind(H);return V.listener=j,H.wrapFn=V,V}s.prototype.once=function(R,j){return c(j),this.on(R,g(this,R,j)),this},s.prototype.prependOnceListener=function(R,j){return c(j),this.prependListener(R,g(this,R,j)),this},s.prototype.removeListener=function(R,j){var H,V,M,G,Q;if(c(j),V=this._events,V===void 0)return this;if(H=V[R],H===void 0)return this;if(H===j||H.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete V[R],V.removeListener&&this.emit("removeListener",R,H.listener||j));else if(typeof H!="function"){for(M=-1,G=H.length-1;G>=0;G--)if(H[G]===j||H[G].listener===j){Q=H[G].listener,M=G;break}if(M<0)return this;M===0?H.shift():b(H,M),H.length===1&&(V[R]=H[0]),V.removeListener!==void 0&&this.emit("removeListener",R,Q||j)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(R){var j,H,V;if(H=this._events,H===void 0)return this;if(H.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):H[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete H[R]),this;if(arguments.length===0){var M=Object.keys(H),G;for(V=0;V<M.length;++V)G=M[V],G!=="removeListener"&&this.removeAllListeners(G);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=H[R],typeof j=="function")this.removeListener(R,j);else if(j!==void 0)for(V=j.length-1;V>=0;V--)this.removeListener(R,j[V]);return this};function p(T,R,j){var H=T._events;if(H===void 0)return[];var V=H[R];return V===void 0?[]:typeof V=="function"?j?[V.listener||V]:[V]:j?A(V):v(V,V.length)}s.prototype.listeners=function(R){return p(this,R,!0)},s.prototype.rawListeners=function(R){return p(this,R,!1)},s.listenerCount=function(T,R){return typeof T.listenerCount=="function"?T.listenerCount(R):m.call(T,R)},s.prototype.listenerCount=m;function m(T){var R=this._events;if(R!==void 0){var j=R[T];if(typeof j=="function")return 1;if(j!==void 0)return j.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function v(T,R){for(var j=new Array(R),H=0;H<R;++H)j[H]=T[H];return j}function b(T,R){for(;R+1<T.length;R++)T[R]=T[R+1];T.pop()}function A(T){for(var R=new Array(T.length),j=0;j<R.length;++j)R[j]=T[j].listener||T[j];return R}function _(T,R){return new Promise(function(j,H){function V(G){T.removeListener(R,M),H(G)}function M(){typeof T.removeListener=="function"&&T.removeListener("error",V),j([].slice.call(arguments))}O(T,R,M,{once:!0}),R!=="error"&&U(T,V,{once:!0})})}function U(T,R,j){typeof T.on=="function"&&O(T,"error",R,j)}function O(T,R,j,H){if(typeof T.on=="function")H.once?T.once(R,j):T.on(R,j);else if(typeof T.addEventListener=="function")T.addEventListener(R,function V(M){H.once&&T.removeEventListener(R,V),j(M)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return X0.exports}var Zr=_F();const T3=fg(Zr);var Gb={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tE=function(n,e){return tE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},tE(n,e)};function NF(n,e){tE(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var nE=function(){return nE=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},nE.apply(this,arguments)};function DF(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function $F(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function TF(n,e){return function(t,r){e(t,r,n)}}function kF(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function RF(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(h){try{f(r.next(h))}catch(g){o(g)}}function u(h){try{f(r.throw(h))}catch(g){o(g)}}function f(h){h.done?s(h.value):i(h.value).then(c,u)}f((r=r.apply(n,e||[])).next())})}function UF(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(f){return function(h){return u([f,h])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function LF(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function FF(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function rE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vC(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function MF(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(vC(arguments[e]));return n}function jF(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,c=s.length;o<c;o++,i++)r[i]=s[o];return r}function zp(n){return this instanceof zp?(this.v=n,this):new zp(n)}function zF(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){r[p]&&(i[p]=function(m){return new Promise(function(v,b){s.push([p,m,v,b])>1||c(p,m)})})}function c(p,m){try{u(r[p](m))}catch(v){g(s[0][3],v)}}function u(p){p.value instanceof zp?Promise.resolve(p.value.v).then(f,h):g(s[0][2],p)}function f(p){c("next",p)}function h(p){c("throw",p)}function g(p,m){p(m),s.shift(),s.length&&c(s[0][0],s[0][1])}}function HF(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:zp(n[i](o)),done:i==="return"}:s?s(o):o}:s}}function VF(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof rE=="function"?rE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(c,u){o=n[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(f){s({value:f,done:c})},o)}}function qF(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function KF(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function GF(n){return n&&n.__esModule?n:{default:n}}function WF(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function QF(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const ZF=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return nE},__asyncDelegator:HF,__asyncGenerator:zF,__asyncValues:VF,__await:zp,__awaiter:RF,__classPrivateFieldGet:WF,__classPrivateFieldSet:QF,__createBinding:LF,__decorate:$F,__exportStar:FF,__extends:NF,__generator:UF,__importDefault:GF,__importStar:KF,__makeTemplateObject:qF,__metadata:kF,__param:TF,__read:vC,__rest:DF,__spread:MF,__spreadArrays:jF,__values:rE},Symbol.toStringTag,{value:"Module"})),wg=wk(ZF);var Wb={},Fd={},rI;function JF(){if(rI)return Fd;rI=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Fd.delay=n,Fd}var nl={},Qb={},rl={},iI;function YF(){return iI||(iI=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.ONE_THOUSAND=rl.ONE_HUNDRED=void 0,rl.ONE_HUNDRED=100,rl.ONE_THOUSAND=1e3),rl}var Zb={},sI;function XF(){return sI||(sI=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365})(Zb)),Zb}var oI;function EC(){return oI||(oI=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=wg;e.__exportStar(YF(),n),e.__exportStar(XF(),n)})(Qb)),Qb}var aI;function eM(){if(aI)return nl;aI=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.fromMiliseconds=nl.toMiliseconds=void 0;const n=EC();function e(r){return r*n.ONE_THOUSAND}nl.toMiliseconds=e;function t(r){return Math.floor(r/n.ONE_THOUSAND)}return nl.fromMiliseconds=t,nl}var cI;function tM(){return cI||(cI=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=wg;e.__exportStar(JF(),n),e.__exportStar(eM(),n)})(Wb)),Wb}var Qu={},lI;function nM(){if(lI)return Qu;lI=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:i})}get(t){const r=this.timestamps.get(t);if(typeof r>"u")throw new Error(`No timestamp found for label: ${t}`);return r}elapsed(t){const r=this.get(t);return r.elapsed||Date.now()-r.started}}return Qu.Watch=n,Qu.default=n,Qu}var Jb={},Md={},uI;function rM(){if(uI)return Md;uI=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.IWatch=void 0;class n{}return Md.IWatch=n,Md}var fI;function iM(){return fI||(fI=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),wg.__exportStar(rM(),n)})(Jb)),Jb}var hI;function sM(){return hI||(hI=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=wg;e.__exportStar(tM(),n),e.__exportStar(nM(),n),e.__exportStar(iM(),n),e.__exportStar(EC(),n)})(Gb)),Gb}var we=sM(),ut={},dI;function xC(){if(dI)return ut;dI=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.getLocalStorage=ut.getLocalStorageOrThrow=ut.getCrypto=ut.getCryptoOrThrow=ut.getLocation=ut.getLocationOrThrow=ut.getNavigator=ut.getNavigatorOrThrow=ut.getDocument=ut.getDocumentOrThrow=ut.getFromWindowOrThrow=ut.getFromWindow=void 0;function n(p){let m;return typeof window<"u"&&typeof window[p]<"u"&&(m=window[p]),m}ut.getFromWindow=n;function e(p){const m=n(p);if(!m)throw new Error(`${p} is not defined in Window`);return m}ut.getFromWindowOrThrow=e;function t(){return e("document")}ut.getDocumentOrThrow=t;function r(){return n("document")}ut.getDocument=r;function i(){return e("navigator")}ut.getNavigatorOrThrow=i;function s(){return n("navigator")}ut.getNavigator=s;function o(){return e("location")}ut.getLocationOrThrow=o;function c(){return n("location")}ut.getLocation=c;function u(){return e("crypto")}ut.getCryptoOrThrow=u;function f(){return n("crypto")}ut.getCrypto=f;function h(){return e("localStorage")}ut.getLocalStorageOrThrow=h;function g(){return n("localStorage")}return ut.getLocalStorage=g,ut}xC();var jd={},pI;function oM(){if(pI)return jd;pI=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.getWindowMetadata=void 0;const n=xC();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function i(){const m=t.getElementsByTagName("link"),v=[];for(let b=0;b<m.length;b++){const A=m[b],_=A.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const U=A.getAttribute("href");if(U)if(U.toLowerCase().indexOf("https:")===-1&&U.toLowerCase().indexOf("http:")===-1&&U.indexOf("//")!==0){let O=r.protocol+"//"+r.host;if(U.indexOf("/")===0)O+=U;else{const T=r.pathname.split("/");T.pop();const R=T.join("/");O+=R+"/"+U}v.push(O)}else if(U.indexOf("//")===0){const O=r.protocol+U;v.push(O)}else v.push(U)}}return v}function s(...m){const v=t.getElementsByTagName("meta");for(let b=0;b<v.length;b++){const A=v[b],_=["itemprop","property","name"].map(U=>A.getAttribute(U)).filter(U=>U?m.includes(U):!1);if(_.length&&_){const U=A.getAttribute("content");if(U)return U}}return""}function o(){let m=s("name","og:site_name","og:title","twitter:title");return m||(m=t.title),m}function c(){return s("description","og:description","twitter:description","keywords")}const u=o(),f=c(),h=r.origin,g=i();return{description:f,url:h,icons:g,name:u}}return jd.getWindowMetadata=e,jd}oM();/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function aM(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function AC(n,e){return Array.isArray(e)?e.length===0?!0:n?e.every(t=>typeof t=="string"):e.every(t=>Number.isSafeInteger(t)):!1}function um(n,e){if(typeof e!="string")throw new Error(`${n}: string expected`);return!0}function k3(n){if(!Number.isSafeInteger(n))throw new Error(`invalid integer: ${n}`)}function iE(n){if(!Array.isArray(n))throw new Error("array expected")}function fm(n,e){if(!AC(!0,e))throw new Error(`${n}: array of strings expected`)}function cM(n,e){if(!AC(!1,e))throw new Error(`${n}: array of numbers expected`)}function lM(...n){const e=s=>s,t=(s,o)=>c=>s(o(c)),r=n.map(s=>s.encode).reduceRight(t,e),i=n.map(s=>s.decode).reduce(t,e);return{encode:r,decode:i}}function uM(n){const e=typeof n=="string"?n.split(""):n,t=e.length;fm("alphabet",e);const r=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(iE(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=t)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${n}`);return e[s]})),decode:i=>(iE(i),i.map(s=>{um("alphabet.decode",s);const o=r.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${n}`);return o}))}}function fM(n=""){return um("join",n),{encode:e=>(fm("join.decode",e),e.join(n)),decode:e=>(um("join.decode",e),e.split(n))}}function hM(n,e="="){return k3(n),um("padding",e),{encode(t){for(fm("padding.encode",t);t.length*n%8;)t.push(e);return t},decode(t){fm("padding.decode",t);let r=t.length;if(r*n%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&t[r-1]===e;r--)if((r-1)*n%8===0)throw new Error("padding: invalid, string has too much padding");return t.slice(0,r)}}}const SC=(n,e)=>e===0?n:SC(e,n%e),hm=(n,e)=>n+(e-SC(n,e)),Yb=(()=>{let n=[];for(let e=0;e<40;e++)n.push(2**e);return n})();function gI(n,e,t,r){if(iE(n),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(hm(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${hm(e,t)}`);let i=0,s=0;const o=Yb[e],c=Yb[t]-1,u=[];for(const f of n){if(k3(f),f>=o)throw new Error(`convertRadix2: invalid data word=${f} from=${e}`);if(i=i<<e|f,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=t;s-=t)u.push((i>>s-t&c)>>>0);const h=Yb[s];if(h===void 0)throw new Error("invalid carry");i&=h-1}if(i=i<<t-s&c,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&u.push(i>>>0),u}function dM(n,e=!1){if(k3(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(hm(8,n)>32||hm(n,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!aM(t))throw new Error("radix2.encode input should be Uint8Array");return gI(Array.from(t),8,n,!e)},decode:t=>(cM("radix2.decode",t),Uint8Array.from(gI(t,n,8,e)))}}const pM=lM(dM(5),uM("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),hM(5),fM(""));function gM(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<n.length;f++){const h=n.charAt(f),g=h.charCodeAt(0);if(e[g]!==255)throw new TypeError(h+" is ambiguous");e[g]=f}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let h=0,g=0,p=0;const m=f.length;for(;p!==m&&f[p]===0;)p++,h++;const v=(m-p)*s+1>>>0,b=new Uint8Array(v);for(;p!==m;){let U=f[p],O=0;for(let T=v-1;(U!==0||O<g)&&T!==-1;T--,O++)U+=256*b[T]>>>0,b[T]=U%t>>>0,U=U/t>>>0;if(U!==0)throw new Error("Non-zero carry");g=O,p++}let A=v-g;for(;A!==v&&b[A]===0;)A++;let _=r.repeat(h);for(;A<v;++A)_+=n.charAt(b[A]);return _}function c(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let h=0,g=0,p=0;for(;f[h]===r;)g++,h++;const m=(f.length-h)*i+1>>>0,v=new Uint8Array(m);for(;h<f.length;){const U=f.charCodeAt(h);if(U>255)return;let O=e[U];if(O===255)return;let T=0;for(let R=m-1;(O!==0||T<p)&&R!==-1;R--,T++)O+=t*v[R]>>>0,v[R]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");p=T,h++}let b=m-p;for(;b!==m&&v[b]===0;)b++;const A=new Uint8Array(g+(m-b));let _=g;for(;b!==m;)A[_++]=v[b++];return A}function u(f){const h=c(f);if(h)return h;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:c,decode:u}}var yM="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";gM(yM);function mM(n){const e=n.length;let t=0,r=0;for(;r<e;){let i=n.charCodeAt(r++);if((i&4294967168)===0){t++;continue}else if((i&4294965248)===0)t+=2;else{if(i>=55296&&i<=56319&&r<e){const s=n.charCodeAt(r);(s&64512)===56320&&(++r,i=((i&1023)<<10)+(s&1023)+65536)}(i&4294901760)===0?t+=3:t+=4}}return t}function wM(n,e,t){const r=n.length;let i=t,s=0;for(;s<r;){let o=n.charCodeAt(s++);if((o&4294967168)===0){e[i++]=o;continue}else if((o&4294965248)===0)e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<r){const c=n.charCodeAt(s);(c&64512)===56320&&(++s,o=((o&1023)<<10)+(c&1023)+65536)}(o&4294901760)===0?(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128):(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128)}e[i++]=o&63|128}}const bM=new TextEncoder,vM=50;function EM(n,e,t){bM.encodeInto(n,e.subarray(t))}function xM(n,e,t){n.length>vM?EM(n,e,t):wM(n,e,t)}const AM=4096;function IC(n,e,t){let r=e;const i=r+t,s=[];let o="";for(;r<i;){const c=n[r++];if((c&128)===0)s.push(c);else if((c&224)===192){const u=n[r++]&63;s.push((c&31)<<6|u)}else if((c&240)===224){const u=n[r++]&63,f=n[r++]&63;s.push((c&31)<<12|u<<6|f)}else if((c&248)===240){const u=n[r++]&63,f=n[r++]&63,h=n[r++]&63;let g=(c&7)<<18|u<<12|f<<6|h;g>65535&&(g-=65536,s.push(g>>>10&1023|55296),g=56320|g&1023),s.push(g)}else s.push(c);s.length>=AM&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}const SM=new TextDecoder,IM=200;function OM(n,e,t){const r=n.subarray(e,e+t);return SM.decode(r)}function BM(n,e,t){return t>IM?OM(n,e,t):IC(n,e,t)}class ey{constructor(e,t){this.type=e,this.data=t}}class qr extends Error{constructor(e){super(e);const t=Object.create(qr.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:qr.name})}}const zd=4294967295;function PM(n,e,t){const r=t/4294967296,i=t;n.setUint32(e,r),n.setUint32(e+4,i)}function OC(n,e,t){const r=Math.floor(t/4294967296),i=t;n.setUint32(e,r),n.setUint32(e+4,i)}function BC(n,e){const t=n.getInt32(e),r=n.getUint32(e+4);return t*4294967296+r}function CM(n,e){const t=n.getUint32(e),r=n.getUint32(e+4);return t*4294967296+r}const _M=-1,NM=4294967296-1,DM=17179869184-1;function $M({sec:n,nsec:e}){if(n>=0&&e>=0&&n<=DM)if(e===0&&n<=NM){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,n),t}else{const t=n/4294967296,r=n&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|t&3),s.setUint32(4,r),i}else{const t=new Uint8Array(12),r=new DataView(t.buffer);return r.setUint32(0,e),OC(r,4,n),t}}function TM(n){const e=n.getTime(),t=Math.floor(e/1e3),r=(e-t*1e3)*1e6,i=Math.floor(r/1e9);return{sec:t+i,nsec:r-i*1e9}}function kM(n){if(n instanceof Date){const e=TM(n);return $M(e)}else return null}function RM(n){const e=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const t=e.getUint32(0),r=e.getUint32(4),i=(t&3)*4294967296+r,s=t>>>2;return{sec:i,nsec:s}}case 12:{const t=BC(e,4),r=e.getUint32(0);return{sec:t,nsec:r}}default:throw new qr(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${n.length}`)}}function UM(n){const e=RM(n);return new Date(e.sec*1e3+e.nsec/1e6)}const LM={type:_M,encode:kM,decode:UM};class dm{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(LM)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{const i=-1-e;this.builtInEncoders[i]=t,this.builtInDecoders[i]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const s=i(e,t);if(s!=null){const o=-1-r;return new ey(o,s)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const s=i(e,t);if(s!=null){const o=r;return new ey(o,s)}}}return e instanceof ey?e:null}decode(e,t,r){const i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,r):new ey(t,e)}}dm.defaultCodec=new dm;function FM(n){return n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer}function sE(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):FM(n)?new Uint8Array(n):Uint8Array.from(n)}const MM=100,jM=2048;let zM=class PC{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??dm.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??MM,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??jM,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new PC({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){const t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(e){const t=new ArrayBuffer(e),r=new Uint8Array(t),i=new DataView(t);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=mM(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),xM(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,t){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);const r=sE(e);this.writeU8a(r)}encodeArray(e,t){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of e)this.doEncode(i,t+1)}countWithoutUndefined(e,t){let r=0;for(const i of t)e[i]!==void 0&&r++;return r}encodeMap(e,t){const r=Object.keys(e);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const s of r){const o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,t+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(r);return}const t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),PM(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),OC(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function HM(n,e){return new zM(e).encodeSharedRef(n)}function Xb(n){return`${n<0?"-":""}0x${Math.abs(n).toString(16).padStart(2,"0")}`}const VM=16,qM=16;class KM{constructor(e=VM,t=qM){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,r){const i=this.caches[r-1];e:for(const s of i){const o=s.bytes;for(let c=0;c<r;c++)if(o[c]!==e[t+c])continue e;return s.str}return null}store(e,t){const r=this.caches[e.length-1],i={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(e,t,r){const i=this.find(e,t,r);if(i!=null)return this.hit++,i;this.miss++;const s=IC(e,t,r),o=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(o,s),s}}const oE="array",xp="map_key",CC="map_value",GM=n=>{if(typeof n=="string"||typeof n=="number")return n;throw new qr("The type of key must be string or number but "+typeof n)};class WM{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const t=this.getUninitializedStateFromPool();t.type=oE,t.position=0,t.size=e,t.array=new Array(e)}pushMapState(e){const t=this.getUninitializedStateFromPool();t.type=xp,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===oE){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===xp||e.type===CC){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Hd=-1,R3=new DataView(new ArrayBuffer(0)),QM=new Uint8Array(R3.buffer);try{R3.getInt8(0)}catch(n){if(!(n instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const yI=new RangeError("Insufficient data"),ZM=new KM;let JM=class _C{constructor(e){this.totalPos=0,this.pos=0,this.view=R3,this.bytes=QM,this.headByte=Hd,this.stack=new WM,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??dm.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??zd,this.maxBinLength=(e==null?void 0:e.maxBinLength)??zd,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??zd,this.maxMapLength=(e==null?void 0:e.maxMapLength)??zd,this.maxExtLength=(e==null?void 0:e.maxExtLength)??zd,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:ZM,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??GM}clone(){return new _C({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Hd,this.stack.reset()}setBuffer(e){const t=sE(e);this.bytes=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Hd&&!this.hasRemaining(1))this.setBuffer(e);else{const t=this.bytes.subarray(this.pos),r=sE(e),i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:t,pos:r}=this;return new RangeError(`Extra ${t.byteLength-r} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let t=!1,r;for await(const c of e){if(t)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{r=this.doDecodeSync(),t=!0}catch(u){if(!(u instanceof RangeError))throw u}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Xb(i)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,t){if(this.entered){yield*this.clone().decodeMultiAsync(e,t);return}try{this.entered=!0;let r=t,i=-1;for await(const s of e){if(t&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){const i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e<160){const i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else{const i=e-160;t=this.decodeString(i,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)this.useBigInt64?t=this.readU64AsBigInt():t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)this.useBigInt64?t=this.readI64AsBigInt():t=this.readI64();else if(e===217){const i=this.lookU8();t=this.decodeString(i,1)}else if(e===218){const i=this.lookU16();t=this.decodeString(i,2)}else if(e===219){const i=this.lookU32();t=this.decodeString(i,4)}else if(e===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else if(e===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else if(e===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e===196){const i=this.lookU8();t=this.decodeBinary(i,1)}else if(e===197){const i=this.lookU16();t=this.decodeBinary(i,2)}else if(e===198){const i=this.lookU32();t=this.decodeBinary(i,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){const i=this.lookU8();t=this.decodeExtension(i,1)}else if(e===200){const i=this.lookU16();t=this.decodeExtension(i,2)}else if(e===201){const i=this.lookU32();t=this.decodeExtension(i,4)}else throw new qr(`Unrecognized type byte: ${Xb(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===oE)if(i.array[i.position]=t,i.position++,i.position===i.size)t=i.array,r.release(i);else continue e;else if(i.type===xp){if(t==="__proto__")throw new qr("The key __proto__ is not allowed");i.key=this.mapKeyConverter(t),i.type=CC;continue e}else if(i.map[i.key]=t,i.readCount++,i.readCount===i.size)t=i.map,r.release(i);else{i.key=null,i.type=xp;continue e}}return t}}readHeadByte(){return this.headByte===Hd&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Hd}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new qr(`Unrecognized array type byte: ${Xb(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new qr(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new qr(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,t){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,t):this.decodeBinary(e,t)}decodeUtf8String(e,t){var s;if(e>this.maxStrLength)throw new qr(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw yI;const r=this.pos+t;let i;return this.stateIsMapKey()&&((s=this.keyDecoder)!=null&&s.canBeCached(e))?i=this.keyDecoder.decode(this.bytes,r,e):i=BM(this.bytes,r,e),this.pos+=t+e,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===xp:!1}decodeBinary(e,t){if(e>this.maxBinLength)throw new qr(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw yI;const r=this.pos+t,i=this.bytes.subarray(r,r+e);return this.pos+=t+e,i}decodeExtension(e,t){if(e>this.maxExtLength)throw new qr(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+t),i=this.decodeBinary(e,t+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=CM(this.view,this.pos);return this.pos+=8,e}readI64(){const e=BC(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function YM(n,e){return new JM(e).decode(n)}const XM=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),ej=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function tj(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return ej(n)}catch{return n}}function nj(n){return typeof n=="string"?n:XM(n)||""}function rj(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function NC(n,...e){if(!rj(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function mI(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function ij(n,e){NC(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const Zu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e2=n=>new DataView(n.buffer,n.byteOffset,n.byteLength);function sj(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function DC(n){return typeof n=="string"&&(n=sj(n)),NC(n),n}let oj=class{clone(){return this._cloneInto()}};function aj(n){const e=r=>n().update(DC(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function $C(n=32){if(Zu&&typeof Zu.getRandomValues=="function")return Zu.getRandomValues(new Uint8Array(n));if(Zu&&typeof Zu.randomBytes=="function")return Zu.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function cj(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}let lj=class extends oj{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=e2(this.buffer)}update(e){mI(this);const{view:t,buffer:r,blockLen:i}=this;e=DC(e);const s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=e2(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){mI(this),ij(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let g=o;g<i;g++)t[g]=0;cj(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=e2(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)c.setUint32(4*g,h[g],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}};const ty=BigInt(2**32-1),aE=BigInt(32);function TC(n,e=!1){return e?{h:Number(n&ty),l:Number(n>>aE&ty)}:{h:Number(n>>aE&ty)|0,l:Number(n&ty)|0}}function uj(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=TC(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const fj=(n,e)=>BigInt(n>>>0)<<aE|BigInt(e>>>0),hj=(n,e,t)=>n>>>t,dj=(n,e,t)=>n<<32-t|e>>>t,pj=(n,e,t)=>n>>>t|e<<32-t,gj=(n,e,t)=>n<<32-t|e>>>t,yj=(n,e,t)=>n<<64-t|e>>>t-32,mj=(n,e,t)=>n>>>t-32|e<<64-t,wj=(n,e)=>e,bj=(n,e)=>n,vj=(n,e,t)=>n<<t|e>>>32-t,Ej=(n,e,t)=>e<<t|n>>>32-t,xj=(n,e,t)=>e<<t-32|n>>>64-t,Aj=(n,e,t)=>n<<t-32|e>>>64-t;function Sj(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const Ij=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Oj=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Bj=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Pj=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,Cj=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),_j=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Fe={fromBig:TC,split:uj,toBig:fj,shrSH:hj,shrSL:dj,rotrSH:pj,rotrSL:gj,rotrBH:yj,rotrBL:mj,rotr32H:wj,rotr32L:bj,rotlSH:vj,rotlSL:Ej,rotlBH:xj,rotlBL:Aj,add:Sj,add3L:Ij,add3H:Oj,add4L:Bj,add4H:Pj,add5H:_j,add5L:Cj},[Nj,Dj]=Fe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),wa=new Uint32Array(80),ba=new Uint32Array(80);let $j=class extends lj{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:f,El:h,Fh:g,Fl:p,Gh:m,Gl:v,Hh:b,Hl:A}=this;return[e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=h|0,this.Fh=g|0,this.Fl=p|0,this.Gh=m|0,this.Gl=v|0,this.Hh=b|0,this.Hl=A|0}process(e,t){for(let O=0;O<16;O++,t+=4)wa[O]=e.getUint32(t),ba[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const T=wa[O-15]|0,R=ba[O-15]|0,j=Fe.rotrSH(T,R,1)^Fe.rotrSH(T,R,8)^Fe.shrSH(T,R,7),H=Fe.rotrSL(T,R,1)^Fe.rotrSL(T,R,8)^Fe.shrSL(T,R,7),V=wa[O-2]|0,M=ba[O-2]|0,G=Fe.rotrSH(V,M,19)^Fe.rotrBH(V,M,61)^Fe.shrSH(V,M,6),Q=Fe.rotrSL(V,M,19)^Fe.rotrBL(V,M,61)^Fe.shrSL(V,M,6),z=Fe.add4L(H,Q,ba[O-7],ba[O-16]),P=Fe.add4H(z,j,G,wa[O-7],wa[O-16]);wa[O]=P|0,ba[O]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:f,Dl:h,Eh:g,El:p,Fh:m,Fl:v,Gh:b,Gl:A,Hh:_,Hl:U}=this;for(let O=0;O<80;O++){const T=Fe.rotrSH(g,p,14)^Fe.rotrSH(g,p,18)^Fe.rotrBH(g,p,41),R=Fe.rotrSL(g,p,14)^Fe.rotrSL(g,p,18)^Fe.rotrBL(g,p,41),j=g&m^~g&b,H=p&v^~p&A,V=Fe.add5L(U,R,H,Dj[O],ba[O]),M=Fe.add5H(V,_,T,j,Nj[O],wa[O]),G=V|0,Q=Fe.rotrSH(r,i,28)^Fe.rotrBH(r,i,34)^Fe.rotrBH(r,i,39),z=Fe.rotrSL(r,i,28)^Fe.rotrBL(r,i,34)^Fe.rotrBL(r,i,39),P=r&s^r&c^s&c,D=i&o^i&u^o&u;_=b|0,U=A|0,b=m|0,A=v|0,m=g|0,v=p|0,{h:g,l:p}=Fe.add(f|0,h|0,M|0,G|0),f=c|0,h=u|0,c=s|0,u=o|0,s=r|0,o=i|0;const w=Fe.add3L(G,z,D);r=Fe.add3H(w,M,Q,P),i=w|0}({h:r,l:i}=Fe.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Fe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=Fe.add(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:h}=Fe.add(this.Dh|0,this.Dl|0,f|0,h|0),{h:g,l:p}=Fe.add(this.Eh|0,this.El|0,g|0,p|0),{h:m,l:v}=Fe.add(this.Fh|0,this.Fl|0,m|0,v|0),{h:b,l:A}=Fe.add(this.Gh|0,this.Gl|0,b|0,A|0),{h:_,l:U}=Fe.add(this.Hh|0,this.Hl|0,_|0,U|0),this.set(r,i,s,o,c,u,f,h,g,p,m,v,b,A,_,U)}roundClean(){wa.fill(0),ba.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Tj=aj(()=>new $j);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const U3=BigInt(0),kC=BigInt(1),kj=BigInt(2);function L3(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function F3(n){if(!L3(n))throw new Error("Uint8Array expected")}function t2(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const Rj=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function M3(n){F3(n);let e="";for(let t=0;t<n.length;t++)e+=Rj[n[t]];return e}function RC(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?U3:BigInt("0x"+n)}const Qs={_0:48,_9:57,A:65,F:70,a:97,f:102};function wI(n){if(n>=Qs._0&&n<=Qs._9)return n-Qs._0;if(n>=Qs.A&&n<=Qs.F)return n-(Qs.A-10);if(n>=Qs.a&&n<=Qs.f)return n-(Qs.a-10)}function UC(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=wI(n.charCodeAt(s)),c=wI(n.charCodeAt(s+1));if(o===void 0||c===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+c}return r}function Uj(n){return RC(M3(n))}function zy(n){return F3(n),RC(M3(Uint8Array.from(n).reverse()))}function LC(n,e){return UC(n.toString(16).padStart(e*2,"0"))}function cE(n,e){return LC(n,e).reverse()}function Zs(n,e,t){let r;if(typeof e=="string")try{r=UC(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(L3(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function bI(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];F3(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}const n2=n=>typeof n=="bigint"&&U3<=n;function Lj(n,e,t){return n2(n)&&n2(e)&&n2(t)&&e<=n&&n<t}function Vd(n,e,t,r){if(!Lj(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function Fj(n){let e;for(e=0;n>U3;n>>=kC,e+=1);return e}const Mj=n=>(kj<<BigInt(n-1))-kC,jj={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||L3(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function j3(n,e,t={}){const r=(i,s,o)=>{const c=jj[s];if(typeof c!="function")throw new Error("invalid validator function");const u=n[i];if(!(o&&u===void 0)&&!c(u,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}function vI(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const an=BigInt(0),kt=BigInt(1),dl=BigInt(2),zj=BigInt(3),lE=BigInt(4),EI=BigInt(5),xI=BigInt(8);function Kt(n,e){const t=n%e;return t>=an?t:e+t}function Hj(n,e,t){if(e<an)throw new Error("invalid exponent, negatives unsupported");if(t<=an)throw new Error("invalid modulus");if(t===kt)return an;let r=kt;for(;e>an;)e&kt&&(r=r*n%t),n=n*n%t,e>>=kt;return r}function ds(n,e,t){let r=n;for(;e-- >an;)r*=r,r%=t;return r}function AI(n,e){if(n===an)throw new Error("invert: expected non-zero number");if(e<=an)throw new Error("invert: expected positive modulus, got "+e);let t=Kt(n,e),r=e,i=an,s=kt;for(;t!==an;){const o=r/t,c=r%t,u=i-s*o;r=t,t=c,i=s,s=u}if(r!==kt)throw new Error("invert: does not exist");return Kt(i,e)}function Vj(n){const e=(n-kt)/dl;let t,r,i;for(t=n-kt,r=0;t%dl===an;t/=dl,r++);for(i=dl;i<n&&Hj(i,e,n)!==n-kt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+kt)/lE;return function(c,u){const f=c.pow(u,o);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+kt)/dl;return function(o,c){if(o.pow(c,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=r,f=o.pow(o.mul(o.ONE,i),t),h=o.pow(c,s),g=o.pow(c,t);for(;!o.eql(g,o.ONE);){if(o.eql(g,o.ZERO))return o.ZERO;let p=1;for(let v=o.sqr(g);p<u&&!o.eql(v,o.ONE);p++)v=o.sqr(v);const m=o.pow(f,kt<<BigInt(u-p-1));f=o.sqr(m),h=o.mul(h,m),g=o.mul(g,f),u=p}return h}}function qj(n){if(n%lE===zj){const e=(n+kt)/lE;return function(t,r){const i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw new Error("Cannot find square root");return i}}if(n%xI===EI){const e=(n-EI)/xI;return function(t,r){const i=t.mul(r,dl),s=t.pow(i,e),o=t.mul(r,s),c=t.mul(t.mul(o,dl),s),u=t.mul(o,t.sub(c,t.ONE));if(!t.eql(t.sqr(u),r))throw new Error("Cannot find square root");return u}}return Vj(n)}const Kj=(n,e)=>(Kt(n,e)&kt)===kt,Gj=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Wj(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Gj.reduce((r,i)=>(r[i]="function",r),e);return j3(n,t)}function Qj(n,e,t){if(t<an)throw new Error("invalid exponent, negatives unsupported");if(t===an)return n.ONE;if(t===kt)return e;let r=n.ONE,i=e;for(;t>an;)t&kt&&(r=n.mul(r,i)),i=n.sqr(i),t>>=kt;return r}function Zj(n,e){const t=new Array(e.length),r=e.reduce((s,o,c)=>n.is0(o)?s:(t[c]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,c)=>n.is0(o)?s:(t[c]=n.mul(s,t[c]),n.mul(s,o)),i),t}function FC(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function MC(n,e,t=!1,r={}){if(n<=an)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:s}=FC(n,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const c=Object.freeze({ORDER:n,isLE:t,BITS:i,BYTES:s,MASK:Mj(i),ZERO:an,ONE:kt,create:u=>Kt(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return an<=u&&u<n},is0:u=>u===an,isOdd:u=>(u&kt)===kt,neg:u=>Kt(-u,n),eql:(u,f)=>u===f,sqr:u=>Kt(u*u,n),add:(u,f)=>Kt(u+f,n),sub:(u,f)=>Kt(u-f,n),mul:(u,f)=>Kt(u*f,n),pow:(u,f)=>Qj(c,u,f),div:(u,f)=>Kt(u*AI(f,n),n),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>AI(u,n),sqrt:r.sqrt||(u=>(o||(o=qj(n)),o(c,u))),invertBatch:u=>Zj(c,u),cmov:(u,f,h)=>h?f:u,toBytes:u=>t?cE(u,s):LC(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return t?zy(u):Uj(u)}});return Object.freeze(c)}const SI=BigInt(0),ny=BigInt(1);function r2(n,e){const t=e.negate();return n?t:e}function jC(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function i2(n,e){jC(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function Jj(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function Yj(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const s2=new WeakMap,zC=new WeakMap;function o2(n){return zC.get(n)||1}function Xj(n,e){return{constTimeNegate:r2,hasPrecomputes(t){return o2(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>SI;)r&ny&&(i=i.add(s)),s=s.double(),r>>=ny;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=i2(r,e),o=[];let c=t,u=c;for(let f=0;f<i;f++){u=c,o.push(u);for(let h=1;h<s;h++)u=u.add(c),o.push(u);c=u.double()}return o},wNAF(t,r,i){const{windows:s,windowSize:o}=i2(t,e);let c=n.ZERO,u=n.BASE;const f=BigInt(2**t-1),h=2**t,g=BigInt(t);for(let p=0;p<s;p++){const m=p*o;let v=Number(i&f);i>>=g,v>o&&(v-=h,i+=ny);const b=m,A=m+Math.abs(v)-1,_=p%2!==0,U=v<0;v===0?u=u.add(r2(_,r[b])):c=c.add(r2(U,r[A]))}return{p:c,f:u}},wNAFUnsafe(t,r,i,s=n.ZERO){const{windows:o,windowSize:c}=i2(t,e),u=BigInt(2**t-1),f=2**t,h=BigInt(t);for(let g=0;g<o;g++){const p=g*c;if(i===SI)break;let m=Number(i&u);if(i>>=h,m>c&&(m-=f,i+=ny),m===0)continue;let v=r[p+Math.abs(m)-1];m<0&&(v=v.negate()),s=s.add(v)}return s},getPrecomputes(t,r,i){let s=s2.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&s2.set(r,i(s))),s},wNAFCached(t,r,i){const s=o2(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const o=o2(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),r,s)},setWindowSize(t,r){jC(r,e),zC.set(t,r),s2.delete(t)}}}function ez(n,e,t,r){if(Jj(t,n),Yj(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=n.ZERO,s=Fj(BigInt(t.length)),o=s>12?s-3:s>4?s-2:s?2:1,c=(1<<o)-1,u=new Array(c+1).fill(i),f=Math.floor((e.BITS-1)/o)*o;let h=i;for(let g=f;g>=0;g-=o){u.fill(i);for(let m=0;m<r.length;m++){const v=r[m],b=Number(v>>BigInt(g)&BigInt(c));u[b]=u[b].add(t[m])}let p=i;for(let m=u.length-1,v=i;m>0;m--)v=v.add(u[m]),p=p.add(v);if(h=h.add(p),g!==0)for(let m=0;m<o;m++)h=h.double()}return h}function tz(n){return Wj(n.Fp),j3(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...FC(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const _i=BigInt(0),fr=BigInt(1),ry=BigInt(2),nz=BigInt(8),rz={zip215:!0};function iz(n){const e=tz(n);return j3(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function sz(n){const e=iz(n),{Fp:t,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:c,h:u}=e,f=ry<<BigInt(c*8)-fr,h=t.create,g=MC(e.n,e.nBitLength),p=e.uvRatio||((w,x)=>{try{return{isValid:!0,value:t.sqrt(w*t.inv(x))}}catch{return{isValid:!1,value:_i}}}),m=e.adjustScalarBytes||(w=>w),v=e.domain||((w,x,B)=>{if(t2("phflag",B),x.length||B)throw new Error("Contexts/pre-hash are not supported");return w});function b(w,x){Vd("coordinate "+w,x,_i,f)}function A(w){if(!(w instanceof O))throw new Error("ExtendedPoint expected")}const _=vI((w,x)=>{const{ex:B,ey:C,ez:I}=w,N=w.is0();x==null&&(x=N?nz:t.inv(I));const $=h(B*x),L=h(C*x),Y=h(I*x);if(N)return{x:_i,y:fr};if(Y!==fr)throw new Error("invZ was invalid");return{x:$,y:L}}),U=vI(w=>{const{a:x,d:B}=e;if(w.is0())throw new Error("bad point: ZERO");const{ex:C,ey:I,ez:N,et:$}=w,L=h(C*C),Y=h(I*I),q=h(N*N),Z=h(q*q),te=h(L*x),re=h(q*h(te+Y)),le=h(Z+h(B*h(L*Y)));if(re!==le)throw new Error("bad point: equation left != right (1)");const se=h(C*I),ue=h(N*$);if(se!==ue)throw new Error("bad point: equation left != right (2)");return!0});class O{constructor(x,B,C,I){this.ex=x,this.ey=B,this.ez=C,this.et=I,b("x",x),b("y",B),b("z",C),b("t",I),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof O)throw new Error("extended point not allowed");const{x:B,y:C}=x||{};return b("x",B),b("y",C),new O(B,C,fr,h(B*C))}static normalizeZ(x){const B=t.invertBatch(x.map(C=>C.ez));return x.map((C,I)=>C.toAffine(B[I])).map(O.fromAffine)}static msm(x,B){return ez(O,g,x,B)}_setWindowSize(x){j.setWindowSize(this,x)}assertValidity(){U(this)}equals(x){A(x);const{ex:B,ey:C,ez:I}=this,{ex:N,ey:$,ez:L}=x,Y=h(B*L),q=h(N*I),Z=h(C*L),te=h($*I);return Y===q&&Z===te}is0(){return this.equals(O.ZERO)}negate(){return new O(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:x}=e,{ex:B,ey:C,ez:I}=this,N=h(B*B),$=h(C*C),L=h(ry*h(I*I)),Y=h(x*N),q=B+C,Z=h(h(q*q)-N-$),te=Y+$,re=te-L,le=Y-$,se=h(Z*re),ue=h(te*le),Ne=h(Z*le),Re=h(re*te);return new O(se,ue,Re,Ne)}add(x){A(x);const{a:B,d:C}=e,{ex:I,ey:N,ez:$,et:L}=this,{ex:Y,ey:q,ez:Z,et:te}=x;if(B===BigInt(-1)){const bu=h((N-I)*(q+Y)),Ko=h((N+I)*(q-Y)),ss=h(Ko-bu);if(ss===_i)return this.double();const vu=h($*ry*te),Kh=h(L*ry*Z),Gh=Kh+vu,Wh=Ko+bu,Qh=Kh-vu,Zh=h(Gh*ss),Eu=h(Wh*Qh),kg=h(Gh*Qh),Mc=h(ss*Wh);return new O(Zh,Eu,Mc,kg)}const re=h(I*Y),le=h(N*q),se=h(L*C*te),ue=h($*Z),Ne=h((I+N)*(Y+q)-re-le),Re=ue-se,ke=ue+se,Ve=h(le-B*re),Qt=h(Ne*Re),cn=h(ke*Ve),xi=h(Ne*Ve),Ms=h(Re*ke);return new O(Qt,cn,Ms,xi)}subtract(x){return this.add(x.negate())}wNAF(x){return j.wNAFCached(this,x,O.normalizeZ)}multiply(x){const B=x;Vd("scalar",B,fr,r);const{p:C,f:I}=this.wNAF(B);return O.normalizeZ([C,I])[0]}multiplyUnsafe(x,B=O.ZERO){const C=x;return Vd("scalar",C,_i,r),C===_i?R:this.is0()||C===fr?this:j.wNAFCachedUnsafe(this,C,O.normalizeZ,B)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return j.unsafeLadder(this,r).is0()}toAffine(x){return _(this,x)}clearCofactor(){const{h:x}=e;return x===fr?this:this.multiplyUnsafe(x)}static fromHex(x,B=!1){const{d:C,a:I}=e,N=t.BYTES;x=Zs("pointHex",x,N),t2("zip215",B);const $=x.slice(),L=x[N-1];$[N-1]=L&-129;const Y=zy($),q=B?f:t.ORDER;Vd("pointHex.y",Y,_i,q);const Z=h(Y*Y),te=h(Z-fr),re=h(C*Z-I);let{isValid:le,value:se}=p(te,re);if(!le)throw new Error("Point.fromHex: invalid y coordinate");const ue=(se&fr)===fr,Ne=(L&128)!==0;if(!B&&se===_i&&Ne)throw new Error("Point.fromHex: x=0 and x_0=1");return Ne!==ue&&(se=h(-se)),O.fromAffine({x:se,y:Y})}static fromPrivateKey(x){return M(x).point}toRawBytes(){const{x,y:B}=this.toAffine(),C=cE(B,t.BYTES);return C[C.length-1]|=x&fr?128:0,C}toHex(){return M3(this.toRawBytes())}}O.BASE=new O(e.Gx,e.Gy,fr,h(e.Gx*e.Gy)),O.ZERO=new O(_i,fr,fr,_i);const{BASE:T,ZERO:R}=O,j=Xj(O,c*8);function H(w){return Kt(w,r)}function V(w){return H(zy(w))}function M(w){const x=t.BYTES;w=Zs("private key",w,x);const B=Zs("hashed private key",s(w),2*x),C=m(B.slice(0,x)),I=B.slice(x,2*x),N=V(C),$=T.multiply(N),L=$.toRawBytes();return{head:C,prefix:I,scalar:N,point:$,pointBytes:L}}function G(w){return M(w).pointBytes}function Q(w=new Uint8Array,...x){const B=bI(...x);return V(s(v(B,Zs("context",w),!!i)))}function z(w,x,B={}){w=Zs("message",w),i&&(w=i(w));const{prefix:C,scalar:I,pointBytes:N}=M(x),$=Q(B.context,C,w),L=T.multiply($).toRawBytes(),Y=Q(B.context,L,N,w),q=H($+Y*I);Vd("signature.s",q,_i,r);const Z=bI(L,cE(q,t.BYTES));return Zs("result",Z,t.BYTES*2)}const P=rz;function D(w,x,B,C=P){const{context:I,zip215:N}=C,$=t.BYTES;w=Zs("signature",w,2*$),x=Zs("message",x),B=Zs("publicKey",B,$),N!==void 0&&t2("zip215",N),i&&(x=i(x));const L=zy(w.slice($,2*$));let Y,q,Z;try{Y=O.fromHex(B,N),q=O.fromHex(w.slice(0,$),N),Z=T.multiplyUnsafe(L)}catch{return!1}if(!N&&Y.isSmallOrder())return!1;const te=Q(I,q.toRawBytes(),Y.toRawBytes(),x);return q.add(Y.multiplyUnsafe(te)).subtract(Z).clearCofactor().equals(O.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:G,sign:z,verify:D,ExtendedPoint:O,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>o(t.BYTES),precompute(w=8,x=O.BASE){return x._setWindowSize(w),x.multiply(BigInt(3)),x}}}}BigInt(0),BigInt(1);const z3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),II=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const oz=BigInt(1),OI=BigInt(2);BigInt(3);const az=BigInt(5),cz=BigInt(8);function lz(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=z3,o=n*n%s*n%s,c=ds(o,OI,s)*o%s,u=ds(c,oz,s)*n%s,f=ds(u,az,s)*u%s,h=ds(f,e,s)*f%s,g=ds(h,t,s)*h%s,p=ds(g,r,s)*g%s,m=ds(p,i,s)*p%s,v=ds(m,i,s)*p%s,b=ds(v,e,s)*f%s;return{pow_p_5_8:ds(b,OI,s)*n%s,b2:o}}function uz(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function fz(n,e){const t=z3,r=Kt(e*e*e,t),i=Kt(r*r*e,t),s=lz(n*i).pow_p_5_8;let o=Kt(n*r*s,t);const c=Kt(e*o*o,t),u=o,f=Kt(o*II,t),h=c===n,g=c===Kt(-n,t),p=c===Kt(-n*II,t);return h&&(o=u),(g||p)&&(o=f),Kj(o,t)&&(o=Kt(-o,t)),{isValid:h||g,value:o}}const hz=MC(z3,void 0,!0),dz={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:hz,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:cz,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Tj,randomBytes:$C,adjustScalarBytes:uz,uvRatio:fz},HC=sz(dz),pz="EdDSA",gz="JWT",pm=".",ow="base64url",VC="utf8",qC="utf8",yz=":",mz="did",wz="key",BI="base58btc",bz="z",vz="K36",Ez=32;function H3(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function KC(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?H3(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function GC(n,e){e||(e=n.reduce((i,s)=>i+s.length,0));const t=KC(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return H3(t)}function xz(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var c=n.length,u=n.charAt(0),f=Math.log(c)/Math.log(256),h=Math.log(256)/Math.log(c);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var b=0,A=0,_=0,U=v.length;_!==U&&v[_]===0;)_++,b++;for(var O=(U-_)*h+1>>>0,T=new Uint8Array(O);_!==U;){for(var R=v[_],j=0,H=O-1;(R!==0||j<A)&&H!==-1;H--,j++)R+=256*T[H]>>>0,T[H]=R%c>>>0,R=R/c>>>0;if(R!==0)throw new Error("Non-zero carry");A=j,_++}for(var V=O-A;V!==O&&T[V]===0;)V++;for(var M=u.repeat(b);V<O;++V)M+=n.charAt(T[V]);return M}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var b=0;if(v[b]!==" "){for(var A=0,_=0;v[b]===u;)A++,b++;for(var U=(v.length-b)*f+1>>>0,O=new Uint8Array(U);v[b];){var T=t[v.charCodeAt(b)];if(T===255)return;for(var R=0,j=U-1;(T!==0||R<_)&&j!==-1;j--,R++)T+=c*O[j]>>>0,O[j]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=R,b++}if(v[b]!==" "){for(var H=U-_;H!==U&&O[H]===0;)H++;for(var V=new Uint8Array(A+(U-H)),M=A;H!==U;)V[M++]=O[H++];return V}}}function m(v){var b=p(v);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:p,decode:m}}var Az=xz,Sz=Az;const WC=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Iz=n=>new TextEncoder().encode(n),Oz=n=>new TextDecoder().decode(n);let Bz=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Pz=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return QC(this,e)}},Cz=class{constructor(e){this.decoders=e}or(e){return QC(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const QC=(n,e)=>new Cz({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});let _z=class{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new Bz(e,t,r),this.decoder=new Pz(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const aw=({name:n,prefix:e,encode:t,decode:r})=>new _z(n,e,t,r),bg=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=Sz(t,e);return aw({prefix:n,name:e,encode:r,decode:s=>WC(i(s))})},Nz=(n,e,t,r)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=n.length;for(;n[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let c=0,u=0,f=0;for(let h=0;h<s;++h){const g=i[n[h]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<t|g,c+=t,c>=8&&(c-=8,o[f++]=255&u>>c)}if(c>=t||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return o},Dz=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let s="",o=0,c=0;for(let u=0;u<n.length;++u)for(c=c<<8|n[u],o+=8;o>t;)o-=t,s+=e[i&c>>o];if(o&&(s+=e[i&c<<t-o]),r)for(;s.length*t&7;)s+="=";return s},vn=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>aw({prefix:e,name:n,encode(i){return Dz(i,r,t)},decode(i){return Nz(i,r,t,n)}}),$z=aw({prefix:"\0",name:"identity",encode:n=>Oz(n),decode:n=>Iz(n)});var Tz=Object.freeze({__proto__:null,identity:$z});const kz=vn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Rz=Object.freeze({__proto__:null,base2:kz});const Uz=vn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Lz=Object.freeze({__proto__:null,base8:Uz});const Fz=bg({prefix:"9",name:"base10",alphabet:"0123456789"});var Mz=Object.freeze({__proto__:null,base10:Fz});const jz=vn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),zz=vn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Hz=Object.freeze({__proto__:null,base16:jz,base16upper:zz});const Vz=vn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qz=vn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Kz=vn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gz=vn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Wz=vn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Qz=vn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Zz=vn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Jz=vn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Yz=vn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Xz=Object.freeze({__proto__:null,base32:Vz,base32upper:qz,base32pad:Kz,base32padupper:Gz,base32hex:Wz,base32hexupper:Qz,base32hexpad:Zz,base32hexpadupper:Jz,base32z:Yz});const eH=bg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tH=bg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var nH=Object.freeze({__proto__:null,base36:eH,base36upper:tH});const rH=bg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),iH=bg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var sH=Object.freeze({__proto__:null,base58btc:rH,base58flickr:iH});const oH=vn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),aH=vn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cH=vn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),lH=vn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var uH=Object.freeze({__proto__:null,base64:oH,base64pad:aH,base64url:cH,base64urlpad:lH});const ZC=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),fH=ZC.reduce((n,e,t)=>(n[t]=e,n),[]),hH=ZC.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function dH(n){return n.reduce((e,t)=>(e+=fH[t],e),"")}function pH(n){const e=[];for(const t of n){const r=hH[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const gH=aw({prefix:"🚀",name:"base256emoji",encode:dH,decode:pH});var yH=Object.freeze({__proto__:null,base256emoji:gH}),mH=JC,PI=128,wH=-128,bH=Math.pow(2,31);function JC(n,e,t){e=e||[],t=t||0;for(var r=t;n>=bH;)e[t++]=n&255|PI,n/=128;for(;n&wH;)e[t++]=n&255|PI,n>>>=7;return e[t]=n|0,JC.bytes=t-r+1,e}var vH=uE,EH=128,CI=127;function uE(n,r){var t=0,r=r||0,i=0,s=r,o,c=n.length;do{if(s>=c)throw uE.bytes=0,new RangeError("Could not decode varint");o=n[s++],t+=i<28?(o&CI)<<i:(o&CI)*Math.pow(2,i),i+=7}while(o>=EH);return uE.bytes=s-r,t}var xH=Math.pow(2,7),AH=Math.pow(2,14),SH=Math.pow(2,21),IH=Math.pow(2,28),OH=Math.pow(2,35),BH=Math.pow(2,42),PH=Math.pow(2,49),CH=Math.pow(2,56),_H=Math.pow(2,63),NH=function(n){return n<xH?1:n<AH?2:n<SH?3:n<IH?4:n<OH?5:n<BH?6:n<PH?7:n<CH?8:n<_H?9:10},DH={encode:mH,decode:vH,encodingLength:NH},YC=DH;const _I=(n,e,t=0)=>(YC.encode(n,e,t),e),NI=n=>YC.encodingLength(n),fE=(n,e)=>{const t=e.byteLength,r=NI(n),i=r+NI(t),s=new Uint8Array(i+t);return _I(n,s,0),_I(t,s,r),s.set(e,i),new $H(n,t,e,s)};let $H=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};const XC=({name:n,code:e,encode:t})=>new TH(n,e,t);let TH=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?fE(this.code,t):t.then(r=>fE(this.code,r))}else throw Error("Unknown type, must be binary type")}};const e_=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),kH=XC({name:"sha2-256",code:18,encode:e_("SHA-256")}),RH=XC({name:"sha2-512",code:19,encode:e_("SHA-512")});var UH=Object.freeze({__proto__:null,sha256:kH,sha512:RH});const t_=0,LH="identity",n_=WC,FH=n=>fE(t_,n_(n)),MH={code:t_,name:LH,encode:n_,digest:FH};var jH=Object.freeze({__proto__:null,identity:MH});new TextEncoder,new TextDecoder;const DI={...Tz,...Rz,...Lz,...Mz,...Hz,...Xz,...nH,...sH,...uH,...yH};({...UH,...jH});function r_(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const $I=r_("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),a2=r_("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=KC(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),i_={utf8:$I,"utf-8":$I,hex:DI.base16,latin1:a2,ascii:a2,binary:a2,...DI};function cw(n,e="utf8"){const t=i_[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}function Hh(n,e="utf8"){const t=i_[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?H3(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function TI(n){return tj(cw(Hh(n,ow),VC))}function gm(n){return cw(Hh(nj(n),VC),ow)}function s_(n){const e=Hh(vz,BI),t=bz+cw(GC([e,n]),BI);return[mz,wz,t].join(yz)}function zH(n){return cw(n,ow)}function HH(n){return Hh(n,ow)}function VH(n){return Hh([gm(n.header),gm(n.payload)].join(pm),qC)}function qH(n){return[gm(n.header),gm(n.payload),zH(n.signature)].join(pm)}function hE(n){const e=n.split(pm),t=TI(e[0]),r=TI(e[1]),i=HH(e[2]),s=Hh(e.slice(0,2).join(pm),qC);return{header:t,payload:r,signature:i,data:s}}function kI(n=$C(Ez)){const e=HC.getPublicKey(n);return{secretKey:GC([n,e]),publicKey:e}}async function KH(n,e,t,r,i=we.fromMiliseconds(Date.now())){const s={alg:pz,typ:gz},o=s_(r.publicKey),c=i+t,u={iss:o,sub:n,aud:e,iat:i,exp:c},f=VH({header:s,payload:u}),h=HC.sign(f,r.secretKey.slice(0,32));return qH({header:s,payload:u,signature:h})}function V3(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function o_(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?V3(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Ap(n,e){e||(e=n.reduce((i,s)=>i+s.length,0));const t=o_(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return V3(t)}function GH(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var c=n.length,u=n.charAt(0),f=Math.log(c)/Math.log(256),h=Math.log(256)/Math.log(c);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var b=0,A=0,_=0,U=v.length;_!==U&&v[_]===0;)_++,b++;for(var O=(U-_)*h+1>>>0,T=new Uint8Array(O);_!==U;){for(var R=v[_],j=0,H=O-1;(R!==0||j<A)&&H!==-1;H--,j++)R+=256*T[H]>>>0,T[H]=R%c>>>0,R=R/c>>>0;if(R!==0)throw new Error("Non-zero carry");A=j,_++}for(var V=O-A;V!==O&&T[V]===0;)V++;for(var M=u.repeat(b);V<O;++V)M+=n.charAt(T[V]);return M}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var b=0;if(v[b]!==" "){for(var A=0,_=0;v[b]===u;)A++,b++;for(var U=(v.length-b)*f+1>>>0,O=new Uint8Array(U);v[b];){var T=t[v.charCodeAt(b)];if(T===255)return;for(var R=0,j=U-1;(T!==0||R<_)&&j!==-1;j--,R++)T+=c*O[j]>>>0,O[j]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=R,b++}if(v[b]!==" "){for(var H=U-_;H!==U&&O[H]===0;)H++;for(var V=new Uint8Array(A+(U-H)),M=A;H!==U;)V[M++]=O[H++];return V}}}function m(v){var b=p(v);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:p,decode:m}}var WH=GH,QH=WH;const ZH=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},JH=n=>new TextEncoder().encode(n),YH=n=>new TextDecoder().decode(n);class XH{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class eV{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return a_(this,e)}}class tV{constructor(e){this.decoders=e}or(e){return a_(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const a_=(n,e)=>new tV({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class nV{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new XH(e,t,r),this.decoder=new eV(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const lw=({name:n,prefix:e,encode:t,decode:r})=>new nV(n,e,t,r),vg=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=QH(t,e);return lw({prefix:n,name:e,encode:r,decode:s=>ZH(i(s))})},rV=(n,e,t,r)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=n.length;for(;n[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let c=0,u=0,f=0;for(let h=0;h<s;++h){const g=i[n[h]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<t|g,c+=t,c>=8&&(c-=8,o[f++]=255&u>>c)}if(c>=t||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return o},iV=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let s="",o=0,c=0;for(let u=0;u<n.length;++u)for(c=c<<8|n[u],o+=8;o>t;)o-=t,s+=e[i&c>>o];if(o&&(s+=e[i&c<<t-o]),r)for(;s.length*t&7;)s+="=";return s},En=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>lw({prefix:e,name:n,encode(i){return iV(i,r,t)},decode(i){return rV(i,r,t,n)}}),sV=lw({prefix:"\0",name:"identity",encode:n=>YH(n),decode:n=>JH(n)}),oV=Object.freeze(Object.defineProperty({__proto__:null,identity:sV},Symbol.toStringTag,{value:"Module"})),aV=En({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),cV=Object.freeze(Object.defineProperty({__proto__:null,base2:aV},Symbol.toStringTag,{value:"Module"})),lV=En({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),uV=Object.freeze(Object.defineProperty({__proto__:null,base8:lV},Symbol.toStringTag,{value:"Module"})),fV=vg({prefix:"9",name:"base10",alphabet:"0123456789"}),hV=Object.freeze(Object.defineProperty({__proto__:null,base10:fV},Symbol.toStringTag,{value:"Module"})),dV=En({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pV=En({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),gV=Object.freeze(Object.defineProperty({__proto__:null,base16:dV,base16upper:pV},Symbol.toStringTag,{value:"Module"})),yV=En({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),mV=En({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),wV=En({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),bV=En({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vV=En({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),EV=En({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xV=En({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),AV=En({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),SV=En({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),IV=Object.freeze(Object.defineProperty({__proto__:null,base32:yV,base32hex:vV,base32hexpad:xV,base32hexpadupper:AV,base32hexupper:EV,base32pad:wV,base32padupper:bV,base32upper:mV,base32z:SV},Symbol.toStringTag,{value:"Module"})),OV=vg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),BV=vg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),PV=Object.freeze(Object.defineProperty({__proto__:null,base36:OV,base36upper:BV},Symbol.toStringTag,{value:"Module"})),CV=vg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_V=vg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),NV=Object.freeze(Object.defineProperty({__proto__:null,base58btc:CV,base58flickr:_V},Symbol.toStringTag,{value:"Module"})),DV=En({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$V=En({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),TV=En({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kV=En({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),RV=Object.freeze(Object.defineProperty({__proto__:null,base64:DV,base64pad:$V,base64url:TV,base64urlpad:kV},Symbol.toStringTag,{value:"Module"})),c_=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),UV=c_.reduce((n,e,t)=>(n[t]=e,n),[]),LV=c_.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function FV(n){return n.reduce((e,t)=>(e+=UV[t],e),"")}function MV(n){const e=[];for(const t of n){const r=LV[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const jV=lw({prefix:"🚀",name:"base256emoji",encode:FV,decode:MV}),zV=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:jV},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const RI={...oV,...cV,...uV,...hV,...gV,...IV,...PV,...NV,...RV,...zV};function l_(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const UI=l_("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),c2=l_("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=o_(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),u_={utf8:UI,"utf-8":UI,hex:RI.base16,latin1:c2,ascii:c2,binary:c2,...RI};function vi(n,e="utf8"){const t=u_[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?V3(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function Cr(n,e="utf8"){const t=u_[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}const HV={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var l2,LI;function f_(){if(LI)return l2;LI=1;const n="Input must be an string, Buffer or Uint8Array";function e(o){let c;if(o instanceof Uint8Array)c=o;else if(typeof o=="string")c=new TextEncoder().encode(o);else throw new Error(n);return c}function t(o){return Array.prototype.map.call(o,function(c){return(c<16?"0":"")+c.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function i(o,c,u){let f=`
`+o+" = ";for(let h=0;h<c.length;h+=2){if(u===32)f+=r(c[h]).toUpperCase(),f+=" ",f+=r(c[h+1]).toUpperCase();else if(u===64)f+=r(c[h+1]).toUpperCase(),f+=r(c[h]).toUpperCase();else throw new Error("Invalid size "+u);h%6===4?f+=`
`+new Array(o.length+4).join(" "):h<c.length-2&&(f+=" ")}console.log(f)}function s(o,c,u){let f=new Date().getTime();const h=new Uint8Array(c);for(let p=0;p<c;p++)h[p]=p%256;const g=new Date().getTime();console.log("Generated random input in "+(g-f)+"ms"),f=g;for(let p=0;p<u;p++){const m=o(h),v=new Date().getTime(),b=v-f;f=v,console.log("Hashed in "+b+"ms: "+m.substring(0,20)+"..."),console.log(Math.round(c/(1<<20)/(b/1e3)*100)/100+" MB PER SECOND")}}return l2={normalizeInput:e,toHex:t,debugPrint:i,testSpeed:s},l2}var u2,FI;function VV(){if(FI)return u2;FI=1;const n=f_();function e(_,U,O){const T=_[U]+_[O];let R=_[U+1]+_[O+1];T>=4294967296&&R++,_[U]=T,_[U+1]=R}function t(_,U,O,T){let R=_[U]+O;O<0&&(R+=4294967296);let j=_[U+1]+T;R>=4294967296&&j++,_[U]=R,_[U+1]=j}function r(_,U){return _[U]^_[U+1]<<8^_[U+2]<<16^_[U+3]<<24}function i(_,U,O,T,R,j){const H=f[R],V=f[R+1],M=f[j],G=f[j+1];e(u,_,U),t(u,_,H,V);let Q=u[T]^u[_],z=u[T+1]^u[_+1];u[T]=z,u[T+1]=Q,e(u,O,T),Q=u[U]^u[O],z=u[U+1]^u[O+1],u[U]=Q>>>24^z<<8,u[U+1]=z>>>24^Q<<8,e(u,_,U),t(u,_,M,G),Q=u[T]^u[_],z=u[T+1]^u[_+1],u[T]=Q>>>16^z<<16,u[T+1]=z>>>16^Q<<16,e(u,O,T),Q=u[U]^u[O],z=u[U+1]^u[O+1],u[U]=z>>>31^Q<<1,u[U+1]=Q>>>31^z<<1}const s=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],c=new Uint8Array(o.map(function(_){return _*2})),u=new Uint32Array(32),f=new Uint32Array(32);function h(_,U){let O=0;for(O=0;O<16;O++)u[O]=_.h[O],u[O+16]=s[O];for(u[24]=u[24]^_.t,u[25]=u[25]^_.t/4294967296,U&&(u[28]=~u[28],u[29]=~u[29]),O=0;O<32;O++)f[O]=r(_.b,4*O);for(O=0;O<12;O++)i(0,8,16,24,c[O*16+0],c[O*16+1]),i(2,10,18,26,c[O*16+2],c[O*16+3]),i(4,12,20,28,c[O*16+4],c[O*16+5]),i(6,14,22,30,c[O*16+6],c[O*16+7]),i(0,10,20,30,c[O*16+8],c[O*16+9]),i(2,12,22,24,c[O*16+10],c[O*16+11]),i(4,14,16,26,c[O*16+12],c[O*16+13]),i(6,8,18,28,c[O*16+14],c[O*16+15]);for(O=0;O<16;O++)_.h[O]=_.h[O]^u[O]^u[O+16]}const g=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function p(_,U,O,T){if(_===0||_>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(U&&U.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(O&&O.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(T&&T.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const R={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:_};g.fill(0),g[0]=_,U&&(g[1]=U.length),g[2]=1,g[3]=1,O&&g.set(O,32),T&&g.set(T,48);for(let j=0;j<16;j++)R.h[j]=s[j]^r(g,j*4);return U&&(m(R,U),R.c=128),R}function m(_,U){for(let O=0;O<U.length;O++)_.c===128&&(_.t+=_.c,h(_,!1),_.c=0),_.b[_.c++]=U[O]}function v(_){for(_.t+=_.c;_.c<128;)_.b[_.c++]=0;h(_,!0);const U=new Uint8Array(_.outlen);for(let O=0;O<_.outlen;O++)U[O]=_.h[O>>2]>>8*(O&3);return U}function b(_,U,O,T,R){O=O||64,_=n.normalizeInput(_),T&&(T=n.normalizeInput(T)),R&&(R=n.normalizeInput(R));const j=p(O,U,T,R);return m(j,_),v(j)}function A(_,U,O,T,R){const j=b(_,U,O,T,R);return n.toHex(j)}return u2={blake2b:b,blake2bHex:A,blake2bInit:p,blake2bUpdate:m,blake2bFinal:v},u2}var f2,MI;function qV(){if(MI)return f2;MI=1;const n=f_();function e(v,b){return v[b]^v[b+1]<<8^v[b+2]<<16^v[b+3]<<24}function t(v,b,A,_,U,O){o[v]=o[v]+o[b]+U,o[_]=r(o[_]^o[v],16),o[A]=o[A]+o[_],o[b]=r(o[b]^o[A],12),o[v]=o[v]+o[b]+O,o[_]=r(o[_]^o[v],8),o[A]=o[A]+o[_],o[b]=r(o[b]^o[A],7)}function r(v,b){return v>>>b^v<<32-b}const i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),s=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),c=new Uint32Array(16);function u(v,b){let A=0;for(A=0;A<8;A++)o[A]=v.h[A],o[A+8]=i[A];for(o[12]^=v.t,o[13]^=v.t/4294967296,b&&(o[14]=~o[14]),A=0;A<16;A++)c[A]=e(v.b,4*A);for(A=0;A<10;A++)t(0,4,8,12,c[s[A*16+0]],c[s[A*16+1]]),t(1,5,9,13,c[s[A*16+2]],c[s[A*16+3]]),t(2,6,10,14,c[s[A*16+4]],c[s[A*16+5]]),t(3,7,11,15,c[s[A*16+6]],c[s[A*16+7]]),t(0,5,10,15,c[s[A*16+8]],c[s[A*16+9]]),t(1,6,11,12,c[s[A*16+10]],c[s[A*16+11]]),t(2,7,8,13,c[s[A*16+12]],c[s[A*16+13]]),t(3,4,9,14,c[s[A*16+14]],c[s[A*16+15]]);for(A=0;A<8;A++)v.h[A]^=o[A]^o[A+8]}function f(v,b){if(!(v>0&&v<=32))throw new Error("Incorrect output length, should be in [1, 32]");const A=b?b.length:0;if(b&&!(A>0&&A<=32))throw new Error("Incorrect key length, should be in [1, 32]");const _={h:new Uint32Array(i),b:new Uint8Array(64),c:0,t:0,outlen:v};return _.h[0]^=16842752^A<<8^v,A>0&&(h(_,b),_.c=64),_}function h(v,b){for(let A=0;A<b.length;A++)v.c===64&&(v.t+=v.c,u(v,!1),v.c=0),v.b[v.c++]=b[A]}function g(v){for(v.t+=v.c;v.c<64;)v.b[v.c++]=0;u(v,!0);const b=new Uint8Array(v.outlen);for(let A=0;A<v.outlen;A++)b[A]=v.h[A>>2]>>8*(A&3)&255;return b}function p(v,b,A){A=A||32,v=n.normalizeInput(v);const _=f(A,b);return h(_,v),g(_)}function m(v,b,A){const _=p(v,b,A);return n.toHex(_)}return f2={blake2s:p,blake2sHex:m,blake2sInit:f,blake2sUpdate:h,blake2sFinal:g},f2}var h2,jI;function KV(){if(jI)return h2;jI=1;const n=VV(),e=qV();return h2={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},h2}var GV=KV(),qd={exports:{}},d2,zI;function WV(){if(zI)return d2;zI=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}d2=e;function e(t,r,i){var s=i&&i.stringify||n,o=1;if(typeof t=="object"&&t!==null){var c=r.length+o;if(c===1)return t;var u=new Array(c);u[0]=s(t);for(var f=1;f<c;f++)u[f]=s(r[f]);return u.join(" ")}if(typeof t!="string")return t;var h=r.length;if(h===0)return t;for(var g="",p=1-o,m=-1,v=t&&t.length||0,b=0;b<v;){if(t.charCodeAt(b)===37&&b+1<v){switch(m=m>-1?m:0,t.charCodeAt(b+1)){case 100:case 102:if(p>=h||r[p]==null)break;m<b&&(g+=t.slice(m,b)),g+=Number(r[p]),m=b+2,b++;break;case 105:if(p>=h||r[p]==null)break;m<b&&(g+=t.slice(m,b)),g+=Math.floor(Number(r[p])),m=b+2,b++;break;case 79:case 111:case 106:if(p>=h||r[p]===void 0)break;m<b&&(g+=t.slice(m,b));var A=typeof r[p];if(A==="string"){g+="'"+r[p]+"'",m=b+2,b++;break}if(A==="function"){g+=r[p].name||"<anonymous>",m=b+2,b++;break}g+=s(r[p]),m=b+2,b++;break;case 115:if(p>=h)break;m<b&&(g+=t.slice(m,b)),g+=String(r[p]),m=b+2,b++;break;case 37:m<b&&(g+=t.slice(m,b)),g+="%",m=b+2,b++,p--;break}++p}++b}return m===-1?t:(m<v&&(g+=t.slice(m)),g)}return d2}var HI;function QV(){if(HI)return qd.exports;HI=1;const n=WV();qd.exports=h;const e=D().console||{},t={mapHttpRequest:H,mapHttpResponse:H,wrapRequestSerializer:V,wrapResponseSerializer:V,wrapErrorSerializer:V,req:H,res:H,err:R,errWithCause:R};function r(w,x){return w==="silent"?1/0:x.levels.values[w]}const i=Symbol("pino.logFuncs"),s=Symbol("pino.hierarchy"),o={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(w,x){const B={logger:x,parent:w[s]};x[s]=B}function u(w,x,B){const C={};x.forEach(I=>{C[I]=B[I]?B[I]:e[I]||e[o[I]||"log"]||M}),w[i]=C}function f(w,x){return Array.isArray(w)?w.filter(function(C){return C!=="!stdSerializers.err"}):w===!0?Object.keys(x):!1}function h(w){w=w||{},w.browser=w.browser||{};const x=w.browser.transmit;if(x&&typeof x.send!="function")throw Error("pino: transmit option must have a send function");const B=w.browser.write||e;w.browser.write&&(w.browser.asObject=!0);const C=w.serializers||{},I=f(w.browser.serialize,C);let N=w.browser.serialize;Array.isArray(w.browser.serialize)&&w.browser.serialize.indexOf("!stdSerializers.err")>-1&&(N=!1);const $=Object.keys(w.customLevels||{}),L=["error","fatal","warn","info","debug","trace"].concat($);typeof B=="function"&&L.forEach(function(ue){B[ue]=B}),(w.enabled===!1||w.browser.disabled)&&(w.level="silent");const Y=w.level||"info",q=Object.create(B);q.log||(q.log=M),u(q,L,B),c({},q),Object.defineProperty(q,"levelVal",{get:te}),Object.defineProperty(q,"level",{get:re,set:le});const Z={transmit:x,serialize:I,asObject:w.browser.asObject,asObjectBindingsOnly:w.browser.asObjectBindingsOnly,formatters:w.browser.formatters,levels:L,timestamp:j(w),messageKey:w.messageKey||"msg",onChild:w.onChild||M};q.levels=g(w),q.level=Y,q.isLevelEnabled=function(ue){return this.levels.values[ue]?this.levels.values[ue]>=this.levels.values[this.level]:!1},q.setMaxListeners=q.getMaxListeners=q.emit=q.addListener=q.on=q.prependListener=q.once=q.prependOnceListener=q.removeListener=q.removeAllListeners=q.listeners=q.listenerCount=q.eventNames=q.write=q.flush=M,q.serializers=C,q._serialize=I,q._stdErrSerialize=N,q.child=function(...ue){return se.call(this,Z,...ue)},x&&(q._logEvent=T());function te(){return r(this.level,this)}function re(){return this._level}function le(ue){if(ue!=="silent"&&!this.levels.values[ue])throw Error("unknown level "+ue);this._level=ue,v(this,Z,q,"error"),v(this,Z,q,"fatal"),v(this,Z,q,"warn"),v(this,Z,q,"info"),v(this,Z,q,"debug"),v(this,Z,q,"trace"),$.forEach(Ne=>{v(this,Z,q,Ne)})}function se(ue,Ne,Re){if(!Ne)throw new Error("missing bindings for child Pino");Re=Re||{},I&&Ne.serializers&&(Re.serializers=Ne.serializers);const ke=Re.serializers;if(I&&ke){var Ve=Object.assign({},C,ke),Qt=w.browser.serialize===!0?Object.keys(Ve):I;delete Ne.serializers,U([Ne],Qt,Ve,this._stdErrSerialize)}function cn(Ms){this._childLevel=(Ms._childLevel|0)+1,this.bindings=Ne,Ve&&(this.serializers=Ve,this._serialize=Qt),x&&(this._logEvent=T([].concat(Ms._logEvent.bindings,Ne)))}cn.prototype=this;const xi=new cn(this);return c(this,xi),xi.child=function(...Ms){return se.call(this,ue,...Ms)},xi.level=Re.level||this.level,ue.onChild(xi),xi}return q}function g(w){const x=w.customLevels||{},B=Object.assign({},h.levels.values,x),C=Object.assign({},h.levels.labels,p(x));return{values:B,labels:C}}function p(w){const x={};return Object.keys(w).forEach(function(B){x[w[B]]=B}),x}h.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},h.stdSerializers=t,h.stdTimeFunctions=Object.assign({},{nullTime:G,epochTime:Q,unixTime:z,isoTime:P});function m(w){const x=[];w.bindings&&x.push(w.bindings);let B=w[s];for(;B.parent;)B=B.parent,B.logger.bindings&&x.push(B.logger.bindings);return x.reverse()}function v(w,x,B,C){if(Object.defineProperty(w,C,{value:r(w.level,B)>r(C,B)?M:B[i][C],writable:!0,enumerable:!0,configurable:!0}),w[C]===M){if(!x.transmit)return;const N=x.transmit.level||w.level,$=r(N,B);if(r(C,B)<$)return}w[C]=A(w,x,B,C);const I=m(w);I.length!==0&&(w[C]=b(I,w[C]))}function b(w,x){return function(){return x.apply(this,[...w,...arguments])}}function A(w,x,B,C){return(function(I){return function(){const $=x.timestamp(),L=new Array(arguments.length),Y=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var q=0;q<L.length;q++)L[q]=arguments[q];var Z=!1;if(x.serialize&&(U(L,this._serialize,this.serializers,this._stdErrSerialize),Z=!0),x.asObject||x.formatters?I.call(Y,..._(this,C,L,$,x)):I.apply(Y,L),x.transmit){const te=x.transmit.level||w._level,re=r(te,B),le=r(C,B);if(le<re)return;O(this,{ts:$,methodLevel:C,methodValue:le,transmitValue:B.levels.values[x.transmit.level||w._level],send:x.transmit.send,val:r(w._level,B)},L,Z)}}})(w[i][C])}function _(w,x,B,C,I){const{level:N,log:$=te=>te}=I.formatters||{},L=B.slice();let Y=L[0];const q={};let Z=(w._childLevel|0)+1;if(Z<1&&(Z=1),C&&(q.time=C),N){const te=N(x,w.levels.values[x]);Object.assign(q,te)}else q.level=w.levels.values[x];if(I.asObjectBindingsOnly){if(Y!==null&&typeof Y=="object")for(;Z--&&typeof L[0]=="object";)Object.assign(q,L.shift());return[$(q),...L]}else{if(Y!==null&&typeof Y=="object"){for(;Z--&&typeof L[0]=="object";)Object.assign(q,L.shift());Y=L.length?n(L.shift(),L):void 0}else typeof Y=="string"&&(Y=n(L.shift(),L));return Y!==void 0&&(q[I.messageKey]=Y),[$(q)]}}function U(w,x,B,C){for(const I in w)if(C&&w[I]instanceof Error)w[I]=h.stdSerializers.err(w[I]);else if(typeof w[I]=="object"&&!Array.isArray(w[I])&&x)for(const N in w[I])x.indexOf(N)>-1&&N in B&&(w[I][N]=B[N](w[I][N]))}function O(w,x,B,C=!1){const I=x.send,N=x.ts,$=x.methodLevel,L=x.methodValue,Y=x.val,q=w._logEvent.bindings;C||U(B,w._serialize||Object.keys(w.serializers),w.serializers,w._stdErrSerialize===void 0?!0:w._stdErrSerialize),w._logEvent.ts=N,w._logEvent.messages=B.filter(function(Z){return q.indexOf(Z)===-1}),w._logEvent.level.label=$,w._logEvent.level.value=L,I($,w._logEvent,Y),w._logEvent=T(q)}function T(w){return{ts:0,messages:[],bindings:w||[],level:{label:"",value:0}}}function R(w){const x={type:w.constructor.name,msg:w.message,stack:w.stack};for(const B in w)x[B]===void 0&&(x[B]=w[B]);return x}function j(w){return typeof w.timestamp=="function"?w.timestamp:w.timestamp===!1?G:Q}function H(){return{}}function V(w){return w}function M(){}function G(){return!1}function Q(){return Date.now()}function z(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function D(){function w(x){return typeof x<"u"&&x}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return w(self)||w(window)||w(this)||{}}}return qd.exports.default=h,qd.exports.pino=h,qd.exports}var hf=QV();const h_=fg(hf),ZV=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t);function VI(n){return typeof n=="string"?n:ZV(n)||""}const JV={level:"info"},uw="custom_context",q3=1e3*1024;var YV=Object.defineProperty,XV=(n,e,t)=>e in n?YV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ya=(n,e,t)=>XV(n,typeof e!="symbol"?e+"":e,t);let eq=class{constructor(e){Ya(this,"nodeValue"),Ya(this,"sizeInBytes"),Ya(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},qI=class{constructor(e){Ya(this,"lengthInNodes"),Ya(this,"sizeInBytes"),Ya(this,"head"),Ya(this,"tail"),Ya(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new eq(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}};var tq=Object.defineProperty,nq=(n,e,t)=>e in n?tq(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,iy=(n,e,t)=>nq(n,typeof e!="symbol"?e+"":e,t);let d_=class{constructor(e,t=q3){iy(this,"logs"),iy(this,"level"),iy(this,"levelValue"),iy(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=hf.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new qI(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===hf.levels.values.error?console.error(e):t===hf.levels.values.warn?console.warn(e):t===hf.levels.values.debug?console.debug(e):t===hf.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(VI({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new qI(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(VI({extraMetadata:e})),new Blob(t,{type:"application/json"})}};var rq=Object.defineProperty,iq=(n,e,t)=>e in n?rq(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sq=(n,e,t)=>iq(n,e+"",t);let oq=class{constructor(e,t=q3){sq(this,"baseChunkLogger"),this.baseChunkLogger=new d_(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}};var aq=Object.defineProperty,cq=(n,e,t)=>e in n?aq(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lq=(n,e,t)=>cq(n,e+"",t);let uq=class{constructor(e,t=q3){lq(this,"baseChunkLogger"),this.baseChunkLogger=new d_(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var fq=Object.defineProperty,hq=Object.defineProperties,dq=Object.getOwnPropertyDescriptors,KI=Object.getOwnPropertySymbols,pq=Object.prototype.hasOwnProperty,gq=Object.prototype.propertyIsEnumerable,GI=(n,e,t)=>e in n?fq(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ym=(n,e)=>{for(var t in e||(e={}))pq.call(e,t)&&GI(n,t,e[t]);if(KI)for(var t of KI(e))gq.call(e,t)&&GI(n,t,e[t]);return n},mm=(n,e)=>hq(n,dq(e));function yq(n){return mm(ym({},n),{level:(n==null?void 0:n.level)||JV.level})}function mq(n,e,t=uw){return n[t]=e,n}function Nr(n,e=uw){return n[e]||""}function wq(n,e,t=uw){const r=Nr(n,t);return r.trim()?`${r}/${e}`:e}function Jr(n,e,t=uw){const r=wq(n,e,t),i=n.child({context:r});return mq(i,r,t)}function bq(n){var e,t;const r=new oq((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:h_(mm(ym({},n.opts),{level:"trace",browser:mm(ym({},(t=n.opts)==null?void 0:t.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function vq(n){var e;const t=new uq((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:h_(mm(ym({},n.opts),{level:"trace"}),t),chunkLoggerController:t}}function K3(n){return typeof n.loggerOverride<"u"&&typeof n.loggerOverride!="string"?{logger:n.loggerOverride,chunkLoggerController:null}:typeof window<"u"?bq(n):vq(n)}function WI(n,e=[]){const t=[];return Object.keys(n).forEach(r=>{if(e.length&&!e.includes(r))return;const i=n[r];t.push(...i.accounts)}),t}const sy=BigInt(2**32-1),QI=BigInt(32);function p_(n,e=!1){return e?{h:Number(n&sy),l:Number(n>>QI&sy)}:{h:Number(n>>QI&sy)|0,l:Number(n&sy)|0}}function g_(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:c}=p_(n[s],e);[r[s],i[s]]=[o,c]}return[r,i]}const ZI=(n,e,t)=>n>>>t,JI=(n,e,t)=>n<<32-t|e>>>t,ja=(n,e,t)=>n>>>t|e<<32-t,za=(n,e,t)=>n<<32-t|e>>>t,dp=(n,e,t)=>n<<64-t|e>>>t-32,pp=(n,e,t)=>n>>>t-32|e<<64-t,Eq=(n,e)=>e,xq=(n,e)=>n,Aq=(n,e,t)=>n<<t|e>>>32-t,Sq=(n,e,t)=>e<<t|n>>>32-t,Iq=(n,e,t)=>e<<t-32|n>>>64-t,Oq=(n,e,t)=>n<<t-32|e>>>64-t;function Ui(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const G3=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),W3=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Bq=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Pq=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,Cq=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),_q=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Ju=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function fw(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Pc(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Xi(n,...e){if(!fw(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function y_(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Pc(n.outputLen),Pc(n.blockLen)}function Cc(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Q3(n,e){Xi(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Hp(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function es(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function p2(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function ps(n,e){return n<<32-e|n>>>e}const m_=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function w_(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const so=m_?n=>n:n=>w_(n);function Nq(n){for(let e=0;e<n.length;e++)n[e]=w_(n[e]);return n}const Ha=m_?n=>n:Nq,b_=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Dq=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Cf(n){if(Xi(n),b_)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=Dq[n[t]];return e}const Js={_0:48,_9:57,A:65,F:70,a:97,f:102};function YI(n){if(n>=Js._0&&n<=Js._9)return n-Js._0;if(n>=Js.A&&n<=Js.F)return n-(Js.A-10);if(n>=Js.a&&n<=Js.f)return n-(Js.a-10)}function wm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(b_)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=YI(n.charCodeAt(s)),c=YI(n.charCodeAt(s+1));if(o===void 0||c===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+c}return r}function v_(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Lo(n){return typeof n=="string"&&(n=v_(n)),Xi(n),n}function Xa(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];Xi(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}let hw=class{};function Eg(n){const e=r=>n().update(Lo(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function $q(n){const e=(r,i)=>n(i).update(Lo(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function Z3(n=32){if(Ju&&typeof Ju.getRandomValues=="function")return Ju.getRandomValues(new Uint8Array(n));if(Ju&&typeof Ju.randomBytes=="function")return Uint8Array.from(Ju.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const Tq=BigInt(0),Kd=BigInt(1),kq=BigInt(2),Rq=BigInt(7),Uq=BigInt(256),Lq=BigInt(113),E_=[],x_=[],A_=[];for(let n=0,e=Kd,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],E_.push(2*(5*r+t)),x_.push((n+1)*(n+2)/2%64);let i=Tq;for(let s=0;s<7;s++)e=(e<<Kd^(e>>Rq)*Lq)%Uq,e&kq&&(i^=Kd<<(Kd<<BigInt(s))-Kd);A_.push(i)}const S_=g_(A_,!0),Fq=S_[0],Mq=S_[1],XI=(n,e,t)=>t>32?Iq(n,e,t):Aq(n,e,t),e6=(n,e,t)=>t>32?Oq(n,e,t):Sq(n,e,t);function jq(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=t[u],h=t[u+1],g=XI(f,h,1)^t[c],p=e6(f,h,1)^t[c+1];for(let m=0;m<50;m+=10)n[o+m]^=g,n[o+m+1]^=p}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=x_[o],u=XI(i,s,c),f=e6(i,s,c),h=E_[o];i=n[h],s=n[h+1],n[h]=u,n[h+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=Fq[r],n[1]^=Mq[r]}es(t)}let zq=class I_ extends hw{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,Pc(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Hp(this.state)}clone(){return this._cloneInto()}keccak(){Ha(this.state32),jq(this.state32,this.rounds),Ha(this.state32),this.posOut=0,this.pos=0}update(e){Cc(this),e=Lo(e),Xi(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Cc(this,!1),Xi(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Pc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Q3(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,es(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new I_(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Hq=(n,e,t)=>Eg(()=>new zq(e,n,t));Hq(1,136,256/8);function Vq(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}function qq(n,e,t){return n&e^~n&t}function Kq(n,e,t){return n&e^n&t^e&t}let O_=class extends hw{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=p2(this.buffer)}update(e){Cc(this),e=Lo(e),Xi(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=p2(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Cc(this),Q3(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,es(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let g=o;g<i;g++)t[g]=0;Vq(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=p2(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)c.setUint32(4*g,h[g],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=c,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const va=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Pn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Gq=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ea=new Uint32Array(64);let Wq=class extends O_{constructor(e=32){super(64,e,8,!1),this.A=va[0]|0,this.B=va[1]|0,this.C=va[2]|0,this.D=va[3]|0,this.E=va[4]|0,this.F=va[5]|0,this.G=va[6]|0,this.H=va[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let g=0;g<16;g++,t+=4)Ea[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const p=Ea[g-15],m=Ea[g-2],v=ps(p,7)^ps(p,18)^p>>>3,b=ps(m,17)^ps(m,19)^m>>>10;Ea[g]=b+Ea[g-7]+v+Ea[g-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:h}=this;for(let g=0;g<64;g++){const p=ps(c,6)^ps(c,11)^ps(c,25),m=h+p+qq(c,u,f)+Gq[g]+Ea[g]|0,v=(ps(r,2)^ps(r,13)^ps(r,22))+Kq(r,i,s)|0;h=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(r,i,s,o,c,u,f,h)}roundClean(){es(Ea)}destroy(){this.set(0,0,0,0,0,0,0,0),es(this.buffer)}};const B_=g_(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Qq=B_[0],Zq=B_[1],xa=new Uint32Array(80),Aa=new Uint32Array(80);let J3=class extends O_{constructor(e=64){super(128,e,16,!1),this.Ah=Pn[0]|0,this.Al=Pn[1]|0,this.Bh=Pn[2]|0,this.Bl=Pn[3]|0,this.Ch=Pn[4]|0,this.Cl=Pn[5]|0,this.Dh=Pn[6]|0,this.Dl=Pn[7]|0,this.Eh=Pn[8]|0,this.El=Pn[9]|0,this.Fh=Pn[10]|0,this.Fl=Pn[11]|0,this.Gh=Pn[12]|0,this.Gl=Pn[13]|0,this.Hh=Pn[14]|0,this.Hl=Pn[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:f,El:h,Fh:g,Fl:p,Gh:m,Gl:v,Hh:b,Hl:A}=this;return[e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=h|0,this.Fh=g|0,this.Fl=p|0,this.Gh=m|0,this.Gl=v|0,this.Hh=b|0,this.Hl=A|0}process(e,t){for(let O=0;O<16;O++,t+=4)xa[O]=e.getUint32(t),Aa[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const T=xa[O-15]|0,R=Aa[O-15]|0,j=ja(T,R,1)^ja(T,R,8)^ZI(T,R,7),H=za(T,R,1)^za(T,R,8)^JI(T,R,7),V=xa[O-2]|0,M=Aa[O-2]|0,G=ja(V,M,19)^dp(V,M,61)^ZI(V,M,6),Q=za(V,M,19)^pp(V,M,61)^JI(V,M,6),z=Bq(H,Q,Aa[O-7],Aa[O-16]),P=Pq(z,j,G,xa[O-7],xa[O-16]);xa[O]=P|0,Aa[O]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:f,Dl:h,Eh:g,El:p,Fh:m,Fl:v,Gh:b,Gl:A,Hh:_,Hl:U}=this;for(let O=0;O<80;O++){const T=ja(g,p,14)^ja(g,p,18)^dp(g,p,41),R=za(g,p,14)^za(g,p,18)^pp(g,p,41),j=g&m^~g&b,H=p&v^~p&A,V=Cq(U,R,H,Zq[O],Aa[O]),M=_q(V,_,T,j,Qq[O],xa[O]),G=V|0,Q=ja(r,i,28)^dp(r,i,34)^dp(r,i,39),z=za(r,i,28)^pp(r,i,34)^pp(r,i,39),P=r&s^r&c^s&c,D=i&o^i&u^o&u;_=b|0,U=A|0,b=m|0,A=v|0,m=g|0,v=p|0,{h:g,l:p}=Ui(f|0,h|0,M|0,G|0),f=c|0,h=u|0,c=s|0,u=o|0,s=r|0,o=i|0;const w=G3(G,z,D);r=W3(w,M,Q,P),i=w|0}({h:r,l:i}=Ui(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Ui(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=Ui(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:h}=Ui(this.Dh|0,this.Dl|0,f|0,h|0),{h:g,l:p}=Ui(this.Eh|0,this.El|0,g|0,p|0),{h:m,l:v}=Ui(this.Fh|0,this.Fl|0,m|0,v|0),{h:b,l:A}=Ui(this.Gh|0,this.Gl|0,b|0,A|0),{h:_,l:U}=Ui(this.Hh|0,this.Hl|0,_|0,U|0),this.set(r,i,s,o,c,u,f,h,g,p,m,v,b,A,_,U)}roundClean(){es(xa,Aa)}destroy(){es(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Jq=class extends J3{constructor(){super(48),this.Ah=Bn[0]|0,this.Al=Bn[1]|0,this.Bh=Bn[2]|0,this.Bl=Bn[3]|0,this.Ch=Bn[4]|0,this.Cl=Bn[5]|0,this.Dh=Bn[6]|0,this.Dl=Bn[7]|0,this.Eh=Bn[8]|0,this.El=Bn[9]|0,this.Fh=Bn[10]|0,this.Fl=Bn[11]|0,this.Gh=Bn[12]|0,this.Gl=Bn[13]|0,this.Hh=Bn[14]|0,this.Hl=Bn[15]|0}};const Cn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let Yq=class extends J3{constructor(){super(32),this.Ah=Cn[0]|0,this.Al=Cn[1]|0,this.Bh=Cn[2]|0,this.Bl=Cn[3]|0,this.Ch=Cn[4]|0,this.Cl=Cn[5]|0,this.Dh=Cn[6]|0,this.Dl=Cn[7]|0,this.Eh=Cn[8]|0,this.El=Cn[9]|0,this.Fh=Cn[10]|0,this.Fl=Cn[11]|0,this.Gh=Cn[12]|0,this.Gl=Cn[13]|0,this.Hh=Cn[14]|0,this.Hl=Cn[15]|0}};const Xq=Eg(()=>new Wq),eK=Eg(()=>new J3),tK=Eg(()=>new Jq);Eg(()=>new Yq);const nK=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),zt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ve=new Uint32Array(32);function Sa(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=ve[2*n],f=ve[2*n+1],h=ve[2*e],g=ve[2*e+1],p=ve[2*t],m=ve[2*t+1],v=ve[2*r],b=ve[2*r+1],A=G3(u,h,o);f=W3(A,f,g,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:Eq(b,v),Dl:xq(b)},{h:m,l:p}=Ui(m,p,b,v),{Bh:g,Bl:h}={Bh:g^m,Bl:h^p},{Bh:g,Bl:h}={Bh:ja(g,h,24),Bl:za(g,h,24)},ve[2*n]=u,ve[2*n+1]=f,ve[2*e]=h,ve[2*e+1]=g,ve[2*t]=p,ve[2*t+1]=m,ve[2*r]=v,ve[2*r+1]=b}function Ia(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=ve[2*n],f=ve[2*n+1],h=ve[2*e],g=ve[2*e+1],p=ve[2*t],m=ve[2*t+1],v=ve[2*r],b=ve[2*r+1],A=G3(u,h,o);f=W3(A,f,g,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:ja(b,v,16),Dl:za(b,v,16)},{h:m,l:p}=Ui(m,p,b,v),{Bh:g,Bl:h}={Bh:g^m,Bl:h^p},{Bh:g,Bl:h}={Bh:dp(g,h,63),Bl:pp(g,h,63)},ve[2*n]=u,ve[2*n+1]=f,ve[2*e]=h,ve[2*e+1]=g,ve[2*t]=p,ve[2*t+1]=m,ve[2*r]=v,ve[2*r+1]=b}function rK(n,e={},t,r,i){if(Pc(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:c}=e;if(s!==void 0&&(s.length<1||s.length>t))throw new Error("key length must be undefined or 1.."+t);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}let iK=class extends hw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Pc(e),Pc(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=Hp(this.buffer)}update(e){Cc(this),e=Lo(e),Xi(e);const{blockLen:t,buffer:r,buffer32:i}=this,s=e.length,o=e.byteOffset,c=e.buffer;for(let u=0;u<s;){this.pos===t&&(Ha(i),this.compress(i,0,!1),Ha(i),this.pos=0);const f=Math.min(t-this.pos,s-u),h=o+u;if(f===t&&!(h%4)&&u+f<s){const g=new Uint32Array(c,h,Math.floor((s-u)/4));Ha(g);for(let p=0;u+t<s;p+=i.length,u+=t)this.length+=t,this.compress(g,p,!1);Ha(g);continue}r.set(e.subarray(u,u+f),this.pos),this.pos+=f,this.length+=f,u+=f}return this}digestInto(e){Cc(this),Q3(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,es(this.buffer.subarray(t)),Ha(r),this.compress(r,0,!0),Ha(r);const i=Hp(e);this.get().forEach((s,o)=>i[o]=so(s))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:i,destroyed:s,outputLen:o,pos:c}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=s,e.finished=i,e.length=r,e.pos=c,e.outputLen=o,e}clone(){return this._cloneInto()}},sK=class extends iK{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=zt[0]|0,this.v0h=zt[1]|0,this.v1l=zt[2]|0,this.v1h=zt[3]|0,this.v2l=zt[4]|0,this.v2h=zt[5]|0,this.v3l=zt[6]|0,this.v3h=zt[7]|0,this.v4l=zt[8]|0,this.v4h=zt[9]|0,this.v5l=zt[10]|0,this.v5h=zt[11]|0,this.v6l=zt[12]|0,this.v6h=zt[13]|0,this.v7l=zt[14]|0,this.v7h=zt[15]|0,rK(t,e,64,16,16);let{key:r,personalization:i,salt:s}=e,o=0;if(r!==void 0&&(r=Lo(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=Lo(s);const c=Hp(s);this.v4l^=so(c[0]),this.v4h^=so(c[1]),this.v5l^=so(c[2]),this.v5h^=so(c[3])}if(i!==void 0){i=Lo(i);const c=Hp(i);this.v6l^=so(c[0]),this.v6h^=so(c[1]),this.v7l^=so(c[2]),this.v7h^=so(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:i,v2l:s,v2h:o,v3l:c,v3h:u,v4l:f,v4h:h,v5l:g,v5h:p,v6l:m,v6h:v,v7l:b,v7h:A}=this;return[e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=c|0,this.v3h=u|0,this.v4l=f|0,this.v4h=h|0,this.v5l=g|0,this.v5h=p|0,this.v6l=m|0,this.v6h=v|0,this.v7l=b|0,this.v7h=A|0}compress(e,t,r){this.get().forEach((u,f)=>ve[f]=u),ve.set(zt,16);let{h:i,l:s}=p_(BigInt(this.length));ve[24]=zt[8]^s,ve[25]=zt[9]^i,r&&(ve[28]=~ve[28],ve[29]=~ve[29]);let o=0;const c=nK;for(let u=0;u<12;u++)Sa(0,4,8,12,e,t+2*c[o++]),Ia(0,4,8,12,e,t+2*c[o++]),Sa(1,5,9,13,e,t+2*c[o++]),Ia(1,5,9,13,e,t+2*c[o++]),Sa(2,6,10,14,e,t+2*c[o++]),Ia(2,6,10,14,e,t+2*c[o++]),Sa(3,7,11,15,e,t+2*c[o++]),Ia(3,7,11,15,e,t+2*c[o++]),Sa(0,5,10,15,e,t+2*c[o++]),Ia(0,5,10,15,e,t+2*c[o++]),Sa(1,6,11,12,e,t+2*c[o++]),Ia(1,6,11,12,e,t+2*c[o++]),Sa(2,7,8,13,e,t+2*c[o++]),Ia(2,7,8,13,e,t+2*c[o++]),Sa(3,4,9,14,e,t+2*c[o++]),Ia(3,4,9,14,e,t+2*c[o++]);this.v0l^=ve[0]^ve[16],this.v0h^=ve[1]^ve[17],this.v1l^=ve[2]^ve[18],this.v1h^=ve[3]^ve[19],this.v2l^=ve[4]^ve[20],this.v2h^=ve[5]^ve[21],this.v3l^=ve[6]^ve[22],this.v3h^=ve[7]^ve[23],this.v4l^=ve[8]^ve[24],this.v4h^=ve[9]^ve[25],this.v5l^=ve[10]^ve[26],this.v5h^=ve[11]^ve[27],this.v6l^=ve[12]^ve[28],this.v6h^=ve[13]^ve[29],this.v7l^=ve[14]^ve[30],this.v7h^=ve[15]^ve[31],es(ve)}destroy(){this.destroyed=!0,es(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};$q(n=>new sK(n));/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function P_(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function dE(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function g2(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function wr(n,...e){if(!P_(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function t6(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function oK(n,e){wr(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function xc(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Dh(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function aK(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const cK=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function lK(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function pE(n){if(typeof n=="string")n=lK(n);else if(P_(n))n=gE(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function uK(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function fK(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const hK=(n,e)=>{function t(r,...i){if(wr(r),!cK)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const f=i[0];if(!f)throw new Error("nonce / iv required");n.varSizeNonce?wr(f):wr(f,n.nonceLength)}const s=n.tagLength;s&&i[1]!==void 0&&wr(i[1]);const o=e(r,...i),c=(f,h)=>{if(h!==void 0){if(f!==2)throw new Error("cipher output not supported");wr(h)}};let u=!1;return{encrypt(f,h){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,wr(f),c(o.encrypt.length,h),o.encrypt(f,h)},decrypt(f,h){if(wr(f),s&&f.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return c(o.decrypt.length,h),o.decrypt(f,h)}}}return Object.assign(t,n),t};function n6(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!pK(e))throw new Error("invalid output, must be aligned");return e}function r6(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s);n.setUint32(e+4,o,r),n.setUint32(e+0,c,r)}function dK(n,e,t){dE(t);const r=new Uint8Array(16),i=aK(r);return r6(i,0,BigInt(e),t),r6(i,8,BigInt(n),t),r}function pK(n){return n.byteOffset%4===0}function gE(n){return Uint8Array.from(n)}const C_=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),gK=C_("expand 16-byte k"),yK=C_("expand 32-byte k"),mK=xc(gK),wK=xc(yK);function Ye(n,e){return n<<e|n>>>32-e}function yE(n){return n.byteOffset%4===0}const oy=64,bK=16,__=2**32-1,i6=new Uint32Array;function vK(n,e,t,r,i,s,o,c){const u=i.length,f=new Uint8Array(oy),h=xc(f),g=yE(i)&&yE(s),p=g?xc(i):i6,m=g?xc(s):i6;for(let v=0;v<u;o++){if(n(e,t,r,h,o,c),o>=__)throw new Error("arx: counter overflow");const b=Math.min(oy,u-v);if(g&&b===oy){const A=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let _=0,U;_<bK;_++)U=A+_,m[U]=p[U]^h[_];v+=oy;continue}for(let A=0,_;A<b;A++)_=v+A,s[_]=i[_]^f[A];v+=b}}function EK(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=uK({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return g2(i),g2(o),dE(s),dE(t),(c,u,f,h,g=0)=>{wr(c),wr(u),wr(f);const p=f.length;if(h===void 0&&(h=new Uint8Array(p)),wr(h),g2(g),g<0||g>=__)throw new Error("arx: counter overflow");if(h.length<p)throw new Error(`arx: output (${h.length}) is shorter than data (${p})`);const m=[];let v=c.length,b,A;if(v===32)m.push(b=gE(c)),A=wK;else if(v===16&&t)b=new Uint8Array(32),b.set(c),b.set(c,16),A=mK,m.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);yE(u)||m.push(u=gE(u));const _=xc(b);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,_,xc(u.subarray(0,16)),_),u=u.subarray(16)}const U=16-i;if(U!==u.length)throw new Error(`arx: nonce must be ${U} or 16 bytes`);if(U!==12){const T=new Uint8Array(12);T.set(u,s?0:12-u.length),u=T,m.push(u)}const O=xc(u);return vK(n,A,_,O,f,h,g,o),Dh(...m),h}}const fn=(n,e)=>n[e++]&255|(n[e++]&255)<<8;let xK=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=pE(e),wr(e,32);const t=fn(e,0),r=fn(e,2),i=fn(e,4),s=fn(e,6),o=fn(e,8),c=fn(e,10),u=fn(e,12),f=fn(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let h=0;h<8;h++)this.pad[h]=fn(e,16+2*h)}process(e,t,r=!1){const i=r?0:2048,{h:s,r:o}=this,c=o[0],u=o[1],f=o[2],h=o[3],g=o[4],p=o[5],m=o[6],v=o[7],b=o[8],A=o[9],_=fn(e,t+0),U=fn(e,t+2),O=fn(e,t+4),T=fn(e,t+6),R=fn(e,t+8),j=fn(e,t+10),H=fn(e,t+12),V=fn(e,t+14);let M=s[0]+(_&8191),G=s[1]+((_>>>13|U<<3)&8191),Q=s[2]+((U>>>10|O<<6)&8191),z=s[3]+((O>>>7|T<<9)&8191),P=s[4]+((T>>>4|R<<12)&8191),D=s[5]+(R>>>1&8191),w=s[6]+((R>>>14|j<<2)&8191),x=s[7]+((j>>>11|H<<5)&8191),B=s[8]+((H>>>8|V<<8)&8191),C=s[9]+(V>>>5|i),I=0,N=I+M*c+G*(5*A)+Q*(5*b)+z*(5*v)+P*(5*m);I=N>>>13,N&=8191,N+=D*(5*p)+w*(5*g)+x*(5*h)+B*(5*f)+C*(5*u),I+=N>>>13,N&=8191;let $=I+M*u+G*c+Q*(5*A)+z*(5*b)+P*(5*v);I=$>>>13,$&=8191,$+=D*(5*m)+w*(5*p)+x*(5*g)+B*(5*h)+C*(5*f),I+=$>>>13,$&=8191;let L=I+M*f+G*u+Q*c+z*(5*A)+P*(5*b);I=L>>>13,L&=8191,L+=D*(5*v)+w*(5*m)+x*(5*p)+B*(5*g)+C*(5*h),I+=L>>>13,L&=8191;let Y=I+M*h+G*f+Q*u+z*c+P*(5*A);I=Y>>>13,Y&=8191,Y+=D*(5*b)+w*(5*v)+x*(5*m)+B*(5*p)+C*(5*g),I+=Y>>>13,Y&=8191;let q=I+M*g+G*h+Q*f+z*u+P*c;I=q>>>13,q&=8191,q+=D*(5*A)+w*(5*b)+x*(5*v)+B*(5*m)+C*(5*p),I+=q>>>13,q&=8191;let Z=I+M*p+G*g+Q*h+z*f+P*u;I=Z>>>13,Z&=8191,Z+=D*c+w*(5*A)+x*(5*b)+B*(5*v)+C*(5*m),I+=Z>>>13,Z&=8191;let te=I+M*m+G*p+Q*g+z*h+P*f;I=te>>>13,te&=8191,te+=D*u+w*c+x*(5*A)+B*(5*b)+C*(5*v),I+=te>>>13,te&=8191;let re=I+M*v+G*m+Q*p+z*g+P*h;I=re>>>13,re&=8191,re+=D*f+w*u+x*c+B*(5*A)+C*(5*b),I+=re>>>13,re&=8191;let le=I+M*b+G*v+Q*m+z*p+P*g;I=le>>>13,le&=8191,le+=D*h+w*f+x*u+B*c+C*(5*A),I+=le>>>13,le&=8191;let se=I+M*A+G*b+Q*v+z*m+P*p;I=se>>>13,se&=8191,se+=D*g+w*h+x*f+B*u+C*c,I+=se>>>13,se&=8191,I=(I<<2)+I|0,I=I+N|0,N=I&8191,I=I>>>13,$+=I,s[0]=N,s[1]=$,s[2]=L,s[3]=Y,s[4]=q,s[5]=Z,s[6]=te,s[7]=re,s[8]=le,s[9]=se}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=8192;let s=(i^1)-1;for(let c=0;c<10;c++)r[c]&=s;s=~s;for(let c=0;c<10;c++)e[c]=e[c]&s|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let c=1;c<8;c++)o=(e[c]+t[c]|0)+(o>>>16)|0,e[c]=o&65535;Dh(r)}update(e){t6(this),e=pE(e),wr(e);const{buffer:t,blockLen:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}t.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){Dh(this.h,this.r,this.buffer,this.pad)}digestInto(e){t6(this),oK(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}};function AK(n){const e=(r,i)=>n(i).update(pE(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const SK=AK(n=>new xK(n));function IK(n,e,t,r,i,s=20){let o=n[0],c=n[1],u=n[2],f=n[3],h=e[0],g=e[1],p=e[2],m=e[3],v=e[4],b=e[5],A=e[6],_=e[7],U=i,O=t[0],T=t[1],R=t[2],j=o,H=c,V=u,M=f,G=h,Q=g,z=p,P=m,D=v,w=b,x=A,B=_,C=U,I=O,N=T,$=R;for(let Y=0;Y<s;Y+=2)j=j+G|0,C=Ye(C^j,16),D=D+C|0,G=Ye(G^D,12),j=j+G|0,C=Ye(C^j,8),D=D+C|0,G=Ye(G^D,7),H=H+Q|0,I=Ye(I^H,16),w=w+I|0,Q=Ye(Q^w,12),H=H+Q|0,I=Ye(I^H,8),w=w+I|0,Q=Ye(Q^w,7),V=V+z|0,N=Ye(N^V,16),x=x+N|0,z=Ye(z^x,12),V=V+z|0,N=Ye(N^V,8),x=x+N|0,z=Ye(z^x,7),M=M+P|0,$=Ye($^M,16),B=B+$|0,P=Ye(P^B,12),M=M+P|0,$=Ye($^M,8),B=B+$|0,P=Ye(P^B,7),j=j+Q|0,$=Ye($^j,16),x=x+$|0,Q=Ye(Q^x,12),j=j+Q|0,$=Ye($^j,8),x=x+$|0,Q=Ye(Q^x,7),H=H+z|0,C=Ye(C^H,16),B=B+C|0,z=Ye(z^B,12),H=H+z|0,C=Ye(C^H,8),B=B+C|0,z=Ye(z^B,7),V=V+P|0,I=Ye(I^V,16),D=D+I|0,P=Ye(P^D,12),V=V+P|0,I=Ye(I^V,8),D=D+I|0,P=Ye(P^D,7),M=M+G|0,N=Ye(N^M,16),w=w+N|0,G=Ye(G^w,12),M=M+G|0,N=Ye(N^M,8),w=w+N|0,G=Ye(G^w,7);let L=0;r[L++]=o+j|0,r[L++]=c+H|0,r[L++]=u+V|0,r[L++]=f+M|0,r[L++]=h+G|0,r[L++]=g+Q|0,r[L++]=p+z|0,r[L++]=m+P|0,r[L++]=v+D|0,r[L++]=b+w|0,r[L++]=A+x|0,r[L++]=_+B|0,r[L++]=U+C|0,r[L++]=O+I|0,r[L++]=T+N|0,r[L++]=R+$|0}const OK=EK(IK,{counterRight:!1,counterLength:4,allowShortKeys:!1}),BK=new Uint8Array(16),s6=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(BK.subarray(t))},PK=new Uint8Array(32);function o6(n,e,t,r,i){const s=n(e,t,PK),o=SK.create(s);i&&s6(o,i),s6(o,r);const c=dK(r.length,i?i.length:0,!0);o.update(c);const u=o.digest();return Dh(s,c),u}const CK=n=>(e,t,r)=>({encrypt(i,s){const o=i.length;s=n6(o+16,s,!1),s.set(i);const c=s.subarray(0,-16);n(e,t,c,c,1);const u=o6(n,e,t,c,r);return s.set(u,o),Dh(u),s},decrypt(i,s){s=n6(i.length-16,s,!1);const o=i.subarray(0,-16),c=i.subarray(-16),u=o6(n,e,t,o,r);if(!fK(c,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),n(e,t,s,s,1),Dh(u),s}});hK({blockSize:64,nonceLength:12,tagLength:16},CK(OK));let N_=class extends hw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,y_(e);const r=Lo(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),es(s)}update(e){return Cc(this),this.iHash.update(e),this}digestInto(e){Cc(this),Xi(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const D_=(n,e,t)=>new N_(n,e).update(t).digest();D_.create=(n,e)=>new N_(n,e);Uint8Array.from([0]);const Y3=BigInt(0),mE=BigInt(1);function bm(n,e=""){if(typeof n!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof n)}return n}function Al(n,e,t=""){const r=fw(n),i=n==null?void 0:n.length,s=e!==void 0;if(!r||s&&i!==e){const o=t&&`"${t}" `,c=s?` of length ${e}`:"",u=r?`length=${i}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+c+", got "+u)}return n}function ay(n){const e=n.toString(16);return e.length&1?"0"+e:e}function $_(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Y3:BigInt("0x"+n)}function dw(n){return $_(Cf(n))}function vm(n){return Xi(n),$_(Cf(Uint8Array.from(n).reverse()))}function X3(n,e){return wm(n.toString(16).padStart(e*2,"0"))}function ex(n,e){return X3(n,e).reverse()}function jn(n,e,t){let r;if(typeof e=="string")try{r=wm(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(fw(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}const y2=n=>typeof n=="bigint"&&Y3<=n;function _K(n,e,t){return y2(n)&&y2(e)&&y2(t)&&e<=n&&n<t}function wE(n,e,t,r){if(!_K(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function T_(n){let e;for(e=0;n>Y3;n>>=mE,e+=1);return e}const xg=n=>(mE<<BigInt(n))-mE;function NK(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=p=>new Uint8Array(p),i=p=>Uint8Array.of(p);let s=r(n),o=r(n),c=0;const u=()=>{s.fill(1),o.fill(0),c=0},f=(...p)=>t(o,s,...p),h=(p=r(0))=>{o=f(i(0),p),s=f(),p.length!==0&&(o=f(i(1),p),s=f())},g=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const m=[];for(;p<e;){s=f();const v=s.slice();m.push(v),p+=s.length}return Xa(...m)};return(p,m)=>{u(),h(p);let v;for(;!(v=m(g()));)h();return u(),v}}function pw(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,s,o){const c=n[i];if(o&&c===void 0)return;const u=typeof c;if(u!==s||c===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${u}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(t).forEach(([i,s])=>r(i,s,!0))}function a6(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const Sr=BigInt(0),er=BigInt(1),Sl=BigInt(2),k_=BigInt(3),R_=BigInt(4),U_=BigInt(5),DK=BigInt(7),L_=BigInt(8),$K=BigInt(9),F_=BigInt(16);function Kr(n,e){const t=n%e;return t>=Sr?t:e+t}function $i(n,e,t){let r=n;for(;e-- >Sr;)r*=r,r%=t;return r}function c6(n,e){if(n===Sr)throw new Error("invert: expected non-zero number");if(e<=Sr)throw new Error("invert: expected positive modulus, got "+e);let t=Kr(n,e),r=e,i=Sr,s=er;for(;t!==Sr;){const o=r/t,c=r%t,u=i-s*o;r=t,t=c,i=s,s=u}if(r!==er)throw new Error("invert: does not exist");return Kr(i,e)}function tx(n,e,t){if(!n.eql(n.sqr(e),t))throw new Error("Cannot find square root")}function M_(n,e){const t=(n.ORDER+er)/R_,r=n.pow(e,t);return tx(n,r,e),r}function TK(n,e){const t=(n.ORDER-U_)/L_,r=n.mul(e,Sl),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,Sl),i),c=n.mul(s,n.sub(o,n.ONE));return tx(n,c,e),c}function kK(n){const e=Rc(n),t=j_(n),r=t(e,e.neg(e.ONE)),i=t(e,r),s=t(e,e.neg(r)),o=(n+DK)/F_;return(c,u)=>{let f=c.pow(u,o),h=c.mul(f,r);const g=c.mul(f,i),p=c.mul(f,s),m=c.eql(c.sqr(h),u),v=c.eql(c.sqr(g),u);f=c.cmov(f,h,m),h=c.cmov(p,g,v);const b=c.eql(c.sqr(h),u),A=c.cmov(f,h,b);return tx(c,A,u),A}}function j_(n){if(n<k_)throw new Error("sqrt is not defined for small field");let e=n-er,t=0;for(;e%Sl===Sr;)e/=Sl,t++;let r=Sl;const i=Rc(n);for(;l6(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return M_;let s=i.pow(r,e);const o=(e+er)/Sl;return function(c,u){if(c.is0(u))return u;if(l6(c,u)!==1)throw new Error("Cannot find square root");let f=t,h=c.mul(c.ONE,s),g=c.pow(u,e),p=c.pow(u,o);for(;!c.eql(g,c.ONE);){if(c.is0(g))return c.ZERO;let m=1,v=c.sqr(g);for(;!c.eql(v,c.ONE);)if(m++,v=c.sqr(v),m===f)throw new Error("Cannot find square root");const b=er<<BigInt(f-m-1),A=c.pow(h,b);f=m,h=c.sqr(A),g=c.mul(g,h),p=c.mul(p,A)}return p}}function RK(n){return n%R_===k_?M_:n%L_===U_?TK:n%F_===$K?kK(n):j_(n)}const UK=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function LK(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=UK.reduce((r,i)=>(r[i]="function",r),e);return pw(n,t),n}function FK(n,e,t){if(t<Sr)throw new Error("invalid exponent, negatives unsupported");if(t===Sr)return n.ONE;if(t===er)return e;let r=n.ONE,i=e;for(;t>Sr;)t&er&&(r=n.mul(r,i)),i=n.sqr(i),t>>=er;return r}function z_(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,c,u)=>n.is0(c)?o:(r[u]=o,n.mul(o,c)),n.ONE),s=n.inv(i);return e.reduceRight((o,c,u)=>n.is0(c)?o:(r[u]=n.mul(o,r[u]),n.mul(o,c)),s),r}function l6(n,e){const t=(n.ORDER-er)/Sl,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function H_(n,e){e!==void 0&&Pc(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Rc(n,e,t=!1,r={}){if(n<=Sr)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,s,o=!1,c;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const p=e;p.BITS&&(i=p.BITS),p.sqrt&&(s=p.sqrt),typeof p.isLE=="boolean"&&(t=p.isLE),typeof p.modFromBytes=="boolean"&&(o=p.modFromBytes),c=p.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:u,nByteLength:f}=H_(n,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const g=Object.freeze({ORDER:n,isLE:t,BITS:u,BYTES:f,MASK:xg(u),ZERO:Sr,ONE:er,allowedLengths:c,create:p=>Kr(p,n),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Sr<=p&&p<n},is0:p=>p===Sr,isValidNot0:p=>!g.is0(p)&&g.isValid(p),isOdd:p=>(p&er)===er,neg:p=>Kr(-p,n),eql:(p,m)=>p===m,sqr:p=>Kr(p*p,n),add:(p,m)=>Kr(p+m,n),sub:(p,m)=>Kr(p-m,n),mul:(p,m)=>Kr(p*m,n),pow:(p,m)=>FK(g,p,m),div:(p,m)=>Kr(p*c6(m,n),n),sqrN:p=>p*p,addN:(p,m)=>p+m,subN:(p,m)=>p-m,mulN:(p,m)=>p*m,inv:p=>c6(p,n),sqrt:s||(p=>(h||(h=RK(n)),h(g,p))),toBytes:p=>t?ex(p,f):X3(p,f),fromBytes:(p,m=!0)=>{if(c){if(!c.includes(p.length)||p.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+p.length);const b=new Uint8Array(f);b.set(p,t?0:b.length-p.length),p=b}if(p.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+p.length);let v=t?vm(p):dw(p);if(o&&(v=Kr(v,n)),!m&&!g.isValid(v))throw new Error("invalid field element: outside of range 0..ORDER");return v},invertBatch:p=>z_(g,p),cmov:(p,m,v)=>v?m:p});return Object.freeze(g)}function V_(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function q_(n){const e=V_(n);return e+Math.ceil(e/2)}function MK(n,e,t=!1){const r=n.length,i=V_(e),s=q_(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?vm(n):dw(n),c=Kr(o,e-er)+er;return t?ex(c,i):X3(c,i)}const $h=BigInt(0),Il=BigInt(1);function Em(n,e){const t=e.negate();return n?t:e}function m2(n,e){const t=z_(n.Fp,e.map(r=>r.Z));return e.map((r,i)=>n.fromAffine(r.toAffine(t[i])))}function K_(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function w2(n,e){K_(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=xg(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function u6(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t;let c=Number(n&i),u=n>>o;c>r&&(c-=s,u+=Il);const f=e*r,h=f+Math.abs(c)-1,g=c===0,p=c<0,m=e%2!==0;return{nextN:u,offset:h,isZero:g,isNeg:p,isNegF:m,offsetF:f}}function jK(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function zK(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const b2=new WeakMap,G_=new WeakMap;function v2(n){return G_.get(n)||1}function f6(n){if(n!==$h)throw new Error("invalid wNAF")}let HK=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>$h;)t&Il&&(r=r.add(i)),i=i.double(),t>>=Il;return r}precomputeWindow(e,t){const{windows:r,windowSize:i}=w2(t,this.bits),s=[];let o=e,c=o;for(let u=0;u<r;u++){c=o,s.push(c);for(let f=1;f<i;f++)c=c.add(o),s.push(c);o=c.double()}return s}wNAF(e,t,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=w2(e,this.bits);for(let c=0;c<o.windows;c++){const{nextN:u,offset:f,isZero:h,isNeg:g,isNegF:p,offsetF:m}=u6(r,c,o);r=u,h?s=s.add(Em(p,t[m])):i=i.add(Em(g,t[f]))}return f6(r),{p:i,f:s}}wNAFUnsafe(e,t,r,i=this.ZERO){const s=w2(e,this.bits);for(let o=0;o<s.windows&&r!==$h;o++){const{nextN:c,offset:u,isZero:f,isNeg:h}=u6(r,o,s);if(r=c,!f){const g=t[u];i=i.add(h?g.negate():g)}}return f6(r),i}getPrecomputes(e,t,r){let i=b2.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof r=="function"&&(i=r(i)),b2.set(t,i))),i}cached(e,t,r){const i=v2(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){const s=v2(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),t,i)}createCache(e,t){K_(t,this.bits),G_.set(e,t),b2.delete(e)}hasCache(e){return v2(e)!==1}};function VK(n,e,t,r){let i=e,s=n.ZERO,o=n.ZERO;for(;t>$h||r>$h;)t&Il&&(s=s.add(i)),r&Il&&(o=o.add(i)),i=i.double(),t>>=Il,r>>=Il;return{p1:s,p2:o}}function qK(n,e,t,r){jK(t,n),zK(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=T_(BigInt(i));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const f=xg(u),h=new Array(Number(f)+1).fill(o),g=Math.floor((e.BITS-1)/u)*u;let p=o;for(let m=g;m>=0;m-=u){h.fill(o);for(let b=0;b<s;b++){const A=r[b],_=Number(A>>BigInt(m)&f);h[_]=h[_].add(t[b])}let v=o;for(let b=h.length-1,A=o;b>0;b--)A=A.add(h[b]),v=v.add(A);if(p=p.add(v),m!==0)for(let b=0;b<u;b++)p=p.double()}return p}function h6(n,e,t){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return LK(e),e}else return Rc(n,{isLE:t})}function KK(n,e,t={},r){if(r===void 0&&(r=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>$h))throw new Error(`CURVE.${c} must be positive bigint`)}const i=h6(e.p,t.Fp,r),s=h6(e.n,t.Fn,r),o=["Gx","Gy","a","b"];for(const c of o)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),v_("HashToScalar-");const Gd=BigInt(0),Yu=BigInt(1),cy=BigInt(2);function GK(n){return pw(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function WK(n){const e=GK(n),{P:t,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,c=r==="x25519";if(!c&&r!=="x448")throw new Error("invalid type");const u=o||Z3,f=c?255:448,h=c?32:56,g=BigInt(c?9:5),p=BigInt(c?121665:39081),m=c?cy**BigInt(254):cy**BigInt(447),v=c?BigInt(8)*cy**BigInt(251)-Yu:BigInt(4)*cy**BigInt(445)-Yu,b=m+v+Yu,A=z=>Kr(z,t),_=U(g);function U(z){return ex(A(z),h)}function O(z){const P=jn("u coordinate",z,h);return c&&(P[31]&=127),A(vm(P))}function T(z){return vm(i(jn("scalar",z,h)))}function R(z,P){const D=V(O(P),T(z));if(D===Gd)throw new Error("invalid private or public key received");return U(D)}function j(z){return R(z,_)}function H(z,P,D){const w=A(z*(P-D));return P=A(P-w),D=A(D+w),{x_2:P,x_3:D}}function V(z,P){wE("u",z,Gd,t),wE("scalar",P,m,b);const D=P,w=z;let x=Yu,B=Gd,C=z,I=Yu,N=Gd;for(let L=BigInt(f-1);L>=Gd;L--){const Y=D>>L&Yu;N^=Y,{x_2:x,x_3:C}=H(N,x,C),{x_2:B,x_3:I}=H(N,B,I),N=Y;const q=x+B,Z=A(q*q),te=x-B,re=A(te*te),le=Z-re,se=C+I,ue=C-I,Ne=A(ue*q),Re=A(se*te),ke=Ne+Re,Ve=Ne-Re;C=A(ke*ke),I=A(w*A(Ve*Ve)),x=A(Z*re),B=A(le*(Z+A(p*le)))}({x_2:x,x_3:C}=H(N,x,C)),{x_2:B,x_3:I}=H(N,B,I);const $=s(B);return A(x*$)}const M={secretKey:h,publicKey:h,seed:h},G=(z=u(h))=>(Xi(z,M.seed),z);function Q(z){const P=G(z);return{secretKey:P,publicKey:j(P)}}return{keygen:Q,getSharedSecret:(z,P)=>R(z,P),getPublicKey:z=>j(z),scalarMult:R,scalarMultBase:j,utils:{randomSecretKey:G,randomPrivateKey:G},GuBytes:_.slice(),lengths:M}}const QK=BigInt(1),d6=BigInt(2),ZK=BigInt(3),JK=BigInt(5);BigInt(8);const W_=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),YK={p:W_,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function XK(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=W_,o=n*n%s*n%s,c=$i(o,d6,s)*o%s,u=$i(c,QK,s)*n%s,f=$i(u,JK,s)*u%s,h=$i(f,e,s)*f%s,g=$i(h,t,s)*h%s,p=$i(g,r,s)*g%s,m=$i(p,i,s)*p%s,v=$i(m,i,s)*p%s,b=$i(v,e,s)*f%s;return{pow_p_5_8:$i(b,d6,s)*n%s,b2:o}}function eG(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const tG=Rc(YK.p,{isLE:!0});(()=>{const n=tG.ORDER;return WK({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=XK(e);return Kr($i(t,ZK,n)*r,n)},adjustScalarBytes:eG})})();const p6=(n,e)=>(n+(n>=0?e:-e)/Q_)/e;function nG(n,e,t){const[[r,i],[s,o]]=e,c=p6(o*n,t),u=p6(-i*n,t);let f=n-c*r-u*s,h=-c*i-u*o;const g=f<$o,p=h<$o;g&&(f=-f),p&&(h=-h);const m=xg(Math.ceil(T_(t)/2))+_f;if(f<$o||f>=m||h<$o||h>=m)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:g,k1:f,k2neg:p,k2:h}}function bE(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function E2(n,e){const t={};for(let r of Object.keys(e))t[r]=n[r]===void 0?e[r]:n[r];return bm(t.lowS,"lowS"),bm(t.prehash,"prehash"),t.format!==void 0&&bE(t.format),t}let rG=class extends Error{constructor(e=""){super(e)}};const po={Err:rG,_tlv:{encode:(n,e)=>{const{Err:t}=po;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=ay(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?ay(i.length/2|128):"";return ay(n)+s+i+e},decode(n,e){const{Err:t}=po;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new t("tlv.decode: length bytes not complete");if(f[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of f)o=o<<8|h;if(r+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=po;if(n<$o)throw new e("integer: negative integers are not allowed");let t=ay(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=po;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return dw(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=po,i=jn("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,s),{v:f,l:h}=r.decode(2,u);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(f)}},hexFromSig(n){const{_tlv:e,_int:t}=po,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},$o=BigInt(0),_f=BigInt(1),Q_=BigInt(2),ly=BigInt(3),iG=BigInt(4);function yf(n,e){const{BYTES:t}=n;let r;if(typeof e=="bigint")r=e;else{let i=jn("private key",e);try{r=n.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function sG(n,e={}){const t=KK("weierstrass",n,e),{Fp:r,Fn:i}=t;let s=t.CURVE;const{h:o,n:c}=s;pw(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=e;if(u&&(!r.is0(s.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=J_(r,i);function h(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function g(z,P,D){const{x:w,y:x}=P.toAffine(),B=r.toBytes(w);if(bm(D,"isCompressed"),D){h();const C=!r.isOdd(x);return Xa(Z_(C),B)}else return Xa(Uint8Array.of(4),B,r.toBytes(x))}function p(z){Al(z,void 0,"Point");const{publicKey:P,publicKeyUncompressed:D}=f,w=z.length,x=z[0],B=z.subarray(1);if(w===P&&(x===2||x===3)){const C=r.fromBytes(B);if(!r.isValid(C))throw new Error("bad point: is not on curve, wrong x");const I=b(C);let N;try{N=r.sqrt(I)}catch(L){const Y=L instanceof Error?": "+L.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}h();const $=r.isOdd(N);return(x&1)===1!==$&&(N=r.neg(N)),{x:C,y:N}}else if(w===D&&x===4){const C=r.BYTES,I=r.fromBytes(B.subarray(0,C)),N=r.fromBytes(B.subarray(C,C*2));if(!A(I,N))throw new Error("bad point: is not on curve");return{x:I,y:N}}else throw new Error(`bad point: got length ${w}, expected compressed=${P} or uncompressed=${D}`)}const m=e.toBytes||g,v=e.fromBytes||p;function b(z){const P=r.sqr(z),D=r.mul(P,z);return r.add(r.add(D,r.mul(z,s.a)),s.b)}function A(z,P){const D=r.sqr(P),w=b(z);return r.eql(D,w)}if(!A(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const _=r.mul(r.pow(s.a,ly),iG),U=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(_,U)))throw new Error("bad curve params: a or b");function O(z,P,D=!1){if(!r.isValid(P)||D&&r.is0(P))throw new Error(`bad point coordinate ${z}`);return P}function T(z){if(!(z instanceof M))throw new Error("ProjectivePoint expected")}function R(z){if(!u||!u.basises)throw new Error("no endo");return nG(z,u.basises,i.ORDER)}const j=a6((z,P)=>{const{X:D,Y:w,Z:x}=z;if(r.eql(x,r.ONE))return{x:D,y:w};const B=z.is0();P==null&&(P=B?r.ONE:r.inv(x));const C=r.mul(D,P),I=r.mul(w,P),N=r.mul(x,P);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(N,r.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),H=a6(z=>{if(z.is0()){if(e.allowInfinityPoint&&!r.is0(z.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:D}=z.toAffine();if(!r.isValid(P)||!r.isValid(D))throw new Error("bad point: x or y not field elements");if(!A(P,D))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function V(z,P,D,w,x){return D=new M(r.mul(D.X,z),D.Y,D.Z),P=Em(w,P),D=Em(x,D),P.add(D)}class M{constructor(P,D,w){this.X=O("x",P),this.Y=O("y",D,!0),this.Z=O("z",w),Object.freeze(this)}static CURVE(){return s}static fromAffine(P){const{x:D,y:w}=P||{};if(!P||!r.isValid(D)||!r.isValid(w))throw new Error("invalid affine point");if(P instanceof M)throw new Error("projective point not allowed");return r.is0(D)&&r.is0(w)?M.ZERO:new M(D,w,r.ONE)}static fromBytes(P){const D=M.fromAffine(v(Al(P,void 0,"point")));return D.assertValidity(),D}static fromHex(P){return M.fromBytes(jn("pointHex",P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,D=!0){return Q.createCache(this,P),D||this.multiply(ly),this}assertValidity(){H(this)}hasEvenY(){const{y:P}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(P)}equals(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P,N=r.eql(r.mul(D,I),r.mul(B,x)),$=r.eql(r.mul(w,I),r.mul(C,x));return N&&$}negate(){return new M(this.X,r.neg(this.Y),this.Z)}double(){const{a:P,b:D}=s,w=r.mul(D,ly),{X:x,Y:B,Z:C}=this;let I=r.ZERO,N=r.ZERO,$=r.ZERO,L=r.mul(x,x),Y=r.mul(B,B),q=r.mul(C,C),Z=r.mul(x,B);return Z=r.add(Z,Z),$=r.mul(x,C),$=r.add($,$),I=r.mul(P,$),N=r.mul(w,q),N=r.add(I,N),I=r.sub(Y,N),N=r.add(Y,N),N=r.mul(I,N),I=r.mul(Z,I),$=r.mul(w,$),q=r.mul(P,q),Z=r.sub(L,q),Z=r.mul(P,Z),Z=r.add(Z,$),$=r.add(L,L),L=r.add($,L),L=r.add(L,q),L=r.mul(L,Z),N=r.add(N,L),q=r.mul(B,C),q=r.add(q,q),L=r.mul(q,Z),I=r.sub(I,L),$=r.mul(q,Y),$=r.add($,$),$=r.add($,$),new M(I,N,$)}add(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P;let N=r.ZERO,$=r.ZERO,L=r.ZERO;const Y=s.a,q=r.mul(s.b,ly);let Z=r.mul(D,B),te=r.mul(w,C),re=r.mul(x,I),le=r.add(D,w),se=r.add(B,C);le=r.mul(le,se),se=r.add(Z,te),le=r.sub(le,se),se=r.add(D,x);let ue=r.add(B,I);return se=r.mul(se,ue),ue=r.add(Z,re),se=r.sub(se,ue),ue=r.add(w,x),N=r.add(C,I),ue=r.mul(ue,N),N=r.add(te,re),ue=r.sub(ue,N),L=r.mul(Y,se),N=r.mul(q,re),L=r.add(N,L),N=r.sub(te,L),L=r.add(te,L),$=r.mul(N,L),te=r.add(Z,Z),te=r.add(te,Z),re=r.mul(Y,re),se=r.mul(q,se),te=r.add(te,re),re=r.sub(Z,re),re=r.mul(Y,re),se=r.add(se,re),Z=r.mul(te,se),$=r.add($,Z),Z=r.mul(ue,se),N=r.mul(le,N),N=r.sub(N,Z),Z=r.mul(le,te),L=r.mul(ue,L),L=r.add(L,Z),new M(N,$,L)}subtract(P){return this.add(P.negate())}is0(){return this.equals(M.ZERO)}multiply(P){const{endo:D}=e;if(!i.isValidNot0(P))throw new Error("invalid scalar: out of range");let w,x;const B=C=>Q.cached(this,C,I=>m2(M,I));if(D){const{k1neg:C,k1:I,k2neg:N,k2:$}=R(P),{p:L,f:Y}=B(I),{p:q,f:Z}=B($);x=Y.add(Z),w=V(D.beta,L,q,C,N)}else{const{p:C,f:I}=B(P);w=C,x=I}return m2(M,[w,x])[0]}multiplyUnsafe(P){const{endo:D}=e,w=this;if(!i.isValid(P))throw new Error("invalid scalar: out of range");if(P===$o||w.is0())return M.ZERO;if(P===_f)return w;if(Q.hasCache(this))return this.multiply(P);if(D){const{k1neg:x,k1:B,k2neg:C,k2:I}=R(P),{p1:N,p2:$}=VK(M,w,B,I);return V(D.beta,N,$,x,C)}else return Q.unsafe(w,P)}multiplyAndAddUnsafe(P,D,w){const x=this.multiplyUnsafe(D).add(P.multiplyUnsafe(w));return x.is0()?void 0:x}toAffine(P){return j(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return o===_f?!0:P?P(M,this):Q.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:P}=e;return o===_f?this:P?P(M,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(P=!0){return bm(P,"isCompressed"),this.assertValidity(),m(M,this,P)}toHex(P=!0){return Cf(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(P=!0){return this.toBytes(P)}_setWindowSize(P){this.precompute(P)}static normalizeZ(P){return m2(M,P)}static msm(P,D){return qK(M,i,P,D)}static fromPrivateKey(P){return M.BASE.multiply(yf(i,P))}}M.BASE=new M(s.Gx,s.Gy,r.ONE),M.ZERO=new M(r.ZERO,r.ONE,r.ZERO),M.Fp=r,M.Fn=i;const G=i.BITS,Q=new HK(M,e.endo?Math.ceil(G/2):G);return M.BASE.precompute(8),M}function Z_(n){return Uint8Array.of(n?2:3)}function J_(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function oG(n,e={}){const{Fn:t}=n,r=e.randomBytes||Z3,i=Object.assign(J_(n.Fp,t),{seed:q_(t.ORDER)});function s(p){try{return!!yf(t,p)}catch{return!1}}function o(p,m){const{publicKey:v,publicKeyUncompressed:b}=i;try{const A=p.length;return m===!0&&A!==v||m===!1&&A!==b?!1:!!n.fromBytes(p)}catch{return!1}}function c(p=r(i.seed)){return MK(Al(p,i.seed,"seed"),t.ORDER)}function u(p,m=!0){return n.BASE.multiply(yf(t,p)).toBytes(m)}function f(p){const m=c(p);return{secretKey:m,publicKey:u(m)}}function h(p){if(typeof p=="bigint")return!1;if(p instanceof n)return!0;const{secretKey:m,publicKey:v,publicKeyUncompressed:b}=i;if(t.allowedLengths||m===v)return;const A=jn("key",p).length;return A===v||A===b}function g(p,m,v=!0){if(h(p)===!0)throw new Error("first arg must be private key");if(h(m)===!1)throw new Error("second arg must be public key");const b=yf(t,p);return n.fromHex(m).multiply(b).toBytes(v)}return Object.freeze({getPublicKey:u,getSharedSecret:g,keygen:f,Point:n,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:s,randomPrivateKey:c,normPrivateKeyToScalar:p=>yf(t,p),precompute(p=8,m=n.BASE){return m.precompute(p,!1)}},lengths:i})}function aG(n,e,t={}){y_(e),pw(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||Z3,i=t.hmac||((D,...w)=>D_(e,D,Xa(...w))),{Fp:s,Fn:o}=n,{ORDER:c,BITS:u}=o,{keygen:f,getPublicKey:h,getSharedSecret:g,utils:p,lengths:m}=oG(n,t),v={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},b="compact";function A(D){const w=c>>_f;return D>w}function _(D,w){if(!o.isValidNot0(w))throw new Error(`invalid signature ${D}: out of range 1..Point.Fn.ORDER`);return w}function U(D,w){bE(w);const x=m.signature,B=w==="compact"?x:w==="recovered"?x+1:void 0;return Al(D,B,`${w} signature`)}class O{constructor(w,x,B){this.r=_("r",w),this.s=_("s",x),B!=null&&(this.recovery=B),Object.freeze(this)}static fromBytes(w,x=b){U(w,x);let B;if(x==="der"){const{r:$,s:L}=po.toSig(Al(w));return new O($,L)}x==="recovered"&&(B=w[0],x="compact",w=w.subarray(1));const C=o.BYTES,I=w.subarray(0,C),N=w.subarray(C,C*2);return new O(o.fromBytes(I),o.fromBytes(N),B)}static fromHex(w,x){return this.fromBytes(wm(w),x)}addRecoveryBit(w){return new O(this.r,this.s,w)}recoverPublicKey(w){const x=s.ORDER,{r:B,s:C,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(c*Q_<x&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const N=I===2||I===3?B+c:B;if(!s.isValid(N))throw new Error("recovery id 2 or 3 invalid");const $=s.toBytes(N),L=n.fromBytes(Xa(Z_((I&1)===0),$)),Y=o.inv(N),q=R(jn("msgHash",w)),Z=o.create(-q*Y),te=o.create(C*Y),re=n.BASE.multiplyUnsafe(Z).add(L.multiplyUnsafe(te));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return A(this.s)}toBytes(w=b){if(bE(w),w==="der")return wm(po.hexFromSig(this));const x=o.toBytes(this.r),B=o.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Xa(Uint8Array.of(this.recovery),x,B)}return Xa(x,B)}toHex(w){return Cf(this.toBytes(w))}assertValidity(){}static fromCompact(w){return O.fromBytes(jn("sig",w),"compact")}static fromDER(w){return O.fromBytes(jn("sig",w),"der")}normalizeS(){return this.hasHighS()?new O(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Cf(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Cf(this.toBytes("compact"))}}const T=t.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const w=dw(D),x=D.length*8-u;return x>0?w>>BigInt(x):w},R=t.bits2int_modN||function(D){return o.create(T(D))},j=xg(u);function H(D){return wE("num < 2^"+u,D,$o,j),o.toBytes(D)}function V(D,w){return Al(D,void 0,"message"),w?Al(e(D),void 0,"prehashed message"):D}function M(D,w,x){if(["recovered","canonical"].some(te=>te in x))throw new Error("sign() legacy options not supported");const{lowS:B,prehash:C,extraEntropy:I}=E2(x,v);D=V(D,C);const N=R(D),$=yf(o,w),L=[H($),H(N)];if(I!=null&&I!==!1){const te=I===!0?r(m.secretKey):I;L.push(jn("extraEntropy",te))}const Y=Xa(...L),q=N;function Z(te){const re=T(te);if(!o.isValidNot0(re))return;const le=o.inv(re),se=n.BASE.multiply(re).toAffine(),ue=o.create(se.x);if(ue===$o)return;const Ne=o.create(le*o.create(q+ue*$));if(Ne===$o)return;let Re=(se.x===ue?0:2)|Number(se.y&_f),ke=Ne;return B&&A(Ne)&&(ke=o.neg(Ne),Re^=1),new O(ue,ke,Re)}return{seed:Y,k2sig:Z}}function G(D,w,x={}){D=jn("message",D);const{seed:B,k2sig:C}=M(D,w,x);return NK(e.outputLen,o.BYTES,i)(B,C)}function Q(D){let w;const x=typeof D=="string"||fw(D),B=!x&&D!==null&&typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!x&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(B)w=new O(D.r,D.s);else if(x){try{w=O.fromBytes(jn("sig",D),"der")}catch(C){if(!(C instanceof po.Err))throw C}if(!w)try{w=O.fromBytes(jn("sig",D),"compact")}catch{return!1}}return w||!1}function z(D,w,x,B={}){const{lowS:C,prehash:I,format:N}=E2(B,v);if(x=jn("publicKey",x),w=V(jn("message",w),I),"strict"in B)throw new Error("options.strict was renamed to lowS");const $=N===void 0?Q(D):O.fromBytes(jn("sig",D),N);if($===!1)return!1;try{const L=n.fromBytes(x);if(C&&$.hasHighS())return!1;const{r:Y,s:q}=$,Z=R(w),te=o.inv(q),re=o.create(Z*te),le=o.create(Y*te),se=n.BASE.multiplyUnsafe(re).add(L.multiplyUnsafe(le));return se.is0()?!1:o.create(se.x)===Y}catch{return!1}}function P(D,w,x={}){const{prehash:B}=E2(x,v);return w=V(w,B),O.fromBytes(D,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:f,getPublicKey:h,getSharedSecret:g,utils:p,lengths:m,Point:n,sign:G,verify:z,recoverPublicKey:P,Signature:O,hash:e})}function cG(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Rc(e.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),s={Fp:t,Fn:i,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function lG(n){const{CURVE:e,curveOpts:t}=cG(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,hash:n.hash,ecdsaOpts:r}}function uG(n,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},n,H_(t.Fn.ORDER,t.Fn.BITS))})}function fG(n){const{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:i}=lG(n),s=sG(e,t),o=aG(s,r,i);return uG(n,o)}function vE(n,e){const t=r=>fG({...n,hash:r});return{...t(e),create:t}}const Y_={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},X_={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},eN={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},hG=Rc(Y_.p),dG=Rc(X_.p),pG=Rc(eN.p);vE({...Y_,Fp:hG,lowS:!1},Xq);vE({...X_,Fp:dG,lowS:!1},tK),vE({...eN,Fp:pG,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},eK);const gG={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function yG(n,e){const{message:t,code:r}=gG[n];return{message:t,code:r}}function EE(n,e){return!!Array.isArray(n)}class pu{}let mG=class extends pu{constructor(e){super()}};const g6=we.FIVE_SECONDS,gu={pulse:"heartbeat_pulse"};let wG=class tN extends mG{constructor(e){super(e),this.events=new Zr.EventEmitter,this.interval=g6,this.interval=(e==null?void 0:e.interval)||g6}static async init(e){const t=new tN(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),we.toMiliseconds(this.interval))}pulse(){this.events.emit(gu.pulse)}};const bG=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,vG=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,EG=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function xG(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){AG(n);return}return e}function AG(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function uy(n,e={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const t=n.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!EG.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(bG.test(n)||vG.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,xG)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function SG(n){return!n||typeof n.then!="function"?Promise.resolve(n):n}function tn(n,...e){try{return SG(n(...e))}catch(t){return Promise.reject(t)}}function IG(n){const e=typeof n;return n===null||e!=="object"&&e!=="function"}function OG(n){const e=Object.getPrototypeOf(n);return!e||e.isPrototypeOf(Object)}function Hy(n){if(IG(n))return String(n);if(OG(n)||Array.isArray(n))return JSON.stringify(n);if(typeof n.toJSON=="function")return Hy(n.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const xE="base64:";function BG(n){return typeof n=="string"?n:xE+_G(n)}function PG(n){return typeof n!="string"||!n.startsWith(xE)?n:CG(n.slice(xE.length))}function CG(n){return globalThis.Buffer?Buffer.from(n,"base64"):Uint8Array.from(globalThis.atob(n),e=>e.codePointAt(0))}function _G(n){return globalThis.Buffer?Buffer.from(n).toString("base64"):globalThis.btoa(String.fromCodePoint(...n))}function dr(n){var e;return n&&((e=n.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function NG(...n){return dr(n.join(":"))}function fy(n){return n=dr(n),n?n+":":""}function DG(n,e){if(e===void 0)return!0;let t=0,r=n.indexOf(":");for(;r>-1;)t++,r=n.indexOf(":",r+1);return t<=e}function $G(n,e){return e?n.startsWith(e)&&n[n.length-1]!=="$":n[n.length-1]!=="$"}const TG="memory",kG=()=>{const n=new Map;return{name:TG,getInstance:()=>n,hasItem(e){return n.has(e)},getItem(e){return n.get(e)??null},getItemRaw(e){return n.get(e)??null},setItem(e,t){n.set(e,t)},setItemRaw(e,t){n.set(e,t)},removeItem(e){n.delete(e)},getKeys(){return[...n.keys()]},clear(){n.clear()},dispose(){n.clear()}}};function RG(n={}){const e={mounts:{"":n.driver||kG()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=f=>{for(const h of e.mountpoints)if(f.startsWith(h))return{base:h,relativeKey:f.slice(h.length),driver:e.mounts[h]};return{base:"",relativeKey:f,driver:e.mounts[""]}},r=(f,h)=>e.mountpoints.filter(g=>g.startsWith(f)||h&&f.startsWith(g)).map(g=>({relativeBase:f.length>g.length?f.slice(g.length):void 0,mountpoint:g,driver:e.mounts[g]})),i=(f,h)=>{if(e.watching){h=dr(h);for(const g of e.watchListeners)g(f,h)}},s=async()=>{if(!e.watching){e.watching=!0;for(const f in e.mounts)e.unwatch[f]=await y6(e.mounts[f],i,f)}},o=async()=>{if(e.watching){for(const f in e.unwatch)await e.unwatch[f]();e.unwatch={},e.watching=!1}},c=(f,h,g)=>{const p=new Map,m=v=>{let b=p.get(v.base);return b||(b={driver:v.driver,base:v.base,items:[]},p.set(v.base,b)),b};for(const v of f){const b=typeof v=="string",A=dr(b?v:v.key),_=b?void 0:v.value,U=b||!v.options?h:{...h,...v.options},O=t(A);m(O).items.push({key:A,value:_,relativeKey:O.relativeKey,options:U})}return Promise.all([...p.values()].map(v=>g(v))).then(v=>v.flat())},u={hasItem(f,h={}){f=dr(f);const{relativeKey:g,driver:p}=t(f);return tn(p.hasItem,g,h)},getItem(f,h={}){f=dr(f);const{relativeKey:g,driver:p}=t(f);return tn(p.getItem,g,h).then(m=>uy(m))},getItems(f,h={}){return c(f,h,g=>g.driver.getItems?tn(g.driver.getItems,g.items.map(p=>({key:p.relativeKey,options:p.options})),h).then(p=>p.map(m=>({key:NG(g.base,m.key),value:uy(m.value)}))):Promise.all(g.items.map(p=>tn(g.driver.getItem,p.relativeKey,p.options).then(m=>({key:p.key,value:uy(m)})))))},getItemRaw(f,h={}){f=dr(f);const{relativeKey:g,driver:p}=t(f);return p.getItemRaw?tn(p.getItemRaw,g,h):tn(p.getItem,g,h).then(m=>PG(m))},async setItem(f,h,g={}){if(h===void 0)return u.removeItem(f);f=dr(f);const{relativeKey:p,driver:m}=t(f);m.setItem&&(await tn(m.setItem,p,Hy(h),g),m.watch||i("update",f))},async setItems(f,h){await c(f,h,async g=>{if(g.driver.setItems)return tn(g.driver.setItems,g.items.map(p=>({key:p.relativeKey,value:Hy(p.value),options:p.options})),h);g.driver.setItem&&await Promise.all(g.items.map(p=>tn(g.driver.setItem,p.relativeKey,Hy(p.value),p.options)))})},async setItemRaw(f,h,g={}){if(h===void 0)return u.removeItem(f,g);f=dr(f);const{relativeKey:p,driver:m}=t(f);if(m.setItemRaw)await tn(m.setItemRaw,p,h,g);else if(m.setItem)await tn(m.setItem,p,BG(h),g);else return;m.watch||i("update",f)},async removeItem(f,h={}){typeof h=="boolean"&&(h={removeMeta:h}),f=dr(f);const{relativeKey:g,driver:p}=t(f);p.removeItem&&(await tn(p.removeItem,g,h),(h.removeMeta||h.removeMata)&&await tn(p.removeItem,g+"$",h),p.watch||i("remove",f))},async getMeta(f,h={}){typeof h=="boolean"&&(h={nativeOnly:h}),f=dr(f);const{relativeKey:g,driver:p}=t(f),m=Object.create(null);if(p.getMeta&&Object.assign(m,await tn(p.getMeta,g,h)),!h.nativeOnly){const v=await tn(p.getItem,g+"$",h).then(b=>uy(b));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(m,v))}return m},setMeta(f,h,g={}){return this.setItem(f+"$",h,g)},removeMeta(f,h={}){return this.removeItem(f+"$",h)},async getKeys(f,h={}){var A;f=fy(f);const g=r(f,!0);let p=[];const m=[];let v=!0;for(const _ of g){(A=_.driver.flags)!=null&&A.maxDepth||(v=!1);const U=await tn(_.driver.getKeys,_.relativeBase,h);for(const O of U){const T=_.mountpoint+dr(O);p.some(R=>T.startsWith(R))||m.push(T)}p=[_.mountpoint,...p.filter(O=>!O.startsWith(_.mountpoint))]}const b=h.maxDepth!==void 0&&!v;return m.filter(_=>(!b||DG(_,h.maxDepth))&&$G(_,f))},async clear(f,h={}){f=fy(f),await Promise.all(r(f,!1).map(async g=>{if(g.driver.clear)return tn(g.driver.clear,g.relativeBase,h);if(g.driver.removeItem){const p=await g.driver.getKeys(g.relativeBase||"",h);return Promise.all(p.map(m=>g.driver.removeItem(m,h)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(f=>m6(f)))},async watch(f){return await s(),e.watchListeners.push(f),async()=>{e.watchListeners=e.watchListeners.filter(h=>h!==f),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(f,h){if(f=fy(f),f&&e.mounts[f])throw new Error(`already mounted at ${f}`);return f&&(e.mountpoints.push(f),e.mountpoints.sort((g,p)=>p.length-g.length)),e.mounts[f]=h,e.watching&&Promise.resolve(y6(h,i,f)).then(g=>{e.unwatch[f]=g}).catch(console.error),u},async unmount(f,h=!0){var g,p;f=fy(f),!(!f||!e.mounts[f])&&(e.watching&&f in e.unwatch&&((p=(g=e.unwatch)[f])==null||p.call(g),delete e.unwatch[f]),h&&await m6(e.mounts[f]),e.mountpoints=e.mountpoints.filter(m=>m!==f),delete e.mounts[f])},getMount(f=""){f=dr(f)+":";const h=t(f);return{driver:h.driver,base:h.base}},getMounts(f="",h={}){return f=dr(f),r(f,h.parents).map(p=>({driver:p.driver,base:p.mountpoint}))},keys:(f,h={})=>u.getKeys(f,h),get:(f,h={})=>u.getItem(f,h),set:(f,h,g={})=>u.setItem(f,h,g),has:(f,h={})=>u.hasItem(f,h),del:(f,h={})=>u.removeItem(f,h),remove:(f,h={})=>u.removeItem(f,h)};return u}function y6(n,e,t){return n.watch?n.watch((r,i)=>e(r,t+i)):()=>{}}async function m6(n){typeof n.dispose=="function"&&await tn(n.dispose)}function yu(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function nN(n,e){let t;const r=()=>{if(t)return t;const i=indexedDB.open(n);return i.onupgradeneeded=()=>i.result.createObjectStore(e),t=yu(i),t.then(s=>{s.onclose=()=>t=void 0},()=>{}),t};return(i,s)=>r().then(o=>s(o.transaction(e,i).objectStore(e)))}let x2;function Ag(){return x2||(x2=nN("keyval-store","keyval")),x2}function w6(n,e=Ag()){return e("readonly",t=>yu(t.get(n)))}function UG(n,e,t=Ag()){return t("readwrite",r=>(r.put(e,n),yu(r.transaction)))}function LG(n,e=Ag()){return e("readwrite",t=>(t.delete(n),yu(t.transaction)))}function FG(n=Ag()){return n("readwrite",e=>(e.clear(),yu(e.transaction)))}function MG(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},yu(n.transaction)}function jG(n=Ag()){return n("readonly",e=>{if(e.getAllKeys)return yu(e.getAllKeys());const t=[];return MG(e,r=>t.push(r.key)).then(()=>t)})}const zG=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),HG=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function xm(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return HG(n)}catch{return n}}function nx(n){return typeof n=="string"?n:zG(n)||""}const VG="idb-keyval";var qG=(n={})=>{const e=n.base&&n.base.length>0?`${n.base}:`:"",t=i=>e+i;let r;return n.dbName&&n.storeName&&(r=nN(n.dbName,n.storeName)),{name:VG,options:n,async hasItem(i){return!(typeof await w6(t(i),r)>"u")},async getItem(i){return await w6(t(i),r)??null},setItem(i,s){return UG(t(i),s,r)},removeItem(i){return LG(t(i),r)},getKeys(){return jG(r)},clear(){return FG(r)}}};const KG="WALLET_CONNECT_V2_INDEXED_DB",GG="keyvaluestorage";let WG=class{constructor(){this.indexedDb=RG({driver:qG({dbName:KG,storeName:GG})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,nx(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var A2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vy={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,r){this[t]=String(r)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(r){t[r]=void 0,delete t[r]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof A2<"u"&&A2.localStorage?Vy.exports=A2.localStorage:typeof window<"u"&&window.localStorage?Vy.exports=window.localStorage:Vy.exports=new e})();function QG(n){var e;return[n[0],xm((e=n[1])!=null?e:"")]}let ZG=class{constructor(){this.localStorage=Vy.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(QG)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return xm(t)}async setItem(e,t){this.localStorage.setItem(e,nx(t))}async removeItem(e){this.localStorage.removeItem(e)}};const JG="wc_storage_version",b6=1,YG=async(n,e,t)=>{const r=JG,i=await e.getItem(r);if(i&&i>=b6){t(e);return}const s=await n.getKeys();if(!s.length){t(e);return}const o=[];for(;s.length;){const c=s.shift();if(!c)continue;const u=c.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){const f=await n.getItem(c);await e.setItem(c,f),o.push(c)}}await e.setItem(r,b6),t(e),XG(n,o)},XG=async(n,e)=>{e.length&&e.forEach(async t=>{await n.removeItem(t)})};let eW=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new ZG;this.storage=e;try{const t=new WG;YG(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var tW=Object.defineProperty,nW=(n,e,t)=>e in n?tW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,v6=(n,e,t)=>nW(n,typeof e!="symbol"?e+"":e,t);let rW=class extends pu{constructor(e){super(),this.opts=e,v6(this,"protocol","wc"),v6(this,"version",2)}};var iW=Object.defineProperty,sW=(n,e,t)=>e in n?iW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,oW=(n,e,t)=>sW(n,e+"",t);let aW=class extends pu{constructor(e,t){super(),this.core=e,this.logger=t,oW(this,"records",new Map)}},cW=class{constructor(e,t){this.logger=e,this.core=t}},lW=class extends pu{constructor(e,t){super(),this.relayer=e,this.logger=t}},uW=class extends pu{constructor(e){super()}},fW=class{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}},hW=class extends pu{constructor(e,t){super(),this.relayer=e,this.logger=t}},dW=class extends pu{constructor(e,t){super(),this.core=e,this.logger=t}},pW=class{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}},gW=class{constructor(e,t){this.projectId=e,this.logger=t}},yW=class{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}};var mW=Object.defineProperty,wW=(n,e,t)=>e in n?mW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,E6=(n,e,t)=>wW(n,typeof e!="symbol"?e+"":e,t);let bW=class{constructor(e){this.opts=e,E6(this,"protocol","wc"),E6(this,"version",2)}},vW=class{constructor(e){this.client=e}};var x6=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},EW=(function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n})(),xW=(function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n})(),AW=(function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n})(),SW=(function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n})(),IW=(function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n})(),OW=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,BW=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,A6=3,PW=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",OW]],S6=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function CW(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new IW:typeof navigator<"u"?NW(navigator.userAgent):$W()}function _W(n){return n!==""&&PW.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function NW(n){var e=_W(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new SW;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<A6&&(i=x6(x6([],i,!0),TW(A6-i.length),!0)):i=[];var s=i.join("."),o=DW(n),c=BW.exec(n);return c&&c[1]?new AW(t,s,o,c[1]):new EW(t,s,o)}function DW(n){for(var e=0,t=S6.length;e<t;e++){var r=S6[e],i=r[0],s=r[1],o=s.exec(n);if(o)return i}return null}function $W(){var n=typeof process<"u"&&process.version;return n?new xW(process.version.slice(1)):null}function TW(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var ft={},I6;function rN(){if(I6)return ft;I6=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=ft.getLocation=ft.getLocationOrThrow=ft.getNavigator=ft.getNavigatorOrThrow=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function n(p){let m;return typeof window<"u"&&typeof window[p]<"u"&&(m=window[p]),m}ft.getFromWindow=n;function e(p){const m=n(p);if(!m)throw new Error(`${p} is not defined in Window`);return m}ft.getFromWindowOrThrow=e;function t(){return e("document")}ft.getDocumentOrThrow=t;function r(){return n("document")}ft.getDocument=r;function i(){return e("navigator")}ft.getNavigatorOrThrow=i;function s(){return n("navigator")}ft.getNavigator=s;function o(){return e("location")}ft.getLocationOrThrow=o;function c(){return n("location")}ft.getLocation=c;function u(){return e("crypto")}ft.getCryptoOrThrow=u;function f(){return n("crypto")}ft.getCrypto=f;function h(){return e("localStorage")}ft.getLocalStorageOrThrow=h;function g(){return n("localStorage")}return ft.getLocalStorage=g,ft}var Ho=rN(),Wd={},O6;function kW(){if(O6)return Wd;O6=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.getWindowMetadata=void 0;const n=rN();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function i(){const m=t.getElementsByTagName("link"),v=[];for(let b=0;b<m.length;b++){const A=m[b],_=A.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const U=A.getAttribute("href");if(U)if(U.toLowerCase().indexOf("https:")===-1&&U.toLowerCase().indexOf("http:")===-1&&U.indexOf("//")!==0){let O=r.protocol+"//"+r.host;if(U.indexOf("/")===0)O+=U;else{const T=r.pathname.split("/");T.pop();const R=T.join("/");O+=R+"/"+U}v.push(O)}else if(U.indexOf("//")===0){const O=r.protocol+U;v.push(O)}else v.push(U)}}return v}function s(...m){const v=t.getElementsByTagName("meta");for(let b=0;b<v.length;b++){const A=v[b],_=["itemprop","property","name"].map(U=>A.getAttribute(U)).filter(U=>U?m.includes(U):!1);if(_.length&&_){const U=A.getAttribute("content");if(U)return U}}return""}function o(){let m=s("name","og:site_name","og:title","twitter:title");return m||(m=t.title),m}function c(){return s("description","og:description","twitter:description","keywords")}const u=o(),f=c(),h=r.origin,g=i();return{description:f,url:h,icons:g,name:u}}return Wd.getWindowMetadata=e,Wd}var RW=kW();const UW="0.1.1";function LW(){return UW}class xt extends Error{constructor(e,t={}){const r=(()=>{var u;if(t.cause instanceof xt){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause&&"details"in t.cause&&typeof t.cause.details=="string"?t.cause.details:(u=t.cause)!=null&&u.message?t.cause.message:t.details})(),i=t.cause instanceof xt&&t.cause.docsPath||t.docsPath,o=`https://oxlib.sh${i??""}`,c=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${o}`:void 0]:[]].filter(u=>typeof u=="string").join(`
`);super(c,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${LW()}`}),this.cause=t.cause,this.details=r,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return iN(this,e)}}function iN(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause?iN(n.cause,e):e?null:n}const Xu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function FW(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Vp(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function cu(n,...e){if(!FW(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function MW(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Vp(n.outputLen),Vp(n.blockLen)}function Th(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function sN(n,e){cu(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function jW(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function kh(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function S2(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function gs(n,e){return n<<32-e|n>>>e}const zW=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function HW(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function VW(n){for(let e=0;e<n.length;e++)n[e]=HW(n[e]);return n}const B6=zW?n=>n:VW;function qW(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function gw(n){return typeof n=="string"&&(n=qW(n)),cu(n),n}function KW(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];cu(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}class rx{}function oN(n){const e=r=>n().update(gw(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function GW(n=32){if(Xu&&typeof Xu.getRandomValues=="function")return Xu.getRandomValues(new Uint8Array(n));if(Xu&&typeof Xu.randomBytes=="function")return Uint8Array.from(Xu.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function WW(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}function QW(n,e,t){return n&e^~n&t}function ZW(n,e,t){return n&e^n&t^e&t}class JW extends rx{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=S2(this.buffer)}update(e){Th(this),e=gw(e),cu(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=S2(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Th(this),sN(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,kh(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let g=o;g<i;g++)t[g]=0;WW(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=S2(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)c.setUint32(4*g,h[g],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=c,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Oa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hy=BigInt(2**32-1),P6=BigInt(32);function YW(n,e=!1){return e?{h:Number(n&hy),l:Number(n>>P6&hy)}:{h:Number(n>>P6&hy)|0,l:Number(n&hy)|0}}function XW(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:c}=YW(n[s],e);[r[s],i[s]]=[o,c]}return[r,i]}const eQ=(n,e,t)=>n<<t|e>>>32-t,tQ=(n,e,t)=>e<<t|n>>>32-t,nQ=(n,e,t)=>e<<t-32|n>>>64-t,rQ=(n,e,t)=>n<<t-32|e>>>64-t,iQ=BigInt(0),Qd=BigInt(1),sQ=BigInt(2),oQ=BigInt(7),aQ=BigInt(256),cQ=BigInt(113),aN=[],cN=[],lN=[];for(let n=0,e=Qd,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],aN.push(2*(5*r+t)),cN.push((n+1)*(n+2)/2%64);let i=iQ;for(let s=0;s<7;s++)e=(e<<Qd^(e>>oQ)*cQ)%aQ,e&sQ&&(i^=Qd<<(Qd<<BigInt(s))-Qd);lN.push(i)}const uN=XW(lN,!0),lQ=uN[0],uQ=uN[1],C6=(n,e,t)=>t>32?nQ(n,e,t):eQ(n,e,t),_6=(n,e,t)=>t>32?rQ(n,e,t):tQ(n,e,t);function fQ(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=t[u],h=t[u+1],g=C6(f,h,1)^t[c],p=_6(f,h,1)^t[c+1];for(let m=0;m<50;m+=10)n[o+m]^=g,n[o+m+1]^=p}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=cN[o],u=C6(i,s,c),f=_6(i,s,c),h=aN[o];i=n[h],s=n[h+1],n[h]=u,n[h+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=lQ[r],n[1]^=uQ[r]}kh(t)}class ix extends rx{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,Vp(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=jW(this.state)}clone(){return this._cloneInto()}keccak(){B6(this.state32),fQ(this.state32,this.rounds),B6(this.state32),this.posOut=0,this.pos=0}update(e){Th(this),e=gw(e),cu(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Th(this,!1),cu(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Vp(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(sN(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,kh(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new ix(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const hQ=(n,e,t)=>oN(()=>new ix(e,n,t)),dQ=hQ(1,136,256/8),pQ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ba=new Uint32Array(64);class gQ extends JW{constructor(e=32){super(64,e,8,!1),this.A=Oa[0]|0,this.B=Oa[1]|0,this.C=Oa[2]|0,this.D=Oa[3]|0,this.E=Oa[4]|0,this.F=Oa[5]|0,this.G=Oa[6]|0,this.H=Oa[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let g=0;g<16;g++,t+=4)Ba[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const p=Ba[g-15],m=Ba[g-2],v=gs(p,7)^gs(p,18)^p>>>3,b=gs(m,17)^gs(m,19)^m>>>10;Ba[g]=b+Ba[g-7]+v+Ba[g-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:h}=this;for(let g=0;g<64;g++){const p=gs(c,6)^gs(c,11)^gs(c,25),m=h+p+QW(c,u,f)+pQ[g]+Ba[g]|0,b=(gs(r,2)^gs(r,13)^gs(r,22))+ZW(r,i,s)|0;h=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+b|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(r,i,s,o,c,u,f,h)}roundClean(){kh(Ba)}destroy(){this.set(0,0,0,0,0,0,0,0),kh(this.buffer)}}const yQ=oN(()=>new gQ);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sx=BigInt(0),AE=BigInt(1);function Sg(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function ox(n){if(!Sg(n))throw new Error("Uint8Array expected")}function qp(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}function dy(n){const e=n.toString(16);return e.length&1?"0"+e:e}function fN(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?sx:BigInt("0x"+n)}const hN=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",mQ=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Kp(n){if(ox(n),hN)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=mQ[n[t]];return e}const Ys={_0:48,_9:57,A:65,F:70,a:97,f:102};function N6(n){if(n>=Ys._0&&n<=Ys._9)return n-Ys._0;if(n>=Ys.A&&n<=Ys.F)return n-(Ys.A-10);if(n>=Ys.a&&n<=Ys.f)return n-(Ys.a-10)}function Am(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(hN)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=N6(n.charCodeAt(s)),c=N6(n.charCodeAt(s+1));if(o===void 0||c===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+c}return r}function nu(n){return fN(Kp(n))}function dN(n){return ox(n),fN(Kp(Uint8Array.from(n).reverse()))}function Ig(n,e){return Am(n.toString(16).padStart(e*2,"0"))}function pN(n,e){return Ig(n,e).reverse()}function hi(n,e,t){let r;if(typeof e=="string")try{r=Am(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(Sg(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function Sm(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];ox(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}const I2=n=>typeof n=="bigint"&&sx<=n;function ax(n,e,t){return I2(n)&&I2(e)&&I2(t)&&e<=n&&n<t}function Nf(n,e,t,r){if(!ax(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function wQ(n){let e;for(e=0;n>sx;n>>=AE,e+=1);return e}const yw=n=>(AE<<BigInt(n))-AE,O2=n=>new Uint8Array(n),D6=n=>Uint8Array.from(n);function bQ(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=O2(n),i=O2(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},c=(...g)=>t(i,r,...g),u=(g=O2(0))=>{i=c(D6([0]),g),r=c(),g.length!==0&&(i=c(D6([1]),g),r=c())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const p=[];for(;g<e;){r=c();const m=r.slice();p.push(m),g+=r.length}return Sm(...p)};return(g,p)=>{o(),u(g);let m;for(;!(m=p(f()));)u();return o(),m}}const vQ={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Sg(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function mw(n,e,t={}){const r=(i,s,o)=>{const c=vQ[s];if(typeof c!="function")throw new Error("invalid validator function");const u=n[i];if(!(o&&u===void 0)&&!c(u,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}function $6(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}function EQ(n,e){if(U6(n)>e)throw new zQ({givenSize:U6(n),maxSize:e})}const Xs={zero:48,nine:57,A:65,F:70,a:97,f:102};function T6(n){if(n>=Xs.zero&&n<=Xs.nine)return n-Xs.zero;if(n>=Xs.A&&n<=Xs.F)return n-(Xs.A-10);if(n>=Xs.a&&n<=Xs.f)return n-(Xs.a-10)}function xQ(n,e={}){const{dir:t,size:r=32}=e;if(r===0)return n;if(n.length>r)throw new HQ({size:n.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let s=0;s<r;s++){const o=t==="right";i[o?s:r-s-1]=n[o?s:n.length-s-1]}return i}function gN(n,e){if(_c(n)>e)throw new DQ({givenSize:_c(n),maxSize:e})}function AQ(n,e){if(typeof e=="number"&&e>0&&e>_c(n)-1)throw new wN({offset:e,position:"start",size:_c(n)})}function SQ(n,e,t){if(typeof e=="number"&&typeof t=="number"&&_c(n)!==t-e)throw new wN({offset:t,position:"end",size:_c(n)})}function yN(n,e={}){const{dir:t,size:r=32}=e;if(r===0)return n;const i=n.replace("0x","");if(i.length>r*2)throw new $Q({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[t==="right"?"padEnd":"padStart"](r*2,"0")}`}const IQ="#__bigint";function cx(n,e,t){return JSON.stringify(n,(r,i)=>typeof i=="bigint"?i.toString()+IQ:i,t)}const OQ=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function BQ(n,e={}){const{strict:t=!1}=e;if(!n)throw new k6(n);if(typeof n!="string")throw new k6(n);if(t&&!/^0x[0-9a-fA-F]*$/.test(n))throw new R6(n);if(!n.startsWith("0x"))throw new R6(n)}function PQ(...n){return`0x${n.reduce((e,t)=>e+t.replace("0x",""),"")}`}function lx(n){return n instanceof Uint8Array?Im(n):Array.isArray(n)?Im(new Uint8Array(n)):n}function Im(n,e={}){let t="";for(let i=0;i<n.length;i++)t+=OQ[n[i]];const r=`0x${t}`;return typeof e.size=="number"?(gN(r,e.size),mN(r,e.size)):r}function B2(n,e={}){const{signed:t,size:r}=e,i=BigInt(n);let s;r?t?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&t?-s-1n:0;if(s&&i>s||i<o){const f=typeof n=="bigint"?"n":"";throw new NQ({max:s?`${s}${f}`:void 0,min:`${o}${f}`,signed:t,size:r,value:`${n}${f}`})}const u=`0x${(t&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?CQ(u,r):u}function CQ(n,e){return yN(n,{dir:"left",size:e})}function mN(n,e){return yN(n,{dir:"right",size:e})}function uo(n,e,t,r={}){const{strict:i}=r;AQ(n,e);const s=`0x${n.replace("0x","").slice((e??0)*2,(t??n.length)*2)}`;return i&&SQ(s,e,t),s}function _c(n){return Math.ceil((n.length-2)/2)}function _Q(n,e={}){const{strict:t=!1}=e;try{return BQ(n,{strict:t}),!0}catch{return!1}}class NQ extends xt{constructor({max:e,min:t,signed:r,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class k6 extends xt{constructor(e){super(`Value \`${typeof e=="object"?cx(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class R6 extends xt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let DQ=class extends xt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class wN extends xt{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let $Q=class extends xt{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const TQ=new TextEncoder;function kQ(n){if(!(n instanceof Uint8Array)){if(!n)throw new py(n);if(typeof n!="object")throw new py(n);if(!("BYTES_PER_ELEMENT"in n))throw new py(n);if(n.BYTES_PER_ELEMENT!==1||n.constructor.name!=="Uint8Array")throw new py(n)}}function RQ(n){return n instanceof Uint8Array?n:typeof n=="string"?LQ(n):UQ(n)}function UQ(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function LQ(n,e={}){const{size:t}=e;let r=n;t&&(gN(n,t),r=mN(n,t));let i=r.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let c=0,u=0;c<s;c++){const f=T6(i.charCodeAt(u++)),h=T6(i.charCodeAt(u++));if(f===void 0||h===void 0)throw new xt(`Invalid byte sequence ("${i[u-2]}${i[u-1]}" in "${i}").`);o[c]=f*16+h}return o}function FQ(n,e={}){const{size:t}=e,r=TQ.encode(n);return typeof t=="number"?(EQ(r,t),MQ(r,t)):r}function MQ(n,e){return xQ(n,{dir:"right",size:e})}function U6(n){return n.length}function jQ(n){try{return kQ(n),!0}catch{return!1}}class py extends xt{constructor(e){super(`Value \`${typeof e=="object"?cx(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class zQ extends xt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class HQ extends xt{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function bN(n,e={}){const{as:t=typeof n=="string"?"Hex":"Bytes"}=e,r=dQ(RQ(n));return t==="Bytes"?r:Im(r)}class VQ extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const qQ={checksum:new VQ(8192)},P2=qQ.checksum;function vN(n,e={}){const{compressed:t}=e,{prefix:r,x:i,y:s}=n;if(t===!1||typeof i=="bigint"&&typeof s=="bigint"){if(r!==4)throw new L6({prefix:r,cause:new JQ});return}if(t===!0||typeof i=="bigint"&&typeof s>"u"){if(r!==3&&r!==2)throw new L6({prefix:r,cause:new ZQ});return}throw new QQ({publicKey:n})}function KQ(n){const e=(()=>{if(_Q(n))return EN(n);if(jQ(n))return GQ(n);const{prefix:t,x:r,y:i}=n;return typeof r=="bigint"&&typeof i=="bigint"?{prefix:t??4,x:r,y:i}:{prefix:t,x:r}})();return vN(e),e}function GQ(n){return EN(Im(n))}function EN(n){if(n.length!==132&&n.length!==130&&n.length!==68)throw new YQ({publicKey:n});if(n.length===130){const r=BigInt(uo(n,0,32)),i=BigInt(uo(n,32,64));return{prefix:4,x:r,y:i}}if(n.length===132){const r=Number(uo(n,0,1)),i=BigInt(uo(n,1,33)),s=BigInt(uo(n,33,65));return{prefix:r,x:i,y:s}}const e=Number(uo(n,0,1)),t=BigInt(uo(n,1,33));return{prefix:e,x:t}}function WQ(n,e={}){vN(n);const{prefix:t,x:r,y:i}=n,{includePrefix:s=!0}=e;return PQ(s?B2(t,{size:1}):"0x",B2(r,{size:32}),typeof i=="bigint"?B2(i,{size:32}):"0x")}class QQ extends xt{constructor({publicKey:e}){super(`Value \`${cx(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class L6 extends xt{constructor({prefix:e,cause:t}){super(`Prefix "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class ZQ extends xt{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class JQ extends xt{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let YQ=class extends xt{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${_c(lx(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const XQ=/^0x[a-fA-F0-9]{40}$/;function xN(n,e={}){const{strict:t=!0}=e;if(!XQ.test(n))throw new F6({address:n,cause:new nZ});if(t){if(n.toLowerCase()===n)return;if(AN(n)!==n)throw new F6({address:n,cause:new rZ})}}function AN(n){if(P2.has(n))return P2.get(n);xN(n,{strict:!1});const e=n.substring(2).toLowerCase(),t=bN(FQ(e),{as:"Bytes"}),r=e.split("");for(let s=0;s<40;s+=2)t[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(t[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());const i=`0x${r.join("")}`;return P2.set(n,i),i}function eZ(n,e={}){const{checksum:t=!1}=e;return xN(n),t?AN(n):n}function tZ(n,e={}){const t=bN(`0x${WQ(n).slice(4)}`).substring(26);return eZ(`0x${t}`,e)}class F6 extends xt{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class nZ extends xt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class rZ extends xt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class SN extends rx{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,MW(e);const r=gw(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),kh(s)}update(e){return Th(this),this.iHash.update(e),this}digestInto(e){Th(this),cu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const IN=(n,e,t)=>new SN(n,e).update(t).digest();IN.create=(n,e)=>new SN(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ir=BigInt(0),tr=BigInt(1),Ol=BigInt(2),iZ=BigInt(3),ON=BigInt(4),BN=BigInt(5),PN=BigInt(8);function br(n,e){const t=n%e;return t>=Ir?t:e+t}function si(n,e,t){let r=n;for(;e-- >Ir;)r*=r,r%=t;return r}function SE(n,e){if(n===Ir)throw new Error("invert: expected non-zero number");if(e<=Ir)throw new Error("invert: expected positive modulus, got "+e);let t=br(n,e),r=e,i=Ir,s=tr;for(;t!==Ir;){const c=r/t,u=r%t,f=i-s*c;r=t,t=u,i=s,s=f}if(r!==tr)throw new Error("invert: does not exist");return br(i,e)}function CN(n,e){const t=(n.ORDER+tr)/ON,r=n.pow(e,t);if(!n.eql(n.sqr(r),e))throw new Error("Cannot find square root");return r}function sZ(n,e){const t=(n.ORDER-BN)/PN,r=n.mul(e,Ol),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,Ol),i),c=n.mul(s,n.sub(o,n.ONE));if(!n.eql(n.sqr(c),e))throw new Error("Cannot find square root");return c}function oZ(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let e=n-tr,t=0;for(;e%Ol===Ir;)e/=Ol,t++;let r=Ol;const i=ux(n);for(;M6(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return CN;let s=i.pow(r,e);const o=(e+tr)/Ol;return function(u,f){if(u.is0(f))return f;if(M6(u,f)!==1)throw new Error("Cannot find square root");let h=t,g=u.mul(u.ONE,s),p=u.pow(f,e),m=u.pow(f,o);for(;!u.eql(p,u.ONE);){if(u.is0(p))return u.ZERO;let v=1,b=u.sqr(p);for(;!u.eql(b,u.ONE);)if(v++,b=u.sqr(b),v===h)throw new Error("Cannot find square root");const A=tr<<BigInt(h-v-1),_=u.pow(g,A);h=v,g=u.sqr(_),p=u.mul(p,g),m=u.mul(m,_)}return m}}function aZ(n){return n%ON===iZ?CN:n%PN===BN?sZ:oZ(n)}const cZ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lZ(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=cZ.reduce((r,i)=>(r[i]="function",r),e);return mw(n,t)}function uZ(n,e,t){if(t<Ir)throw new Error("invalid exponent, negatives unsupported");if(t===Ir)return n.ONE;if(t===tr)return e;let r=n.ONE,i=e;for(;t>Ir;)t&tr&&(r=n.mul(r,i)),i=n.sqr(i),t>>=tr;return r}function _N(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,c,u)=>n.is0(c)?o:(r[u]=o,n.mul(o,c)),n.ONE),s=n.inv(i);return e.reduceRight((o,c,u)=>n.is0(c)?o:(r[u]=n.mul(o,r[u]),n.mul(o,c)),s),r}function M6(n,e){const t=(n.ORDER-tr)/Ol,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function NN(n,e){e!==void 0&&Vp(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function ux(n,e,t=!1,r={}){if(n<=Ir)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:s}=NN(n,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const c=Object.freeze({ORDER:n,isLE:t,BITS:i,BYTES:s,MASK:yw(i),ZERO:Ir,ONE:tr,create:u=>br(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Ir<=u&&u<n},is0:u=>u===Ir,isOdd:u=>(u&tr)===tr,neg:u=>br(-u,n),eql:(u,f)=>u===f,sqr:u=>br(u*u,n),add:(u,f)=>br(u+f,n),sub:(u,f)=>br(u-f,n),mul:(u,f)=>br(u*f,n),pow:(u,f)=>uZ(c,u,f),div:(u,f)=>br(u*SE(f,n),n),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>SE(u,n),sqrt:r.sqrt||(u=>(o||(o=aZ(n)),o(c,u))),toBytes:u=>t?pN(u,s):Ig(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return t?dN(u):nu(u)},invertBatch:u=>_N(c,u),cmov:(u,f,h)=>h?f:u});return Object.freeze(c)}function DN(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function $N(n){const e=DN(n);return e+Math.ceil(e/2)}function fZ(n,e,t=!1){const r=n.length,i=DN(e),s=$N(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?dN(n):nu(n),c=br(o,e-tr)+tr;return t?pN(c,i):Ig(c,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const j6=BigInt(0),IE=BigInt(1);function C2(n,e){const t=e.negate();return n?t:e}function TN(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function _2(n,e){TN(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=yw(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function z6(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t;let c=Number(n&i),u=n>>o;c>r&&(c-=s,u+=IE);const f=e*r,h=f+Math.abs(c)-1,g=c===0,p=c<0,m=e%2!==0;return{nextN:u,offset:h,isZero:g,isNeg:p,isNegF:m,offsetF:f}}function hZ(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function dZ(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const N2=new WeakMap,kN=new WeakMap;function D2(n){return kN.get(n)||1}function pZ(n,e){return{constTimeNegate:C2,hasPrecomputes(t){return D2(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>j6;)r&IE&&(i=i.add(s)),s=s.double(),r>>=IE;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=_2(r,e),o=[];let c=t,u=c;for(let f=0;f<i;f++){u=c,o.push(u);for(let h=1;h<s;h++)u=u.add(c),o.push(u);c=u.double()}return o},wNAF(t,r,i){let s=n.ZERO,o=n.BASE;const c=_2(t,e);for(let u=0;u<c.windows;u++){const{nextN:f,offset:h,isZero:g,isNeg:p,isNegF:m,offsetF:v}=z6(i,u,c);i=f,g?o=o.add(C2(m,r[v])):s=s.add(C2(p,r[h]))}return{p:s,f:o}},wNAFUnsafe(t,r,i,s=n.ZERO){const o=_2(t,e);for(let c=0;c<o.windows&&i!==j6;c++){const{nextN:u,offset:f,isZero:h,isNeg:g}=z6(i,c,o);if(i=u,!h){const p=r[f];s=s.add(g?p.negate():p)}}return s},getPrecomputes(t,r,i){let s=N2.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&N2.set(r,i(s))),s},wNAFCached(t,r,i){const s=D2(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const o=D2(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),r,s)},setWindowSize(t,r){TN(r,e),kN.set(t,r),N2.delete(t)}}}function gZ(n,e,t,r){hZ(t,n),dZ(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=wQ(BigInt(i));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const f=yw(u),h=new Array(Number(f)+1).fill(o),g=Math.floor((e.BITS-1)/u)*u;let p=o;for(let m=g;m>=0;m-=u){h.fill(o);for(let b=0;b<s;b++){const A=r[b],_=Number(A>>BigInt(m)&f);h[_]=h[_].add(t[b])}let v=o;for(let b=h.length-1,A=o;b>0;b--)A=A.add(h[b]),v=v.add(A);if(p=p.add(v),m!==0)for(let b=0;b<u;b++)p=p.double()}return p}function RN(n){return lZ(n.Fp),mw(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...NN(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function H6(n){n.lowS!==void 0&&qp("lowS",n.lowS),n.prehash!==void 0&&qp("prehash",n.prehash)}function yZ(n){const e=RN(n);mw(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class mZ extends Error{constructor(e=""){super(e)}}const go={Err:mZ,_tlv:{encode:(n,e)=>{const{Err:t}=go;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=dy(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?dy(i.length/2|128):"";return dy(n)+s+i+e},decode(n,e){const{Err:t}=go;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new t("tlv.decode: length bytes not complete");if(f[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of f)o=o<<8|h;if(r+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=go;if(n<_o)throw new e("integer: negative integers are not allowed");let t=dy(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=go;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return nu(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=go,i=hi("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,s),{v:f,l:h}=r.decode(2,u);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(f)}},hexFromSig(n){const{_tlv:e,_int:t}=go,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}};function $2(n,e){return Kp(Ig(n,e))}const _o=BigInt(0),rn=BigInt(1);BigInt(2);const T2=BigInt(3),wZ=BigInt(4);function bZ(n){const e=yZ(n),{Fp:t}=e,r=ux(e.n,e.nBitLength),i=e.toBytes||((O,T,R)=>{const j=T.toAffine();return Sm(Uint8Array.from([4]),t.toBytes(j.x),t.toBytes(j.y))}),s=e.fromBytes||(O=>{const T=O.subarray(1),R=t.fromBytes(T.subarray(0,t.BYTES)),j=t.fromBytes(T.subarray(t.BYTES,2*t.BYTES));return{x:R,y:j}});function o(O){const{a:T,b:R}=e,j=t.sqr(O),H=t.mul(j,O);return t.add(t.add(H,t.mul(O,T)),R)}function c(O,T){const R=t.sqr(T),j=o(O);return t.eql(R,j)}if(!c(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const u=t.mul(t.pow(e.a,T2),wZ),f=t.mul(t.sqr(e.b),BigInt(27));if(t.is0(t.add(u,f)))throw new Error("bad curve params: a or b");function h(O){return ax(O,rn,e.n)}function g(O){const{allowedPrivateKeyLengths:T,nByteLength:R,wrapPrivateKey:j,n:H}=e;if(T&&typeof O!="bigint"){if(Sg(O)&&(O=Kp(O)),typeof O!="string"||!T.includes(O.length))throw new Error("invalid private key");O=O.padStart(R*2,"0")}let V;try{V=typeof O=="bigint"?O:nu(hi("private key",O,R))}catch{throw new Error("invalid private key, expected hex or "+R+" bytes, got "+typeof O)}return j&&(V=br(V,H)),Nf("private key",V,rn,H),V}function p(O){if(!(O instanceof b))throw new Error("ProjectivePoint expected")}const m=$6((O,T)=>{const{px:R,py:j,pz:H}=O;if(t.eql(H,t.ONE))return{x:R,y:j};const V=O.is0();T==null&&(T=V?t.ONE:t.inv(H));const M=t.mul(R,T),G=t.mul(j,T),Q=t.mul(H,T);if(V)return{x:t.ZERO,y:t.ZERO};if(!t.eql(Q,t.ONE))throw new Error("invZ was invalid");return{x:M,y:G}}),v=$6(O=>{if(O.is0()){if(e.allowInfinityPoint&&!t.is0(O.py))return;throw new Error("bad point: ZERO")}const{x:T,y:R}=O.toAffine();if(!t.isValid(T)||!t.isValid(R))throw new Error("bad point: x or y not FE");if(!c(T,R))throw new Error("bad point: equation left != right");if(!O.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(T,R,j){if(T==null||!t.isValid(T))throw new Error("x required");if(R==null||!t.isValid(R)||t.is0(R))throw new Error("y required");if(j==null||!t.isValid(j))throw new Error("z required");this.px=T,this.py=R,this.pz=j,Object.freeze(this)}static fromAffine(T){const{x:R,y:j}=T||{};if(!T||!t.isValid(R)||!t.isValid(j))throw new Error("invalid affine point");if(T instanceof b)throw new Error("projective point not allowed");const H=V=>t.eql(V,t.ZERO);return H(R)&&H(j)?b.ZERO:new b(R,j,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(T){const R=_N(t,T.map(j=>j.pz));return T.map((j,H)=>j.toAffine(R[H])).map(b.fromAffine)}static fromHex(T){const R=b.fromAffine(s(hi("pointHex",T)));return R.assertValidity(),R}static fromPrivateKey(T){return b.BASE.multiply(g(T))}static msm(T,R){return gZ(b,r,T,R)}_setWindowSize(T){U.setWindowSize(this,T)}assertValidity(){v(this)}hasEvenY(){const{y:T}=this.toAffine();if(t.isOdd)return!t.isOdd(T);throw new Error("Field doesn't support isOdd")}equals(T){p(T);const{px:R,py:j,pz:H}=this,{px:V,py:M,pz:G}=T,Q=t.eql(t.mul(R,G),t.mul(V,H)),z=t.eql(t.mul(j,G),t.mul(M,H));return Q&&z}negate(){return new b(this.px,t.neg(this.py),this.pz)}double(){const{a:T,b:R}=e,j=t.mul(R,T2),{px:H,py:V,pz:M}=this;let G=t.ZERO,Q=t.ZERO,z=t.ZERO,P=t.mul(H,H),D=t.mul(V,V),w=t.mul(M,M),x=t.mul(H,V);return x=t.add(x,x),z=t.mul(H,M),z=t.add(z,z),G=t.mul(T,z),Q=t.mul(j,w),Q=t.add(G,Q),G=t.sub(D,Q),Q=t.add(D,Q),Q=t.mul(G,Q),G=t.mul(x,G),z=t.mul(j,z),w=t.mul(T,w),x=t.sub(P,w),x=t.mul(T,x),x=t.add(x,z),z=t.add(P,P),P=t.add(z,P),P=t.add(P,w),P=t.mul(P,x),Q=t.add(Q,P),w=t.mul(V,M),w=t.add(w,w),P=t.mul(w,x),G=t.sub(G,P),z=t.mul(w,D),z=t.add(z,z),z=t.add(z,z),new b(G,Q,z)}add(T){p(T);const{px:R,py:j,pz:H}=this,{px:V,py:M,pz:G}=T;let Q=t.ZERO,z=t.ZERO,P=t.ZERO;const D=e.a,w=t.mul(e.b,T2);let x=t.mul(R,V),B=t.mul(j,M),C=t.mul(H,G),I=t.add(R,j),N=t.add(V,M);I=t.mul(I,N),N=t.add(x,B),I=t.sub(I,N),N=t.add(R,H);let $=t.add(V,G);return N=t.mul(N,$),$=t.add(x,C),N=t.sub(N,$),$=t.add(j,H),Q=t.add(M,G),$=t.mul($,Q),Q=t.add(B,C),$=t.sub($,Q),P=t.mul(D,N),Q=t.mul(w,C),P=t.add(Q,P),Q=t.sub(B,P),P=t.add(B,P),z=t.mul(Q,P),B=t.add(x,x),B=t.add(B,x),C=t.mul(D,C),N=t.mul(w,N),B=t.add(B,C),C=t.sub(x,C),C=t.mul(D,C),N=t.add(N,C),x=t.mul(B,N),z=t.add(z,x),x=t.mul($,N),Q=t.mul(I,Q),Q=t.sub(Q,x),x=t.mul(I,B),P=t.mul($,P),P=t.add(P,x),new b(Q,z,P)}subtract(T){return this.add(T.negate())}is0(){return this.equals(b.ZERO)}wNAF(T){return U.wNAFCached(this,T,b.normalizeZ)}multiplyUnsafe(T){const{endo:R,n:j}=e;Nf("scalar",T,_o,j);const H=b.ZERO;if(T===_o)return H;if(this.is0()||T===rn)return this;if(!R||U.hasPrecomputes(this))return U.wNAFCachedUnsafe(this,T,b.normalizeZ);let{k1neg:V,k1:M,k2neg:G,k2:Q}=R.splitScalar(T),z=H,P=H,D=this;for(;M>_o||Q>_o;)M&rn&&(z=z.add(D)),Q&rn&&(P=P.add(D)),D=D.double(),M>>=rn,Q>>=rn;return V&&(z=z.negate()),G&&(P=P.negate()),P=new b(t.mul(P.px,R.beta),P.py,P.pz),z.add(P)}multiply(T){const{endo:R,n:j}=e;Nf("scalar",T,rn,j);let H,V;if(R){const{k1neg:M,k1:G,k2neg:Q,k2:z}=R.splitScalar(T);let{p:P,f:D}=this.wNAF(G),{p:w,f:x}=this.wNAF(z);P=U.constTimeNegate(M,P),w=U.constTimeNegate(Q,w),w=new b(t.mul(w.px,R.beta),w.py,w.pz),H=P.add(w),V=D.add(x)}else{const{p:M,f:G}=this.wNAF(T);H=M,V=G}return b.normalizeZ([H,V])[0]}multiplyAndAddUnsafe(T,R,j){const H=b.BASE,V=(G,Q)=>Q===_o||Q===rn||!G.equals(H)?G.multiplyUnsafe(Q):G.multiply(Q),M=V(this,R).add(V(T,j));return M.is0()?void 0:M}toAffine(T){return m(this,T)}isTorsionFree(){const{h:T,isTorsionFree:R}=e;if(T===rn)return!0;if(R)return R(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:T,clearCofactor:R}=e;return T===rn?this:R?R(b,this):this.multiplyUnsafe(e.h)}toRawBytes(T=!0){return qp("isCompressed",T),this.assertValidity(),i(b,this,T)}toHex(T=!0){return qp("isCompressed",T),Kp(this.toRawBytes(T))}}b.BASE=new b(e.Gx,e.Gy,t.ONE),b.ZERO=new b(t.ZERO,t.ONE,t.ZERO);const{endo:A,nBitLength:_}=e,U=pZ(b,A?Math.ceil(_/2):_);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:g,weierstrassEquation:o,isWithinCurveOrder:h}}function vZ(n){const e=RN(n);return mw(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function EZ(n){const e=vZ(n),{Fp:t,n:r,nByteLength:i,nBitLength:s}=e,o=t.BYTES+1,c=2*t.BYTES+1;function u(w){return br(w,r)}function f(w){return SE(w,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:g,weierstrassEquation:p,isWithinCurveOrder:m}=bZ({...e,toBytes(w,x,B){const C=x.toAffine(),I=t.toBytes(C.x),N=Sm;return qp("isCompressed",B),B?N(Uint8Array.from([x.hasEvenY()?2:3]),I):N(Uint8Array.from([4]),I,t.toBytes(C.y))},fromBytes(w){const x=w.length,B=w[0],C=w.subarray(1);if(x===o&&(B===2||B===3)){const I=nu(C);if(!ax(I,rn,t.ORDER))throw new Error("Point is not on curve");const N=p(I);let $;try{$=t.sqrt(N)}catch(q){const Z=q instanceof Error?": "+q.message:"";throw new Error("Point is not on curve"+Z)}const L=($&rn)===rn;return(B&1)===1!==L&&($=t.neg($)),{x:I,y:$}}else if(x===c&&B===4){const I=t.fromBytes(C.subarray(0,t.BYTES)),N=t.fromBytes(C.subarray(t.BYTES,2*t.BYTES));return{x:I,y:N}}else{const I=o,N=c;throw new Error("invalid Point, expected length of "+I+", or uncompressed "+N+", got "+x)}}});function v(w){const x=r>>rn;return w>x}function b(w){return v(w)?u(-w):w}const A=(w,x,B)=>nu(w.slice(x,B));class _{constructor(x,B,C){Nf("r",x,rn,r),Nf("s",B,rn,r),this.r=x,this.s=B,C!=null&&(this.recovery=C),Object.freeze(this)}static fromCompact(x){const B=i;return x=hi("compactSignature",x,B*2),new _(A(x,0,B),A(x,B,2*B))}static fromDER(x){const{r:B,s:C}=go.toSig(hi("DER",x));return new _(B,C)}assertValidity(){}addRecoveryBit(x){return new _(this.r,this.s,x)}recoverPublicKey(x){const{r:B,s:C,recovery:I}=this,N=H(hi("msgHash",x));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");const $=I===2||I===3?B+e.n:B;if($>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=(I&1)===0?"02":"03",Y=h.fromHex(L+$2($,t.BYTES)),q=f($),Z=u(-N*q),te=u(C*q),re=h.BASE.multiplyAndAddUnsafe(Y,Z,te);if(!re)throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return Am(this.toDERHex())}toDERHex(){return go.hexFromSig(this)}toCompactRawBytes(){return Am(this.toCompactHex())}toCompactHex(){const x=i;return $2(this.r,x)+$2(this.s,x)}}const U={isValidPrivateKey(w){try{return g(w),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const w=$N(e.n);return fZ(e.randomBytes(w),e.n)},precompute(w=8,x=h.BASE){return x._setWindowSize(w),x.multiply(BigInt(3)),x}};function O(w,x=!0){return h.fromPrivateKey(w).toRawBytes(x)}function T(w){if(typeof w=="bigint")return!1;if(w instanceof h)return!0;const B=hi("key",w).length,C=t.BYTES,I=C+1,N=2*C+1;if(!(e.allowedPrivateKeyLengths||i===I))return B===I||B===N}function R(w,x,B=!0){if(T(w)===!0)throw new Error("first arg must be private key");if(T(x)===!1)throw new Error("second arg must be public key");return h.fromHex(x).multiply(g(w)).toRawBytes(B)}const j=e.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const x=nu(w),B=w.length*8-s;return B>0?x>>BigInt(B):x},H=e.bits2int_modN||function(w){return u(j(w))},V=yw(s);function M(w){return Nf("num < 2^"+s,w,_o,V),Ig(w,i)}function G(w,x,B=Q){if(["recovered","canonical"].some(se=>se in B))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:I}=e;let{lowS:N,prehash:$,extraEntropy:L}=B;N==null&&(N=!0),w=hi("msgHash",w),H6(B),$&&(w=hi("prehashed msgHash",C(w)));const Y=H(w),q=g(x),Z=[M(q),M(Y)];if(L!=null&&L!==!1){const se=L===!0?I(t.BYTES):L;Z.push(hi("extraEntropy",se))}const te=Sm(...Z),re=Y;function le(se){const ue=j(se);if(!m(ue))return;const Ne=f(ue),Re=h.BASE.multiply(ue).toAffine(),ke=u(Re.x);if(ke===_o)return;const Ve=u(Ne*u(re+ke*q));if(Ve===_o)return;let Qt=(Re.x===ke?0:2)|Number(Re.y&rn),cn=Ve;return N&&v(Ve)&&(cn=b(Ve),Qt^=1),new _(ke,cn,Qt)}return{seed:te,k2sig:le}}const Q={lowS:e.lowS,prehash:!1},z={lowS:e.lowS,prehash:!1};function P(w,x,B=Q){const{seed:C,k2sig:I}=G(w,x,B),N=e;return bQ(N.hash.outputLen,N.nByteLength,N.hmac)(C,I)}h.BASE._setWindowSize(8);function D(w,x,B,C=z){var Qt;const I=w;x=hi("msgHash",x),B=hi("publicKey",B);const{lowS:N,prehash:$,format:L}=C;if(H6(C),"strict"in C)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&L!=="compact"&&L!=="der")throw new Error("format must be compact or der");const Y=typeof I=="string"||Sg(I),q=!Y&&!L&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!Y&&!q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Z,te;try{if(q&&(Z=new _(I.r,I.s)),Y){try{L!=="compact"&&(Z=_.fromDER(I))}catch(cn){if(!(cn instanceof go.Err))throw cn}!Z&&L!=="der"&&(Z=_.fromCompact(I))}te=h.fromHex(B)}catch{return!1}if(!Z||N&&Z.hasHighS())return!1;$&&(x=e.hash(x));const{r:re,s:le}=Z,se=H(x),ue=f(le),Ne=u(se*ue),Re=u(re*ue),ke=(Qt=h.BASE.multiplyAndAddUnsafe(te,Ne,Re))==null?void 0:Qt.toAffine();return ke?u(ke.x)===re:!1}return{CURVE:e,getPublicKey:O,getSharedSecret:R,sign:P,verify:D,ProjectivePoint:h,Signature:_,utils:U}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xZ(n){return{hash:n,hmac:(e,...t)=>IN(n,e,KW(...t)),randomBytes:GW}}function AZ(n,e){const t=r=>EZ({...n,...xZ(r)});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const UN=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),V6=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),SZ=BigInt(0),IZ=BigInt(1),OE=BigInt(2),q6=(n,e)=>(n+e/OE)/e;function OZ(n){const e=UN,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),c=BigInt(44),u=BigInt(88),f=n*n*n%e,h=f*f*n%e,g=si(h,t,e)*h%e,p=si(g,t,e)*h%e,m=si(p,OE,e)*f%e,v=si(m,i,e)*m%e,b=si(v,s,e)*v%e,A=si(b,c,e)*b%e,_=si(A,u,e)*A%e,U=si(_,c,e)*b%e,O=si(U,t,e)*h%e,T=si(O,o,e)*v%e,R=si(T,r,e)*f%e,j=si(R,OE,e);if(!BE.eql(BE.sqr(j),n))throw new Error("Cannot find square root");return j}const BE=ux(UN,void 0,void 0,{sqrt:OZ}),BZ=AZ({a:SZ,b:BigInt(7),Fp:BE,n:V6,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=V6,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-IZ*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),c=q6(s*n,e),u=q6(-r*n,e);let f=br(n-c*t-u*i,e),h=br(-c*r-u*s,e);const g=f>o,p=h>o;if(g&&(f=e-f),p&&(h=e-h),f>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:g,k1:f,k2neg:p,k2:h}}}},yQ);function PZ(n){if(n.length!==130&&n.length!==132)throw new _Z({signature:n});const e=BigInt(uo(n,0,32)),t=BigInt(uo(n,32,64)),r=(()=>{const i=+`0x${n.slice(130)}`;if(!Number.isNaN(i))try{return CZ(i)}catch{throw new NZ({value:i})}})();return typeof r>"u"?{r:e,s:t}:{r:e,s:t,yParity:r}}function CZ(n){if(n===0||n===27)return 0;if(n===1||n===28)return 1;if(n>=35)return n%2===0?1:0;throw new DZ({value:n})}class _Z extends xt{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${_c(lx(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class NZ extends xt{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class DZ extends xt{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function $Z(n){return tZ(TZ(n))}function TZ(n){const{payload:e,signature:t}=n,{r,s:i,yParity:s}=t,c=new BZ.Signature(BigInt(r),BigInt(i)).addRecoveryBit(s).recoverPublicKey(lx(e).substring(2));return KQ(c)}function kZ(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<n.length;f++){const h=n.charAt(f),g=h.charCodeAt(0);if(e[g]!==255)throw new TypeError(h+" is ambiguous");e[g]=f}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let h=0,g=0,p=0;const m=f.length;for(;p!==m&&f[p]===0;)p++,h++;const v=(m-p)*s+1>>>0,b=new Uint8Array(v);for(;p!==m;){let U=f[p],O=0;for(let T=v-1;(U!==0||O<g)&&T!==-1;T--,O++)U+=256*b[T]>>>0,b[T]=U%t>>>0,U=U/t>>>0;if(U!==0)throw new Error("Non-zero carry");g=O,p++}let A=v-g;for(;A!==v&&b[A]===0;)A++;let _=r.repeat(h);for(;A<v;++A)_+=n.charAt(b[A]);return _}function c(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let h=0,g=0,p=0;for(;f[h]===r;)g++,h++;const m=(f.length-h)*i+1>>>0,v=new Uint8Array(m);for(;h<f.length;){const U=f.charCodeAt(h);if(U>255)return;let O=e[U];if(O===255)return;let T=0;for(let R=m-1;(O!==0||T<p)&&R!==-1;R--,T++)O+=t*v[R]>>>0,v[R]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");p=T,h++}let b=m-p;for(;b!==m&&v[b]===0;)b++;const A=new Uint8Array(g+(m-b));let _=g;for(;b!==m;)A[_++]=v[b++];return A}function u(f){const h=c(f);if(h)return h;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:c,decode:u}}var RZ="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Og=kZ(RZ);var UZ={};const LZ=":";function qy(n){const[e,t]=n.split(LZ);return{namespace:e,reference:t}}function LN(n,e){return n.includes(":")?[n]:e.chains||[]}var FZ=Object.defineProperty,MZ=Object.defineProperties,jZ=Object.getOwnPropertyDescriptors,K6=Object.getOwnPropertySymbols,zZ=Object.prototype.hasOwnProperty,HZ=Object.prototype.propertyIsEnumerable,PE=(n,e,t)=>e in n?FZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,G6=(n,e)=>{for(var t in e||(e={}))zZ.call(e,t)&&PE(n,t,e[t]);if(K6)for(var t of K6(e))HZ.call(e,t)&&PE(n,t,e[t]);return n},VZ=(n,e)=>MZ(n,jZ(e)),W6=(n,e,t)=>PE(n,typeof e!="symbol"?e+"":e,t);const qZ="ReactNative",Qr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},KZ="js";function Om(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Uc(){return!Ho.getDocument()&&!!Ho.getNavigator()&&navigator.product===qZ}function GZ(){return Uc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function WZ(){return Uc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Vh(){return!Om()&&!!Ho.getNavigator()&&!!Ho.getDocument()}function Bg(){return Uc()?Qr.reactNative:Om()?Qr.node:Vh()?Qr.browser:Qr.unknown}function Q6(){var n;try{return Uc()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(n=global.Application)==null?void 0:n.applicationId:void 0}catch{return}}function QZ(n,e){const t=new URLSearchParams(n);return Object.entries(e).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!=null&&t.set(r,String(i))}),t.toString()}function ZZ(n){var e,t;const r=FN();try{return n!=null&&n.url&&r.url&&new URL(n.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${n.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),n.url=r.url),(e=n==null?void 0:n.icons)!=null&&e.length&&n.icons.length>0&&(n.icons=n.icons.filter(i=>i!=="")),VZ(G6(G6({},r),n),{url:(n==null?void 0:n.url)||r.url,name:(n==null?void 0:n.name)||r.name,description:(n==null?void 0:n.description)||r.description,icons:(t=n==null?void 0:n.icons)!=null&&t.length&&n.icons.length>0?n.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),n||r}}function FN(){return RW.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function JZ(){if(Bg()===Qr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:r}=global.Platform;return[t,r].join("-")}const n=CW();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function YZ(){var n;const e=Bg();return e===Qr.browser?[e,((n=Ho.getLocation())==null?void 0:n.host)||"unknown"].join(":"):e}function MN(n,e,t){const r=JZ(),i=YZ();return[[n,e].join("-"),[KZ,t].join("-"),r,i].join("/")}function XZ({protocol:n,version:e,relayUrl:t,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:c,packageName:u}){const f=t.split("?"),h=MN(n,e,r),g={auth:i,ua:h,projectId:s,useOnCloseEvent:o,packageName:u||void 0,bundleId:c||void 0},p=QZ(f[1]||"",g);return f[0]+"?"+p}function Bl(n,e){return n.filter(t=>e.includes(t)).length===n.length}function CE(n){return Object.fromEntries(n.entries())}function _E(n){return new Map(Object.entries(n))}function ll(n=we.FIVE_MINUTES,e){const t=we.toMiliseconds(n||we.FIVE_MINUTES);let r,i,s,o;return{resolve:c=>{s&&r&&(clearTimeout(s),r(c),o=Promise.resolve(c))},reject:c=>{s&&i&&(clearTimeout(s),i(c))},done:()=>new Promise((c,u)=>{if(o)return c(o);s=setTimeout(()=>{const f=new Error(e);o=Promise.reject(f),u(f)},t),r=c,i=u})}}function Us(n,e,t){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(t)),e);try{const o=await n;r(o)}catch(o){i(o)}clearTimeout(s)})}function jN(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function eJ(n){return jN("topic",n)}function tJ(n){return jN("id",n)}function zN(n){const[e,t]=n.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")r.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return r}function qt(n,e){return we.fromMiliseconds(Date.now()+we.toMiliseconds(n))}function Va(n){return Date.now()>=we.toMiliseconds(n)}function rt(n,e){return`${n}${e?`:${e}`:""}`}function ru(n=[],e=[]){return[...new Set([...n,...e])]}async function nJ({id:n,topic:e,wcDeepLink:t}){var r;try{if(!t)return;const i=typeof t=="string"?JSON.parse(t):t,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=rJ(s,n,e),c=Bg();if(c===Qr.browser){if(!((r=Ho.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}iJ(o)}else c===Qr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function rJ(n,e,t){const r=`requestId=${e}&sessionTopic=${t}`;n.endsWith("/")&&(n=n.slice(0,-1));let i=`${n}`;if(n.startsWith("https://t.me")){const s=n.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${cJ(r,!0)}`}else i=`${i}/wc?${r}`;return i}function iJ(n){let e="_self";aJ()?e="_top":(oJ()||n.startsWith("https://")||n.startsWith("http://"))&&(e="_blank"),window.open(n,e,"noreferrer noopener")}async function sJ(n,e){let t="";try{if(Vh()&&(t=localStorage.getItem(e),t))return t;t=await n.getItem(e)}catch(r){console.error(r)}return t}function Z6(n,e){if(!n.includes(e))return null;const t=n.split(/([&,?,=])/),r=t.indexOf(e);return t[r+2]}function J6(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function fx(){return typeof process<"u"&&UZ.IS_VITEST==="true"}function oJ(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function aJ(){try{return window.self!==window.top}catch{return!1}}function cJ(n,e=!1){const t=Buffer.from(n).toString("base64");return e?t.replace(/[=]/g,""):t}function HN(n){return Buffer.from(n,"base64").toString("utf-8")}function lJ(n){return new Promise(e=>setTimeout(e,n))}let uJ=class{constructor({limit:e}){W6(this,"limit"),W6(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const t=this.set.values().next().value;t&&this.set.delete(t)}this.set.add(e)}}has(e){return this.set.has(e)}};const gy=BigInt(2**32-1),Y6=BigInt(32);function VN(n,e=!1){return e?{h:Number(n&gy),l:Number(n>>Y6&gy)}:{h:Number(n>>Y6&gy)|0,l:Number(n&gy)|0}}function qN(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:c}=VN(n[s],e);[r[s],i[s]]=[o,c]}return[r,i]}const X6=(n,e,t)=>n>>>t,e5=(n,e,t)=>n<<32-t|e>>>t,qa=(n,e,t)=>n>>>t|e<<32-t,Ka=(n,e,t)=>n<<32-t|e>>>t,gp=(n,e,t)=>n<<64-t|e>>>t-32,yp=(n,e,t)=>n>>>t-32|e<<64-t,fJ=(n,e)=>e,hJ=(n,e)=>n,dJ=(n,e,t)=>n<<t|e>>>32-t,pJ=(n,e,t)=>e<<t|n>>>32-t,gJ=(n,e,t)=>e<<t-32|n>>>64-t,yJ=(n,e,t)=>n<<t-32|e>>>64-t;function Li(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const hx=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),dx=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,mJ=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),wJ=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,bJ=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),vJ=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,ef=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ww(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Vo(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function ts(n,...e){if(!ww(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function bw(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Vo(n.outputLen),Vo(n.blockLen)}function Nc(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function px(n,e){ts(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Gp(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Ei(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function k2(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function ys(n,e){return n<<32-e|n>>>e}const KN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function GN(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const oo=KN?n=>n:n=>GN(n);function EJ(n){for(let e=0;e<n.length;e++)n[e]=GN(n[e]);return n}const Ga=KN?n=>n:EJ,WN=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",xJ=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Df(n){if(ts(n),WN)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=xJ[n[t]];return e}const eo={_0:48,_9:57,A:65,F:70,a:97,f:102};function t5(n){if(n>=eo._0&&n<=eo._9)return n-eo._0;if(n>=eo.A&&n<=eo.F)return n-(eo.A-10);if(n>=eo.a&&n<=eo.f)return n-(eo.a-10)}function Bm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(WN)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=t5(n.charCodeAt(s)),c=t5(n.charCodeAt(s+1));if(o===void 0||c===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+c}return r}function QN(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Ji(n){return typeof n=="string"&&(n=QN(n)),ts(n),n}function ec(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];ts(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}let vw=class{};function Pg(n){const e=r=>n().update(Ji(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function AJ(n){const e=(r,i)=>n(i).update(Ji(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function mu(n=32){if(ef&&typeof ef.getRandomValues=="function")return ef.getRandomValues(new Uint8Array(n));if(ef&&typeof ef.randomBytes=="function")return Uint8Array.from(ef.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const SJ=BigInt(0),Zd=BigInt(1),IJ=BigInt(2),OJ=BigInt(7),BJ=BigInt(256),PJ=BigInt(113),ZN=[],JN=[],YN=[];for(let n=0,e=Zd,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],ZN.push(2*(5*r+t)),JN.push((n+1)*(n+2)/2%64);let i=SJ;for(let s=0;s<7;s++)e=(e<<Zd^(e>>OJ)*PJ)%BJ,e&IJ&&(i^=Zd<<(Zd<<BigInt(s))-Zd);YN.push(i)}const XN=qN(YN,!0),CJ=XN[0],_J=XN[1],n5=(n,e,t)=>t>32?gJ(n,e,t):dJ(n,e,t),r5=(n,e,t)=>t>32?yJ(n,e,t):pJ(n,e,t);function NJ(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=t[u],h=t[u+1],g=n5(f,h,1)^t[c],p=r5(f,h,1)^t[c+1];for(let m=0;m<50;m+=10)n[o+m]^=g,n[o+m+1]^=p}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=JN[o],u=n5(i,s,c),f=r5(i,s,c),h=ZN[o];i=n[h],s=n[h+1],n[h]=u,n[h+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=CJ[r],n[1]^=_J[r]}Ei(t)}let DJ=class eD extends vw{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,Vo(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Gp(this.state)}clone(){return this._cloneInto()}keccak(){Ga(this.state32),NJ(this.state32,this.rounds),Ga(this.state32),this.posOut=0,this.pos=0}update(e){Nc(this),e=Ji(e),ts(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Nc(this,!1),ts(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Vo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(px(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ei(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new eD(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const $J=(n,e,t)=>Pg(()=>new DJ(e,n,t)),TJ=$J(1,136,256/8);function kJ(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}function RJ(n,e,t){return n&e^~n&t}function UJ(n,e,t){return n&e^n&t^e&t}let tD=class extends vw{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=k2(this.buffer)}update(e){Nc(this),e=Ji(e),ts(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=k2(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Nc(this),px(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,Ei(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let g=o;g<i;g++)t[g]=0;kJ(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=k2(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)c.setUint32(4*g,h[g],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=c,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Pa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_n=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Nn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),LJ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ca=new Uint32Array(64);let FJ=class extends tD{constructor(e=32){super(64,e,8,!1),this.A=Pa[0]|0,this.B=Pa[1]|0,this.C=Pa[2]|0,this.D=Pa[3]|0,this.E=Pa[4]|0,this.F=Pa[5]|0,this.G=Pa[6]|0,this.H=Pa[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let g=0;g<16;g++,t+=4)Ca[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const p=Ca[g-15],m=Ca[g-2],v=ys(p,7)^ys(p,18)^p>>>3,b=ys(m,17)^ys(m,19)^m>>>10;Ca[g]=b+Ca[g-7]+v+Ca[g-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:h}=this;for(let g=0;g<64;g++){const p=ys(c,6)^ys(c,11)^ys(c,25),m=h+p+RJ(c,u,f)+LJ[g]+Ca[g]|0,v=(ys(r,2)^ys(r,13)^ys(r,22))+UJ(r,i,s)|0;h=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(r,i,s,o,c,u,f,h)}roundClean(){Ei(Ca)}destroy(){this.set(0,0,0,0,0,0,0,0),Ei(this.buffer)}};const nD=qN(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),MJ=nD[0],jJ=nD[1],_a=new Uint32Array(80),Na=new Uint32Array(80);let gx=class extends tD{constructor(e=64){super(128,e,16,!1),this.Ah=Nn[0]|0,this.Al=Nn[1]|0,this.Bh=Nn[2]|0,this.Bl=Nn[3]|0,this.Ch=Nn[4]|0,this.Cl=Nn[5]|0,this.Dh=Nn[6]|0,this.Dl=Nn[7]|0,this.Eh=Nn[8]|0,this.El=Nn[9]|0,this.Fh=Nn[10]|0,this.Fl=Nn[11]|0,this.Gh=Nn[12]|0,this.Gl=Nn[13]|0,this.Hh=Nn[14]|0,this.Hl=Nn[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:f,El:h,Fh:g,Fl:p,Gh:m,Gl:v,Hh:b,Hl:A}=this;return[e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=h|0,this.Fh=g|0,this.Fl=p|0,this.Gh=m|0,this.Gl=v|0,this.Hh=b|0,this.Hl=A|0}process(e,t){for(let O=0;O<16;O++,t+=4)_a[O]=e.getUint32(t),Na[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const T=_a[O-15]|0,R=Na[O-15]|0,j=qa(T,R,1)^qa(T,R,8)^X6(T,R,7),H=Ka(T,R,1)^Ka(T,R,8)^e5(T,R,7),V=_a[O-2]|0,M=Na[O-2]|0,G=qa(V,M,19)^gp(V,M,61)^X6(V,M,6),Q=Ka(V,M,19)^yp(V,M,61)^e5(V,M,6),z=mJ(H,Q,Na[O-7],Na[O-16]),P=wJ(z,j,G,_a[O-7],_a[O-16]);_a[O]=P|0,Na[O]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:f,Dl:h,Eh:g,El:p,Fh:m,Fl:v,Gh:b,Gl:A,Hh:_,Hl:U}=this;for(let O=0;O<80;O++){const T=qa(g,p,14)^qa(g,p,18)^gp(g,p,41),R=Ka(g,p,14)^Ka(g,p,18)^yp(g,p,41),j=g&m^~g&b,H=p&v^~p&A,V=bJ(U,R,H,jJ[O],Na[O]),M=vJ(V,_,T,j,MJ[O],_a[O]),G=V|0,Q=qa(r,i,28)^gp(r,i,34)^gp(r,i,39),z=Ka(r,i,28)^yp(r,i,34)^yp(r,i,39),P=r&s^r&c^s&c,D=i&o^i&u^o&u;_=b|0,U=A|0,b=m|0,A=v|0,m=g|0,v=p|0,{h:g,l:p}=Li(f|0,h|0,M|0,G|0),f=c|0,h=u|0,c=s|0,u=o|0,s=r|0,o=i|0;const w=hx(G,z,D);r=dx(w,M,Q,P),i=w|0}({h:r,l:i}=Li(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Li(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=Li(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:h}=Li(this.Dh|0,this.Dl|0,f|0,h|0),{h:g,l:p}=Li(this.Eh|0,this.El|0,g|0,p|0),{h:m,l:v}=Li(this.Fh|0,this.Fl|0,m|0,v|0),{h:b,l:A}=Li(this.Gh|0,this.Gl|0,b|0,A|0),{h:_,l:U}=Li(this.Hh|0,this.Hl|0,_|0,U|0),this.set(r,i,s,o,c,u,f,h,g,p,m,v,b,A,_,U)}roundClean(){Ei(_a,Na)}destroy(){Ei(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},zJ=class extends gx{constructor(){super(48),this.Ah=_n[0]|0,this.Al=_n[1]|0,this.Bh=_n[2]|0,this.Bl=_n[3]|0,this.Ch=_n[4]|0,this.Cl=_n[5]|0,this.Dh=_n[6]|0,this.Dl=_n[7]|0,this.Eh=_n[8]|0,this.El=_n[9]|0,this.Fh=_n[10]|0,this.Fl=_n[11]|0,this.Gh=_n[12]|0,this.Gl=_n[13]|0,this.Hh=_n[14]|0,this.Hl=_n[15]|0}};const Dn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let HJ=class extends gx{constructor(){super(32),this.Ah=Dn[0]|0,this.Al=Dn[1]|0,this.Bh=Dn[2]|0,this.Bl=Dn[3]|0,this.Ch=Dn[4]|0,this.Cl=Dn[5]|0,this.Dh=Dn[6]|0,this.Dl=Dn[7]|0,this.Eh=Dn[8]|0,this.El=Dn[9]|0,this.Fh=Dn[10]|0,this.Fl=Dn[11]|0,this.Gh=Dn[12]|0,this.Gl=Dn[13]|0,this.Hh=Dn[14]|0,this.Hl=Dn[15]|0}};const Ew=Pg(()=>new FJ),VJ=Pg(()=>new gx),qJ=Pg(()=>new zJ),KJ=Pg(()=>new HJ),GJ=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Ht=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ee=new Uint32Array(32);function Da(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=Ee[2*n],f=Ee[2*n+1],h=Ee[2*e],g=Ee[2*e+1],p=Ee[2*t],m=Ee[2*t+1],v=Ee[2*r],b=Ee[2*r+1],A=hx(u,h,o);f=dx(A,f,g,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:fJ(b,v),Dl:hJ(b)},{h:m,l:p}=Li(m,p,b,v),{Bh:g,Bl:h}={Bh:g^m,Bl:h^p},{Bh:g,Bl:h}={Bh:qa(g,h,24),Bl:Ka(g,h,24)},Ee[2*n]=u,Ee[2*n+1]=f,Ee[2*e]=h,Ee[2*e+1]=g,Ee[2*t]=p,Ee[2*t+1]=m,Ee[2*r]=v,Ee[2*r+1]=b}function $a(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=Ee[2*n],f=Ee[2*n+1],h=Ee[2*e],g=Ee[2*e+1],p=Ee[2*t],m=Ee[2*t+1],v=Ee[2*r],b=Ee[2*r+1],A=hx(u,h,o);f=dx(A,f,g,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:qa(b,v,16),Dl:Ka(b,v,16)},{h:m,l:p}=Li(m,p,b,v),{Bh:g,Bl:h}={Bh:g^m,Bl:h^p},{Bh:g,Bl:h}={Bh:gp(g,h,63),Bl:yp(g,h,63)},Ee[2*n]=u,Ee[2*n+1]=f,Ee[2*e]=h,Ee[2*e+1]=g,Ee[2*t]=p,Ee[2*t+1]=m,Ee[2*r]=v,Ee[2*r+1]=b}function WJ(n,e={},t,r,i){if(Vo(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:c}=e;if(s!==void 0&&(s.length<1||s.length>t))throw new Error("key length must be undefined or 1.."+t);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}let QJ=class extends vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Vo(e),Vo(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=Gp(this.buffer)}update(e){Nc(this),e=Ji(e),ts(e);const{blockLen:t,buffer:r,buffer32:i}=this,s=e.length,o=e.byteOffset,c=e.buffer;for(let u=0;u<s;){this.pos===t&&(Ga(i),this.compress(i,0,!1),Ga(i),this.pos=0);const f=Math.min(t-this.pos,s-u),h=o+u;if(f===t&&!(h%4)&&u+f<s){const g=new Uint32Array(c,h,Math.floor((s-u)/4));Ga(g);for(let p=0;u+t<s;p+=i.length,u+=t)this.length+=t,this.compress(g,p,!1);Ga(g);continue}r.set(e.subarray(u,u+f),this.pos),this.pos+=f,this.length+=f,u+=f}return this}digestInto(e){Nc(this),px(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,Ei(this.buffer.subarray(t)),Ga(r),this.compress(r,0,!0),Ga(r);const i=Gp(e);this.get().forEach((s,o)=>i[o]=oo(s))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:i,destroyed:s,outputLen:o,pos:c}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=s,e.finished=i,e.length=r,e.pos=c,e.outputLen=o,e}clone(){return this._cloneInto()}},ZJ=class extends QJ{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=Ht[0]|0,this.v0h=Ht[1]|0,this.v1l=Ht[2]|0,this.v1h=Ht[3]|0,this.v2l=Ht[4]|0,this.v2h=Ht[5]|0,this.v3l=Ht[6]|0,this.v3h=Ht[7]|0,this.v4l=Ht[8]|0,this.v4h=Ht[9]|0,this.v5l=Ht[10]|0,this.v5h=Ht[11]|0,this.v6l=Ht[12]|0,this.v6h=Ht[13]|0,this.v7l=Ht[14]|0,this.v7h=Ht[15]|0,WJ(t,e,64,16,16);let{key:r,personalization:i,salt:s}=e,o=0;if(r!==void 0&&(r=Ji(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=Ji(s);const c=Gp(s);this.v4l^=oo(c[0]),this.v4h^=oo(c[1]),this.v5l^=oo(c[2]),this.v5h^=oo(c[3])}if(i!==void 0){i=Ji(i);const c=Gp(i);this.v6l^=oo(c[0]),this.v6h^=oo(c[1]),this.v7l^=oo(c[2]),this.v7h^=oo(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:i,v2l:s,v2h:o,v3l:c,v3h:u,v4l:f,v4h:h,v5l:g,v5h:p,v6l:m,v6h:v,v7l:b,v7h:A}=this;return[e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=c|0,this.v3h=u|0,this.v4l=f|0,this.v4h=h|0,this.v5l=g|0,this.v5h=p|0,this.v6l=m|0,this.v6h=v|0,this.v7l=b|0,this.v7h=A|0}compress(e,t,r){this.get().forEach((u,f)=>Ee[f]=u),Ee.set(Ht,16);let{h:i,l:s}=VN(BigInt(this.length));Ee[24]=Ht[8]^s,Ee[25]=Ht[9]^i,r&&(Ee[28]=~Ee[28],Ee[29]=~Ee[29]);let o=0;const c=GJ;for(let u=0;u<12;u++)Da(0,4,8,12,e,t+2*c[o++]),$a(0,4,8,12,e,t+2*c[o++]),Da(1,5,9,13,e,t+2*c[o++]),$a(1,5,9,13,e,t+2*c[o++]),Da(2,6,10,14,e,t+2*c[o++]),$a(2,6,10,14,e,t+2*c[o++]),Da(3,7,11,15,e,t+2*c[o++]),$a(3,7,11,15,e,t+2*c[o++]),Da(0,5,10,15,e,t+2*c[o++]),$a(0,5,10,15,e,t+2*c[o++]),Da(1,6,11,12,e,t+2*c[o++]),$a(1,6,11,12,e,t+2*c[o++]),Da(2,7,8,13,e,t+2*c[o++]),$a(2,7,8,13,e,t+2*c[o++]),Da(3,4,9,14,e,t+2*c[o++]),$a(3,4,9,14,e,t+2*c[o++]);this.v0l^=Ee[0]^Ee[16],this.v0h^=Ee[1]^Ee[17],this.v1l^=Ee[2]^Ee[18],this.v1h^=Ee[3]^Ee[19],this.v2l^=Ee[4]^Ee[20],this.v2h^=Ee[5]^Ee[21],this.v3l^=Ee[6]^Ee[22],this.v3h^=Ee[7]^Ee[23],this.v4l^=Ee[8]^Ee[24],this.v4h^=Ee[9]^Ee[25],this.v5l^=Ee[10]^Ee[26],this.v5h^=Ee[11]^Ee[27],this.v6l^=Ee[12]^Ee[28],this.v6h^=Ee[13]^Ee[29],this.v7l^=Ee[14]^Ee[30],this.v7h^=Ee[15]^Ee[31],Ei(Ee)}destroy(){this.destroyed=!0,Ei(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const JJ=AJ(n=>new ZJ(n)),YJ="https://rpc.walletconnect.org/v1";function rD(n){const e=`Ethereum Signed Message:
${n.length}`,t=new TextEncoder().encode(e+n);return"0x"+Buffer.from(TJ(t)).toString("hex")}async function XJ(n,e,t,r,i,s){switch(t.t){case"eip191":return await eY(n,e,t.s);case"eip1271":return await tY(n,e,t.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}function eY(n,e,t){const r=PZ(t);return $Z({payload:rD(e),signature:r}).toLowerCase()===n.toLowerCase()}async function tY(n,e,t,r,i,s){const o=qy(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const c="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",f=t.substring(2),h=(f.length/2).toString(16).padStart(64,"0"),g=(e.startsWith("0x")?e:rD(e)).substring(2),p=c+g+u+h+f,m=await fetch(`${s||YJ}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:nY(),jsonrpc:"2.0",method:"eth_call",params:[{to:n,data:p},"latest"]})}),{result:v}=await m.json();return v?v.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}}function nY(){return Date.now()+Math.floor(Math.random()*1e3)}function rY(n){const e=atob(n),t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);const r=t[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(t.length<i)throw new Error("Transaction data too short for claimed signature count");if(t.length<100)throw new Error("Transaction too short");const s=Buffer.from(n,"base64").slice(1,65);return Og.encode(s)}function iY(n){const e=new Uint8Array(Buffer.from(n,"base64")),t=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),r=new Uint8Array(t.length+e.length);r.set(t),r.set(e,t.length);const i=JJ(r,{dkLen:32});return Og.encode(i)}function i5(n){const e=new Uint8Array(Ew(sY(n)));return Og.encode(e)}function sY(n){if(n instanceof Uint8Array)return n;if(Array.isArray(n))return new Uint8Array(n);if(typeof n=="object"&&n!=null&&n.data)return new Uint8Array(Object.values(n.data));if(typeof n=="object"&&n)return new Uint8Array(Object.values(n));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function s5(n){const e=Buffer.from(n,"base64"),t=YM(e).txn;if(!t)throw new Error("Invalid signed transaction: missing 'txn' field");const r=HM(t),i=Buffer.from("TX"),s=Buffer.concat([i,Buffer.from(r)]),o=KJ(s);return pM.encode(o).replace(/=+$/,"")}function R2(n){const e=[];let t=BigInt(n);for(;t>=BigInt(128);)e.push(Number(t&BigInt(127)|BigInt(128))),t>>=BigInt(7);return e.push(Number(t)),Buffer.from(e)}function oY(n){const e=Buffer.from(n.signed.bodyBytes,"base64"),t=Buffer.from(n.signed.authInfoBytes,"base64"),r=Buffer.from(n.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(R2(e.length)),i.push(e),i.push(Buffer.from([18])),i.push(R2(t.length)),i.push(t),i.push(Buffer.from([26])),i.push(R2(r.length)),i.push(r);const s=Buffer.concat(i),o=Ew(s);return Buffer.from(o).toString("hex").toUpperCase()}function aY(n){var e,t;const r=[];try{if(typeof n=="string")return r.push(n),r;if(typeof n!="object")return r;n!=null&&n.id&&r.push(n.id);const i=(t=(e=n==null?void 0:n.capabilities)==null?void 0:e.caip345)==null?void 0:t.transactionHashes;i&&r.push(...i)}catch(i){console.warn("getWalletSendCallsHashes failed: ",i)}return r}var cY=Object.defineProperty,lY=Object.defineProperties,uY=Object.getOwnPropertyDescriptors,o5=Object.getOwnPropertySymbols,fY=Object.prototype.hasOwnProperty,hY=Object.prototype.propertyIsEnumerable,a5=(n,e,t)=>e in n?cY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dY=(n,e)=>{for(var t in e||(e={}))fY.call(e,t)&&a5(n,t,e[t]);if(o5)for(var t of o5(e))hY.call(e,t)&&a5(n,t,e[t]);return n},pY=(n,e)=>lY(n,uY(e));const gY="did:pkh:",yx=n=>n==null?void 0:n.split(":"),yY=n=>{const e=n&&yx(n);if(e)return n.includes(gY)?e[3]:e[1]},NE=n=>{const e=n&&yx(n);if(e)return e[2]+":"+e[3]},Pm=n=>{const e=n&&yx(n);if(e)return e.pop()};async function c5(n){const{cacao:e,projectId:t}=n,{s:r,p:i}=e,s=iD(i,i.iss),o=Pm(i.iss);return await XJ(o,s,r,NE(i.iss),t)}const iD=(n,e)=>{const t=`${n.domain} wants you to sign in with your Ethereum account:`,r=Pm(e);if(!n.aud&&!n.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=n.statement||void 0;const s=`URI: ${n.aud||n.uri}`,o=`Version: ${n.version}`,c=`Chain ID: ${yY(e)}`,u=`Nonce: ${n.nonce}`,f=`Issued At: ${n.iat}`,h=n.exp?`Expiration Time: ${n.exp}`:void 0,g=n.nbf?`Not Before: ${n.nbf}`:void 0,p=n.requestId?`Request ID: ${n.requestId}`:void 0,m=n.resources?`Resources:${n.resources.map(b=>`
- ${b}`).join("")}`:void 0,v=Ky(n.resources);if(v){const b=Wp(v);i=IY(i,b)}return[t,r,"",i,"",s,o,c,u,f,h,g,p,m].filter(b=>b!=null).join(`
`)};function mY(n){return Buffer.from(JSON.stringify(n)).toString("base64")}function wY(n){return JSON.parse(Buffer.from(n,"base64").toString("utf-8"))}function lu(n){if(!n)throw new Error("No recap provided, value is undefined");if(!n.att)throw new Error("No `att` property found");const e=Object.keys(n.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const r=n.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function bY(n,e,t,r={}){return t==null||t.sort((i,s)=>i.localeCompare(s)),{att:{[n]:vY(e,t,r)}}}function vY(n,e,t={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const r=e.map(i=>({[`${n}/${i}`]:[t]}));return Object.assign({},...r)}function sD(n){return lu(n),`urn:recap:${mY(n).replace(/=/g,"")}`}function Wp(n){const e=wY(n.replace("urn:recap:",""));return lu(e),e}function EY(n,e,t){const r=bY(n,e,t);return sD(r)}function xY(n){return n&&n.includes("urn:recap:")}function AY(n,e){const t=Wp(n),r=Wp(e),i=SY(t,r);return sD(i)}function SY(n,e){lu(n),lu(e);const t=Object.keys(n.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return t.forEach(i=>{var s,o;Object.keys(((s=n.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((c,u)=>c.localeCompare(u)).forEach(c=>{var u,f;r.att[i]=pY(dY({},r.att[i]),{[c]:((u=n.att[i])==null?void 0:u[c])||((f=e.att[i])==null?void 0:f[c])})})}),r}function IY(n="",e){lu(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(n.includes(t))return n;const r=[];let i=0;Object.keys(e.att).forEach(c=>{const u=Object.keys(e.att[c]).map(g=>({ability:g.split("/")[0],action:g.split("/")[1]}));u.sort((g,p)=>g.action.localeCompare(p.action));const f={};u.forEach(g=>{f[g.ability]||(f[g.ability]=[]),f[g.ability].push(g.action)});const h=Object.keys(f).map(g=>(i++,`(${i}) '${g}': '${f[g].join("', '")}' for '${c}'.`));r.push(h.join(", ").replace(".,","."))});const s=r.join(" "),o=`${t}${s}`;return`${n?n+" ":""}${o}`}function l5(n){var e;const t=Wp(n);lu(t);const r=(e=t.att)==null?void 0:e.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function u5(n){const e=Wp(n);lu(e);const t=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&t.push(i[0].chains)})}),[...new Set(t.flat())]}function Ky(n){if(!n)return;const e=n==null?void 0:n[n.length-1];return xY(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function oD(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function DE(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function U2(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function vr(n,...e){if(!oD(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function f5(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function OY(n,e){vr(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Ac(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Rh(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function BY(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const PY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function CY(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function $E(n){if(typeof n=="string")n=CY(n);else if(oD(n))n=TE(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function _Y(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function NY(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const DY=(n,e)=>{function t(r,...i){if(vr(r),!PY)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const f=i[0];if(!f)throw new Error("nonce / iv required");n.varSizeNonce?vr(f):vr(f,n.nonceLength)}const s=n.tagLength;s&&i[1]!==void 0&&vr(i[1]);const o=e(r,...i),c=(f,h)=>{if(h!==void 0){if(f!==2)throw new Error("cipher output not supported");vr(h)}};let u=!1;return{encrypt(f,h){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,vr(f),c(o.encrypt.length,h),o.encrypt(f,h)},decrypt(f,h){if(vr(f),s&&f.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return c(o.decrypt.length,h),o.decrypt(f,h)}}}return Object.assign(t,n),t};function h5(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!TY(e))throw new Error("invalid output, must be aligned");return e}function d5(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s);n.setUint32(e+4,o,r),n.setUint32(e+0,c,r)}function $Y(n,e,t){DE(t);const r=new Uint8Array(16),i=BY(r);return d5(i,0,BigInt(e),t),d5(i,8,BigInt(n),t),r}function TY(n){return n.byteOffset%4===0}function TE(n){return Uint8Array.from(n)}const aD=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),kY=aD("expand 16-byte k"),RY=aD("expand 32-byte k"),UY=Ac(kY),LY=Ac(RY);function Xe(n,e){return n<<e|n>>>32-e}function kE(n){return n.byteOffset%4===0}const yy=64,FY=16,cD=2**32-1,p5=new Uint32Array;function MY(n,e,t,r,i,s,o,c){const u=i.length,f=new Uint8Array(yy),h=Ac(f),g=kE(i)&&kE(s),p=g?Ac(i):p5,m=g?Ac(s):p5;for(let v=0;v<u;o++){if(n(e,t,r,h,o,c),o>=cD)throw new Error("arx: counter overflow");const b=Math.min(yy,u-v);if(g&&b===yy){const A=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let _=0,U;_<FY;_++)U=A+_,m[U]=p[U]^h[_];v+=yy;continue}for(let A=0,_;A<b;A++)_=v+A,s[_]=i[_]^f[A];v+=b}}function jY(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=_Y({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return U2(i),U2(o),DE(s),DE(t),(c,u,f,h,g=0)=>{vr(c),vr(u),vr(f);const p=f.length;if(h===void 0&&(h=new Uint8Array(p)),vr(h),U2(g),g<0||g>=cD)throw new Error("arx: counter overflow");if(h.length<p)throw new Error(`arx: output (${h.length}) is shorter than data (${p})`);const m=[];let v=c.length,b,A;if(v===32)m.push(b=TE(c)),A=LY;else if(v===16&&t)b=new Uint8Array(32),b.set(c),b.set(c,16),A=UY,m.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);kE(u)||m.push(u=TE(u));const _=Ac(b);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,_,Ac(u.subarray(0,16)),_),u=u.subarray(16)}const U=16-i;if(U!==u.length)throw new Error(`arx: nonce must be ${U} or 16 bytes`);if(U!==12){const T=new Uint8Array(12);T.set(u,s?0:12-u.length),u=T,m.push(u)}const O=Ac(u);return MY(n,A,_,O,f,h,g,o),Rh(...m),h}}const hn=(n,e)=>n[e++]&255|(n[e++]&255)<<8;let zY=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=$E(e),vr(e,32);const t=hn(e,0),r=hn(e,2),i=hn(e,4),s=hn(e,6),o=hn(e,8),c=hn(e,10),u=hn(e,12),f=hn(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let h=0;h<8;h++)this.pad[h]=hn(e,16+2*h)}process(e,t,r=!1){const i=r?0:2048,{h:s,r:o}=this,c=o[0],u=o[1],f=o[2],h=o[3],g=o[4],p=o[5],m=o[6],v=o[7],b=o[8],A=o[9],_=hn(e,t+0),U=hn(e,t+2),O=hn(e,t+4),T=hn(e,t+6),R=hn(e,t+8),j=hn(e,t+10),H=hn(e,t+12),V=hn(e,t+14);let M=s[0]+(_&8191),G=s[1]+((_>>>13|U<<3)&8191),Q=s[2]+((U>>>10|O<<6)&8191),z=s[3]+((O>>>7|T<<9)&8191),P=s[4]+((T>>>4|R<<12)&8191),D=s[5]+(R>>>1&8191),w=s[6]+((R>>>14|j<<2)&8191),x=s[7]+((j>>>11|H<<5)&8191),B=s[8]+((H>>>8|V<<8)&8191),C=s[9]+(V>>>5|i),I=0,N=I+M*c+G*(5*A)+Q*(5*b)+z*(5*v)+P*(5*m);I=N>>>13,N&=8191,N+=D*(5*p)+w*(5*g)+x*(5*h)+B*(5*f)+C*(5*u),I+=N>>>13,N&=8191;let $=I+M*u+G*c+Q*(5*A)+z*(5*b)+P*(5*v);I=$>>>13,$&=8191,$+=D*(5*m)+w*(5*p)+x*(5*g)+B*(5*h)+C*(5*f),I+=$>>>13,$&=8191;let L=I+M*f+G*u+Q*c+z*(5*A)+P*(5*b);I=L>>>13,L&=8191,L+=D*(5*v)+w*(5*m)+x*(5*p)+B*(5*g)+C*(5*h),I+=L>>>13,L&=8191;let Y=I+M*h+G*f+Q*u+z*c+P*(5*A);I=Y>>>13,Y&=8191,Y+=D*(5*b)+w*(5*v)+x*(5*m)+B*(5*p)+C*(5*g),I+=Y>>>13,Y&=8191;let q=I+M*g+G*h+Q*f+z*u+P*c;I=q>>>13,q&=8191,q+=D*(5*A)+w*(5*b)+x*(5*v)+B*(5*m)+C*(5*p),I+=q>>>13,q&=8191;let Z=I+M*p+G*g+Q*h+z*f+P*u;I=Z>>>13,Z&=8191,Z+=D*c+w*(5*A)+x*(5*b)+B*(5*v)+C*(5*m),I+=Z>>>13,Z&=8191;let te=I+M*m+G*p+Q*g+z*h+P*f;I=te>>>13,te&=8191,te+=D*u+w*c+x*(5*A)+B*(5*b)+C*(5*v),I+=te>>>13,te&=8191;let re=I+M*v+G*m+Q*p+z*g+P*h;I=re>>>13,re&=8191,re+=D*f+w*u+x*c+B*(5*A)+C*(5*b),I+=re>>>13,re&=8191;let le=I+M*b+G*v+Q*m+z*p+P*g;I=le>>>13,le&=8191,le+=D*h+w*f+x*u+B*c+C*(5*A),I+=le>>>13,le&=8191;let se=I+M*A+G*b+Q*v+z*m+P*p;I=se>>>13,se&=8191,se+=D*g+w*h+x*f+B*u+C*c,I+=se>>>13,se&=8191,I=(I<<2)+I|0,I=I+N|0,N=I&8191,I=I>>>13,$+=I,s[0]=N,s[1]=$,s[2]=L,s[3]=Y,s[4]=q,s[5]=Z,s[6]=te,s[7]=re,s[8]=le,s[9]=se}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=8192;let s=(i^1)-1;for(let c=0;c<10;c++)r[c]&=s;s=~s;for(let c=0;c<10;c++)e[c]=e[c]&s|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let c=1;c<8;c++)o=(e[c]+t[c]|0)+(o>>>16)|0,e[c]=o&65535;Rh(r)}update(e){f5(this),e=$E(e),vr(e);const{buffer:t,blockLen:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}t.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){Rh(this.h,this.r,this.buffer,this.pad)}digestInto(e){f5(this),OY(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}};function HY(n){const e=(r,i)=>n(i).update($E(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const VY=HY(n=>new zY(n));function qY(n,e,t,r,i,s=20){let o=n[0],c=n[1],u=n[2],f=n[3],h=e[0],g=e[1],p=e[2],m=e[3],v=e[4],b=e[5],A=e[6],_=e[7],U=i,O=t[0],T=t[1],R=t[2],j=o,H=c,V=u,M=f,G=h,Q=g,z=p,P=m,D=v,w=b,x=A,B=_,C=U,I=O,N=T,$=R;for(let Y=0;Y<s;Y+=2)j=j+G|0,C=Xe(C^j,16),D=D+C|0,G=Xe(G^D,12),j=j+G|0,C=Xe(C^j,8),D=D+C|0,G=Xe(G^D,7),H=H+Q|0,I=Xe(I^H,16),w=w+I|0,Q=Xe(Q^w,12),H=H+Q|0,I=Xe(I^H,8),w=w+I|0,Q=Xe(Q^w,7),V=V+z|0,N=Xe(N^V,16),x=x+N|0,z=Xe(z^x,12),V=V+z|0,N=Xe(N^V,8),x=x+N|0,z=Xe(z^x,7),M=M+P|0,$=Xe($^M,16),B=B+$|0,P=Xe(P^B,12),M=M+P|0,$=Xe($^M,8),B=B+$|0,P=Xe(P^B,7),j=j+Q|0,$=Xe($^j,16),x=x+$|0,Q=Xe(Q^x,12),j=j+Q|0,$=Xe($^j,8),x=x+$|0,Q=Xe(Q^x,7),H=H+z|0,C=Xe(C^H,16),B=B+C|0,z=Xe(z^B,12),H=H+z|0,C=Xe(C^H,8),B=B+C|0,z=Xe(z^B,7),V=V+P|0,I=Xe(I^V,16),D=D+I|0,P=Xe(P^D,12),V=V+P|0,I=Xe(I^V,8),D=D+I|0,P=Xe(P^D,7),M=M+G|0,N=Xe(N^M,16),w=w+N|0,G=Xe(G^w,12),M=M+G|0,N=Xe(N^M,8),w=w+N|0,G=Xe(G^w,7);let L=0;r[L++]=o+j|0,r[L++]=c+H|0,r[L++]=u+V|0,r[L++]=f+M|0,r[L++]=h+G|0,r[L++]=g+Q|0,r[L++]=p+z|0,r[L++]=m+P|0,r[L++]=v+D|0,r[L++]=b+w|0,r[L++]=A+x|0,r[L++]=_+B|0,r[L++]=U+C|0,r[L++]=O+I|0,r[L++]=T+N|0,r[L++]=R+$|0}const KY=jY(qY,{counterRight:!1,counterLength:4,allowShortKeys:!1}),GY=new Uint8Array(16),g5=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(GY.subarray(t))},WY=new Uint8Array(32);function y5(n,e,t,r,i){const s=n(e,t,WY),o=VY.create(s);i&&g5(o,i),g5(o,r);const c=$Y(r.length,i?i.length:0,!0);o.update(c);const u=o.digest();return Rh(s,c),u}const QY=n=>(e,t,r)=>({encrypt(i,s){const o=i.length;s=h5(o+16,s,!1),s.set(i);const c=s.subarray(0,-16);n(e,t,c,c,1);const u=y5(n,e,t,c,r);return s.set(u,o),Rh(u),s},decrypt(i,s){s=h5(i.length-16,s,!1);const o=i.subarray(0,-16),c=i.subarray(-16),u=y5(n,e,t,o,r);if(!NY(c,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),n(e,t,s,s,1),Rh(u),s}}),lD=DY({blockSize:64,nonceLength:12,tagLength:16},QY(KY));let uD=class extends vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,bw(e);const r=Ji(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Ei(s)}update(e){return Nc(this),this.iHash.update(e),this}digestInto(e){Nc(this),ts(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const xw=(n,e,t)=>new uD(n,e).update(t).digest();xw.create=(n,e)=>new uD(n,e);function ZY(n,e,t){return bw(n),t===void 0&&(t=new Uint8Array(n.outputLen)),xw(n,Ji(t),Ji(e))}const L2=Uint8Array.from([0]),m5=Uint8Array.of();function JY(n,e,t,r=32){bw(n),Vo(r);const i=n.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/i);t===void 0&&(t=m5);const o=new Uint8Array(s*i),c=xw.create(n,e),u=c._cloneInto(),f=new Uint8Array(c.outputLen);for(let h=0;h<s;h++)L2[0]=h+1,u.update(h===0?m5:f).update(t).update(L2).digestInto(f),o.set(f,i*h),c._cloneInto(u);return c.destroy(),u.destroy(),Ei(f,L2),o.slice(0,r)}const YY=(n,e,t,r,i)=>JY(n,ZY(n,e,t),r,i),Aw=Ew,mx=BigInt(0),RE=BigInt(1);function Cm(n,e=""){if(typeof n!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof n)}return n}function Pl(n,e,t=""){const r=ww(n),i=n==null?void 0:n.length,s=e!==void 0;if(!r||s&&i!==e){const o=t&&`"${t}" `,c=s?` of length ${e}`:"",u=r?`length=${i}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+c+", got "+u)}return n}function my(n){const e=n.toString(16);return e.length&1?"0"+e:e}function fD(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?mx:BigInt("0x"+n)}function Sw(n){return fD(Df(n))}function _m(n){return ts(n),fD(Df(Uint8Array.from(n).reverse()))}function wx(n,e){return Bm(n.toString(16).padStart(e*2,"0"))}function bx(n,e){return wx(n,e).reverse()}function zn(n,e,t){let r;if(typeof e=="string")try{r=Bm(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(ww(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}const F2=n=>typeof n=="bigint"&&mx<=n;function XY(n,e,t){return F2(n)&&F2(e)&&F2(t)&&e<=n&&n<t}function UE(n,e,t,r){if(!XY(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function hD(n){let e;for(e=0;n>mx;n>>=RE,e+=1);return e}const Cg=n=>(RE<<BigInt(n))-RE;function eX(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=p=>new Uint8Array(p),i=p=>Uint8Array.of(p);let s=r(n),o=r(n),c=0;const u=()=>{s.fill(1),o.fill(0),c=0},f=(...p)=>t(o,s,...p),h=(p=r(0))=>{o=f(i(0),p),s=f(),p.length!==0&&(o=f(i(1),p),s=f())},g=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const m=[];for(;p<e;){s=f();const v=s.slice();m.push(v),p+=s.length}return ec(...m)};return(p,m)=>{u(),h(p);let v;for(;!(v=m(g()));)h();return u(),v}}function Iw(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,s,o){const c=n[i];if(o&&c===void 0)return;const u=typeof c;if(u!==s||c===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${u}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(t).forEach(([i,s])=>r(i,s,!0))}function w5(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const Or=BigInt(0),nr=BigInt(1),Cl=BigInt(2),dD=BigInt(3),pD=BigInt(4),gD=BigInt(5),tX=BigInt(7),yD=BigInt(8),nX=BigInt(9),mD=BigInt(16);function Gr(n,e){const t=n%e;return t>=Or?t:e+t}function Ti(n,e,t){let r=n;for(;e-- >Or;)r*=r,r%=t;return r}function b5(n,e){if(n===Or)throw new Error("invert: expected non-zero number");if(e<=Or)throw new Error("invert: expected positive modulus, got "+e);let t=Gr(n,e),r=e,i=Or,s=nr;for(;t!==Or;){const o=r/t,c=r%t,u=i-s*o;r=t,t=c,i=s,s=u}if(r!==nr)throw new Error("invert: does not exist");return Gr(i,e)}function vx(n,e,t){if(!n.eql(n.sqr(e),t))throw new Error("Cannot find square root")}function wD(n,e){const t=(n.ORDER+nr)/pD,r=n.pow(e,t);return vx(n,r,e),r}function rX(n,e){const t=(n.ORDER-gD)/yD,r=n.mul(e,Cl),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,Cl),i),c=n.mul(s,n.sub(o,n.ONE));return vx(n,c,e),c}function iX(n){const e=Lc(n),t=bD(n),r=t(e,e.neg(e.ONE)),i=t(e,r),s=t(e,e.neg(r)),o=(n+tX)/mD;return(c,u)=>{let f=c.pow(u,o),h=c.mul(f,r);const g=c.mul(f,i),p=c.mul(f,s),m=c.eql(c.sqr(h),u),v=c.eql(c.sqr(g),u);f=c.cmov(f,h,m),h=c.cmov(p,g,v);const b=c.eql(c.sqr(h),u),A=c.cmov(f,h,b);return vx(c,A,u),A}}function bD(n){if(n<dD)throw new Error("sqrt is not defined for small field");let e=n-nr,t=0;for(;e%Cl===Or;)e/=Cl,t++;let r=Cl;const i=Lc(n);for(;v5(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return wD;let s=i.pow(r,e);const o=(e+nr)/Cl;return function(c,u){if(c.is0(u))return u;if(v5(c,u)!==1)throw new Error("Cannot find square root");let f=t,h=c.mul(c.ONE,s),g=c.pow(u,e),p=c.pow(u,o);for(;!c.eql(g,c.ONE);){if(c.is0(g))return c.ZERO;let m=1,v=c.sqr(g);for(;!c.eql(v,c.ONE);)if(m++,v=c.sqr(v),m===f)throw new Error("Cannot find square root");const b=nr<<BigInt(f-m-1),A=c.pow(h,b);f=m,h=c.sqr(A),g=c.mul(g,h),p=c.mul(p,A)}return p}}function sX(n){return n%pD===dD?wD:n%yD===gD?rX:n%mD===nX?iX(n):bD(n)}const oX=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function aX(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=oX.reduce((r,i)=>(r[i]="function",r),e);return Iw(n,t),n}function cX(n,e,t){if(t<Or)throw new Error("invalid exponent, negatives unsupported");if(t===Or)return n.ONE;if(t===nr)return e;let r=n.ONE,i=e;for(;t>Or;)t&nr&&(r=n.mul(r,i)),i=n.sqr(i),t>>=nr;return r}function vD(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,c,u)=>n.is0(c)?o:(r[u]=o,n.mul(o,c)),n.ONE),s=n.inv(i);return e.reduceRight((o,c,u)=>n.is0(c)?o:(r[u]=n.mul(o,r[u]),n.mul(o,c)),s),r}function v5(n,e){const t=(n.ORDER-nr)/Cl,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function ED(n,e){e!==void 0&&Vo(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Lc(n,e,t=!1,r={}){if(n<=Or)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,s,o=!1,c;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const p=e;p.BITS&&(i=p.BITS),p.sqrt&&(s=p.sqrt),typeof p.isLE=="boolean"&&(t=p.isLE),typeof p.modFromBytes=="boolean"&&(o=p.modFromBytes),c=p.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:u,nByteLength:f}=ED(n,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const g=Object.freeze({ORDER:n,isLE:t,BITS:u,BYTES:f,MASK:Cg(u),ZERO:Or,ONE:nr,allowedLengths:c,create:p=>Gr(p,n),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Or<=p&&p<n},is0:p=>p===Or,isValidNot0:p=>!g.is0(p)&&g.isValid(p),isOdd:p=>(p&nr)===nr,neg:p=>Gr(-p,n),eql:(p,m)=>p===m,sqr:p=>Gr(p*p,n),add:(p,m)=>Gr(p+m,n),sub:(p,m)=>Gr(p-m,n),mul:(p,m)=>Gr(p*m,n),pow:(p,m)=>cX(g,p,m),div:(p,m)=>Gr(p*b5(m,n),n),sqrN:p=>p*p,addN:(p,m)=>p+m,subN:(p,m)=>p-m,mulN:(p,m)=>p*m,inv:p=>b5(p,n),sqrt:s||(p=>(h||(h=sX(n)),h(g,p))),toBytes:p=>t?bx(p,f):wx(p,f),fromBytes:(p,m=!0)=>{if(c){if(!c.includes(p.length)||p.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+p.length);const b=new Uint8Array(f);b.set(p,t?0:b.length-p.length),p=b}if(p.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+p.length);let v=t?_m(p):Sw(p);if(o&&(v=Gr(v,n)),!m&&!g.isValid(v))throw new Error("invalid field element: outside of range 0..ORDER");return v},invertBatch:p=>vD(g,p),cmov:(p,m,v)=>v?m:p});return Object.freeze(g)}function xD(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function AD(n){const e=xD(n);return e+Math.ceil(e/2)}function lX(n,e,t=!1){const r=n.length,i=xD(e),s=AD(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?_m(n):Sw(n),c=Gr(o,e-nr)+nr;return t?bx(c,i):wx(c,i)}const Uh=BigInt(0),_l=BigInt(1);function Nm(n,e){const t=e.negate();return n?t:e}function M2(n,e){const t=vD(n.Fp,e.map(r=>r.Z));return e.map((r,i)=>n.fromAffine(r.toAffine(t[i])))}function SD(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function j2(n,e){SD(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=Cg(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function E5(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t;let c=Number(n&i),u=n>>o;c>r&&(c-=s,u+=_l);const f=e*r,h=f+Math.abs(c)-1,g=c===0,p=c<0,m=e%2!==0;return{nextN:u,offset:h,isZero:g,isNeg:p,isNegF:m,offsetF:f}}function uX(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function fX(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const z2=new WeakMap,ID=new WeakMap;function H2(n){return ID.get(n)||1}function x5(n){if(n!==Uh)throw new Error("invalid wNAF")}let hX=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>Uh;)t&_l&&(r=r.add(i)),i=i.double(),t>>=_l;return r}precomputeWindow(e,t){const{windows:r,windowSize:i}=j2(t,this.bits),s=[];let o=e,c=o;for(let u=0;u<r;u++){c=o,s.push(c);for(let f=1;f<i;f++)c=c.add(o),s.push(c);o=c.double()}return s}wNAF(e,t,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=j2(e,this.bits);for(let c=0;c<o.windows;c++){const{nextN:u,offset:f,isZero:h,isNeg:g,isNegF:p,offsetF:m}=E5(r,c,o);r=u,h?s=s.add(Nm(p,t[m])):i=i.add(Nm(g,t[f]))}return x5(r),{p:i,f:s}}wNAFUnsafe(e,t,r,i=this.ZERO){const s=j2(e,this.bits);for(let o=0;o<s.windows&&r!==Uh;o++){const{nextN:c,offset:u,isZero:f,isNeg:h}=E5(r,o,s);if(r=c,!f){const g=t[u];i=i.add(h?g.negate():g)}}return x5(r),i}getPrecomputes(e,t,r){let i=z2.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof r=="function"&&(i=r(i)),z2.set(t,i))),i}cached(e,t,r){const i=H2(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){const s=H2(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),t,i)}createCache(e,t){SD(t,this.bits),ID.set(e,t),z2.delete(e)}hasCache(e){return H2(e)!==1}};function dX(n,e,t,r){let i=e,s=n.ZERO,o=n.ZERO;for(;t>Uh||r>Uh;)t&_l&&(s=s.add(i)),r&_l&&(o=o.add(i)),i=i.double(),t>>=_l,r>>=_l;return{p1:s,p2:o}}function pX(n,e,t,r){uX(t,n),fX(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=hD(BigInt(i));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const f=Cg(u),h=new Array(Number(f)+1).fill(o),g=Math.floor((e.BITS-1)/u)*u;let p=o;for(let m=g;m>=0;m-=u){h.fill(o);for(let b=0;b<s;b++){const A=r[b],_=Number(A>>BigInt(m)&f);h[_]=h[_].add(t[b])}let v=o;for(let b=h.length-1,A=o;b>0;b--)A=A.add(h[b]),v=v.add(A);if(p=p.add(v),m!==0)for(let b=0;b<u;b++)p=p.double()}return p}function A5(n,e,t){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return aX(e),e}else return Lc(n,{isLE:t})}function gX(n,e,t={},r){if(r===void 0&&(r=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>Uh))throw new Error(`CURVE.${c} must be positive bigint`)}const i=A5(e.p,t.Fp,r),s=A5(e.n,t.Fn,r),o=["Gx","Gy","a","b"];for(const c of o)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),QN("HashToScalar-");const Jd=BigInt(0),tf=BigInt(1),wy=BigInt(2);function yX(n){return Iw(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function mX(n){const e=yX(n),{P:t,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,c=r==="x25519";if(!c&&r!=="x448")throw new Error("invalid type");const u=o||mu,f=c?255:448,h=c?32:56,g=BigInt(c?9:5),p=BigInt(c?121665:39081),m=c?wy**BigInt(254):wy**BigInt(447),v=c?BigInt(8)*wy**BigInt(251)-tf:BigInt(4)*wy**BigInt(445)-tf,b=m+v+tf,A=z=>Gr(z,t),_=U(g);function U(z){return bx(A(z),h)}function O(z){const P=zn("u coordinate",z,h);return c&&(P[31]&=127),A(_m(P))}function T(z){return _m(i(zn("scalar",z,h)))}function R(z,P){const D=V(O(P),T(z));if(D===Jd)throw new Error("invalid private or public key received");return U(D)}function j(z){return R(z,_)}function H(z,P,D){const w=A(z*(P-D));return P=A(P-w),D=A(D+w),{x_2:P,x_3:D}}function V(z,P){UE("u",z,Jd,t),UE("scalar",P,m,b);const D=P,w=z;let x=tf,B=Jd,C=z,I=tf,N=Jd;for(let L=BigInt(f-1);L>=Jd;L--){const Y=D>>L&tf;N^=Y,{x_2:x,x_3:C}=H(N,x,C),{x_2:B,x_3:I}=H(N,B,I),N=Y;const q=x+B,Z=A(q*q),te=x-B,re=A(te*te),le=Z-re,se=C+I,ue=C-I,Ne=A(ue*q),Re=A(se*te),ke=Ne+Re,Ve=Ne-Re;C=A(ke*ke),I=A(w*A(Ve*Ve)),x=A(Z*re),B=A(le*(Z+A(p*le)))}({x_2:x,x_3:C}=H(N,x,C)),{x_2:B,x_3:I}=H(N,B,I);const $=s(B);return A(x*$)}const M={secretKey:h,publicKey:h,seed:h},G=(z=u(h))=>(ts(z,M.seed),z);function Q(z){const P=G(z);return{secretKey:P,publicKey:j(P)}}return{keygen:Q,getSharedSecret:(z,P)=>R(z,P),getPublicKey:z=>j(z),scalarMult:R,scalarMultBase:j,utils:{randomSecretKey:G,randomPrivateKey:G},GuBytes:_.slice(),lengths:M}}const wX=BigInt(1),S5=BigInt(2),bX=BigInt(3),vX=BigInt(5);BigInt(8);const OD=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),EX={p:OD,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function xX(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=OD,o=n*n%s*n%s,c=Ti(o,S5,s)*o%s,u=Ti(c,wX,s)*n%s,f=Ti(u,vX,s)*u%s,h=Ti(f,e,s)*f%s,g=Ti(h,t,s)*h%s,p=Ti(g,r,s)*g%s,m=Ti(p,i,s)*p%s,v=Ti(m,i,s)*p%s,b=Ti(v,e,s)*f%s;return{pow_p_5_8:Ti(b,S5,s)*n%s,b2:o}}function AX(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const SX=Lc(EX.p,{isLE:!0}),LE=(()=>{const n=SX.ORDER;return mX({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=xX(e);return Gr(Ti(t,bX,n)*r,n)},adjustScalarBytes:AX})})(),I5=(n,e)=>(n+(n>=0?e:-e)/BD)/e;function IX(n,e,t){const[[r,i],[s,o]]=e,c=I5(o*n,t),u=I5(-i*n,t);let f=n-c*r-u*s,h=-c*i-u*o;const g=f<To,p=h<To;g&&(f=-f),p&&(h=-h);const m=Cg(Math.ceil(hD(t)/2))+$f;if(f<To||f>=m||h<To||h>=m)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:g,k1:f,k2neg:p,k2:h}}function FE(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function V2(n,e){const t={};for(let r of Object.keys(e))t[r]=n[r]===void 0?e[r]:n[r];return Cm(t.lowS,"lowS"),Cm(t.prehash,"prehash"),t.format!==void 0&&FE(t.format),t}let OX=class extends Error{constructor(e=""){super(e)}};const yo={Err:OX,_tlv:{encode:(n,e)=>{const{Err:t}=yo;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=my(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?my(i.length/2|128):"";return my(n)+s+i+e},decode(n,e){const{Err:t}=yo;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new t("tlv.decode: length bytes not complete");if(f[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of f)o=o<<8|h;if(r+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=yo;if(n<To)throw new e("integer: negative integers are not allowed");let t=my(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=yo;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Sw(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=yo,i=zn("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,s),{v:f,l:h}=r.decode(2,u);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(f)}},hexFromSig(n){const{_tlv:e,_int:t}=yo,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},To=BigInt(0),$f=BigInt(1),BD=BigInt(2),by=BigInt(3),BX=BigInt(4);function mf(n,e){const{BYTES:t}=n;let r;if(typeof e=="bigint")r=e;else{let i=zn("private key",e);try{r=n.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function PX(n,e={}){const t=gX("weierstrass",n,e),{Fp:r,Fn:i}=t;let s=t.CURVE;const{h:o,n:c}=s;Iw(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=e;if(u&&(!r.is0(s.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=CD(r,i);function h(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function g(z,P,D){const{x:w,y:x}=P.toAffine(),B=r.toBytes(w);if(Cm(D,"isCompressed"),D){h();const C=!r.isOdd(x);return ec(PD(C),B)}else return ec(Uint8Array.of(4),B,r.toBytes(x))}function p(z){Pl(z,void 0,"Point");const{publicKey:P,publicKeyUncompressed:D}=f,w=z.length,x=z[0],B=z.subarray(1);if(w===P&&(x===2||x===3)){const C=r.fromBytes(B);if(!r.isValid(C))throw new Error("bad point: is not on curve, wrong x");const I=b(C);let N;try{N=r.sqrt(I)}catch(L){const Y=L instanceof Error?": "+L.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}h();const $=r.isOdd(N);return(x&1)===1!==$&&(N=r.neg(N)),{x:C,y:N}}else if(w===D&&x===4){const C=r.BYTES,I=r.fromBytes(B.subarray(0,C)),N=r.fromBytes(B.subarray(C,C*2));if(!A(I,N))throw new Error("bad point: is not on curve");return{x:I,y:N}}else throw new Error(`bad point: got length ${w}, expected compressed=${P} or uncompressed=${D}`)}const m=e.toBytes||g,v=e.fromBytes||p;function b(z){const P=r.sqr(z),D=r.mul(P,z);return r.add(r.add(D,r.mul(z,s.a)),s.b)}function A(z,P){const D=r.sqr(P),w=b(z);return r.eql(D,w)}if(!A(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const _=r.mul(r.pow(s.a,by),BX),U=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(_,U)))throw new Error("bad curve params: a or b");function O(z,P,D=!1){if(!r.isValid(P)||D&&r.is0(P))throw new Error(`bad point coordinate ${z}`);return P}function T(z){if(!(z instanceof M))throw new Error("ProjectivePoint expected")}function R(z){if(!u||!u.basises)throw new Error("no endo");return IX(z,u.basises,i.ORDER)}const j=w5((z,P)=>{const{X:D,Y:w,Z:x}=z;if(r.eql(x,r.ONE))return{x:D,y:w};const B=z.is0();P==null&&(P=B?r.ONE:r.inv(x));const C=r.mul(D,P),I=r.mul(w,P),N=r.mul(x,P);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(N,r.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),H=w5(z=>{if(z.is0()){if(e.allowInfinityPoint&&!r.is0(z.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:D}=z.toAffine();if(!r.isValid(P)||!r.isValid(D))throw new Error("bad point: x or y not field elements");if(!A(P,D))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function V(z,P,D,w,x){return D=new M(r.mul(D.X,z),D.Y,D.Z),P=Nm(w,P),D=Nm(x,D),P.add(D)}class M{constructor(P,D,w){this.X=O("x",P),this.Y=O("y",D,!0),this.Z=O("z",w),Object.freeze(this)}static CURVE(){return s}static fromAffine(P){const{x:D,y:w}=P||{};if(!P||!r.isValid(D)||!r.isValid(w))throw new Error("invalid affine point");if(P instanceof M)throw new Error("projective point not allowed");return r.is0(D)&&r.is0(w)?M.ZERO:new M(D,w,r.ONE)}static fromBytes(P){const D=M.fromAffine(v(Pl(P,void 0,"point")));return D.assertValidity(),D}static fromHex(P){return M.fromBytes(zn("pointHex",P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,D=!0){return Q.createCache(this,P),D||this.multiply(by),this}assertValidity(){H(this)}hasEvenY(){const{y:P}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(P)}equals(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P,N=r.eql(r.mul(D,I),r.mul(B,x)),$=r.eql(r.mul(w,I),r.mul(C,x));return N&&$}negate(){return new M(this.X,r.neg(this.Y),this.Z)}double(){const{a:P,b:D}=s,w=r.mul(D,by),{X:x,Y:B,Z:C}=this;let I=r.ZERO,N=r.ZERO,$=r.ZERO,L=r.mul(x,x),Y=r.mul(B,B),q=r.mul(C,C),Z=r.mul(x,B);return Z=r.add(Z,Z),$=r.mul(x,C),$=r.add($,$),I=r.mul(P,$),N=r.mul(w,q),N=r.add(I,N),I=r.sub(Y,N),N=r.add(Y,N),N=r.mul(I,N),I=r.mul(Z,I),$=r.mul(w,$),q=r.mul(P,q),Z=r.sub(L,q),Z=r.mul(P,Z),Z=r.add(Z,$),$=r.add(L,L),L=r.add($,L),L=r.add(L,q),L=r.mul(L,Z),N=r.add(N,L),q=r.mul(B,C),q=r.add(q,q),L=r.mul(q,Z),I=r.sub(I,L),$=r.mul(q,Y),$=r.add($,$),$=r.add($,$),new M(I,N,$)}add(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P;let N=r.ZERO,$=r.ZERO,L=r.ZERO;const Y=s.a,q=r.mul(s.b,by);let Z=r.mul(D,B),te=r.mul(w,C),re=r.mul(x,I),le=r.add(D,w),se=r.add(B,C);le=r.mul(le,se),se=r.add(Z,te),le=r.sub(le,se),se=r.add(D,x);let ue=r.add(B,I);return se=r.mul(se,ue),ue=r.add(Z,re),se=r.sub(se,ue),ue=r.add(w,x),N=r.add(C,I),ue=r.mul(ue,N),N=r.add(te,re),ue=r.sub(ue,N),L=r.mul(Y,se),N=r.mul(q,re),L=r.add(N,L),N=r.sub(te,L),L=r.add(te,L),$=r.mul(N,L),te=r.add(Z,Z),te=r.add(te,Z),re=r.mul(Y,re),se=r.mul(q,se),te=r.add(te,re),re=r.sub(Z,re),re=r.mul(Y,re),se=r.add(se,re),Z=r.mul(te,se),$=r.add($,Z),Z=r.mul(ue,se),N=r.mul(le,N),N=r.sub(N,Z),Z=r.mul(le,te),L=r.mul(ue,L),L=r.add(L,Z),new M(N,$,L)}subtract(P){return this.add(P.negate())}is0(){return this.equals(M.ZERO)}multiply(P){const{endo:D}=e;if(!i.isValidNot0(P))throw new Error("invalid scalar: out of range");let w,x;const B=C=>Q.cached(this,C,I=>M2(M,I));if(D){const{k1neg:C,k1:I,k2neg:N,k2:$}=R(P),{p:L,f:Y}=B(I),{p:q,f:Z}=B($);x=Y.add(Z),w=V(D.beta,L,q,C,N)}else{const{p:C,f:I}=B(P);w=C,x=I}return M2(M,[w,x])[0]}multiplyUnsafe(P){const{endo:D}=e,w=this;if(!i.isValid(P))throw new Error("invalid scalar: out of range");if(P===To||w.is0())return M.ZERO;if(P===$f)return w;if(Q.hasCache(this))return this.multiply(P);if(D){const{k1neg:x,k1:B,k2neg:C,k2:I}=R(P),{p1:N,p2:$}=dX(M,w,B,I);return V(D.beta,N,$,x,C)}else return Q.unsafe(w,P)}multiplyAndAddUnsafe(P,D,w){const x=this.multiplyUnsafe(D).add(P.multiplyUnsafe(w));return x.is0()?void 0:x}toAffine(P){return j(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return o===$f?!0:P?P(M,this):Q.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:P}=e;return o===$f?this:P?P(M,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(P=!0){return Cm(P,"isCompressed"),this.assertValidity(),m(M,this,P)}toHex(P=!0){return Df(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(P=!0){return this.toBytes(P)}_setWindowSize(P){this.precompute(P)}static normalizeZ(P){return M2(M,P)}static msm(P,D){return pX(M,i,P,D)}static fromPrivateKey(P){return M.BASE.multiply(mf(i,P))}}M.BASE=new M(s.Gx,s.Gy,r.ONE),M.ZERO=new M(r.ZERO,r.ONE,r.ZERO),M.Fp=r,M.Fn=i;const G=i.BITS,Q=new hX(M,e.endo?Math.ceil(G/2):G);return M.BASE.precompute(8),M}function PD(n){return Uint8Array.of(n?2:3)}function CD(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function CX(n,e={}){const{Fn:t}=n,r=e.randomBytes||mu,i=Object.assign(CD(n.Fp,t),{seed:AD(t.ORDER)});function s(p){try{return!!mf(t,p)}catch{return!1}}function o(p,m){const{publicKey:v,publicKeyUncompressed:b}=i;try{const A=p.length;return m===!0&&A!==v||m===!1&&A!==b?!1:!!n.fromBytes(p)}catch{return!1}}function c(p=r(i.seed)){return lX(Pl(p,i.seed,"seed"),t.ORDER)}function u(p,m=!0){return n.BASE.multiply(mf(t,p)).toBytes(m)}function f(p){const m=c(p);return{secretKey:m,publicKey:u(m)}}function h(p){if(typeof p=="bigint")return!1;if(p instanceof n)return!0;const{secretKey:m,publicKey:v,publicKeyUncompressed:b}=i;if(t.allowedLengths||m===v)return;const A=zn("key",p).length;return A===v||A===b}function g(p,m,v=!0){if(h(p)===!0)throw new Error("first arg must be private key");if(h(m)===!1)throw new Error("second arg must be public key");const b=mf(t,p);return n.fromHex(m).multiply(b).toBytes(v)}return Object.freeze({getPublicKey:u,getSharedSecret:g,keygen:f,Point:n,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:s,randomPrivateKey:c,normPrivateKeyToScalar:p=>mf(t,p),precompute(p=8,m=n.BASE){return m.precompute(p,!1)}},lengths:i})}function _X(n,e,t={}){bw(e),Iw(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||mu,i=t.hmac||((D,...w)=>xw(e,D,ec(...w))),{Fp:s,Fn:o}=n,{ORDER:c,BITS:u}=o,{keygen:f,getPublicKey:h,getSharedSecret:g,utils:p,lengths:m}=CX(n,t),v={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},b="compact";function A(D){const w=c>>$f;return D>w}function _(D,w){if(!o.isValidNot0(w))throw new Error(`invalid signature ${D}: out of range 1..Point.Fn.ORDER`);return w}function U(D,w){FE(w);const x=m.signature,B=w==="compact"?x:w==="recovered"?x+1:void 0;return Pl(D,B,`${w} signature`)}class O{constructor(w,x,B){this.r=_("r",w),this.s=_("s",x),B!=null&&(this.recovery=B),Object.freeze(this)}static fromBytes(w,x=b){U(w,x);let B;if(x==="der"){const{r:$,s:L}=yo.toSig(Pl(w));return new O($,L)}x==="recovered"&&(B=w[0],x="compact",w=w.subarray(1));const C=o.BYTES,I=w.subarray(0,C),N=w.subarray(C,C*2);return new O(o.fromBytes(I),o.fromBytes(N),B)}static fromHex(w,x){return this.fromBytes(Bm(w),x)}addRecoveryBit(w){return new O(this.r,this.s,w)}recoverPublicKey(w){const x=s.ORDER,{r:B,s:C,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(c*BD<x&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const N=I===2||I===3?B+c:B;if(!s.isValid(N))throw new Error("recovery id 2 or 3 invalid");const $=s.toBytes(N),L=n.fromBytes(ec(PD((I&1)===0),$)),Y=o.inv(N),q=R(zn("msgHash",w)),Z=o.create(-q*Y),te=o.create(C*Y),re=n.BASE.multiplyUnsafe(Z).add(L.multiplyUnsafe(te));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return A(this.s)}toBytes(w=b){if(FE(w),w==="der")return Bm(yo.hexFromSig(this));const x=o.toBytes(this.r),B=o.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ec(Uint8Array.of(this.recovery),x,B)}return ec(x,B)}toHex(w){return Df(this.toBytes(w))}assertValidity(){}static fromCompact(w){return O.fromBytes(zn("sig",w),"compact")}static fromDER(w){return O.fromBytes(zn("sig",w),"der")}normalizeS(){return this.hasHighS()?new O(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Df(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Df(this.toBytes("compact"))}}const T=t.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const w=Sw(D),x=D.length*8-u;return x>0?w>>BigInt(x):w},R=t.bits2int_modN||function(D){return o.create(T(D))},j=Cg(u);function H(D){return UE("num < 2^"+u,D,To,j),o.toBytes(D)}function V(D,w){return Pl(D,void 0,"message"),w?Pl(e(D),void 0,"prehashed message"):D}function M(D,w,x){if(["recovered","canonical"].some(te=>te in x))throw new Error("sign() legacy options not supported");const{lowS:B,prehash:C,extraEntropy:I}=V2(x,v);D=V(D,C);const N=R(D),$=mf(o,w),L=[H($),H(N)];if(I!=null&&I!==!1){const te=I===!0?r(m.secretKey):I;L.push(zn("extraEntropy",te))}const Y=ec(...L),q=N;function Z(te){const re=T(te);if(!o.isValidNot0(re))return;const le=o.inv(re),se=n.BASE.multiply(re).toAffine(),ue=o.create(se.x);if(ue===To)return;const Ne=o.create(le*o.create(q+ue*$));if(Ne===To)return;let Re=(se.x===ue?0:2)|Number(se.y&$f),ke=Ne;return B&&A(Ne)&&(ke=o.neg(Ne),Re^=1),new O(ue,ke,Re)}return{seed:Y,k2sig:Z}}function G(D,w,x={}){D=zn("message",D);const{seed:B,k2sig:C}=M(D,w,x);return eX(e.outputLen,o.BYTES,i)(B,C)}function Q(D){let w;const x=typeof D=="string"||ww(D),B=!x&&D!==null&&typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!x&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(B)w=new O(D.r,D.s);else if(x){try{w=O.fromBytes(zn("sig",D),"der")}catch(C){if(!(C instanceof yo.Err))throw C}if(!w)try{w=O.fromBytes(zn("sig",D),"compact")}catch{return!1}}return w||!1}function z(D,w,x,B={}){const{lowS:C,prehash:I,format:N}=V2(B,v);if(x=zn("publicKey",x),w=V(zn("message",w),I),"strict"in B)throw new Error("options.strict was renamed to lowS");const $=N===void 0?Q(D):O.fromBytes(zn("sig",D),N);if($===!1)return!1;try{const L=n.fromBytes(x);if(C&&$.hasHighS())return!1;const{r:Y,s:q}=$,Z=R(w),te=o.inv(q),re=o.create(Z*te),le=o.create(Y*te),se=n.BASE.multiplyUnsafe(re).add(L.multiplyUnsafe(le));return se.is0()?!1:o.create(se.x)===Y}catch{return!1}}function P(D,w,x={}){const{prehash:B}=V2(x,v);return w=V(w,B),O.fromBytes(D,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:f,getPublicKey:h,getSharedSecret:g,utils:p,lengths:m,Point:n,sign:G,verify:z,recoverPublicKey:P,Signature:O,hash:e})}function NX(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Lc(e.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),s={Fp:t,Fn:i,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function DX(n){const{CURVE:e,curveOpts:t}=NX(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,hash:n.hash,ecdsaOpts:r}}function $X(n,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},n,ED(t.Fn.ORDER,t.Fn.BITS))})}function TX(n){const{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:i}=DX(n),s=PX(e,t),o=_X(s,r,i);return $X(n,o)}function ME(n,e){const t=r=>TX({...n,hash:r});return{...t(e),create:t}}const _D={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},ND={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},DD={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},kX=Lc(_D.p),RX=Lc(ND.p),UX=Lc(DD.p),LX=ME({..._D,Fp:kX,lowS:!1},Ew);ME({...ND,Fp:RX,lowS:!1},qJ),ME({...DD,Fp:UX,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},VJ);const FX=LX,$D="base10",rr="base16",Er="base64pad",tc="base64url",_g="utf8",TD=0,Fo=1,Ng=2,MX=0,O5=1,Sp=12,Ex=32;function jX(){const n=LE.utils.randomPrivateKey(),e=LE.getPublicKey(n);return{privateKey:Cr(n,rr),publicKey:Cr(e,rr)}}function jE(){const n=mu(Ex);return Cr(n,rr)}function zX(n,e){const t=LE.getSharedSecret(vi(n,rr),vi(e,rr)),r=YY(Aw,t,void 0,void 0,Ex);return Cr(r,rr)}function Gy(n){const e=Aw(vi(n,rr));return Cr(e,rr)}function wi(n){const e=Aw(vi(n,_g));return Cr(e,rr)}function kD(n){return vi(`${n}`,$D)}function uu(n){return Number(Cr(n,$D))}function RD(n){return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function UD(n){const e=n.replace(/-/g,"+").replace(/_/g,"/"),t=(4-e.length%4)%4;return e+"=".repeat(t)}function HX(n){const e=kD(typeof n.type<"u"?n.type:TD);if(uu(e)===Fo&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?vi(n.senderPublicKey,rr):void 0,r=typeof n.iv<"u"?vi(n.iv,rr):mu(Sp),i=vi(n.symKey,rr),s=lD(i,r).encrypt(vi(n.message,_g)),o=LD({type:e,sealed:s,iv:r,senderPublicKey:t});return n.encoding===tc?RD(o):o}function VX(n){const e=vi(n.symKey,rr),{sealed:t,iv:r}=Qp({encoded:n.encoded,encoding:n.encoding}),i=lD(e,r).decrypt(t);if(i===null)throw new Error("Failed to decrypt");return Cr(i,_g)}function qX(n,e){const t=kD(Ng),r=mu(Sp),i=vi(n,_g),s=LD({type:t,sealed:i,iv:r});return e===tc?RD(s):s}function KX(n,e){const{sealed:t}=Qp({encoded:n,encoding:e});return Cr(t,_g)}function LD(n){if(uu(n.type)===Ng)return Cr(Ap([n.type,n.sealed]),Er);if(uu(n.type)===Fo){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Cr(Ap([n.type,n.senderPublicKey,n.iv,n.sealed]),Er)}return Cr(Ap([n.type,n.iv,n.sealed]),Er)}function Qp(n){const e=(n.encoding||Er)===tc?UD(n.encoded):n.encoded,t=vi(e,Er),r=t.slice(MX,O5),i=O5;if(uu(r)===Fo){const u=i+Ex,f=u+Sp,h=t.slice(i,u),g=t.slice(u,f),p=t.slice(f);return{type:r,sealed:p,iv:g,senderPublicKey:h}}if(uu(r)===Ng){const u=t.slice(i),f=mu(Sp);return{type:r,sealed:u,iv:f}}const s=i+Sp,o=t.slice(i,s),c=t.slice(s);return{type:r,sealed:c,iv:o}}function GX(n,e){const t=Qp({encoded:n,encoding:e==null?void 0:e.encoding});return FD({type:uu(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Cr(t.senderPublicKey,rr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function FD(n){const e=(n==null?void 0:n.type)||TD;if(e===Fo){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function B5(n){return n.type===Fo&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}function P5(n){return n.type===Ng}function WX(n){const e=Buffer.from(n.x,"base64"),t=Buffer.from(n.y,"base64");return Ap([new Uint8Array([4]),e,t])}function QX(n,e){const[t,r,i]=n.split("."),s=Buffer.from(UD(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),c=s.slice(32,64),u=`${t}.${r}`,f=Aw(u),h=WX(e);if(!FX.verify(Ap([o,c]),f,h))throw new Error("Invalid signature");return hE(n).payload}const ZX="irn";function Dm(n){return(n==null?void 0:n.relay)||{protocol:ZX}}function wf(n){const e=HV[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var JX=Object.defineProperty,YX=Object.defineProperties,XX=Object.getOwnPropertyDescriptors,C5=Object.getOwnPropertySymbols,eee=Object.prototype.hasOwnProperty,tee=Object.prototype.propertyIsEnumerable,_5=(n,e,t)=>e in n?JX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,q2=(n,e)=>{for(var t in e||(e={}))eee.call(e,t)&&_5(n,t,e[t]);if(C5)for(var t of C5(e))tee.call(e,t)&&_5(n,t,e[t]);return n},nee=(n,e)=>YX(n,XX(e));function ree(n,e="-"){const t={},r="relay"+e;return Object.keys(n).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=n[i];t[s]=o}}),t}function N5(n){if(!n.includes("wc:")){const f=HN(n);f!=null&&f.includes("wc:")&&(n=f)}n=n.includes("wc://")?n.replace("wc://",""):n,n=n.includes("wc:")?n.replace("wc:",""):n;const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,r=n.substring(0,e),i=n.substring(e+1,t).split("@"),s=typeof t<"u"?n.substring(t):"",o=new URLSearchParams(s),c=Object.fromEntries(o.entries()),u=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:r,topic:iee(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:ree(c),methods:u,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function iee(n){return n.startsWith("//")?n.substring(2):n}function see(n,e="-"){const t="relay",r={};return Object.keys(n).forEach(i=>{const s=i,o=t+e+s;n[s]&&(r[o]=n[s])}),r}function D5(n){const e=new URLSearchParams,t=q2(q2(nee(q2({},see(n.relay)),{symKey:n.symKey}),n.expiryTimestamp&&{expiryTimestamp:n.expiryTimestamp.toString()}),n.methods&&{methods:n.methods.join(",")});return Object.entries(t).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!==void 0&&e.append(r,String(i))}),`${n.protocol}:${n.topic}@${n.version}?${e}`}function vy(n,e,t){return`${n}?wc_ev=${t}&topic=${e}`}var oee=Object.defineProperty,aee=Object.defineProperties,cee=Object.getOwnPropertyDescriptors,$5=Object.getOwnPropertySymbols,lee=Object.prototype.hasOwnProperty,uee=Object.prototype.propertyIsEnumerable,T5=(n,e,t)=>e in n?oee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fee=(n,e)=>{for(var t in e||(e={}))lee.call(e,t)&&T5(n,t,e[t]);if($5)for(var t of $5(e))uee.call(e,t)&&T5(n,t,e[t]);return n},hee=(n,e)=>aee(n,cee(e));function qh(n){const e=[];return n.forEach(t=>{const[r,i]=t.split(":");e.push(`${r}:${i}`)}),e}function dee(n){const e=[];return Object.values(n).forEach(t=>{e.push(...qh(t.accounts))}),e}function pee(n,e){const t=[];return Object.values(n).forEach(r=>{qh(r.accounts).includes(e)&&t.push(...r.methods)}),t}function gee(n,e){const t=[];return Object.values(n).forEach(r=>{qh(r.accounts).includes(e)&&t.push(...r.events)}),t}function MD(n){return n.includes(":")}function yee(n){return MD(n)?n.split(":")[0]:n}function k5(n){var e,t,r;const i={};if(!Zp(n))return i;for(const[s,o]of Object.entries(n)){const c=MD(s)?[s]:o.chains,u=o.methods||[],f=o.events||[],h=yee(s);i[h]=hee(fee({},i[h]),{chains:ru(c,(e=i[h])==null?void 0:e.chains),methods:ru(u,(t=i[h])==null?void 0:t.methods),events:ru(f,(r=i[h])==null?void 0:r.events)})}return i}function mee(n){const e={};return n==null||n.forEach(t=>{var r;const[i,s]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(t),(r=e[i].chains)==null||r.push(`${i}:${s}`)}),e}function R5(n,e){e=e.map(r=>r.replace("did:pkh:",""));const t=mee(e);for(const[r,i]of Object.entries(t))i.methods?i.methods=ru(i.methods,n):i.methods=n,i.events=["chainChanged","accountsChanged"];return t}function wee(n,e){var t,r,i,s,o,c;const u=k5(n),f=k5(e),h={},g=Object.keys(u).concat(Object.keys(f));for(const p of g)h[p]={chains:ru((t=u[p])==null?void 0:t.chains,(r=f[p])==null?void 0:r.chains),methods:ru((i=u[p])==null?void 0:i.methods,(s=f[p])==null?void 0:s.methods),events:ru((o=u[p])==null?void 0:o.events,(c=f[p])==null?void 0:c.events)};return h}const bee={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},vee={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function be(n,e){const{message:t,code:r}=vee[n];return{message:e?`${t} ${e}`:t,code:r}}function Bt(n,e){const{message:t,code:r}=bee[n];return{message:e?`${t} ${e}`:t,code:r}}function Lh(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function Zp(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function Gt(n){return typeof n>"u"}function Lt(n,e){return e&&Gt(n)?!0:typeof n=="string"&&!!n.trim().length}function xx(n,e){return e&&Gt(n)?!0:typeof n=="number"&&!isNaN(n)}function Eee(n,e){const{requiredNamespaces:t}=e,r=Object.keys(n.namespaces),i=Object.keys(t);let s=!0;return Bl(i,r)?(r.forEach(o=>{const{accounts:c,methods:u,events:f}=n.namespaces[o],h=qh(c),g=t[o];(!Bl(LN(o,g),h)||!Bl(g.methods,u)||!Bl(g.events,f))&&(s=!1)}),s):!1}function $m(n){return Lt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function xee(n){if(Lt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&$m(t)}}return!1}function Aee(n){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(Lt(n,!1)){if(e(n))return!0;const t=HN(n);return e(t)}}catch{}return!1}function See(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function Iee(n){return n==null?void 0:n.topic}function Oee(n,e){let t=null;return Lt(n==null?void 0:n.publicKey,!1)||(t=be("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function U5(n){let e=!0;return Lh(n)?n.length&&(e=n.every(t=>Lt(t,!1))):e=!1,e}function Bee(n,e,t){let r=null;return Lh(e)&&e.length?e.forEach(i=>{r||$m(i)||(r=Bt("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):$m(n)||(r=Bt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Pee(n,e,t){let r=null;return Object.entries(n).forEach(([i,s])=>{if(r)return;const o=Bee(i,LN(i,s),`${e} ${t}`);o&&(r=o)}),r}function Cee(n,e){let t=null;return Lh(n)?n.forEach(r=>{t||xee(r)||(t=Bt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=Bt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function _ee(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const i=Cee(r==null?void 0:r.accounts,`${e} namespace`);i&&(t=i)}),t}function Nee(n,e){let t=null;return U5(n==null?void 0:n.methods)?U5(n==null?void 0:n.events)||(t=Bt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Bt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function jD(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const i=Nee(r,`${e}, namespace`);i&&(t=i)}),t}function Dee(n,e,t){let r=null;if(n&&Zp(n)){const i=jD(n,e);i&&(r=i);const s=Pee(n,e,t);s&&(r=s)}else r=be("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return r}function K2(n,e){let t=null;if(n&&Zp(n)){const r=jD(n,e);r&&(t=r);const i=_ee(n,e);i&&(t=i)}else t=be("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function zD(n){return Lt(n.protocol,!0)}function $ee(n,e){let t=!1;return n?n&&Lh(n)&&n.length&&n.forEach(r=>{t=zD(r)}):t=!0,t}function Tee(n){return typeof n=="number"}function pr(n){return typeof n<"u"&&typeof n!==null}function kee(n){return!(!n||typeof n!="object"||!n.code||!xx(n.code,!1)||!n.message||!Lt(n.message,!1))}function Ree(n){return!(Gt(n)||!Lt(n.method,!1))}function Uee(n){return!(Gt(n)||Gt(n.result)&&Gt(n.error)||!xx(n.id,!1)||!Lt(n.jsonrpc,!1))}function Lee(n){return!(Gt(n)||!Lt(n.name,!1))}function L5(n,e){return!(!$m(e)||!dee(n).includes(e))}function Fee(n,e,t){return Lt(t,!1)?pee(n,e).includes(t):!1}function Mee(n,e,t){return Lt(t,!1)?gee(n,e).includes(t):!1}function F5(n,e,t){let r=null;const i=jee(n),s=zee(e),o=Object.keys(i),c=Object.keys(s),u=M5(Object.keys(n)),f=M5(Object.keys(e)),h=u.filter(g=>!f.includes(g));return h.length&&(r=be("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(e).toString()}`)),Bl(o,c)||(r=be("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${c.toString()}`)),Object.keys(e).forEach(g=>{if(!g.includes(":")||r)return;const p=qh(e[g].accounts);p.includes(g)||(r=be("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${p.toString()}`))}),o.forEach(g=>{r||(Bl(i[g].methods,s[g].methods)?Bl(i[g].events,s[g].events)||(r=be("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${g}`)):r=be("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${g}`))}),r}function jee(n){const e={};return Object.keys(n).forEach(t=>{var r;t.includes(":")?e[t]=n[t]:(r=n[t].chains)==null||r.forEach(i=>{e[i]={methods:n[t].methods,events:n[t].events}})}),e}function M5(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function zee(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const r=qh(n[t].accounts);r==null||r.forEach(i=>{e[i]={accounts:n[t].accounts.filter(s=>s.includes(`${i}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function Hee(n,e){return xx(n,!1)&&n<=e.max&&n>=e.min}function j5(){const n=Bg();return new Promise(e=>{switch(n){case Qr.browser:e(Vee());break;case Qr.reactNative:e(qee());break;case Qr.node:e(Kee());break;default:e(!0)}})}function Vee(){return Vh()&&(navigator==null?void 0:navigator.onLine)}async function qee(){if(Uc()&&typeof global<"u"&&global!=null&&global.NetInfo){const n=await(global==null?void 0:global.NetInfo.fetch());return n==null?void 0:n.isConnected}return!0}function Kee(){return!0}function Gee(n){switch(Bg()){case Qr.browser:Wee(n);break;case Qr.reactNative:Qee(n);break}}function Wee(n){!Uc()&&Vh()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function Qee(n){Uc()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>n(e==null?void 0:e.isConnected)))}function Zee(){var n;return Vh()&&Ho.getDocument()?((n=Ho.getDocument())==null?void 0:n.visibilityState)==="visible":!0}const G2={};class Yd{static get(e){return G2[e]}static set(e,t){G2[e]=t}static delete(e){delete G2[e]}}function Jee(n){const e=Og.decode(n);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Yee({publicKey:n,signature:e,payload:t}){var r;const i=zE(t.method),s=128|parseInt(((r=t.version)==null?void 0:r.toString())||"4"),o=tte(t.address),c=t.era==="00"?new Uint8Array([0]):zE(t.era);if(c.length!==1&&c.length!==2)throw new Error("Invalid era length");const u=parseInt(t.nonce,16),f=new Uint8Array([u&255,u>>8&255]),h=BigInt(`0x${ete(t.tip)}`),g=rte(h),p=new Uint8Array([0,...n,o,...e,...c,...f,...g,...i]),m=nte(p.length+1);return new Uint8Array([...m,s,...p])}function Xee(n){const e=zE(n),t=GV.blake2b(e,void 0,32);return"0x"+Buffer.from(t).toString("hex")}function zE(n){return new Uint8Array(n.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function ete(n){return n.startsWith("0x")?n.slice(2):n}function tte(n){const e=Og.decode(n)[0];return e===42?0:e===60?2:1}function nte(n){if(n<64)return new Uint8Array([n<<2]);if(n<16384){const e=n<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(n<1<<30){const e=n<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function rte(n){if(n<BigInt(1)<<BigInt(6))return new Uint8Array([Number(n<<BigInt(2))]);if(n<BigInt(1)<<BigInt(14)){const e=n<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(n<BigInt(1)<<BigInt(30)){const e=n<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function ite(n){const e=Uint8Array.from(Buffer.from(n.signature,"hex")),t=Jee(n.transaction.address),r=Yee({publicKey:t,signature:e,payload:n.transaction}),i=Buffer.from(r).toString("hex");return Xee(i)}function HD({logger:n,name:e}){const t=typeof n=="string"?K3({opts:{level:n,name:e}}).logger:n;return t.level=typeof n=="string"?n:n.level,t}const ste="PARSE_ERROR",ote="INVALID_REQUEST",ate="METHOD_NOT_FOUND",cte="INVALID_PARAMS",VD="INTERNAL_ERROR",Ax="SERVER_ERROR",lte=[-32700,-32600,-32601,-32602,-32603],Ip={[ste]:{code:-32700,message:"Parse error"},[ote]:{code:-32600,message:"Invalid Request"},[ate]:{code:-32601,message:"Method not found"},[cte]:{code:-32602,message:"Invalid params"},[VD]:{code:-32603,message:"Internal error"},[Ax]:{code:-32e3,message:"Server error"}},qD=Ax;function ute(n){return lte.includes(n)}function z5(n){return Object.keys(Ip).includes(n)?Ip[n]:Ip[qD]}function fte(n){const e=Object.values(Ip).find(t=>t.code===n);return e||Ip[qD]}function KD(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var W2={},to={},H5;function hte(){if(H5)return to;H5=1,Object.defineProperty(to,"__esModule",{value:!0}),to.isBrowserCryptoAvailable=to.getSubtleCrypto=to.getBrowerCrypto=void 0;function n(){return($s==null?void 0:$s.crypto)||($s==null?void 0:$s.msCrypto)||{}}to.getBrowerCrypto=n;function e(){const r=n();return r.subtle||r.webkitSubtle}to.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return to.isBrowserCryptoAvailable=t,to}var no={},V5;function dte(){if(V5)return no;V5=1,Object.defineProperty(no,"__esModule",{value:!0}),no.isBrowser=no.isNode=no.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}no.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}no.isNode=e;function t(){return!n()&&!e()}return no.isBrowser=t,no}var q5;function pte(){return q5||(q5=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=wg;e.__exportStar(hte(),n),e.__exportStar(dte(),n)})(W2)),W2}var gte=pte();function Es(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function vc(n=6){return BigInt(Es(n))}function Qi(n,e,t){return{id:t||Es(),jsonrpc:"2.0",method:n,params:e}}function Jp(n,e){return{id:n,jsonrpc:"2.0",result:e}}function Ow(n,e,t){return{id:n,jsonrpc:"2.0",error:yte(e)}}function yte(n,e){return typeof n>"u"?z5(VD):(typeof n=="string"&&(n=Object.assign(Object.assign({},z5(Ax)),{message:n})),ute(n.code)&&(n=fte(n.code)),n)}class mte{}class wte extends mte{constructor(){super()}}class bte extends wte{constructor(e){super()}}const vte="^https?:",Ete="^wss?:";function xte(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function GD(n,e){const t=xte(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function K5(n){return GD(n,vte)}function G5(n){return GD(n,Ete)}function Ate(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function WD(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function Sx(n){return WD(n)&&"method"in n}function Bw(n){return WD(n)&&(xs(n)||bi(n))}function xs(n){return"result"in n}function bi(n){return"error"in n}let Ix=class extends bte{constructor(e){super(e),this.events=new Zr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Qi(e.method,e.params||[],e.id||vc().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{bi(s)?i(s.error):r(s.result)});try{await this.connection.send(e,t)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Bw(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Ste=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),Ite=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Ote(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return Ite(n)}catch{return n}}function Bte(n){return typeof n=="string"?n:Ste(n)||""}const Pte=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Cte=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",W5=n=>n.split("?")[0],Q5=10,_te=Pte();let Nte=class{constructor(e){if(this.url=e,this.events=new Zr.EventEmitter,this.registering=!1,!G5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Bte(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!G5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const i=gte.isReactNative()?void 0:{rejectUnauthorized:!Ate(e)},s=new _te(e,[],i);Cte()?s.onerror=o=>{const c=o;r(this.emitError(c.error))}:s.on("error",o=>{r(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),t(s)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ote(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=r.message||r.toString(),s=Ow(e,i);this.events.emit("payload",s)}parseError(e,t=this.url){return KD(e,W5(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Q5&&this.events.setMaxListeners(Q5)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${W5(this.url)}`));return this.events.emit("register_error",t),t}};var Dte={};const QD="wc",ZD=2,HE="core",Fs=`${QD}@2:${HE}:`,$te={logger:"error"},Tte={database:":memory:"},kte="crypto",Z5="client_ed25519_seed",Rte=we.ONE_DAY,Ute="keychain",Lte="0.3",Fte="messages",Mte="0.3",jte=we.SIX_HOURS,zte="publisher",JD="irn",Hte="error",YD="wss://relay.walletconnect.org",Vte="relayer",Dt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},qte="_subscription",oi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Kte=.1,VE="2.22.3",bt={link_mode:"link_mode",relay:"relay"},Wy={inbound:"inbound",outbound:"outbound"},Gte="0.3",Wte="WALLETCONNECT_CLIENT_ID",J5="WALLETCONNECT_LINK_MODE_APPS",Fr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Qte="subscription",Zte="0.3",Jte="pairing",Yte="0.3",Xd={wc_pairingDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:we.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:we.ONE_DAY,prompt:!1,tag:0},res:{ttl:we.ONE_DAY,prompt:!1,tag:0}}},pl={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ni={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Xte="history",ene="0.3",tne="expirer",li={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},nne="0.3",rne="verify-api",ine="https://verify.walletconnect.com",XD="https://verify.walletconnect.org",Op=XD,sne=`${Op}/v3`,one=[ine,XD],ane="echo",cne="https://echo.walletconnect.com",vs={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ao={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Di={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},il={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},sl={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},ep={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},lne=.1,une="event-client",fne=86400,hne="https://pulse.walletconnect.org/batch";function dne(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var c=n.length,u=n.charAt(0),f=Math.log(c)/Math.log(256),h=Math.log(256)/Math.log(c);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var b=0,A=0,_=0,U=v.length;_!==U&&v[_]===0;)_++,b++;for(var O=(U-_)*h+1>>>0,T=new Uint8Array(O);_!==U;){for(var R=v[_],j=0,H=O-1;(R!==0||j<A)&&H!==-1;H--,j++)R+=256*T[H]>>>0,T[H]=R%c>>>0,R=R/c>>>0;if(R!==0)throw new Error("Non-zero carry");A=j,_++}for(var V=O-A;V!==O&&T[V]===0;)V++;for(var M=u.repeat(b);V<O;++V)M+=n.charAt(T[V]);return M}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var b=0;if(v[b]!==" "){for(var A=0,_=0;v[b]===u;)A++,b++;for(var U=(v.length-b)*f+1>>>0,O=new Uint8Array(U);v[b];){var T=t[v.charCodeAt(b)];if(T===255)return;for(var R=0,j=U-1;(T!==0||R<_)&&j!==-1;j--,R++)T+=c*O[j]>>>0,O[j]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=R,b++}if(v[b]!==" "){for(var H=U-_;H!==U&&O[H]===0;)H++;for(var V=new Uint8Array(A+(U-H)),M=A;H!==U;)V[M++]=O[H++];return V}}}function m(v){var b=p(v);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:p,decode:m}}var pne=dne,gne=pne;const e$=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},yne=n=>new TextEncoder().encode(n),mne=n=>new TextDecoder().decode(n);class wne{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class bne{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return t$(this,e)}}class vne{constructor(e){this.decoders=e}or(e){return t$(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const t$=(n,e)=>new vne({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Ene{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new wne(e,t,r),this.decoder=new bne(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Pw=({name:n,prefix:e,encode:t,decode:r})=>new Ene(n,e,t,r),Dg=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=gne(t,e);return Pw({prefix:n,name:e,encode:r,decode:s=>e$(i(s))})},xne=(n,e,t,r)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=n.length;for(;n[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let c=0,u=0,f=0;for(let h=0;h<s;++h){const g=i[n[h]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<t|g,c+=t,c>=8&&(c-=8,o[f++]=255&u>>c)}if(c>=t||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return o},Ane=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let s="",o=0,c=0;for(let u=0;u<n.length;++u)for(c=c<<8|n[u],o+=8;o>t;)o-=t,s+=e[i&c>>o];if(o&&(s+=e[i&c<<t-o]),r)for(;s.length*t&7;)s+="=";return s},xn=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>Pw({prefix:e,name:n,encode(i){return Ane(i,r,t)},decode(i){return xne(i,r,t,n)}}),Sne=Pw({prefix:"\0",name:"identity",encode:n=>mne(n),decode:n=>yne(n)});var Ine=Object.freeze({__proto__:null,identity:Sne});const One=xn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Bne=Object.freeze({__proto__:null,base2:One});const Pne=xn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Cne=Object.freeze({__proto__:null,base8:Pne});const _ne=Dg({prefix:"9",name:"base10",alphabet:"0123456789"});var Nne=Object.freeze({__proto__:null,base10:_ne});const Dne=xn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$ne=xn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Tne=Object.freeze({__proto__:null,base16:Dne,base16upper:$ne});const kne=xn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Rne=xn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Une=xn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Lne=xn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Fne=xn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Mne=xn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jne=xn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zne=xn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hne=xn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Vne=Object.freeze({__proto__:null,base32:kne,base32upper:Rne,base32pad:Une,base32padupper:Lne,base32hex:Fne,base32hexupper:Mne,base32hexpad:jne,base32hexpadupper:zne,base32z:Hne});const qne=Dg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Kne=Dg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Gne=Object.freeze({__proto__:null,base36:qne,base36upper:Kne});const Wne=Dg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Qne=Dg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Zne=Object.freeze({__proto__:null,base58btc:Wne,base58flickr:Qne});const Jne=xn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Yne=xn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Xne=xn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ere=xn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var tre=Object.freeze({__proto__:null,base64:Jne,base64pad:Yne,base64url:Xne,base64urlpad:ere});const n$=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),nre=n$.reduce((n,e,t)=>(n[t]=e,n),[]),rre=n$.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function ire(n){return n.reduce((e,t)=>(e+=nre[t],e),"")}function sre(n){const e=[];for(const t of n){const r=rre[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const ore=Pw({prefix:"🚀",name:"base256emoji",encode:ire,decode:sre});var are=Object.freeze({__proto__:null,base256emoji:ore}),cre=r$,Y5=128,lre=-128,ure=Math.pow(2,31);function r$(n,e,t){e=e||[],t=t||0;for(var r=t;n>=ure;)e[t++]=n&255|Y5,n/=128;for(;n&lre;)e[t++]=n&255|Y5,n>>>=7;return e[t]=n|0,r$.bytes=t-r+1,e}var fre=qE,hre=128,X5=127;function qE(n,r){var t=0,r=r||0,i=0,s=r,o,c=n.length;do{if(s>=c)throw qE.bytes=0,new RangeError("Could not decode varint");o=n[s++],t+=i<28?(o&X5)<<i:(o&X5)*Math.pow(2,i),i+=7}while(o>=hre);return qE.bytes=s-r,t}var dre=Math.pow(2,7),pre=Math.pow(2,14),gre=Math.pow(2,21),yre=Math.pow(2,28),mre=Math.pow(2,35),wre=Math.pow(2,42),bre=Math.pow(2,49),vre=Math.pow(2,56),Ere=Math.pow(2,63),xre=function(n){return n<dre?1:n<pre?2:n<gre?3:n<yre?4:n<mre?5:n<wre?6:n<bre?7:n<vre?8:n<Ere?9:10},Are={encode:cre,decode:fre,encodingLength:xre},i$=Are;const eO=(n,e,t=0)=>(i$.encode(n,e,t),e),tO=n=>i$.encodingLength(n),KE=(n,e)=>{const t=e.byteLength,r=tO(n),i=r+tO(t),s=new Uint8Array(i+t);return eO(n,s,0),eO(t,s,r),s.set(e,i),new Sre(n,t,e,s)};let Sre=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};const s$=({name:n,code:e,encode:t})=>new Ire(n,e,t);class Ire{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?KE(this.code,t):t.then(r=>KE(this.code,r))}else throw Error("Unknown type, must be binary type")}}const o$=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),Ore=s$({name:"sha2-256",code:18,encode:o$("SHA-256")}),Bre=s$({name:"sha2-512",code:19,encode:o$("SHA-512")});var Pre=Object.freeze({__proto__:null,sha256:Ore,sha512:Bre});const a$=0,Cre="identity",c$=e$,_re=n=>KE(a$,c$(n)),Nre={code:a$,name:Cre,encode:c$,digest:_re};var Dre=Object.freeze({__proto__:null,identity:Nre});new TextEncoder,new TextDecoder;const nO={...Ine,...Bne,...Cne,...Nne,...Tne,...Vne,...Gne,...Zne,...tre,...are};({...Pre,...Dre});function l$(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function $re(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?l$(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function u$(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const rO=u$("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Q2=u$("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=$re(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),Tre={utf8:rO,"utf-8":rO,hex:nO.base16,latin1:Q2,ascii:Q2,binary:Q2,...nO};function kre(n,e="utf8"){const t=Tre[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?l$(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}var Rre=Object.defineProperty,Ure=(n,e,t)=>e in n?Rre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ms=(n,e,t)=>Ure(n,typeof e!="symbol"?e+"":e,t);class Lre{constructor(e,t){this.core=e,this.logger=t,ms(this,"keychain",new Map),ms(this,"name",Ute),ms(this,"version",Lte),ms(this,"initialized",!1),ms(this,"storagePrefix",Fs),ms(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ms(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ms(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),ms(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=be("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),ms(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Jr(t,this.name)}get context(){return Nr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,CE(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?_E(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Fre=Object.defineProperty,Mre=(n,e,t)=>e in n?Fre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Xt=(n,e,t)=>Mre(n,typeof e!="symbol"?e+"":e,t);class jre{constructor(e,t,r){this.core=e,this.logger=t,Xt(this,"name",kte),Xt(this,"keychain"),Xt(this,"randomSessionIdentifier",jE()),Xt(this,"initialized",!1),Xt(this,"clientId"),Xt(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Xt(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Xt(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const i=await this.getClientSeed(),s=kI(i),o=s_(s.publicKey);return this.clientId=o,o}),Xt(this,"generateKeyPair",()=>{this.isInitialized();const i=jX();return this.setPrivateKey(i.publicKey,i.privateKey)}),Xt(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=kI(s),c=this.randomSessionIdentifier;return await KH(c,i,Rte,o)}),Xt(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const c=this.getPrivateKey(i),u=zX(c,s);return this.setSymKey(u,o)}),Xt(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||Gy(i);return await this.keychain.set(o,i),o}),Xt(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Xt(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Xt(this,"encode",async(i,s,o)=>{this.isInitialized();const c=FD(o),u=nx(s);if(P5(c))return qX(u,o==null?void 0:o.encoding);if(B5(c)){const p=c.senderPublicKey,m=c.receiverPublicKey;i=await this.generateSharedKey(p,m)}const f=this.getSymKey(i),{type:h,senderPublicKey:g}=c;return HX({type:h,symKey:f,message:u,senderPublicKey:g,encoding:o==null?void 0:o.encoding})}),Xt(this,"decode",async(i,s,o)=>{this.isInitialized();const c=GX(s,o);if(P5(c)){const u=KX(s,o==null?void 0:o.encoding);return xm(u)}if(B5(c)){const u=c.receiverPublicKey,f=c.senderPublicKey;i=await this.generateSharedKey(u,f)}try{const u=this.getSymKey(i),f=VX({symKey:u,encoded:s,encoding:o==null?void 0:o.encoding});return xm(f)}catch(u){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}}),Xt(this,"getPayloadType",(i,s=Er)=>{const o=Qp({encoded:i,encoding:s});return uu(o.type)}),Xt(this,"getPayloadSenderPublicKey",(i,s=Er)=>{const o=Qp({encoded:i,encoding:s});return o.senderPublicKey?Cr(o.senderPublicKey,rr):void 0}),this.core=e,this.logger=Jr(t,this.name),this.keychain=r||new Lre(this.core,this.logger)}get context(){return Nr(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Z5)}catch{e=jE(),await this.keychain.set(Z5,e)}return kre(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var zre=Object.defineProperty,Hre=Object.defineProperties,Vre=Object.getOwnPropertyDescriptors,iO=Object.getOwnPropertySymbols,qre=Object.prototype.hasOwnProperty,Kre=Object.prototype.propertyIsEnumerable,GE=(n,e,t)=>e in n?zre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Gre=(n,e)=>{for(var t in e||(e={}))qre.call(e,t)&&GE(n,t,e[t]);if(iO)for(var t of iO(e))Kre.call(e,t)&&GE(n,t,e[t]);return n},Wre=(n,e)=>Hre(n,Vre(e)),Rr=(n,e,t)=>GE(n,typeof e!="symbol"?e+"":e,t);class Qre extends cW{constructor(e,t){super(e,t),this.logger=e,this.core=t,Rr(this,"messages",new Map),Rr(this,"messagesWithoutClientAck",new Map),Rr(this,"name",Fte),Rr(this,"version",Mte),Rr(this,"initialized",!1),Rr(this,"storagePrefix",Fs),Rr(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Rr(this,"set",async(r,i,s)=>{this.isInitialized();const o=wi(i);let c=this.messages.get(r);if(typeof c>"u"&&(c={}),typeof c[o]<"u")return o;if(c[o]=i,this.messages.set(r,c),s===Wy.inbound){const u=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Wre(Gre({},u),{[o]:i}))}return await this.persist(),o}),Rr(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),Rr(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),Rr(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=wi(i);return typeof s[o]<"u"}),Rr(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=wi(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),Rr(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Jr(e,this.name),this.core=t}get context(){return Nr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,CE(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,CE(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?_E(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?_E(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Zre=Object.defineProperty,Jre=Object.defineProperties,Yre=Object.getOwnPropertyDescriptors,sO=Object.getOwnPropertySymbols,Xre=Object.prototype.hasOwnProperty,eie=Object.prototype.propertyIsEnumerable,WE=(n,e,t)=>e in n?Zre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,nf=(n,e)=>{for(var t in e||(e={}))Xre.call(e,t)&&WE(n,t,e[t]);if(sO)for(var t of sO(e))eie.call(e,t)&&WE(n,t,e[t]);return n},oO=(n,e)=>Jre(n,Yre(e)),ai=(n,e,t)=>WE(n,typeof e!="symbol"?e+"":e,t);class tie extends lW{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,ai(this,"events",new Zr.EventEmitter),ai(this,"name",zte),ai(this,"queue",new Map),ai(this,"publishTimeout",we.toMiliseconds(we.ONE_MINUTE)),ai(this,"initialPublishTimeout",we.toMiliseconds(we.ONE_SECOND*15)),ai(this,"needsTransportRestart",!1),ai(this,"publish",async(r,i,s)=>{var o,c,u,f,h;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const g=(s==null?void 0:s.ttl)||jte,p=(s==null?void 0:s.prompt)||!1,m=(s==null?void 0:s.tag)||0,v=(s==null?void 0:s.id)||vc().toString(),b=wf(Dm().protocol),A={id:v,method:(s==null?void 0:s.publishMethod)||b.publish,params:nf({topic:r,message:i,ttl:g,prompt:p,tag:m,attestation:s==null?void 0:s.attestation},s==null?void 0:s.tvf)},_=`Failed to publish payload, please try again. id:${v} tag:${m}`;try{Gt((o=A.params)==null?void 0:o.prompt)&&((c=A.params)==null||delete c.prompt),Gt((u=A.params)==null?void 0:u.tag)&&((f=A.params)==null||delete f.tag);const U=new Promise(async O=>{const T=({id:j})=>{var H;((H=A.id)==null?void 0:H.toString())===j.toString()&&(this.removeRequestFromQueue(j),this.relayer.events.removeListener(Dt.publish,T),O())};this.relayer.events.on(Dt.publish,T);const R=Us(new Promise((j,H)=>{this.rpcPublish(A,s).then(j).catch(V=>{this.logger.warn(V,V==null?void 0:V.message),H(V)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${v} tag:${m}`);try{await R,this.events.removeListener(Dt.publish,T)}catch(j){this.queue.set(v,{request:A,opts:s,attempt:1}),this.logger.warn(j,j==null?void 0:j.message)}});this.logger.trace({type:"method",method:"publish",params:{id:v,topic:r,message:i,opts:s}}),await Us(U,this.publishTimeout,_)}catch(U){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(U),(h=s==null?void 0:s.internal)!=null&&h.throwOnFailedPublish)throw U}finally{this.queue.delete(v)}}),ai(this,"publishCustom",async r=>{var i,s,o,c,u;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:f,opts:h={}}=r,{attestation:g,tvf:p,publishMethod:m,prompt:v,tag:b,ttl:A=we.FIVE_MINUTES}=h,_=h.id||vc().toString(),U=wf(Dm().protocol),O=m||U.publish,T={id:_,method:O,params:nf(oO(nf({},f),{ttl:A,prompt:v,tag:b,attestation:g}),p)},R=`Failed to publish custom payload, please try again. id:${_} tag:${b}`;try{Gt((i=T.params)==null?void 0:i.prompt)&&((s=T.params)==null||delete s.prompt),Gt((o=T.params)==null?void 0:o.tag)&&((c=T.params)==null||delete c.tag);const j=new Promise(async H=>{const V=({id:G})=>{var Q;((Q=T.id)==null?void 0:Q.toString())===G.toString()&&(this.removeRequestFromQueue(G),this.relayer.events.removeListener(Dt.publish,V),H())};this.relayer.events.on(Dt.publish,V);const M=Us(new Promise((G,Q)=>{this.rpcPublish(T,h).then(G).catch(z=>{this.logger.warn(z,z==null?void 0:z.message),Q(z)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${O} id:${_} tag:${b}`);try{await M,this.events.removeListener(Dt.publish,V)}catch(G){this.queue.set(_,{request:T,opts:h,attempt:1}),this.logger.warn(G,G==null?void 0:G.message)}});this.logger.trace({type:"method",method:"publish",params:{id:_,payload:f,opts:h}}),await Us(j,this.publishTimeout,R)}catch(j){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(j),(u=h==null?void 0:h.internal)!=null&&u.throwOnFailedPublish)throw j}finally{this.queue.delete(_)}}),ai(this,"on",(r,i)=>{this.events.on(r,i)}),ai(this,"once",(r,i)=>{this.events.once(r,i)}),ai(this,"off",(r,i)=>{this.events.off(r,i)}),ai(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=e,this.logger=Jr(t,this.name),this.registerEventListeners()}get context(){return Nr(this.logger)}async rpcPublish(e,t){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(Dt.publish,nf(nf({},e),t)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{var r;const i=e.attempt+1;this.queue.set(t,oO(nf({},e),{attempt:i})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${i}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(gu.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Dt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Dt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var nie=Object.defineProperty,rie=(n,e,t)=>e in n?nie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,rf=(n,e,t)=>rie(n,typeof e!="symbol"?e+"":e,t);class iie{constructor(){rf(this,"map",new Map),rf(this,"set",(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),rf(this,"get",e=>this.map.get(e)||[]),rf(this,"exists",(e,t)=>this.get(e).includes(t)),rf(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const i=r.filter(s=>s!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),rf(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var sie=Object.defineProperty,oie=Object.defineProperties,aie=Object.getOwnPropertyDescriptors,aO=Object.getOwnPropertySymbols,cie=Object.prototype.hasOwnProperty,lie=Object.prototype.propertyIsEnumerable,QE=(n,e,t)=>e in n?sie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tp=(n,e)=>{for(var t in e||(e={}))cie.call(e,t)&&QE(n,t,e[t]);if(aO)for(var t of aO(e))lie.call(e,t)&&QE(n,t,e[t]);return n},Z2=(n,e)=>oie(n,aie(e)),ht=(n,e,t)=>QE(n,typeof e!="symbol"?e+"":e,t);class uie extends hW{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,ht(this,"subscriptions",new Map),ht(this,"topicMap",new iie),ht(this,"events",new Zr.EventEmitter),ht(this,"name",Qte),ht(this,"version",Zte),ht(this,"pending",new Map),ht(this,"cached",[]),ht(this,"initialized",!1),ht(this,"storagePrefix",Fs),ht(this,"subscribeTimeout",we.toMiliseconds(we.ONE_MINUTE)),ht(this,"initialSubscribeTimeout",we.toMiliseconds(we.ONE_SECOND*15)),ht(this,"clientId"),ht(this,"batchSubscribeTopicsLimit",500),ht(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ht(this,"subscribe",async(r,i)=>{var s;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const o=Dm(i),c={topic:r,relay:o,transportType:i==null?void 0:i.transportType};(s=i==null?void 0:i.internal)!=null&&s.skipSubscribe||this.pending.set(r,c);const u=await this.rpcSubscribe(r,o,i);return typeof u=="string"&&(this.onSubscribe(u,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),u}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),ht(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),ht(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),ht(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),ht(this,"on",(r,i)=>{this.events.on(r,i)}),ht(this,"once",(r,i)=>{this.events.once(r,i)}),ht(this,"off",(r,i)=>{this.events.off(r,i)}),ht(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),ht(this,"start",async()=>{await this.onConnect()}),ht(this,"stop",async()=>{await this.onDisconnect()}),ht(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ht(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),ht(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(gu.pulse,async()=>{await this.checkPending()}),this.events.on(Fr.created,async r=>{const i=Fr.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(Fr.deleted,async r=>{const i=Fr.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=e,this.logger=Jr(t,this.name),this.clientId=""}get context(){return Nr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const i=Dm(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);const s=Bt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,t,r){var i,s;const o=await this.getSubscriptionId(e);if((i=r==null?void 0:r.internal)!=null&&i.skipSubscribe)return o;(!r||(r==null?void 0:r.transportType)===bt.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const c={method:wf(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});const u=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{if((r==null?void 0:r.transportType)===bt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(c).catch(g=>this.logger.warn(g))},we.toMiliseconds(we.ONE_SECOND)),o;const f=new Promise(async g=>{const p=m=>{m.topic===e&&(this.events.removeListener(Fr.created,p),g(m.id))};this.events.on(Fr.created,p);try{const m=await Us(new Promise((v,b)=>{this.relayer.request(c).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),b(A)}).then(v)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Fr.created,p),g(m)}catch{}}),h=await Us(f,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!h&&u)throw new Error(`Subscribing to ${e} failed, please try again`);return h?o:null}catch(f){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Dt.connection_stalled),u)throw f}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,r={method:wf(t.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Us(new Promise(i=>{this.relayer.request(r).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Dt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,r={method:wf(t.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await Us(new Promise((s,o)=>{this.relayer.request(r).catch(c=>{this.logger.warn(c),o(c)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Dt.connection_stalled)}return i}rpcUnsubscribe(e,t,r){const i={method:wf(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,Z2(tp({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,tp({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,tp({},t)),this.topicMap.set(t.topic,e),this.events.emit(Fr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Fr.deleted,Z2(tp({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Fr.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Fr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(t=>{var r;return t.topic===((r=this.subscriptions.get(t.id))==null?void 0:r.topic)})){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>Z2(tp({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await lJ(we.toMiliseconds(we.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return wi(e+await this.getClientId())}}var fie=Object.defineProperty,cO=Object.getOwnPropertySymbols,hie=Object.prototype.hasOwnProperty,die=Object.prototype.propertyIsEnumerable,ZE=(n,e,t)=>e in n?fie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lO=(n,e)=>{for(var t in e||(e={}))hie.call(e,t)&&ZE(n,t,e[t]);if(cO)for(var t of cO(e))die.call(e,t)&&ZE(n,t,e[t]);return n},et=(n,e,t)=>ZE(n,typeof e!="symbol"?e+"":e,t);class pie extends uW{constructor(e){var t;super(e),et(this,"protocol","wc"),et(this,"version",2),et(this,"core"),et(this,"logger"),et(this,"events",new Zr.EventEmitter),et(this,"provider"),et(this,"messages"),et(this,"subscriber"),et(this,"publisher"),et(this,"name",Vte),et(this,"transportExplicitlyClosed",!1),et(this,"initialized",!1),et(this,"connectionAttemptInProgress",!1),et(this,"relayUrl"),et(this,"projectId"),et(this,"packageName"),et(this,"bundleId"),et(this,"hasExperiencedNetworkDisruption",!1),et(this,"pingTimeout"),et(this,"heartBeatTimeout",we.toMiliseconds(we.THIRTY_SECONDS+we.FIVE_SECONDS)),et(this,"reconnectTimeout"),et(this,"connectPromise"),et(this,"reconnectInProgress",!1),et(this,"requestsInFlight",[]),et(this,"connectTimeout",we.toMiliseconds(we.ONE_SECOND*15)),et(this,"request",async r=>{var i,s;this.logger.debug("Publishing Request Payload");const o=r.id||vc().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - publishing...");const c=`${o}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(c);const u=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(f=>f!==c),u}catch(c){throw this.logger.debug(`Failed to Publish Request: ${o}`),c}}),et(this,"resetPingTimeout",()=>{Om()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,i,s,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null?void 0:s.terminate)==null||o.call(s)}catch(c){this.logger.warn(c,c==null?void 0:c.message)}},this.heartBeatTimeout))}),et(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),et(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Dt.connect)}),et(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),et(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Dt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),et(this,"registerProviderListeners",()=>{this.provider.on(oi.payload,this.onPayloadHandler),this.provider.on(oi.connect,this.onConnectHandler),this.provider.on(oi.disconnect,this.onDisconnectHandler),this.provider.on(oi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=HD({logger:(t=e.logger)!=null?t:Hte,name:this.name}),this.messages=new Qre(this.logger,e.core),this.subscriber=new uie(this,this.logger),this.publisher=new tie(this,this.logger),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||YD,GZ()?this.packageName=Q6():WZ()&&(this.bundleId=Q6()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return Nr(this.logger)}get connected(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:bt.relay},Wy.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,t){var r,i,s;this.isInitialized(),(!(t!=null&&t.transportType)||(t==null?void 0:t.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=t==null?void 0:t.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=t==null?void 0:t.internal)==null?void 0:i.throwOnFailedPublish;let c=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",u;const f=h=>{h.topic===e&&(this.subscriber.off(Fr.created,f),u())};return await Promise.all([new Promise(h=>{u=h,this.subscriber.on(Fr.created,f)}),new Promise(async(h,g)=>{c=await this.subscriber.subscribe(e,lO({internal:{throwOnFailedPublish:o}},t)).catch(p=>{o&&g(p)})||c,h()})]),c}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Us(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await j5())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const r of t)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const i=qt(we.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(Dt.message,e),await this.recordMessageEvent(e,Wy.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(oi.disconnect,s),await Us(new Promise((o,c)=>{this.provider.connect().then(o).catch(c)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(oi.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,c)=>{const u=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(oi.disconnect,u),await this.subscriber.start().then(o).catch(c).finally(()=>{this.provider.off(oi.disconnect,u)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(r=>setTimeout(r,we.toMiliseconds(t*1))),t++}}startPingTimeout(){var e,t,r,i,s;if(Om())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ix(new Nte(XZ({sdkVersion:VE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:i}=e;await this.messages.set(r,i,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Sx(e)){if(!e.method.endsWith(qte))return;const t=e.params,{topic:r,message:i,publishedAt:s,attestation:o}=t.data,c={topic:r,message:i,publishedAt:s,transportType:bt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(lO({type:"event",event:t.id},c)),this.events.emit(t.id,c),await this.acknowledgePayload(e),await this.onMessageEvent(c)}else Bw(e)&&this.events.emit(Dt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Wy.inbound),this.events.emit(Dt.message,e))}async acknowledgePayload(e){const t=Jp(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(oi.payload,this.onPayloadHandler),this.provider.off(oi.connect,this.onConnectHandler),this.provider.off(oi.disconnect,this.onDisconnectHandler),this.provider.off(oi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await j5();Gee(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(gu.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Zee())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(t){this.logger.warn(t,t==null?void 0:t.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Dt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},we.toMiliseconds(Kte)))))}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function gie(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)}function uO(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function fO(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const yie="[object RegExp]",mie="[object String]",wie="[object Number]",bie="[object Boolean]",hO="[object Arguments]",vie="[object Symbol]",Eie="[object Date]",xie="[object Map]",Aie="[object Set]",Sie="[object Array]",Iie="[object Function]",Oie="[object ArrayBuffer]",J2="[object Object]",Bie="[object Error]",Pie="[object DataView]",Cie="[object Uint8Array]",_ie="[object Uint8ClampedArray]",Nie="[object Uint16Array]",Die="[object Uint32Array]",$ie="[object BigUint64Array]",Tie="[object Int8Array]",kie="[object Int16Array]",Rie="[object Int32Array]",Uie="[object BigInt64Array]",Lie="[object Float32Array]",Fie="[object Float64Array]";function Mie(){}function dO(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(n)==="[object Object]":!1}function jie(n,e,t){return mp(n,e,void 0,void 0,void 0,void 0,t)}function mp(n,e,t,r,i,s,o){const c=o(n,e,t,r,i,s);if(c!==void 0)return c;if(typeof n==typeof e)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return n===e;case"number":return n===e||Object.is(n,e);case"function":return n===e;case"object":return Bp(n,e,s,o)}return Bp(n,e,s,o)}function Bp(n,e,t,r){if(Object.is(n,e))return!0;let i=fO(n),s=fO(e);if(i===hO&&(i=J2),s===hO&&(s=J2),i!==s)return!1;switch(i){case mie:return n.toString()===e.toString();case wie:{const u=n.valueOf(),f=e.valueOf();return gie(u,f)}case bie:case Eie:case vie:return Object.is(n.valueOf(),e.valueOf());case yie:return n.source===e.source&&n.flags===e.flags;case Iie:return n===e}t=t??new Map;const o=t.get(n),c=t.get(e);if(o!=null&&c!=null)return o===e;t.set(n,e),t.set(e,n);try{switch(i){case xie:{if(n.size!==e.size)return!1;for(const[u,f]of n.entries())if(!e.has(u)||!mp(f,e.get(u),u,n,e,t,r))return!1;return!0}case Aie:{if(n.size!==e.size)return!1;const u=Array.from(n.values()),f=Array.from(e.values());for(let h=0;h<u.length;h++){const g=u[h],p=f.findIndex(m=>mp(g,m,void 0,n,e,t,r));if(p===-1)return!1;f.splice(p,1)}return!0}case Sie:case Cie:case _ie:case Nie:case Die:case $ie:case Tie:case kie:case Rie:case Uie:case Lie:case Fie:{if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(e)||n.length!==e.length)return!1;for(let u=0;u<n.length;u++)if(!mp(n[u],e[u],u,n,e,t,r))return!1;return!0}case Oie:return n.byteLength!==e.byteLength?!1:Bp(new Uint8Array(n),new Uint8Array(e),t,r);case Pie:return n.byteLength!==e.byteLength||n.byteOffset!==e.byteOffset?!1:Bp(new Uint8Array(n),new Uint8Array(e),t,r);case Bie:return n.name===e.name&&n.message===e.message;case J2:{if(!(Bp(n.constructor,e.constructor,t,r)||dO(n)&&dO(e)))return!1;const u=[...Object.keys(n),...uO(n)],f=[...Object.keys(e),...uO(e)];if(u.length!==f.length)return!1;for(let h=0;h<u.length;h++){const g=u[h],p=n[g];if(!Object.hasOwn(e,g))return!1;const m=e[g];if(!mp(p,m,g,n,e,t,r))return!1}return!0}default:return!1}}finally{t.delete(n),t.delete(e)}}function zie(n,e){return jie(n,e,Mie)}var Hie=Object.defineProperty,pO=Object.getOwnPropertySymbols,Vie=Object.prototype.hasOwnProperty,qie=Object.prototype.propertyIsEnumerable,JE=(n,e,t)=>e in n?Hie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gO=(n,e)=>{for(var t in e||(e={}))Vie.call(e,t)&&JE(n,t,e[t]);if(pO)for(var t of pO(e))qie.call(e,t)&&JE(n,t,e[t]);return n},hr=(n,e,t)=>JE(n,typeof e!="symbol"?e+"":e,t);class wu extends fW{constructor(e,t,r,i=Fs,s=void 0){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,hr(this,"map",new Map),hr(this,"version",Gte),hr(this,"cached",[]),hr(this,"initialized",!1),hr(this,"getKey"),hr(this,"storagePrefix",Fs),hr(this,"recentlyDeleted",[]),hr(this,"recentlyDeletedLimit",200),hr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Gt(o)?this.map.set(this.getKey(o),o):See(o)?this.map.set(o.id,o):Iee(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),hr(this,"set",async(o,c)=>{this.isInitialized(),this.map.has(o)?await this.update(o,c):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:c}),this.map.set(o,c),await this.persist())}),hr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),hr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(c=>Object.keys(o).every(u=>zie(c[u],o[u]))):this.values)),hr(this,"update",async(o,c)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:c});const u=gO(gO({},this.getData(o)),c);this.map.set(o,u),await this.persist()}),hr(this,"delete",async(o,c)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:c}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Jr(t,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Nr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:i}=be("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Kie=Object.defineProperty,Gie=(n,e,t)=>e in n?Kie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qe=(n,e,t)=>Gie(n,typeof e!="symbol"?e+"":e,t);let Wie=class{constructor(e,t){this.core=e,this.logger=t,qe(this,"name",Jte),qe(this,"version",Yte),qe(this,"events",new T3),qe(this,"pairings"),qe(this,"initialized",!1),qe(this,"storagePrefix",Fs),qe(this,"ignoredPayloadTypes",[Fo]),qe(this,"registeredMethods",[]),qe(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),qe(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),qe(this,"create",async r=>{this.isInitialized();const i=jE(),s=await this.core.crypto.setSymKey(i),o=qt(we.FIVE_MINUTES),c={protocol:JD},u={topic:s,expiry:o,relay:c,active:!1,methods:r==null?void 0:r.methods},f=D5({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:c,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(pl.create,u),this.core.expirer.set(s,o),await this.pairings.set(s,u),await this.core.relayer.subscribe(s,{transportType:r==null?void 0:r.transportType,internal:r==null?void 0:r.internal}),{topic:s,uri:f}}),qe(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[vs.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:c,expiryTimestamp:u,methods:f}=N5(r.uri);i.props.properties.topic=s,i.addTrace(vs.pairing_uri_validation_success),i.addTrace(vs.pairing_uri_not_expired);let h;if(this.pairings.keys.includes(s)){if(h=this.pairings.get(s),i.addTrace(vs.existing_pairing),h.active)throw i.setError(ao.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(vs.pairing_not_expired)}const g=u||qt(we.FIVE_MINUTES),p={topic:s,relay:c,expiry:g,active:!1,methods:f};this.core.expirer.set(s,g),await this.pairings.set(s,p),i.addTrace(vs.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(pl.create,p),i.addTrace(vs.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(vs.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(ao.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:c})}catch(m){throw i.setError(ao.subscribe_pairing_topic_failure),m}return i.addTrace(vs.subscribe_pairing_topic_success),p}),qe(this,"activate",async({topic:r})=>{this.isInitialized();const i=qt(we.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),qe(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:c,reject:u}=ll();this.events.once(rt("pairing_ping",s),({error:f})=>{f?u(f):c()}),await o()}}),qe(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),qe(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),qe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),qe(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Bt("USER_DISCONNECTED")),await this.deletePairing(i))}),qe(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:c}=r,u=this.core.crypto.keychain.get(i);return D5({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:u,relay:s,expiryTimestamp:o,methods:c})}),qe(this,"sendRequest",async(r,i,s)=>{const o=Qi(i,s),c=await this.core.crypto.encode(r,o),u=Xd[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,c,u),o.id}),qe(this,"sendResult",async(r,i,s)=>{const o=Jp(r,s),c=await this.core.crypto.encode(i,o),u=(await this.core.history.get(i,r)).request.method,f=Xd[u].res;await this.core.relayer.publish(i,c,f),await this.core.history.resolve(o)}),qe(this,"sendError",async(r,i,s)=>{const o=Ow(r,s),c=await this.core.crypto.encode(i,o),u=(await this.core.history.get(i,r)).request.method,f=Xd[u]?Xd[u].res:Xd.unregistered_method.res;await this.core.relayer.publish(i,c,f),await this.core.history.resolve(o)}),qe(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Bt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),qe(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>Va(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),qe(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),qe(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),qe(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(pl.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),qe(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{xs(i)?this.events.emit(rt("pairing_ping",s),{}):bi(i)&&this.events.emit(rt("pairing_ping",s),{error:i.error})},500)}),qe(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(pl.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),qe(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const c=Bt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,c),this.logger.error(c)}catch(c){await this.sendError(s,r,c),this.logger.error(c)}}),qe(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Bt("WC_METHOD_UNSUPPORTED",r))}),qe(this,"isValidPair",(r,i)=>{var s;if(!pr(r)){const{message:c}=be("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(ao.malformed_pairing_uri),new Error(c)}if(!Aee(r.uri)){const{message:c}=be("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(ao.malformed_pairing_uri),new Error(c)}const o=N5(r==null?void 0:r.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:c}=be("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(ao.malformed_pairing_uri),new Error(c)}if(!(o!=null&&o.symKey)){const{message:c}=be("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(ao.malformed_pairing_uri),new Error(c)}if(o!=null&&o.expiryTimestamp&&we.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(ao.pairing_expired);const{message:c}=be("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(c)}}),qe(this,"isValidPing",async r=>{if(!pr(r)){const{message:s}=be("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),qe(this,"isValidDisconnect",async r=>{if(!pr(r)){const{message:s}=be("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),qe(this,"isValidPairingTopic",async r=>{if(!Lt(r,!1)){const{message:i}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(Va(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=be("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=e,this.logger=Jr(t,this.name),this.pairings=new wu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Nr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Dt.message,async e=>{const{topic:t,message:r,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==bt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(t,r);Sx(s)?(this.core.history.set(t,s),await this.onRelayEventRequest({topic:t,payload:s})):Bw(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id)),await this.core.relayer.messages.ack(t,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(li.expired,async e=>{const{topic:t}=zN(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(pl.expire,{topic:t}))})}};var Qie=Object.defineProperty,Zie=(n,e,t)=>e in n?Qie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dn=(n,e,t)=>Zie(n,typeof e!="symbol"?e+"":e,t);let Jie=class extends aW{constructor(e,t){super(e,t),this.core=e,this.logger=t,dn(this,"records",new Map),dn(this,"events",new Zr.EventEmitter),dn(this,"name",Xte),dn(this,"version",ene),dn(this,"cached",[]),dn(this,"initialized",!1),dn(this,"storagePrefix",Fs),dn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),dn(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:qt(we.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Ni.created,o)}),dn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=bi(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(Ni.updated,i))}),dn(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),dn(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Ni.deleted,s)}}),this.persist()}),dn(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),dn(this,"on",(r,i)=>{this.events.on(r,i)}),dn(this,"once",(r,i)=>{this.events.once(r,i)}),dn(this,"off",(r,i)=>{this.events.off(r,i)}),dn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Jr(t,this.name)}get context(){return Nr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:Qi(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ni.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ni.created,e=>{const t=Ni.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ni.updated,e=>{const t=Ni.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ni.deleted,e=>{const t=Ni.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(gu.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{we.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Ni.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Yie=Object.defineProperty,Xie=(n,e,t)=>e in n?Yie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$n=(n,e,t)=>Xie(n,typeof e!="symbol"?e+"":e,t);let ese=class extends dW{constructor(e,t){super(e,t),this.core=e,this.logger=t,$n(this,"expirations",new Map),$n(this,"events",new Zr.EventEmitter),$n(this,"name",tne),$n(this,"version",nne),$n(this,"cached",[]),$n(this,"initialized",!1),$n(this,"storagePrefix",Fs),$n(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),$n(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),$n(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(li.created,{target:s,expiration:o})}),$n(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),$n(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(li.deleted,{target:i,expiration:s})}}),$n(this,"on",(r,i)=>{this.events.on(r,i)}),$n(this,"once",(r,i)=>{this.events.once(r,i)}),$n(this,"off",(r,i)=>{this.events.off(r,i)}),$n(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Jr(t,this.name)}get context(){return Nr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return eJ(e);if(typeof e=="number")return tJ(e);const{message:t}=be("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(li.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return t}checkExpiry(e,t){const{expiry:r}=t;we.toMiliseconds(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(li.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(gu.pulse,()=>this.checkExpirations()),this.events.on(li.created,e=>{const t=li.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(li.expired,e=>{const t=li.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(li.deleted,e=>{const t=li.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}};var tse=Object.defineProperty,nse=(n,e,t)=>e in n?tse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ut=(n,e,t)=>nse(n,typeof e!="symbol"?e+"":e,t);let rse=class extends pW{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,Ut(this,"name",rne),Ut(this,"abortController"),Ut(this,"isDevEnv"),Ut(this,"verifyUrlV3",sne),Ut(this,"storagePrefix",Fs),Ut(this,"version",ZD),Ut(this,"publicKey"),Ut(this,"fetchPromise"),Ut(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&we.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ut(this,"register",async i=>{if(!Vh()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:c}=i,u=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${c}`;try{const f=Ho.getDocument(),h=this.startAbortTimer(we.ONE_SECOND*5),g=await new Promise((p,m)=>{const v=()=>{window.removeEventListener("message",A),f.body.removeChild(b),m("attestation aborted")};this.abortController.signal.addEventListener("abort",v);const b=f.createElement("iframe");b.src=u,b.style.display="none",b.addEventListener("error",v,{signal:this.abortController.signal});const A=_=>{if(_.data&&typeof _.data=="string")try{const U=JSON.parse(_.data);if(U.type==="verify_attestation"){if(hE(U.attestation).payload.id!==o)return;clearInterval(h),f.body.removeChild(b),this.abortController.signal.removeEventListener("abort",v),window.removeEventListener("message",A),p(U.attestation===null?"":U.attestation)}}catch(U){this.logger.warn(U)}};f.body.appendChild(b),window.addEventListener("message",A,{signal:this.abortController.signal})});return this.logger.debug(g,"jwt attestation"),g}catch(f){this.logger.warn(f)}return""}),Ut(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:c}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(hE(s).payload.id!==c)return;const f=await this.isValidJwtAttestation(s);if(f){if(!f.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return f}}if(!o)return;const u=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,u)}),Ut(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(we.ONE_SECOND*5),c=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),c.status===200?await c.json():void 0}),Ut(this,"getVerifyUrl",i=>{let s=i||Op;return one.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Op}`),s=Op),s}),Ut(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(we.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),Ut(this,"persistPublicKey",async i=>{this.logger.debug(i,"persisting public key to local storage"),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Ut(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ut(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(c){this.logger.error(c),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(c){this.logger.error(c),this.logger.warn("error validating attestation")}}),Ut(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ut(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Ut(this,"validateAttestation",(i,s)=>{const o=QX(i,s.publicKey),c={hasExpired:we.toMiliseconds(o.exp)<Date.now(),payload:o};if(c.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:c.payload.origin,isScam:c.payload.isScam,isVerified:c.payload.isVerified}}),this.logger=Jr(t,this.name),this.abortController=new AbortController,this.isDevEnv=fx(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Nr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),we.toMiliseconds(e))}};var ise=Object.defineProperty,sse=(n,e,t)=>e in n?ise(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yO=(n,e,t)=>sse(n,typeof e!="symbol"?e+"":e,t);let ose=class extends gW{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,yO(this,"context",ane),yO(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:c=!1}=r,u=`${cne}/${this.projectId}/clients`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:c})})}),this.logger=Jr(t,this.context)}};var ase=Object.defineProperty,mO=Object.getOwnPropertySymbols,cse=Object.prototype.hasOwnProperty,lse=Object.prototype.propertyIsEnumerable,YE=(n,e,t)=>e in n?ase(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,np=(n,e)=>{for(var t in e||(e={}))cse.call(e,t)&&YE(n,t,e[t]);if(mO)for(var t of mO(e))lse.call(e,t)&&YE(n,t,e[t]);return n},en=(n,e,t)=>YE(n,typeof e!="symbol"?e+"":e,t);let use=class extends yW{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,en(this,"context",une),en(this,"storagePrefix",Fs),en(this,"storageVersion",lne),en(this,"events",new Map),en(this,"shouldPersist",!1),en(this,"init",async()=>{if(!fx())try{const i={eventId:J6(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:MN(this.core.relayer.protocol,this.core.relayer.version,VE)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),en(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:c,trace:u}}=i,f=J6(),h=this.core.projectId||"",g=Date.now(),p=np({eventId:f,timestamp:g,props:{event:s,type:o,properties:{topic:c,trace:u}},bundleId:h,domain:this.getAppDomain()},this.setMethods(f));return this.telemetryEnabled&&(this.events.set(f,p),this.shouldPersist=!0),p}),en(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const c=Array.from(this.events.values()).find(u=>u.props.properties.topic===o);if(c)return np(np({},c),this.setMethods(c.eventId))}),en(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),en(this,"setEventListeners",()=>{this.core.heartbeat.on(gu.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{we.fromMiliseconds(Date.now())-we.fromMiliseconds(i.timestamp)>fne&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),en(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),en(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),en(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),en(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),en(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,np(np({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),en(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),en(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${hne}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${VE}${s}`,{method:"POST",body:JSON.stringify(i)})}),en(this,"getAppDomain",()=>FN().url),this.logger=Jr(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var fse=Object.defineProperty,wO=Object.getOwnPropertySymbols,hse=Object.prototype.hasOwnProperty,dse=Object.prototype.propertyIsEnumerable,XE=(n,e,t)=>e in n?fse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bO=(n,e)=>{for(var t in e||(e={}))hse.call(e,t)&&XE(n,t,e[t]);if(wO)for(var t of wO(e))dse.call(e,t)&&XE(n,t,e[t]);return n},gt=(n,e,t)=>XE(n,typeof e!="symbol"?e+"":e,t);let pse=class f$ extends rW{constructor(e){var t;super(e),gt(this,"protocol",QD),gt(this,"version",ZD),gt(this,"name",HE),gt(this,"relayUrl"),gt(this,"projectId"),gt(this,"customStoragePrefix"),gt(this,"events",new Zr.EventEmitter),gt(this,"logger"),gt(this,"heartbeat"),gt(this,"relayer"),gt(this,"crypto"),gt(this,"storage"),gt(this,"history"),gt(this,"expirer"),gt(this,"pairing"),gt(this,"verify"),gt(this,"echoClient"),gt(this,"linkModeSupportedApps"),gt(this,"eventClient"),gt(this,"initialized",!1),gt(this,"logChunkController"),gt(this,"on",(c,u)=>this.events.on(c,u)),gt(this,"once",(c,u)=>this.events.once(c,u)),gt(this,"off",(c,u)=>this.events.off(c,u)),gt(this,"removeListener",(c,u)=>this.events.removeListener(c,u)),gt(this,"dispatchEnvelope",({topic:c,message:u,sessionExists:f})=>{if(!c||!u)return;const h={topic:c,message:u,publishedAt:Date.now(),transportType:bt.link_mode};this.relayer.onLinkMessageEvent(h,{sessionExists:f})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(c){console.warn("Failed to copy global core",c)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||YD,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=yq({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:$te.logger,name:HE}),{logger:s,chunkLoggerController:o}=K3({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var c,u;(c=this.logChunkController)!=null&&c.downloadLogsBlobInBrowser&&((u=this.logChunkController)==null||u.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Jr(s,this.name),this.heartbeat=new wG,this.crypto=new jre(this,this.logger,e==null?void 0:e.keychain),this.history=new Jie(this,this.logger),this.expirer=new ese(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new eW(bO(bO({},Tte),e==null?void 0:e.storageOptions)),this.relayer=new pie({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Wie(this,this.logger),this.verify=new rse(this,this.logger,this.storage),this.echoClient=new ose(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new use(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new f$(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem(Wte,r),t}get context(){return Nr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(J5,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(J5)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(t){console.warn("Failed to get global WalletConnect core",t);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((t=e.opts)==null?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Dte.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const gse=pse,h$="wc",d$=2,p$="client",Ox=`${h$}@${d$}:${p$}:`,Y2={name:p$,logger:"error"},vO="WALLETCONNECT_DEEPLINK_CHOICE",yse="proposal",EO="Proposal expired",mse="session",sf=we.SEVEN_DAYS,wse="engine",pn={wc_sessionPropose:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1104},res:{ttl:we.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1106},res:{ttl:we.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1112},res:{ttl:we.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1114},res:{ttl:we.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:we.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:we.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1119}}},X2={min:we.FIVE_MINUTES,max:we.SEVEN_DAYS},ws={idle:"IDLE",active:"ACTIVE"},bse={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},vse="request",Ese=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],xse="wc",Ase="auth",Sse="authKeys",Ise="pairingTopics",Ose="requests",Cw=`${xse}@${1.5}:${Ase}:`,Qy=`${Cw}:PUB_KEY`;var Bse=Object.defineProperty,Pse=Object.defineProperties,Cse=Object.getOwnPropertyDescriptors,xO=Object.getOwnPropertySymbols,_se=Object.prototype.hasOwnProperty,Nse=Object.prototype.propertyIsEnumerable,e3=(n,e,t)=>e in n?Bse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,at=(n,e)=>{for(var t in e||(e={}))_se.call(e,t)&&e3(n,t,e[t]);if(xO)for(var t of xO(e))Nse.call(e,t)&&e3(n,t,e[t]);return n},Tn=(n,e)=>Pse(n,Cse(e)),pe=(n,e,t)=>e3(n,typeof e!="symbol"?e+"":e,t);class Dse extends vW{constructor(e){super(e),pe(this,"name",wse),pe(this,"events",new T3),pe(this,"initialized",!1),pe(this,"requestQueue",{state:ws.idle,queue:[]}),pe(this,"sessionRequestQueue",{state:ws.idle,queue:[]}),pe(this,"emittedSessionRequests",new uJ({limit:500})),pe(this,"requestQueueDelay",we.ONE_SECOND),pe(this,"expectedPairingMethodMap",new Map),pe(this,"recentlyDeletedMap",new Map),pe(this,"recentlyDeletedLimit",200),pe(this,"relayMessageCache",[]),pe(this,"pendingSessions",new Map),pe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(pn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay)))}),pe(this,"connect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Tn(at({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=wee(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:c,scopedProperties:u,relays:f}=r;let h=i,g,p=!1;try{if(h){const j=this.client.core.pairing.pairings.get(h);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),p=j.active}}catch(j){throw this.client.logger.error(`connect() -> pairing.get(${h}) failed`),j}if(!h||!p){const{topic:j,uri:H}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});h=j,g=H}if(!h){const{message:j}=be("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(j)}const m=await this.client.core.crypto.generateKeyPair(),v=pn.wc_sessionPropose.req.ttl||we.FIVE_MINUTES,b=qt(v),A=Tn(at(at({requiredNamespaces:s,optionalNamespaces:o,relays:f??[{protocol:JD}],proposer:{publicKey:m,metadata:this.client.metadata},expiryTimestamp:b,pairingTopic:h},c&&{sessionProperties:c}),u&&{scopedProperties:u}),{id:Es()}),_=rt("session_connect",A.id),{reject:U,resolve:O,done:T}=ll(v,EO),R=({id:j})=>{j===A.id&&(this.client.events.off("proposal_expire",R),this.pendingSessions.delete(A.id),this.events.emit(_,{error:{message:EO,code:0}}))};return this.client.events.on("proposal_expire",R),this.events.once(_,({error:j,session:H})=>{this.client.events.off("proposal_expire",R),j?U(j):H&&O(H)}),await this.sendProposeSession({proposal:A,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:A.id}}}),await this.setProposal(A.id,A),{uri:g,approval:T}}),pe(this,"pair",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(r){throw this.client.logger.error("pair() failed"),r}}),pe(this,"approve",async t=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=t==null?void 0:t.id)==null?void 0:r.toString(),trace:[Di.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(M){throw o.setError(il.no_internet_connection),M}try{await this.isValidProposalId(t==null?void 0:t.id)}catch(M){throw this.client.logger.error(`approve() -> proposal.get(${t==null?void 0:t.id}) failed`),o.setError(il.proposal_not_found),M}try{await this.isValidApprove(t)}catch(M){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(il.session_approve_namespace_validation_failure),M}const{id:c,relayProtocol:u,namespaces:f,sessionProperties:h,scopedProperties:g,sessionConfig:p}=t,m=this.client.proposal.get(c);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:v,proposer:b,requiredNamespaces:A,optionalNamespaces:_}=m;let U=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:v});U||(U=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Di.session_approve_started,properties:{topic:v,trace:[Di.session_approve_started,Di.session_namespaces_validation_success]}}));const O=await this.client.core.crypto.generateKeyPair(),T=b.publicKey,R=await this.client.core.crypto.generateSharedKey(O,T),j=at(at(at({relay:{protocol:u??"irn"},namespaces:f,controller:{publicKey:O,metadata:this.client.metadata},expiry:qt(sf)},h&&{sessionProperties:h}),g&&{scopedProperties:g}),p&&{sessionConfig:p}),H=bt.relay;U.addTrace(Di.subscribing_session_topic);try{await this.client.core.relayer.subscribe(R,{transportType:H,internal:{skipSubscribe:!0}})}catch(M){throw U.setError(il.subscribe_session_topic_failure),M}U.addTrace(Di.subscribe_session_topic_success);const V=Tn(at({},j),{topic:R,requiredNamespaces:A,optionalNamespaces:_,pairingTopic:v,acknowledged:!1,self:j.controller,peer:{publicKey:b.publicKey,metadata:b.metadata},controller:O,transportType:bt.relay});await this.client.session.set(R,V),U.addTrace(Di.store_session);try{await this.sendApproveSession({sessionTopic:R,proposal:m,pairingProposalResponse:{relay:{protocol:u??"irn"},responderPublicKey:O},sessionSettleRequest:j,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:c}}}),U.addTrace(Di.session_approve_publish_success)}catch(M){throw this.client.logger.error(M),this.client.session.delete(R,Bt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(R),M}return this.client.core.eventClient.deleteEvent({eventId:U.eventId}),await this.client.core.pairing.updateMetadata({topic:v,metadata:b.metadata}),await this.deleteProposal(c),await this.client.core.pairing.activate({topic:v}),await this.setExpiry(R,qt(sf)),{topic:R,acknowledged:()=>Promise.resolve(this.client.session.get(R))}}),pe(this,"reject",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=t;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&await this.sendError({id:r,topic:s,error:i,rpcOpts:pn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),pe(this,"update",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(g){throw this.client.logger.error("update() -> isValidUpdate() failed"),g}const{topic:r,namespaces:i}=t,{done:s,resolve:o,reject:c}=ll(),u=Es(),f=vc().toString(),h=this.client.session.get(r).namespaces;return this.events.once(rt("session_update",u),({error:g})=>{g?c(g):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:f}).catch(g=>{this.client.logger.error(g),this.client.session.update(r,{namespaces:h}),c(g)}),{acknowledged:s}}),pe(this,"extend",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(u){throw this.client.logger.error("extend() -> isValidExtend() failed"),u}const{topic:r}=t,i=Es(),{done:s,resolve:o,reject:c}=ll();return this.events.once(rt("session_extend",i),({error:u})=>{u?c(u):o()}),await this.setExpiry(r,qt(sf)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(u=>{c(u)}),{acknowledged:s}}),pe(this,"request",async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(A){throw this.client.logger.error("request() -> isValidRequest() failed"),A}const{chainId:r,request:i,topic:s,expiry:o=pn.wc_sessionRequest.req.ttl}=t,c=this.client.session.get(s);(c==null?void 0:c.transportType)===bt.relay&&await this.confirmOnlineStateOrThrow();const u=Es(),f=vc().toString(),{done:h,resolve:g,reject:p}=ll(o,"Request expired. Please try again.");this.events.once(rt("session_request",u),({error:A,result:_})=>{A?p(A):g(_)});const m="wc_sessionRequest",v=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);if(v)return await this.sendRequest({clientRpcId:u,relayRpcId:f,topic:s,method:m,params:{request:Tn(at({},i),{expiryTimestamp:qt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:v}).catch(A=>p(A)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:u}),await h();const b={request:Tn(at({},i),{expiryTimestamp:qt(o)}),chainId:r};return await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:u,relayRpcId:f,topic:s,method:m,params:b,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(u,b)}).catch(_=>p(_)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:u}),A()}),new Promise(async A=>{var _;if(!((_=c.sessionConfig)!=null&&_.disableDeepLink)){const U=await sJ(this.client.core.storage,vO);await nJ({id:u,topic:s,wcDeepLink:U})}A()}),h()]).then(A=>A[2])}),pe(this,"respond",async t=>{var r,i;this.isInitialized();const s=this.client.core.eventClient.createEvent({properties:{topic:(t==null?void 0:t.topic)||((i=(r=t==null?void 0:t.response)==null?void 0:r.id)==null?void 0:i.toString()),trace:[Di.session_request_response_started]}});try{await this.isValidRespond(t)}catch(g){throw s.addTrace(g==null?void 0:g.message),s.setError(il.session_request_response_validation_failure),g}s.addTrace(Di.session_request_response_validation_success);const{topic:o,response:c}=t,{id:u}=c,f=this.client.session.get(o);f.transportType===bt.relay&&await this.confirmOnlineStateOrThrow();const h=this.getAppLinkIfEnabled(f.peer.metadata,f.transportType);try{s.addTrace(Di.session_request_response_publish_started),xs(c)?await this.sendResult({id:u,topic:o,result:c.result,throwOnFailedPublish:!0,appLink:h}):bi(c)&&await this.sendError({id:u,topic:o,error:c.error,appLink:h}),this.cleanupAfterResponse(t)}catch(g){throw s.addTrace(g==null?void 0:g.message),s.setError(il.session_request_response_publish_failure),g}}),pe(this,"ping",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=t;if(this.client.session.keys.includes(r)){const i=Es(),s=vc().toString(),{done:o,resolve:c,reject:u}=ll();this.events.once(rt("session_ping",i),({error:f})=>{f?u(f):c()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),pe(this,"emit",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:r,event:i,chainId:s}=t,o=vc().toString(),c=Es();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:c})}),pe(this,"disconnect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:r}=t;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Bt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=be("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),pe(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(r=>Eee(r,t)))),pe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),pe(this,"authenticate",async(t,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(t);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?bt.link_mode:bt.relay;o===bt.relay&&await this.confirmOnlineStateOrThrow();const{chains:c,statement:u="",uri:f,domain:h,nonce:g,type:p,exp:m,nbf:v,methods:b=[],expiry:A}=t,_=[...t.resources||[]],{topic:U,uri:O}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:U,uri:O}});const T=await this.client.core.crypto.generateKeyPair(),R=Gy(T);if(await Promise.all([this.client.auth.authKeys.set(Qy,{responseTopic:R,publicKey:T}),this.client.auth.pairingTopics.set(R,{topic:R,pairingTopic:U})]),await this.client.core.relayer.subscribe(R,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${U}`),b.length>0){const{namespace:I}=qy(c[0]);let N=EY(I,"request",b);Ky(_)&&(N=AY(N,_.pop())),_.push(N)}const j=A&&A>pn.wc_sessionAuthenticate.req.ttl?A:pn.wc_sessionAuthenticate.req.ttl,H={authPayload:{type:p??"caip122",chains:c,statement:u,aud:f,domain:h,version:"1",nonce:g,iat:new Date().toISOString(),exp:m,nbf:v,resources:_},requester:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:qt(j)},V={eip155:{chains:c,methods:[...new Set(["personal_sign",...b])],events:["chainChanged","accountsChanged"]}},M={requiredNamespaces:{},optionalNamespaces:V,relays:[{protocol:"irn"}],pairingTopic:U,proposer:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:qt(pn.wc_sessionPropose.req.ttl),id:Es()},{done:G,resolve:Q,reject:z}=ll(j,"Request expired"),P=Es(),D=rt("session_connect",M.id),w=rt("session_request",P),x=async({error:I,session:N})=>{this.events.off(w,B),I?z(I):N&&Q({session:N})},B=async I=>{var N,$,L;if(await this.deletePendingAuthRequest(P,{message:"fulfilled",code:0}),I.error){const se=Bt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return I.error.code===se.code?void 0:(this.events.off(D,x),z(I.error.message))}await this.deleteProposal(M.id),this.events.off(D,x);const{cacaos:Y,responder:q}=I.result,Z=[],te=[];for(const se of Y){await c5({cacao:se,projectId:this.client.core.projectId})||(this.client.logger.error(se,"Signature verification failed"),z(Bt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ue}=se,Ne=Ky(ue.resources),Re=[NE(ue.iss)],ke=Pm(ue.iss);if(Ne){const Ve=l5(Ne),Qt=u5(Ne);Z.push(...Ve),Re.push(...Qt)}for(const Ve of Re)te.push(`${Ve}:${ke}`)}const re=await this.client.core.crypto.generateSharedKey(T,q.publicKey);let le;Z.length>0&&(le={topic:re,acknowledged:!0,self:{publicKey:T,metadata:this.client.metadata},peer:q,controller:q.publicKey,expiry:qt(sf),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:U,namespaces:R5([...new Set(Z)],[...new Set(te)]),transportType:o},await this.client.core.relayer.subscribe(re,{transportType:o}),await this.client.session.set(re,le),U&&await this.client.core.pairing.updateMetadata({topic:U,metadata:q.metadata}),le=this.client.session.get(re)),(N=this.client.metadata.redirect)!=null&&N.linkMode&&($=q.metadata.redirect)!=null&&$.linkMode&&(L=q.metadata.redirect)!=null&&L.universal&&r&&(this.client.core.addLinkModeSupportedApp(q.metadata.redirect.universal),this.client.session.update(re,{transportType:bt.link_mode})),Q({auths:Y,session:le})};this.events.once(D,x),this.events.once(w,B);let C;try{if(s){const I=Qi("wc_sessionAuthenticate",H,P);this.client.core.history.set(U,I);const N=await this.client.core.crypto.encode("",I,{type:Ng,encoding:tc});C=vy(r,U,N)}else await Promise.all([this.sendRequest({topic:U,method:"wc_sessionAuthenticate",params:H,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:U,method:"wc_sessionPropose",params:M,expiry:pn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:M.id})])}catch(I){throw this.events.off(D,x),this.events.off(w,B),I}return await this.setProposal(M.id,M),await this.setAuthRequest(P,{request:Tn(at({},H),{verifyContext:{}}),pairingTopic:U,transportType:o}),{uri:C??O,response:G}}),pe(this,"approveSessionAuthenticate",async t=>{const{id:r,auths:i}=t,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[sl.authenticated_session_approve_started]}});try{this.isInitialized()}catch(A){throw s.setError(ep.no_internet_connection),A}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(ep.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const c=o.transportType||bt.relay;c===bt.relay&&await this.confirmOnlineStateOrThrow();const u=o.requester.publicKey,f=await this.client.core.crypto.generateKeyPair(),h=Gy(u),g={type:Fo,receiverPublicKey:u,senderPublicKey:f},p=[],m=[];for(const A of i){if(!await c5({cacao:A,projectId:this.client.core.projectId})){s.setError(ep.invalid_cacao);const R=Bt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:h,error:R,encodeOpts:g}),new Error(R.message)}s.addTrace(sl.cacaos_verified);const{p:_}=A,U=Ky(_.resources),O=[NE(_.iss)],T=Pm(_.iss);if(U){const R=l5(U),j=u5(U);p.push(...R),O.push(...j)}for(const R of O)m.push(`${R}:${T}`)}const v=await this.client.core.crypto.generateSharedKey(f,u);s.addTrace(sl.create_authenticated_session_topic);let b;if((p==null?void 0:p.length)>0){b={topic:v,acknowledged:!0,self:{publicKey:f,metadata:this.client.metadata},peer:{publicKey:u,metadata:o.requester.metadata},controller:u,expiry:qt(sf),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:R5([...new Set(p)],[...new Set(m)]),transportType:c},s.addTrace(sl.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:c})}catch(A){throw s.setError(ep.subscribe_authenticated_session_topic_failure),A}s.addTrace(sl.subscribe_authenticated_session_topic_success),await this.client.session.set(v,b),s.addTrace(sl.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(sl.publishing_authenticated_session_approve);try{await this.sendResult({topic:h,id:r,result:{cacaos:i,responder:{publicKey:f,metadata:this.client.metadata}},encodeOpts:g,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,c)})}catch(A){throw s.setError(ep.authenticated_session_approve_publish_failure),A}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:b}}),pe(this,"rejectSessionAuthenticate",async t=>{this.isInitialized();const{id:r,reason:i}=t,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===bt.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),u=Gy(o),f={type:Fo,receiverPublicKey:o,senderPublicKey:c};await this.sendError({id:r,topic:u,error:i,encodeOpts:f,rpcOpts:pn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),pe(this,"formatAuthMessage",t=>{this.isInitialized();const{request:r,iss:i}=t;return iD(r,i)}),pe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)}),pe(this,"cleanupDuplicatePairings",async t=>{if(t.pairingTopic)try{const r=this.client.core.pairing.pairings.get(t.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,c;return((o=s.peerMetadata)==null?void 0:o.url)&&((c=s.peerMetadata)==null?void 0:c.url)===t.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),pe(this,"deleteSession",async t=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:c=0}=t,{self:u}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Bt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(vO).catch(f=>this.client.logger.warn(f)),this.getPendingSessionRequests().forEach(f=>{f.topic===i&&this.deletePendingSessionRequest(f.id,Bt("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ws.idle),o&&this.client.events.emit("session_delete",{id:c,topic:i})}),pe(this,"deleteProposal",async(t,r)=>{if(r)try{const i=this.client.proposal.get(t),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(il.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,Bt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),pe(this,"deletePendingSessionRequest",async(t,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==t),i&&(this.sessionRequestQueue.state=ws.idle,this.client.events.emit("session_request_expire",{id:t}))}),pe(this,"deletePendingAuthRequest",async(t,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)])}),pe(this,"setExpiry",async(t,r)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,r),await this.client.session.update(t,{expiry:r}))}),pe(this,"setProposal",async(t,r)=>{this.client.core.expirer.set(t,qt(pn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,r)}),pe(this,"setAuthRequest",async(t,r)=>{const{request:i,pairingTopic:s,transportType:o=bt.relay}=r;this.client.core.expirer.set(t,i.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:t,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),pe(this,"setPendingSessionRequest",async t=>{const{id:r,topic:i,params:s,verifyContext:o}=t,c=s.request.expiryTimestamp||qt(pn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,c),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),pe(this,"sendRequest",async t=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:c,clientRpcId:u,throwOnFailedPublish:f,appLink:h,tvf:g,publishOpts:p={}}=t,m=Qi(i,s,u);let v;const b=!!h;try{const U=b?tc:Er;v=await this.client.core.crypto.encode(r,m,{encoding:U})}catch(U){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),U}let A;if(Ese.includes(i)){const U=wi(JSON.stringify(m)),O=wi(v);A=await this.client.core.verify.register({id:O,decryptedId:U})}const _=at(at({},pn[i].req),p);if(_.attestation=A,o&&(_.ttl=o),c&&(_.id=c),this.client.core.history.set(r,m),b){const U=vy(h,r,v);await global.Linking.openURL(U,this.client.name)}else _.tvf=Tn(at({},g),{correlationId:m.id}),f?(_.internal=Tn(at({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,v,_)):this.client.core.relayer.publish(r,v,_).catch(U=>this.client.logger.error(U));return m.id}),pe(this,"sendProposeSession",async t=>{const{proposal:r,publishOpts:i}=t,s=Qi("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,s);const o=await this.client.core.crypto.encode(r.pairingTopic,s,{encoding:Er}),c=wi(JSON.stringify(s)),u=wi(o),f=await this.client.core.verify.register({id:u,decryptedId:c});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:Tn(at({},i),{publishMethod:"wc_proposeSession",attestation:f})})}),pe(this,"sendApproveSession",async t=>{const{sessionTopic:r,pairingProposalResponse:i,proposal:s,sessionSettleRequest:o,publishOpts:c}=t,u=Jp(s.id,i),f=await this.client.core.crypto.encode(s.pairingTopic,u,{encoding:Er}),h=Qi("wc_sessionSettle",o,c==null?void 0:c.id),g=await this.client.core.crypto.encode(r,h,{encoding:Er});this.client.core.history.set(r,h),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:s.pairingTopic,sessionProposalResponse:f,sessionSettlementRequest:g},opts:Tn(at({},c),{publishMethod:"wc_approveSession"})})}),pe(this,"sendResult",async t=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:c,appLink:u}=t,f=Jp(r,s);let h;const g=u&&typeof(global==null?void 0:global.Linking)<"u";try{const v=g?tc:Er;h=await this.client.core.crypto.encode(i,f,Tn(at({},c||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),v}let p,m;try{p=await this.client.core.history.get(i,r);const v=p.request;try{m=this.getTVFParams(r,v.params,s)}catch(b){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${b==null?void 0:b.message}`)}}catch(v){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),v}if(g){const v=vy(u,i,h);await global.Linking.openURL(v,this.client.name)}else{const v=p.request.method,b=pn[v].res;b.tvf=Tn(at({},m),{correlationId:r}),o?(b.internal=Tn(at({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,h,b)):this.client.core.relayer.publish(i,h,b).catch(A=>this.client.logger.error(A))}await this.client.core.history.resolve(f)}),pe(this,"sendError",async t=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:c,appLink:u}=t,f=Ow(r,s);let h;const g=u&&typeof(global==null?void 0:global.Linking)<"u";try{const m=g?tc:Er;h=await this.client.core.crypto.encode(i,f,Tn(at({},o||{}),{encoding:m}))}catch(m){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),m}let p;try{p=await this.client.core.history.get(i,r)}catch(m){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),m}if(g){const m=vy(u,i,h);await global.Linking.openURL(m,this.client.name)}else{const m=p.request.method,v=c||pn[m].res;this.client.core.relayer.publish(i,h,v)}await this.client.core.history.resolve(f)}),pe(this,"cleanup",async()=>{const t=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;Va(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&t.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Va(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...t.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),pe(this,"onProviderMessageEvent",async t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):await this.onRelayMessage(t)}),pe(this,"onRelayEventRequest",async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()}),pe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ws.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ws.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ws.idle}),pe(this,"processRequest",async t=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:c}=t,u=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:u}))switch(u){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:c});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:c,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:c,transportType:o});default:return this.client.logger.info(`Unsupported request method ${u}`)}}),pe(this,"onRelayEventResponse",async t=>{const{topic:r,payload:i,transportType:s}=t,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),pe(this,"onRelayEventUnknownPayload",t=>{const{topic:r}=t,{message:i}=be("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),pe(this,"shouldIgnorePairingRequest",t=>{const{topic:r,requestMethod:i}=t,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),pe(this,"onSessionProposeRequest",async t=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=t,{params:c,id:u}=i;try{const f=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),f==null||f.setError(ao.proposal_listener_not_found)),this.isValidConnect(at({},i.params));const h=c.expiryTimestamp||qt(pn.wc_sessionPropose.req.ttl),g=at({id:u,pairingTopic:r,expiryTimestamp:h,attestation:s,encryptedId:o},c);await this.setProposal(u,g);const p=await this.getVerifyContext({attestationId:s,hash:wi(JSON.stringify(i)),encryptedId:o,metadata:g.proposer.metadata});f==null||f.addTrace(vs.emit_session_proposal),this.client.events.emit("session_proposal",{id:u,params:g,verifyContext:p})}catch(f){await this.sendError({id:u,topic:r,error:f,rpcOpts:pn.wc_sessionPropose.autoReject}),this.client.logger.error(f)}}),pe(this,"onSessionProposeResponse",async(t,r,i)=>{const{id:s}=r;if(xs(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const c=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const u=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const f=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:f});const h=await this.client.core.crypto.generateSharedKey(u,f);this.pendingSessions.set(s,{sessionTopic:h,pairingTopic:t,proposalId:s,publicKey:u});const g=await this.client.core.relayer.subscribe(h,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:g}),await this.client.core.pairing.activate({topic:t})}else if(bi(r)){await this.deleteProposal(s);const o=rt("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),pe(this,"onSessionSettleRequest",async(t,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:c,expiry:u,namespaces:f,sessionProperties:h,scopedProperties:g,sessionConfig:p}=r.params,m=[...this.pendingSessions.values()].find(A=>A.sessionTopic===t);if(!m)return this.client.logger.error(`Pending session not found for topic ${t}`);const v=this.client.proposal.get(m.proposalId),b=Tn(at(at(at({topic:t,relay:o,expiry:u,namespaces:f,acknowledged:!0,pairingTopic:m.pairingTopic,requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces,controller:c.publicKey,self:{publicKey:m.publicKey,metadata:this.client.metadata},peer:{publicKey:c.publicKey,metadata:c.metadata}},h&&{sessionProperties:h}),g&&{scopedProperties:g}),p&&{sessionConfig:p}),{transportType:bt.relay});await this.client.session.set(b.topic,b),await this.setExpiry(b.topic,b.expiry),await this.client.core.pairing.updateMetadata({topic:m.pairingTopic,metadata:b.peer.metadata}),this.client.events.emit("session_connect",{session:b}),this.events.emit(rt("session_connect",m.proposalId),{session:b}),this.pendingSessions.delete(m.proposalId),this.deleteProposal(m.proposalId,!1),this.cleanupDuplicatePairings(b),await this.sendResult({id:r.id,topic:t,result:!0})}catch(o){await this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}}),pe(this,"onSessionSettleResponse",async(t,r)=>{const{id:i}=r;xs(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(rt("session_approve",i),{})):bi(r)&&(await this.client.session.delete(t,Bt("USER_DISCONNECTED")),this.events.emit(rt("session_approve",i),{error:r.error}))}),pe(this,"onSessionUpdateRequest",async(t,r)=>{const{params:i,id:s}=r;try{const o=`${t}_session_update`,c=Yd.get(o);if(c&&this.isRequestOutOfSync(c,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:t,error:Bt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(at({topic:t},i));try{Yd.set(o,s),await this.client.session.update(t,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:t,result:!0})}catch(u){throw Yd.delete(o),u}this.client.events.emit("session_update",{id:s,topic:t,params:i})}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),pe(this,"isRequestOutOfSync",(t,r)=>r.toString().slice(0,-3)<t.toString().slice(0,-3)),pe(this,"onSessionUpdateResponse",(t,r)=>{const{id:i}=r,s=rt("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);xs(r)?this.events.emit(rt("session_update",i),{}):bi(r)&&this.events.emit(rt("session_update",i),{error:r.error})}),pe(this,"onSessionExtendRequest",async(t,r)=>{const{id:i}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,qt(sf)),await this.sendResult({id:i,topic:t,result:!0}),this.client.events.emit("session_extend",{id:i,topic:t})}catch(s){await this.sendError({id:i,topic:t,error:s}),this.client.logger.error(s)}}),pe(this,"onSessionExtendResponse",(t,r)=>{const{id:i}=r,s=rt("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);xs(r)?this.events.emit(rt("session_extend",i),{}):bi(r)&&this.events.emit(rt("session_extend",i),{error:r.error})}),pe(this,"onSessionPingRequest",async(t,r)=>{const{id:i}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:t})}catch(s){await this.sendError({id:i,topic:t,error:s}),this.client.logger.error(s)}}),pe(this,"onSessionPingResponse",(t,r)=>{const{id:i}=r,s=rt("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);xs(r)?this.events.emit(rt("session_ping",i),{}):bi(r)&&this.events.emit(rt("session_ping",i),{error:r.error})},500)}),pe(this,"onSessionDeleteRequest",async(t,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Dt.publish,async()=>{s(await this.deleteSession({topic:t,id:i}))})}),this.sendResult({id:i,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:Bt("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),pe(this,"onSessionRequest",async t=>{var r,i,s;const{topic:o,payload:c,attestation:u,encryptedId:f,transportType:h}=t,{id:g,params:p}=c;try{await this.isValidRequest(at({topic:o},p));const m=this.client.session.get(o),v=await this.getVerifyContext({attestationId:u,hash:wi(JSON.stringify(Qi("wc_sessionRequest",p,g))),encryptedId:f,metadata:m.peer.metadata,transportType:h}),b={id:g,topic:o,params:p,verifyContext:v};await this.setPendingSessionRequest(b),h===bt.link_mode&&(r=m.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=m.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(b):(this.addSessionRequestToSessionRequestQueue(b),this.processSessionRequestQueue())}catch(m){await this.sendError({id:g,topic:o,error:m}),this.client.logger.error(m)}}),pe(this,"onSessionRequestResponse",(t,r)=>{const{id:i}=r,s=rt("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);xs(r)?this.events.emit(rt("session_request",i),{result:r.result}):bi(r)&&this.events.emit(rt("session_request",i),{error:r.error})}),pe(this,"onSessionEventRequest",async(t,r)=>{const{id:i,params:s}=r;try{const o=`${t}_session_event_${s.event.name}`,c=Yd.get(o);if(c&&this.isRequestOutOfSync(c,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(at({topic:t},s)),this.client.events.emit("session_event",{id:i,topic:t,params:s}),Yd.set(o,i)}catch(o){await this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}}),pe(this,"onSessionAuthenticateResponse",(t,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:r}),xs(r)?this.events.emit(rt("session_request",i),{result:r.result}):bi(r)&&this.events.emit(rt("session_request",i),{error:r.error})}),pe(this,"onSessionAuthenticateRequest",async t=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:c,transportType:u}=t;try{const{requester:f,authPayload:h,expiryTimestamp:g}=s.params,p=await this.getVerifyContext({attestationId:o,hash:wi(JSON.stringify(s)),encryptedId:c,metadata:f.metadata,transportType:u}),m={requester:f,pairingTopic:i,id:s.id,authPayload:h,verifyContext:p,expiryTimestamp:g};await this.setAuthRequest(s.id,{request:m,pairingTopic:i,transportType:u}),u===bt.link_mode&&(r=f.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(f.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:p})}catch(f){this.client.logger.error(f);const h=s.params.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),p=this.getAppLinkIfEnabled(s.params.requester.metadata,u),m={type:Fo,receiverPublicKey:h,senderPublicKey:g};await this.sendError({id:s.id,topic:i,error:f,encodeOpts:m,rpcOpts:pn.wc_sessionAuthenticate.autoReject,appLink:p})}}),pe(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),pe(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ws.idle,this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay))}),pe(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===t&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,c=rt("session_request",o);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners`);this.events.emit(rt("session_request",s.request.id),{error:r})})}),pe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ws.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(t)}catch(r){this.client.logger.error(r)}}),pe(this,"emitSessionRequest",t=>{if(this.emittedSessionRequests.has(t.id)){this.client.logger.warn({id:t.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${t.id}`);return}this.sessionRequestQueue.state=ws.active,this.emittedSessionRequests.add(t.id),this.client.events.emit("session_request",t)}),pe(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===t.topic);r&&this.onSessionProposeRequest({topic:t.topic,payload:Qi("wc_sessionPropose",Tn(at({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),pe(this,"isValidConnect",async t=>{if(!pr(t)){const{message:f}=be("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(f)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:c,relays:u}=t;if(Gt(r)||await this.isValidPairingTopic(r),!$ee(u)){const{message:f}=be("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(f)}if(i&&!Gt(i)&&Zp(i)!==0){const f="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(f):this.client.logger.warn(f),this.validateNamespaces(i,"requiredNamespaces")}if(s&&!Gt(s)&&Zp(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),o&&!Gt(o)&&this.validateSessionProps(o,"sessionProperties"),c&&!Gt(c)){this.validateSessionProps(c,"scopedProperties");const f=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(c).every(h=>f.includes(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(c)}, required/optional namespaces: ${JSON.stringify(f)}`)}}),pe(this,"validateNamespaces",(t,r)=>{const i=Dee(t,"connect()",r);if(i)throw new Error(i.message)}),pe(this,"isValidApprove",async t=>{if(!pr(t))throw new Error(be("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:c}=t;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const u=this.client.proposal.get(r),f=K2(i,"approve()");if(f)throw new Error(f.message);const h=F5(u.requiredNamespaces,i,"approve()");if(h)throw new Error(h.message);if(!Lt(s,!0)){const{message:g}=be("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(g)}if(o&&!Gt(o)&&this.validateSessionProps(o,"sessionProperties"),c&&!Gt(c)){this.validateSessionProps(c,"scopedProperties");const g=new Set(Object.keys(i));if(!Object.keys(c).every(p=>g.has(p.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(c)}, approved namespaces: ${Array.from(g).join(", ")}`)}}),pe(this,"isValidReject",async t=>{if(!pr(t)){const{message:s}=be("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(s)}const{id:r,reason:i}=t;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!kee(i)){const{message:s}=be("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),pe(this,"isValidSessionSettleRequest",t=>{if(!pr(t)){const{message:f}=be("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(f)}const{relay:r,controller:i,namespaces:s,expiry:o}=t;if(!zD(r)){const{message:f}=be("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(f)}const c=Oee(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);const u=K2(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(Va(o)){const{message:f}=be("EXPIRED","onSessionSettleRequest()");throw new Error(f)}}),pe(this,"isValidUpdate",async t=>{if(!pr(t)){const{message:u}=be("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(u)}const{topic:r,namespaces:i}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=K2(i,"update()");if(o)throw new Error(o.message);const c=F5(s.requiredNamespaces,i,"update()");if(c)throw new Error(c.message)}),pe(this,"isValidExtend",async t=>{if(!pr(t)){const{message:i}=be("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(i)}const{topic:r}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),pe(this,"isValidRequest",async t=>{if(!pr(t)){const{message:u}=be("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(u)}const{topic:r,request:i,chainId:s,expiry:o}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:c}=this.client.session.get(r);if(!L5(c,s)){const{message:u}=be("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!Ree(i)){const{message:u}=be("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!Fee(c,s,i.method)){const{message:u}=be("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(o&&!Hee(o,X2)){const{message:u}=be("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${X2.min} and ${X2.max}`);throw new Error(u)}}),pe(this,"isValidRespond",async t=>{var r;if(!pr(t)){const{message:c}=be("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:i,response:s}=t;try{await this.isValidSessionTopic(i)}catch(c){throw(r=t==null?void 0:t.response)!=null&&r.id&&this.cleanupAfterResponse(t),c}if(!Uee(s)){const{message:c}=be("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(c)}const o=this.client.pendingRequest.get(s.id);if(o.topic!==i){const{message:c}=be("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${s.id}, expected topic: ${o.topic}, received topic: ${i}`);throw new Error(c)}}),pe(this,"isValidPing",async t=>{if(!pr(t)){const{message:i}=be("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),pe(this,"isValidEmit",async t=>{if(!pr(t)){const{message:c}=be("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(c)}const{topic:r,event:i,chainId:s}=t;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!L5(o,s)){const{message:c}=be("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(c)}if(!Lee(i)){const{message:c}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(c)}if(!Mee(o,s,i.name)){const{message:c}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(c)}}),pe(this,"isValidDisconnect",async t=>{if(!pr(t)){const{message:i}=be("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),pe(this,"isValidAuthenticate",t=>{const{chains:r,uri:i,domain:s,nonce:o}=t;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Lt(i,!1))throw new Error("uri is required parameter");if(!Lt(s,!1))throw new Error("domain is required parameter");if(!Lt(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(u=>qy(u).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:c}=qy(r[0]);if(c!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),pe(this,"getVerifyContext",async t=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:c}=t,u={verified:{verifyUrl:o.verifyUrl||Op,validation:"UNKNOWN",origin:o.url||""}};try{if(c===bt.link_mode){const h=this.getAppLinkIfEnabled(o,c);return u.verified.validation=h&&new URL(h).origin===new URL(o.url).origin?"VALID":"INVALID",u}const f=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});f&&(u.verified.origin=f.origin,u.verified.isScam=f.isScam,u.verified.validation=f.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(f){this.client.logger.warn(f)}return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`),u}),pe(this,"validateSessionProps",(t,r)=>{Object.values(t).forEach((i,s)=>{if(i==null){const{message:o}=be("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(t)[s]}`);throw new Error(o)}})}),pe(this,"getPendingAuthRequest",t=>{const r=this.client.auth.requests.get(t);return typeof r=="object"?r:void 0}),pe(this,"addToRecentlyDeleted",(t,r)=>{if(this.recentlyDeletedMap.set(t,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),pe(this,"checkRecentlyDeleted",t=>{const r=this.recentlyDeletedMap.get(t);if(r){const{message:i}=be("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${t}`);throw new Error(i)}}),pe(this,"isLinkModeEnabled",(t,r)=>{var i,s,o,c,u,f,h,g,p;return!t||r!==bt.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((c=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:c.universal)!==void 0&&((f=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:f.universal)!==""&&((h=t==null?void 0:t.redirect)==null?void 0:h.universal)!==void 0&&((g=t==null?void 0:t.redirect)==null?void 0:g.universal)!==""&&((p=t==null?void 0:t.redirect)==null?void 0:p.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),pe(this,"getAppLinkIfEnabled",(t,r)=>{var i;return this.isLinkModeEnabled(t,r)?(i=t==null?void 0:t.redirect)==null?void 0:i.universal:void 0}),pe(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const r=Z6(t,"topic")||"",i=decodeURIComponent(Z6(t,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:bt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),pe(this,"registerLinkModeListeners",async()=>{var t;if(fx()||Uc()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),pe(this,"getTVFParams",(t,r,i)=>{var s,o,c;if(!((s=r.request)!=null&&s.method))return{};const u={correlationId:t,rpcMethods:[r.request.method],chainId:r.chainId};try{const f=this.extractTxHashesFromResult(r.request,i);u.txHashes=f,u.contractAddresses=this.isValidContractData(r.request.params)?[(c=(o=r.request.params)==null?void 0:o[0])==null?void 0:c.to]:[]}catch(f){this.client.logger.warn(f,"Error getting TVF params")}return u}),pe(this,"isValidContractData",t=>{var r;if(!t)return!1;try{const i=(t==null?void 0:t.data)||((r=t==null?void 0:t[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),pe(this,"extractTxHashesFromResult",(t,r)=>{var i;try{if(!r)return[];const s=t.method,o=bse[s];if(s==="sui_signTransaction")return[iY(r.transactionBytes)];if(s==="near_signTransaction")return[i5(r)];if(s==="near_signTransactions")return r.map(u=>i5(u));if(s==="xrpl_signTransactionFor"||s==="xrpl_signTransaction")return[(i=r.tx_json)==null?void 0:i.hash];if(s==="polkadot_signTransaction")return[ite({transaction:t.params.transactionPayload,signature:r.signature})];if(s==="algo_signTxn")return Lh(r)?r.map(u=>s5(u)):[s5(r)];if(s==="cosmos_signDirect")return[oY(r)];if(s==="wallet_sendCalls")return aY(r);if(typeof r=="string")return[r];const c=r[o.key];if(Lh(c))return s==="solana_signAllTransactions"?c.map(u=>rY(u)):c;if(typeof c=="string")return[c]}catch(s){this.client.logger.warn(s,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,i]of Object.entries(t))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Dt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:t,message:r,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Qy)?this.client.auth.authKeys.get(Qy):{publicKey:void 0};try{const c=await this.client.core.crypto.decode(t,r,{receiverPublicKey:o,encoding:s===bt.link_mode?tc:Er});Sx(c)?(this.client.core.history.set(t,c),await this.onRelayEventRequest({topic:t,payload:c,attestation:i,transportType:s,encryptedId:wi(r)})):Bw(c)?(await this.client.core.history.resolve(c),await this.onRelayEventResponse({topic:t,payload:c,transportType:s}),this.client.core.history.delete(t,c.id)):await this.onRelayEventUnknownPayload({topic:t,payload:c,transportType:s}),await this.client.core.relayer.messages.ack(t,r)}catch(c){this.client.logger.error(c)}}registerExpirerEvents(){this.client.core.expirer.on(li.expired,async e=>{const{topic:t,id:r}=zN(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,be("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,be("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(pl.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(pl.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Lt(e,!1)){const{message:t}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Va(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=be("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Lt(e,!1)){const{message:t}=be("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=be("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Va(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=be("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=be("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Lt(e,!1)){const{message:t}=be("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=be("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!Tee(e)){const{message:t}=be("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=be("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Va(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=be("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class $se extends wu{constructor(e,t){super(e,t,yse,Ox),this.core=e,this.logger=t}}let Tse=class extends wu{constructor(e,t){super(e,t,mse,Ox),this.core=e,this.logger=t}};class kse extends wu{constructor(e,t){super(e,t,vse,Ox,r=>r.id),this.core=e,this.logger=t}}class Rse extends wu{constructor(e,t){super(e,t,Sse,Cw,()=>Qy),this.core=e,this.logger=t}}class Use extends wu{constructor(e,t){super(e,t,Ise,Cw),this.core=e,this.logger=t}}class Lse extends wu{constructor(e,t){super(e,t,Ose,Cw,r=>r.id),this.core=e,this.logger=t}}var Fse=Object.defineProperty,Mse=(n,e,t)=>e in n?Fse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ev=(n,e,t)=>Mse(n,typeof e!="symbol"?e+"":e,t);class jse{constructor(e,t){this.core=e,this.logger=t,ev(this,"authKeys"),ev(this,"pairingTopics"),ev(this,"requests"),this.authKeys=new Rse(this.core,this.logger),this.pairingTopics=new Use(this.core,this.logger),this.requests=new Lse(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var zse=Object.defineProperty,Hse=(n,e,t)=>e in n?zse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ke=(n,e,t)=>Hse(n,typeof e!="symbol"?e+"":e,t);let Vse=class g$ extends bW{constructor(e){super(e),Ke(this,"protocol",h$),Ke(this,"version",d$),Ke(this,"name",Y2.name),Ke(this,"metadata"),Ke(this,"core"),Ke(this,"logger"),Ke(this,"events",new Zr.EventEmitter),Ke(this,"engine"),Ke(this,"session"),Ke(this,"proposal"),Ke(this,"pendingRequest"),Ke(this,"auth"),Ke(this,"signConfig"),Ke(this,"on",(r,i)=>this.events.on(r,i)),Ke(this,"once",(r,i)=>this.events.once(r,i)),Ke(this,"off",(r,i)=>this.events.off(r,i)),Ke(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),Ke(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Ke(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Ke(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),Ke(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),Ke(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||Y2.name,this.metadata=ZZ(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const t=HD({logger:(e==null?void 0:e.logger)||Y2.logger,name:this.name});this.logger=t,this.core=(e==null?void 0:e.core)||new gse(e),this.session=new Tse(this.core,this.logger),this.proposal=new $se(this.core,this.logger),this.pendingRequest=new kse(this.core,this.logger),this.engine=new Dse(this),this.auth=new jse(this.core,this.logger)}static async init(e){const t=new g$(e);return await t.initialize(),t}get context(){return Nr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const qse=Vse;var dt={},AO;function y$(){if(AO)return dt;AO=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.getLocalStorage=dt.getLocalStorageOrThrow=dt.getCrypto=dt.getCryptoOrThrow=dt.getLocation=dt.getLocationOrThrow=dt.getNavigator=dt.getNavigatorOrThrow=dt.getDocument=dt.getDocumentOrThrow=dt.getFromWindowOrThrow=dt.getFromWindow=void 0;function n(p){let m;return typeof window<"u"&&typeof window[p]<"u"&&(m=window[p]),m}dt.getFromWindow=n;function e(p){const m=n(p);if(!m)throw new Error(`${p} is not defined in Window`);return m}dt.getFromWindowOrThrow=e;function t(){return e("document")}dt.getDocumentOrThrow=t;function r(){return n("document")}dt.getDocument=r;function i(){return e("navigator")}dt.getNavigatorOrThrow=i;function s(){return n("navigator")}dt.getNavigator=s;function o(){return e("location")}dt.getLocationOrThrow=o;function c(){return n("location")}dt.getLocation=c;function u(){return e("crypto")}dt.getCryptoOrThrow=u;function f(){return n("crypto")}dt.getCrypto=f;function h(){return e("localStorage")}dt.getLocalStorageOrThrow=h;function g(){return n("localStorage")}return dt.getLocalStorage=g,dt}y$();var rp={},SO;function Kse(){if(SO)return rp;SO=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.getWindowMetadata=void 0;const n=y$();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function i(){const m=t.getElementsByTagName("link"),v=[];for(let b=0;b<m.length;b++){const A=m[b],_=A.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const U=A.getAttribute("href");if(U)if(U.toLowerCase().indexOf("https:")===-1&&U.toLowerCase().indexOf("http:")===-1&&U.indexOf("//")!==0){let O=r.protocol+"//"+r.host;if(U.indexOf("/")===0)O+=U;else{const T=r.pathname.split("/");T.pop();const R=T.join("/");O+=R+"/"+U}v.push(O)}else if(U.indexOf("//")===0){const O=r.protocol+U;v.push(O)}else v.push(U)}}return v}function s(...m){const v=t.getElementsByTagName("meta");for(let b=0;b<v.length;b++){const A=v[b],_=["itemprop","property","name"].map(U=>A.getAttribute(U)).filter(U=>U?m.includes(U):!1);if(_.length&&_){const U=A.getAttribute("content");if(U)return U}}return""}function o(){let m=s("name","og:site_name","og:title","twitter:title");return m||(m=t.title),m}function c(){return s("description","og:description","twitter:description","keywords")}const u=o(),f=c(),h=r.origin,g=i();return{description:f,url:h,icons:g,name:u}}return rp.getWindowMetadata=e,rp}Kse();function Gse(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<n.length;f++){const h=n.charAt(f),g=h.charCodeAt(0);if(e[g]!==255)throw new TypeError(h+" is ambiguous");e[g]=f}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let h=0,g=0,p=0;const m=f.length;for(;p!==m&&f[p]===0;)p++,h++;const v=(m-p)*s+1>>>0,b=new Uint8Array(v);for(;p!==m;){let U=f[p],O=0;for(let T=v-1;(U!==0||O<g)&&T!==-1;T--,O++)U+=256*b[T]>>>0,b[T]=U%t>>>0,U=U/t>>>0;if(U!==0)throw new Error("Non-zero carry");g=O,p++}let A=v-g;for(;A!==v&&b[A]===0;)A++;let _=r.repeat(h);for(;A<v;++A)_+=n.charAt(b[A]);return _}function c(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let h=0,g=0,p=0;for(;f[h]===r;)g++,h++;const m=(f.length-h)*i+1>>>0,v=new Uint8Array(m);for(;h<f.length;){const U=f.charCodeAt(h);if(U>255)return;let O=e[U];if(O===255)return;let T=0;for(let R=m-1;(O!==0||T<p)&&R!==-1;R--,T++)O+=t*v[R]>>>0,v[R]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");p=T,h++}let b=m-p;for(;b!==m&&v[b]===0;)b++;const A=new Uint8Array(g+(m-b));let _=g;for(;b!==m;)A[_++]=v[b++];return A}function u(f){const h=c(f);if(h)return h;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:c,decode:u}}var Wse="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Gse(Wse);const Qse=":";function Pp(n){const[e,t]=n.split(Qse);return{namespace:e,reference:t}}function Zse(n,e){return we.fromMiliseconds(Date.now()+we.toMiliseconds(n))}function m$(n){return Date.now()>=we.toMiliseconds(n)}function tv(n=[],e=[]){return[...new Set([...n,...e])]}const Ey=BigInt(2**32-1),IO=BigInt(32);function w$(n,e=!1){return e?{h:Number(n&Ey),l:Number(n>>IO&Ey)}:{h:Number(n>>IO&Ey)|0,l:Number(n&Ey)|0}}function b$(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:c}=w$(n[s],e);[r[s],i[s]]=[o,c]}return[r,i]}const OO=(n,e,t)=>n>>>t,BO=(n,e,t)=>n<<32-t|e>>>t,Wa=(n,e,t)=>n>>>t|e<<32-t,Qa=(n,e,t)=>n<<32-t|e>>>t,wp=(n,e,t)=>n<<64-t|e>>>t-32,bp=(n,e,t)=>n>>>t-32|e<<64-t,Jse=(n,e)=>e,Yse=(n,e)=>n,Xse=(n,e,t)=>n<<t|e>>>32-t,eoe=(n,e,t)=>e<<t|n>>>32-t,toe=(n,e,t)=>e<<t-32|n>>>64-t,noe=(n,e,t)=>n<<t-32|e>>>64-t;function Fi(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const Bx=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Px=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,roe=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),ioe=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,soe=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),ooe=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,of=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function _w(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Dc(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function ns(n,...e){if(!_w(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function v$(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Dc(n.outputLen),Dc(n.blockLen)}function $c(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Cx(n,e){ns(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Yp(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function rs(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function nv(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function bs(n,e){return n<<32-e|n>>>e}const E$=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function x$(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const co=E$?n=>n:n=>x$(n);function aoe(n){for(let e=0;e<n.length;e++)n[e]=x$(n[e]);return n}const Za=E$?n=>n:aoe,A$=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",coe=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Tf(n){if(ns(n),A$)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=coe[n[t]];return e}const ro={_0:48,_9:57,A:65,F:70,a:97,f:102};function PO(n){if(n>=ro._0&&n<=ro._9)return n-ro._0;if(n>=ro.A&&n<=ro.F)return n-(ro.A-10);if(n>=ro.a&&n<=ro.f)return n-(ro.a-10)}function Tm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(A$)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=PO(n.charCodeAt(s)),c=PO(n.charCodeAt(s+1));if(o===void 0||c===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+c}return r}function S$(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Mo(n){return typeof n=="string"&&(n=S$(n)),ns(n),n}function nc(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];ns(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}class Nw{}function $g(n){const e=r=>n().update(Mo(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function loe(n){const e=(r,i)=>n(i).update(Mo(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function _x(n=32){if(of&&typeof of.getRandomValues=="function")return of.getRandomValues(new Uint8Array(n));if(of&&typeof of.randomBytes=="function")return Uint8Array.from(of.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const uoe=BigInt(0),ip=BigInt(1),foe=BigInt(2),hoe=BigInt(7),doe=BigInt(256),poe=BigInt(113),I$=[],O$=[],B$=[];for(let n=0,e=ip,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],I$.push(2*(5*r+t)),O$.push((n+1)*(n+2)/2%64);let i=uoe;for(let s=0;s<7;s++)e=(e<<ip^(e>>hoe)*poe)%doe,e&foe&&(i^=ip<<(ip<<BigInt(s))-ip);B$.push(i)}const P$=b$(B$,!0),goe=P$[0],yoe=P$[1],CO=(n,e,t)=>t>32?toe(n,e,t):Xse(n,e,t),_O=(n,e,t)=>t>32?noe(n,e,t):eoe(n,e,t);function moe(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=t[u],h=t[u+1],g=CO(f,h,1)^t[c],p=_O(f,h,1)^t[c+1];for(let m=0;m<50;m+=10)n[o+m]^=g,n[o+m+1]^=p}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=O$[o],u=CO(i,s,c),f=_O(i,s,c),h=I$[o];i=n[h],s=n[h+1],n[h]=u,n[h+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=goe[r],n[1]^=yoe[r]}rs(t)}class Nx extends Nw{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,Dc(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Yp(this.state)}clone(){return this._cloneInto()}keccak(){Za(this.state32),moe(this.state32,this.rounds),Za(this.state32),this.posOut=0,this.pos=0}update(e){$c(this),e=Mo(e),ns(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){$c(this,!1),ns(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Dc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Cx(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,rs(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Nx(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const woe=(n,e,t)=>$g(()=>new Nx(e,n,t));woe(1,136,256/8);function boe(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),u=r?4:0,f=r?0:4;n.setUint32(e+u,o,r),n.setUint32(e+f,c,r)}function voe(n,e,t){return n&e^~n&t}function Eoe(n,e,t){return n&e^n&t^e&t}class C$ extends Nw{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=nv(this.buffer)}update(e){$c(this),e=Mo(e),ns(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=nv(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$c(this),Cx(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,rs(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let g=o;g<i;g++)t[g]=0;boe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=nv(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)c.setUint32(4*g,h[g],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=c,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Ta=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),kn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Rn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),xoe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ka=new Uint32Array(64);class Aoe extends C${constructor(e=32){super(64,e,8,!1),this.A=Ta[0]|0,this.B=Ta[1]|0,this.C=Ta[2]|0,this.D=Ta[3]|0,this.E=Ta[4]|0,this.F=Ta[5]|0,this.G=Ta[6]|0,this.H=Ta[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:u}=this;return[e,t,r,i,s,o,c,u]}set(e,t,r,i,s,o,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,t){for(let g=0;g<16;g++,t+=4)ka[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const p=ka[g-15],m=ka[g-2],v=bs(p,7)^bs(p,18)^p>>>3,b=bs(m,17)^bs(m,19)^m>>>10;ka[g]=b+ka[g-7]+v+ka[g-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:u,G:f,H:h}=this;for(let g=0;g<64;g++){const p=bs(c,6)^bs(c,11)^bs(c,25),m=h+p+voe(c,u,f)+xoe[g]+ka[g]|0,v=(bs(r,2)^bs(r,13)^bs(r,22))+Eoe(r,i,s)|0;h=f,f=u,u=c,c=o+m|0,o=s,s=i,i=r,r=m+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(r,i,s,o,c,u,f,h)}roundClean(){rs(ka)}destroy(){this.set(0,0,0,0,0,0,0,0),rs(this.buffer)}}const _$=b$(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Soe=_$[0],Ioe=_$[1],Ra=new Uint32Array(80),Ua=new Uint32Array(80);class Dx extends C${constructor(e=64){super(128,e,16,!1),this.Ah=Rn[0]|0,this.Al=Rn[1]|0,this.Bh=Rn[2]|0,this.Bl=Rn[3]|0,this.Ch=Rn[4]|0,this.Cl=Rn[5]|0,this.Dh=Rn[6]|0,this.Dl=Rn[7]|0,this.Eh=Rn[8]|0,this.El=Rn[9]|0,this.Fh=Rn[10]|0,this.Fl=Rn[11]|0,this.Gh=Rn[12]|0,this.Gl=Rn[13]|0,this.Hh=Rn[14]|0,this.Hl=Rn[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:f,El:h,Fh:g,Fl:p,Gh:m,Gl:v,Hh:b,Hl:A}=this;return[e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=h|0,this.Fh=g|0,this.Fl=p|0,this.Gh=m|0,this.Gl=v|0,this.Hh=b|0,this.Hl=A|0}process(e,t){for(let O=0;O<16;O++,t+=4)Ra[O]=e.getUint32(t),Ua[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const T=Ra[O-15]|0,R=Ua[O-15]|0,j=Wa(T,R,1)^Wa(T,R,8)^OO(T,R,7),H=Qa(T,R,1)^Qa(T,R,8)^BO(T,R,7),V=Ra[O-2]|0,M=Ua[O-2]|0,G=Wa(V,M,19)^wp(V,M,61)^OO(V,M,6),Q=Qa(V,M,19)^bp(V,M,61)^BO(V,M,6),z=roe(H,Q,Ua[O-7],Ua[O-16]),P=ioe(z,j,G,Ra[O-7],Ra[O-16]);Ra[O]=P|0,Ua[O]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:f,Dl:h,Eh:g,El:p,Fh:m,Fl:v,Gh:b,Gl:A,Hh:_,Hl:U}=this;for(let O=0;O<80;O++){const T=Wa(g,p,14)^Wa(g,p,18)^wp(g,p,41),R=Qa(g,p,14)^Qa(g,p,18)^bp(g,p,41),j=g&m^~g&b,H=p&v^~p&A,V=soe(U,R,H,Ioe[O],Ua[O]),M=ooe(V,_,T,j,Soe[O],Ra[O]),G=V|0,Q=Wa(r,i,28)^wp(r,i,34)^wp(r,i,39),z=Qa(r,i,28)^bp(r,i,34)^bp(r,i,39),P=r&s^r&c^s&c,D=i&o^i&u^o&u;_=b|0,U=A|0,b=m|0,A=v|0,m=g|0,v=p|0,{h:g,l:p}=Fi(f|0,h|0,M|0,G|0),f=c|0,h=u|0,c=s|0,u=o|0,s=r|0,o=i|0;const w=Bx(G,z,D);r=Px(w,M,Q,P),i=w|0}({h:r,l:i}=Fi(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Fi(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=Fi(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:h}=Fi(this.Dh|0,this.Dl|0,f|0,h|0),{h:g,l:p}=Fi(this.Eh|0,this.El|0,g|0,p|0),{h:m,l:v}=Fi(this.Fh|0,this.Fl|0,m|0,v|0),{h:b,l:A}=Fi(this.Gh|0,this.Gl|0,b|0,A|0),{h:_,l:U}=Fi(this.Hh|0,this.Hl|0,_|0,U|0),this.set(r,i,s,o,c,u,f,h,g,p,m,v,b,A,_,U)}roundClean(){rs(Ra,Ua)}destroy(){rs(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Ooe extends Dx{constructor(){super(48),this.Ah=kn[0]|0,this.Al=kn[1]|0,this.Bh=kn[2]|0,this.Bl=kn[3]|0,this.Ch=kn[4]|0,this.Cl=kn[5]|0,this.Dh=kn[6]|0,this.Dl=kn[7]|0,this.Eh=kn[8]|0,this.El=kn[9]|0,this.Fh=kn[10]|0,this.Fl=kn[11]|0,this.Gh=kn[12]|0,this.Gl=kn[13]|0,this.Hh=kn[14]|0,this.Hl=kn[15]|0}}const Un=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Boe extends Dx{constructor(){super(32),this.Ah=Un[0]|0,this.Al=Un[1]|0,this.Bh=Un[2]|0,this.Bl=Un[3]|0,this.Ch=Un[4]|0,this.Cl=Un[5]|0,this.Dh=Un[6]|0,this.Dl=Un[7]|0,this.Eh=Un[8]|0,this.El=Un[9]|0,this.Fh=Un[10]|0,this.Fl=Un[11]|0,this.Gh=Un[12]|0,this.Gl=Un[13]|0,this.Hh=Un[14]|0,this.Hl=Un[15]|0}}const Poe=$g(()=>new Aoe),Coe=$g(()=>new Dx),_oe=$g(()=>new Ooe);$g(()=>new Boe);const Noe=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Vt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),xe=new Uint32Array(32);function La(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=xe[2*n],f=xe[2*n+1],h=xe[2*e],g=xe[2*e+1],p=xe[2*t],m=xe[2*t+1],v=xe[2*r],b=xe[2*r+1],A=Bx(u,h,o);f=Px(A,f,g,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:Jse(b,v),Dl:Yse(b)},{h:m,l:p}=Fi(m,p,b,v),{Bh:g,Bl:h}={Bh:g^m,Bl:h^p},{Bh:g,Bl:h}={Bh:Wa(g,h,24),Bl:Qa(g,h,24)},xe[2*n]=u,xe[2*n+1]=f,xe[2*e]=h,xe[2*e+1]=g,xe[2*t]=p,xe[2*t+1]=m,xe[2*r]=v,xe[2*r+1]=b}function Fa(n,e,t,r,i,s){const o=i[s],c=i[s+1];let u=xe[2*n],f=xe[2*n+1],h=xe[2*e],g=xe[2*e+1],p=xe[2*t],m=xe[2*t+1],v=xe[2*r],b=xe[2*r+1],A=Bx(u,h,o);f=Px(A,f,g,c),u=A|0,{Dh:b,Dl:v}={Dh:b^f,Dl:v^u},{Dh:b,Dl:v}={Dh:Wa(b,v,16),Dl:Qa(b,v,16)},{h:m,l:p}=Fi(m,p,b,v),{Bh:g,Bl:h}={Bh:g^m,Bl:h^p},{Bh:g,Bl:h}={Bh:wp(g,h,63),Bl:bp(g,h,63)},xe[2*n]=u,xe[2*n+1]=f,xe[2*e]=h,xe[2*e+1]=g,xe[2*t]=p,xe[2*t+1]=m,xe[2*r]=v,xe[2*r+1]=b}function Doe(n,e={},t,r,i){if(Dc(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:c}=e;if(s!==void 0&&(s.length<1||s.length>t))throw new Error("key length must be undefined or 1.."+t);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}class $oe extends Nw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Dc(e),Dc(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=Yp(this.buffer)}update(e){$c(this),e=Mo(e),ns(e);const{blockLen:t,buffer:r,buffer32:i}=this,s=e.length,o=e.byteOffset,c=e.buffer;for(let u=0;u<s;){this.pos===t&&(Za(i),this.compress(i,0,!1),Za(i),this.pos=0);const f=Math.min(t-this.pos,s-u),h=o+u;if(f===t&&!(h%4)&&u+f<s){const g=new Uint32Array(c,h,Math.floor((s-u)/4));Za(g);for(let p=0;u+t<s;p+=i.length,u+=t)this.length+=t,this.compress(g,p,!1);Za(g);continue}r.set(e.subarray(u,u+f),this.pos),this.pos+=f,this.length+=f,u+=f}return this}digestInto(e){$c(this),Cx(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,rs(this.buffer.subarray(t)),Za(r),this.compress(r,0,!0),Za(r);const i=Yp(e);this.get().forEach((s,o)=>i[o]=co(s))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:i,destroyed:s,outputLen:o,pos:c}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=s,e.finished=i,e.length=r,e.pos=c,e.outputLen=o,e}clone(){return this._cloneInto()}}class Toe extends $oe{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=Vt[0]|0,this.v0h=Vt[1]|0,this.v1l=Vt[2]|0,this.v1h=Vt[3]|0,this.v2l=Vt[4]|0,this.v2h=Vt[5]|0,this.v3l=Vt[6]|0,this.v3h=Vt[7]|0,this.v4l=Vt[8]|0,this.v4h=Vt[9]|0,this.v5l=Vt[10]|0,this.v5h=Vt[11]|0,this.v6l=Vt[12]|0,this.v6h=Vt[13]|0,this.v7l=Vt[14]|0,this.v7h=Vt[15]|0,Doe(t,e,64,16,16);let{key:r,personalization:i,salt:s}=e,o=0;if(r!==void 0&&(r=Mo(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=Mo(s);const c=Yp(s);this.v4l^=co(c[0]),this.v4h^=co(c[1]),this.v5l^=co(c[2]),this.v5h^=co(c[3])}if(i!==void 0){i=Mo(i);const c=Yp(i);this.v6l^=co(c[0]),this.v6h^=co(c[1]),this.v7l^=co(c[2]),this.v7h^=co(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:i,v2l:s,v2h:o,v3l:c,v3h:u,v4l:f,v4h:h,v5l:g,v5h:p,v6l:m,v6h:v,v7l:b,v7h:A}=this;return[e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A]}set(e,t,r,i,s,o,c,u,f,h,g,p,m,v,b,A){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=c|0,this.v3h=u|0,this.v4l=f|0,this.v4h=h|0,this.v5l=g|0,this.v5h=p|0,this.v6l=m|0,this.v6h=v|0,this.v7l=b|0,this.v7h=A|0}compress(e,t,r){this.get().forEach((u,f)=>xe[f]=u),xe.set(Vt,16);let{h:i,l:s}=w$(BigInt(this.length));xe[24]=Vt[8]^s,xe[25]=Vt[9]^i,r&&(xe[28]=~xe[28],xe[29]=~xe[29]);let o=0;const c=Noe;for(let u=0;u<12;u++)La(0,4,8,12,e,t+2*c[o++]),Fa(0,4,8,12,e,t+2*c[o++]),La(1,5,9,13,e,t+2*c[o++]),Fa(1,5,9,13,e,t+2*c[o++]),La(2,6,10,14,e,t+2*c[o++]),Fa(2,6,10,14,e,t+2*c[o++]),La(3,7,11,15,e,t+2*c[o++]),Fa(3,7,11,15,e,t+2*c[o++]),La(0,5,10,15,e,t+2*c[o++]),Fa(0,5,10,15,e,t+2*c[o++]),La(1,6,11,12,e,t+2*c[o++]),Fa(1,6,11,12,e,t+2*c[o++]),La(2,7,8,13,e,t+2*c[o++]),Fa(2,7,8,13,e,t+2*c[o++]),La(3,4,9,14,e,t+2*c[o++]),Fa(3,4,9,14,e,t+2*c[o++]);this.v0l^=xe[0]^xe[16],this.v0h^=xe[1]^xe[17],this.v1l^=xe[2]^xe[18],this.v1h^=xe[3]^xe[19],this.v2l^=xe[4]^xe[20],this.v2h^=xe[5]^xe[21],this.v3l^=xe[6]^xe[22],this.v3h^=xe[7]^xe[23],this.v4l^=xe[8]^xe[24],this.v4h^=xe[9]^xe[25],this.v5l^=xe[10]^xe[26],this.v5h^=xe[11]^xe[27],this.v6l^=xe[12]^xe[28],this.v6h^=xe[13]^xe[29],this.v7l^=xe[14]^xe[30],this.v7h^=xe[15]^xe[31],rs(xe)}destroy(){this.destroyed=!0,rs(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}loe(n=>new Toe(n));/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function N$(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function t3(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function rv(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function xr(n,...e){if(!N$(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function NO(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function koe(n,e){xr(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Sc(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Fh(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function Roe(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const Uoe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Loe(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function n3(n){if(typeof n=="string")n=Loe(n);else if(N$(n))n=r3(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function Foe(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function Moe(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const joe=(n,e)=>{function t(r,...i){if(xr(r),!Uoe)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const f=i[0];if(!f)throw new Error("nonce / iv required");n.varSizeNonce?xr(f):xr(f,n.nonceLength)}const s=n.tagLength;s&&i[1]!==void 0&&xr(i[1]);const o=e(r,...i),c=(f,h)=>{if(h!==void 0){if(f!==2)throw new Error("cipher output not supported");xr(h)}};let u=!1;return{encrypt(f,h){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,xr(f),c(o.encrypt.length,h),o.encrypt(f,h)},decrypt(f,h){if(xr(f),s&&f.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return c(o.decrypt.length,h),o.decrypt(f,h)}}}return Object.assign(t,n),t};function DO(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!Hoe(e))throw new Error("invalid output, must be aligned");return e}function $O(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s);n.setUint32(e+4,o,r),n.setUint32(e+0,c,r)}function zoe(n,e,t){t3(t);const r=new Uint8Array(16),i=Roe(r);return $O(i,0,BigInt(e),t),$O(i,8,BigInt(n),t),r}function Hoe(n){return n.byteOffset%4===0}function r3(n){return Uint8Array.from(n)}const D$=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),Voe=D$("expand 16-byte k"),qoe=D$("expand 32-byte k"),Koe=Sc(Voe),Goe=Sc(qoe);function tt(n,e){return n<<e|n>>>32-e}function i3(n){return n.byteOffset%4===0}const xy=64,Woe=16,$$=2**32-1,TO=new Uint32Array;function Qoe(n,e,t,r,i,s,o,c){const u=i.length,f=new Uint8Array(xy),h=Sc(f),g=i3(i)&&i3(s),p=g?Sc(i):TO,m=g?Sc(s):TO;for(let v=0;v<u;o++){if(n(e,t,r,h,o,c),o>=$$)throw new Error("arx: counter overflow");const b=Math.min(xy,u-v);if(g&&b===xy){const A=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let _=0,U;_<Woe;_++)U=A+_,m[U]=p[U]^h[_];v+=xy;continue}for(let A=0,_;A<b;A++)_=v+A,s[_]=i[_]^f[A];v+=b}}function Zoe(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=Foe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return rv(i),rv(o),t3(s),t3(t),(c,u,f,h,g=0)=>{xr(c),xr(u),xr(f);const p=f.length;if(h===void 0&&(h=new Uint8Array(p)),xr(h),rv(g),g<0||g>=$$)throw new Error("arx: counter overflow");if(h.length<p)throw new Error(`arx: output (${h.length}) is shorter than data (${p})`);const m=[];let v=c.length,b,A;if(v===32)m.push(b=r3(c)),A=Goe;else if(v===16&&t)b=new Uint8Array(32),b.set(c),b.set(c,16),A=Koe,m.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);i3(u)||m.push(u=r3(u));const _=Sc(b);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,_,Sc(u.subarray(0,16)),_),u=u.subarray(16)}const U=16-i;if(U!==u.length)throw new Error(`arx: nonce must be ${U} or 16 bytes`);if(U!==12){const T=new Uint8Array(12);T.set(u,s?0:12-u.length),u=T,m.push(u)}const O=Sc(u);return Qoe(n,A,_,O,f,h,g,o),Fh(...m),h}}const gn=(n,e)=>n[e++]&255|(n[e++]&255)<<8;class Joe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=n3(e),xr(e,32);const t=gn(e,0),r=gn(e,2),i=gn(e,4),s=gn(e,6),o=gn(e,8),c=gn(e,10),u=gn(e,12),f=gn(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let h=0;h<8;h++)this.pad[h]=gn(e,16+2*h)}process(e,t,r=!1){const i=r?0:2048,{h:s,r:o}=this,c=o[0],u=o[1],f=o[2],h=o[3],g=o[4],p=o[5],m=o[6],v=o[7],b=o[8],A=o[9],_=gn(e,t+0),U=gn(e,t+2),O=gn(e,t+4),T=gn(e,t+6),R=gn(e,t+8),j=gn(e,t+10),H=gn(e,t+12),V=gn(e,t+14);let M=s[0]+(_&8191),G=s[1]+((_>>>13|U<<3)&8191),Q=s[2]+((U>>>10|O<<6)&8191),z=s[3]+((O>>>7|T<<9)&8191),P=s[4]+((T>>>4|R<<12)&8191),D=s[5]+(R>>>1&8191),w=s[6]+((R>>>14|j<<2)&8191),x=s[7]+((j>>>11|H<<5)&8191),B=s[8]+((H>>>8|V<<8)&8191),C=s[9]+(V>>>5|i),I=0,N=I+M*c+G*(5*A)+Q*(5*b)+z*(5*v)+P*(5*m);I=N>>>13,N&=8191,N+=D*(5*p)+w*(5*g)+x*(5*h)+B*(5*f)+C*(5*u),I+=N>>>13,N&=8191;let $=I+M*u+G*c+Q*(5*A)+z*(5*b)+P*(5*v);I=$>>>13,$&=8191,$+=D*(5*m)+w*(5*p)+x*(5*g)+B*(5*h)+C*(5*f),I+=$>>>13,$&=8191;let L=I+M*f+G*u+Q*c+z*(5*A)+P*(5*b);I=L>>>13,L&=8191,L+=D*(5*v)+w*(5*m)+x*(5*p)+B*(5*g)+C*(5*h),I+=L>>>13,L&=8191;let Y=I+M*h+G*f+Q*u+z*c+P*(5*A);I=Y>>>13,Y&=8191,Y+=D*(5*b)+w*(5*v)+x*(5*m)+B*(5*p)+C*(5*g),I+=Y>>>13,Y&=8191;let q=I+M*g+G*h+Q*f+z*u+P*c;I=q>>>13,q&=8191,q+=D*(5*A)+w*(5*b)+x*(5*v)+B*(5*m)+C*(5*p),I+=q>>>13,q&=8191;let Z=I+M*p+G*g+Q*h+z*f+P*u;I=Z>>>13,Z&=8191,Z+=D*c+w*(5*A)+x*(5*b)+B*(5*v)+C*(5*m),I+=Z>>>13,Z&=8191;let te=I+M*m+G*p+Q*g+z*h+P*f;I=te>>>13,te&=8191,te+=D*u+w*c+x*(5*A)+B*(5*b)+C*(5*v),I+=te>>>13,te&=8191;let re=I+M*v+G*m+Q*p+z*g+P*h;I=re>>>13,re&=8191,re+=D*f+w*u+x*c+B*(5*A)+C*(5*b),I+=re>>>13,re&=8191;let le=I+M*b+G*v+Q*m+z*p+P*g;I=le>>>13,le&=8191,le+=D*h+w*f+x*u+B*c+C*(5*A),I+=le>>>13,le&=8191;let se=I+M*A+G*b+Q*v+z*m+P*p;I=se>>>13,se&=8191,se+=D*g+w*h+x*f+B*u+C*c,I+=se>>>13,se&=8191,I=(I<<2)+I|0,I=I+N|0,N=I&8191,I=I>>>13,$+=I,s[0]=N,s[1]=$,s[2]=L,s[3]=Y,s[4]=q,s[5]=Z,s[6]=te,s[7]=re,s[8]=le,s[9]=se}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=8192;let s=(i^1)-1;for(let c=0;c<10;c++)r[c]&=s;s=~s;for(let c=0;c<10;c++)e[c]=e[c]&s|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let c=1;c<8;c++)o=(e[c]+t[c]|0)+(o>>>16)|0,e[c]=o&65535;Fh(r)}update(e){NO(this),e=n3(e),xr(e);const{buffer:t,blockLen:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}t.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){Fh(this.h,this.r,this.buffer,this.pad)}digestInto(e){NO(this),koe(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}function Yoe(n){const e=(r,i)=>n(i).update(n3(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const Xoe=Yoe(n=>new Joe(n));function eae(n,e,t,r,i,s=20){let o=n[0],c=n[1],u=n[2],f=n[3],h=e[0],g=e[1],p=e[2],m=e[3],v=e[4],b=e[5],A=e[6],_=e[7],U=i,O=t[0],T=t[1],R=t[2],j=o,H=c,V=u,M=f,G=h,Q=g,z=p,P=m,D=v,w=b,x=A,B=_,C=U,I=O,N=T,$=R;for(let Y=0;Y<s;Y+=2)j=j+G|0,C=tt(C^j,16),D=D+C|0,G=tt(G^D,12),j=j+G|0,C=tt(C^j,8),D=D+C|0,G=tt(G^D,7),H=H+Q|0,I=tt(I^H,16),w=w+I|0,Q=tt(Q^w,12),H=H+Q|0,I=tt(I^H,8),w=w+I|0,Q=tt(Q^w,7),V=V+z|0,N=tt(N^V,16),x=x+N|0,z=tt(z^x,12),V=V+z|0,N=tt(N^V,8),x=x+N|0,z=tt(z^x,7),M=M+P|0,$=tt($^M,16),B=B+$|0,P=tt(P^B,12),M=M+P|0,$=tt($^M,8),B=B+$|0,P=tt(P^B,7),j=j+Q|0,$=tt($^j,16),x=x+$|0,Q=tt(Q^x,12),j=j+Q|0,$=tt($^j,8),x=x+$|0,Q=tt(Q^x,7),H=H+z|0,C=tt(C^H,16),B=B+C|0,z=tt(z^B,12),H=H+z|0,C=tt(C^H,8),B=B+C|0,z=tt(z^B,7),V=V+P|0,I=tt(I^V,16),D=D+I|0,P=tt(P^D,12),V=V+P|0,I=tt(I^V,8),D=D+I|0,P=tt(P^D,7),M=M+G|0,N=tt(N^M,16),w=w+N|0,G=tt(G^w,12),M=M+G|0,N=tt(N^M,8),w=w+N|0,G=tt(G^w,7);let L=0;r[L++]=o+j|0,r[L++]=c+H|0,r[L++]=u+V|0,r[L++]=f+M|0,r[L++]=h+G|0,r[L++]=g+Q|0,r[L++]=p+z|0,r[L++]=m+P|0,r[L++]=v+D|0,r[L++]=b+w|0,r[L++]=A+x|0,r[L++]=_+B|0,r[L++]=U+C|0,r[L++]=O+I|0,r[L++]=T+N|0,r[L++]=R+$|0}const tae=Zoe(eae,{counterRight:!1,counterLength:4,allowShortKeys:!1}),nae=new Uint8Array(16),kO=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(nae.subarray(t))},rae=new Uint8Array(32);function RO(n,e,t,r,i){const s=n(e,t,rae),o=Xoe.create(s);i&&kO(o,i),kO(o,r);const c=zoe(r.length,i?i.length:0,!0);o.update(c);const u=o.digest();return Fh(s,c),u}const iae=n=>(e,t,r)=>({encrypt(i,s){const o=i.length;s=DO(o+16,s,!1),s.set(i);const c=s.subarray(0,-16);n(e,t,c,c,1);const u=RO(n,e,t,c,r);return s.set(u,o),Fh(u),s},decrypt(i,s){s=DO(i.length-16,s,!1);const o=i.subarray(0,-16),c=i.subarray(-16),u=RO(n,e,t,o,r);if(!Moe(c,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),n(e,t,s,s,1),Fh(u),s}});joe({blockSize:64,nonceLength:12,tagLength:16},iae(tae));class T$ extends Nw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,v$(e);const r=Mo(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),rs(s)}update(e){return $c(this),this.iHash.update(e),this}digestInto(e){$c(this),ns(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const k$=(n,e,t)=>new T$(n,e).update(t).digest();k$.create=(n,e)=>new T$(n,e);Uint8Array.from([0]);const $x=BigInt(0),s3=BigInt(1);function km(n,e=""){if(typeof n!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof n)}return n}function Nl(n,e,t=""){const r=_w(n),i=n==null?void 0:n.length,s=e!==void 0;if(!r||s&&i!==e){const o=t&&`"${t}" `,c=s?` of length ${e}`:"",u=r?`length=${i}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+c+", got "+u)}return n}function Ay(n){const e=n.toString(16);return e.length&1?"0"+e:e}function R$(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?$x:BigInt("0x"+n)}function Dw(n){return R$(Tf(n))}function Rm(n){return ns(n),R$(Tf(Uint8Array.from(n).reverse()))}function Tx(n,e){return Tm(n.toString(16).padStart(e*2,"0"))}function kx(n,e){return Tx(n,e).reverse()}function Hn(n,e,t){let r;if(typeof e=="string")try{r=Tm(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(_w(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}const iv=n=>typeof n=="bigint"&&$x<=n;function sae(n,e,t){return iv(n)&&iv(e)&&iv(t)&&e<=n&&n<t}function o3(n,e,t,r){if(!sae(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function U$(n){let e;for(e=0;n>$x;n>>=s3,e+=1);return e}const Tg=n=>(s3<<BigInt(n))-s3;function oae(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=p=>new Uint8Array(p),i=p=>Uint8Array.of(p);let s=r(n),o=r(n),c=0;const u=()=>{s.fill(1),o.fill(0),c=0},f=(...p)=>t(o,s,...p),h=(p=r(0))=>{o=f(i(0),p),s=f(),p.length!==0&&(o=f(i(1),p),s=f())},g=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const m=[];for(;p<e;){s=f();const v=s.slice();m.push(v),p+=s.length}return nc(...m)};return(p,m)=>{u(),h(p);let v;for(;!(v=m(g()));)h();return u(),v}}function $w(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,s,o){const c=n[i];if(o&&c===void 0)return;const u=typeof c;if(u!==s||c===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${u}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(t).forEach(([i,s])=>r(i,s,!0))}function UO(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const Br=BigInt(0),ir=BigInt(1),Dl=BigInt(2),L$=BigInt(3),F$=BigInt(4),M$=BigInt(5),aae=BigInt(7),j$=BigInt(8),cae=BigInt(9),z$=BigInt(16);function Wr(n,e){const t=n%e;return t>=Br?t:e+t}function ki(n,e,t){let r=n;for(;e-- >Br;)r*=r,r%=t;return r}function LO(n,e){if(n===Br)throw new Error("invert: expected non-zero number");if(e<=Br)throw new Error("invert: expected positive modulus, got "+e);let t=Wr(n,e),r=e,i=Br,s=ir;for(;t!==Br;){const o=r/t,c=r%t,u=i-s*o;r=t,t=c,i=s,s=u}if(r!==ir)throw new Error("invert: does not exist");return Wr(i,e)}function Rx(n,e,t){if(!n.eql(n.sqr(e),t))throw new Error("Cannot find square root")}function H$(n,e){const t=(n.ORDER+ir)/F$,r=n.pow(e,t);return Rx(n,r,e),r}function lae(n,e){const t=(n.ORDER-M$)/j$,r=n.mul(e,Dl),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,Dl),i),c=n.mul(s,n.sub(o,n.ONE));return Rx(n,c,e),c}function uae(n){const e=Fc(n),t=V$(n),r=t(e,e.neg(e.ONE)),i=t(e,r),s=t(e,e.neg(r)),o=(n+aae)/z$;return(c,u)=>{let f=c.pow(u,o),h=c.mul(f,r);const g=c.mul(f,i),p=c.mul(f,s),m=c.eql(c.sqr(h),u),v=c.eql(c.sqr(g),u);f=c.cmov(f,h,m),h=c.cmov(p,g,v);const b=c.eql(c.sqr(h),u),A=c.cmov(f,h,b);return Rx(c,A,u),A}}function V$(n){if(n<L$)throw new Error("sqrt is not defined for small field");let e=n-ir,t=0;for(;e%Dl===Br;)e/=Dl,t++;let r=Dl;const i=Fc(n);for(;FO(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return H$;let s=i.pow(r,e);const o=(e+ir)/Dl;return function(c,u){if(c.is0(u))return u;if(FO(c,u)!==1)throw new Error("Cannot find square root");let f=t,h=c.mul(c.ONE,s),g=c.pow(u,e),p=c.pow(u,o);for(;!c.eql(g,c.ONE);){if(c.is0(g))return c.ZERO;let m=1,v=c.sqr(g);for(;!c.eql(v,c.ONE);)if(m++,v=c.sqr(v),m===f)throw new Error("Cannot find square root");const b=ir<<BigInt(f-m-1),A=c.pow(h,b);f=m,h=c.sqr(A),g=c.mul(g,h),p=c.mul(p,A)}return p}}function fae(n){return n%F$===L$?H$:n%j$===M$?lae:n%z$===cae?uae(n):V$(n)}const hae=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function dae(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=hae.reduce((r,i)=>(r[i]="function",r),e);return $w(n,t),n}function pae(n,e,t){if(t<Br)throw new Error("invalid exponent, negatives unsupported");if(t===Br)return n.ONE;if(t===ir)return e;let r=n.ONE,i=e;for(;t>Br;)t&ir&&(r=n.mul(r,i)),i=n.sqr(i),t>>=ir;return r}function q$(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,c,u)=>n.is0(c)?o:(r[u]=o,n.mul(o,c)),n.ONE),s=n.inv(i);return e.reduceRight((o,c,u)=>n.is0(c)?o:(r[u]=n.mul(o,r[u]),n.mul(o,c)),s),r}function FO(n,e){const t=(n.ORDER-ir)/Dl,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function K$(n,e){e!==void 0&&Dc(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Fc(n,e,t=!1,r={}){if(n<=Br)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,s,o=!1,c;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const p=e;p.BITS&&(i=p.BITS),p.sqrt&&(s=p.sqrt),typeof p.isLE=="boolean"&&(t=p.isLE),typeof p.modFromBytes=="boolean"&&(o=p.modFromBytes),c=p.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:u,nByteLength:f}=K$(n,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const g=Object.freeze({ORDER:n,isLE:t,BITS:u,BYTES:f,MASK:Tg(u),ZERO:Br,ONE:ir,allowedLengths:c,create:p=>Wr(p,n),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Br<=p&&p<n},is0:p=>p===Br,isValidNot0:p=>!g.is0(p)&&g.isValid(p),isOdd:p=>(p&ir)===ir,neg:p=>Wr(-p,n),eql:(p,m)=>p===m,sqr:p=>Wr(p*p,n),add:(p,m)=>Wr(p+m,n),sub:(p,m)=>Wr(p-m,n),mul:(p,m)=>Wr(p*m,n),pow:(p,m)=>pae(g,p,m),div:(p,m)=>Wr(p*LO(m,n),n),sqrN:p=>p*p,addN:(p,m)=>p+m,subN:(p,m)=>p-m,mulN:(p,m)=>p*m,inv:p=>LO(p,n),sqrt:s||(p=>(h||(h=fae(n)),h(g,p))),toBytes:p=>t?kx(p,f):Tx(p,f),fromBytes:(p,m=!0)=>{if(c){if(!c.includes(p.length)||p.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+p.length);const b=new Uint8Array(f);b.set(p,t?0:b.length-p.length),p=b}if(p.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+p.length);let v=t?Rm(p):Dw(p);if(o&&(v=Wr(v,n)),!m&&!g.isValid(v))throw new Error("invalid field element: outside of range 0..ORDER");return v},invertBatch:p=>q$(g,p),cmov:(p,m,v)=>v?m:p});return Object.freeze(g)}function G$(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function W$(n){const e=G$(n);return e+Math.ceil(e/2)}function gae(n,e,t=!1){const r=n.length,i=G$(e),s=W$(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?Rm(n):Dw(n),c=Wr(o,e-ir)+ir;return t?kx(c,i):Tx(c,i)}const Mh=BigInt(0),$l=BigInt(1);function Um(n,e){const t=e.negate();return n?t:e}function sv(n,e){const t=q$(n.Fp,e.map(r=>r.Z));return e.map((r,i)=>n.fromAffine(r.toAffine(t[i])))}function Q$(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function ov(n,e){Q$(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=Tg(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function MO(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t;let c=Number(n&i),u=n>>o;c>r&&(c-=s,u+=$l);const f=e*r,h=f+Math.abs(c)-1,g=c===0,p=c<0,m=e%2!==0;return{nextN:u,offset:h,isZero:g,isNeg:p,isNegF:m,offsetF:f}}function yae(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function mae(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const av=new WeakMap,Z$=new WeakMap;function cv(n){return Z$.get(n)||1}function jO(n){if(n!==Mh)throw new Error("invalid wNAF")}class wae{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>Mh;)t&$l&&(r=r.add(i)),i=i.double(),t>>=$l;return r}precomputeWindow(e,t){const{windows:r,windowSize:i}=ov(t,this.bits),s=[];let o=e,c=o;for(let u=0;u<r;u++){c=o,s.push(c);for(let f=1;f<i;f++)c=c.add(o),s.push(c);o=c.double()}return s}wNAF(e,t,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=ov(e,this.bits);for(let c=0;c<o.windows;c++){const{nextN:u,offset:f,isZero:h,isNeg:g,isNegF:p,offsetF:m}=MO(r,c,o);r=u,h?s=s.add(Um(p,t[m])):i=i.add(Um(g,t[f]))}return jO(r),{p:i,f:s}}wNAFUnsafe(e,t,r,i=this.ZERO){const s=ov(e,this.bits);for(let o=0;o<s.windows&&r!==Mh;o++){const{nextN:c,offset:u,isZero:f,isNeg:h}=MO(r,o,s);if(r=c,!f){const g=t[u];i=i.add(h?g.negate():g)}}return jO(r),i}getPrecomputes(e,t,r){let i=av.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof r=="function"&&(i=r(i)),av.set(t,i))),i}cached(e,t,r){const i=cv(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){const s=cv(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),t,i)}createCache(e,t){Q$(t,this.bits),Z$.set(e,t),av.delete(e)}hasCache(e){return cv(e)!==1}}function bae(n,e,t,r){let i=e,s=n.ZERO,o=n.ZERO;for(;t>Mh||r>Mh;)t&$l&&(s=s.add(i)),r&$l&&(o=o.add(i)),i=i.double(),t>>=$l,r>>=$l;return{p1:s,p2:o}}function vae(n,e,t,r){yae(t,n),mae(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=U$(BigInt(i));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const f=Tg(u),h=new Array(Number(f)+1).fill(o),g=Math.floor((e.BITS-1)/u)*u;let p=o;for(let m=g;m>=0;m-=u){h.fill(o);for(let b=0;b<s;b++){const A=r[b],_=Number(A>>BigInt(m)&f);h[_]=h[_].add(t[b])}let v=o;for(let b=h.length-1,A=o;b>0;b--)A=A.add(h[b]),v=v.add(A);if(p=p.add(v),m!==0)for(let b=0;b<u;b++)p=p.double()}return p}function zO(n,e,t){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return dae(e),e}else return Fc(n,{isLE:t})}function Eae(n,e,t={},r){if(r===void 0&&(r=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>Mh))throw new Error(`CURVE.${c} must be positive bigint`)}const i=zO(e.p,t.Fp,r),s=zO(e.n,t.Fn,r),o=["Gx","Gy","a","b"];for(const c of o)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),S$("HashToScalar-");const sp=BigInt(0),af=BigInt(1),Sy=BigInt(2);function xae(n){return $w(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function Aae(n){const e=xae(n),{P:t,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,c=r==="x25519";if(!c&&r!=="x448")throw new Error("invalid type");const u=o||_x,f=c?255:448,h=c?32:56,g=BigInt(c?9:5),p=BigInt(c?121665:39081),m=c?Sy**BigInt(254):Sy**BigInt(447),v=c?BigInt(8)*Sy**BigInt(251)-af:BigInt(4)*Sy**BigInt(445)-af,b=m+v+af,A=z=>Wr(z,t),_=U(g);function U(z){return kx(A(z),h)}function O(z){const P=Hn("u coordinate",z,h);return c&&(P[31]&=127),A(Rm(P))}function T(z){return Rm(i(Hn("scalar",z,h)))}function R(z,P){const D=V(O(P),T(z));if(D===sp)throw new Error("invalid private or public key received");return U(D)}function j(z){return R(z,_)}function H(z,P,D){const w=A(z*(P-D));return P=A(P-w),D=A(D+w),{x_2:P,x_3:D}}function V(z,P){o3("u",z,sp,t),o3("scalar",P,m,b);const D=P,w=z;let x=af,B=sp,C=z,I=af,N=sp;for(let L=BigInt(f-1);L>=sp;L--){const Y=D>>L&af;N^=Y,{x_2:x,x_3:C}=H(N,x,C),{x_2:B,x_3:I}=H(N,B,I),N=Y;const q=x+B,Z=A(q*q),te=x-B,re=A(te*te),le=Z-re,se=C+I,ue=C-I,Ne=A(ue*q),Re=A(se*te),ke=Ne+Re,Ve=Ne-Re;C=A(ke*ke),I=A(w*A(Ve*Ve)),x=A(Z*re),B=A(le*(Z+A(p*le)))}({x_2:x,x_3:C}=H(N,x,C)),{x_2:B,x_3:I}=H(N,B,I);const $=s(B);return A(x*$)}const M={secretKey:h,publicKey:h,seed:h},G=(z=u(h))=>(ns(z,M.seed),z);function Q(z){const P=G(z);return{secretKey:P,publicKey:j(P)}}return{keygen:Q,getSharedSecret:(z,P)=>R(z,P),getPublicKey:z=>j(z),scalarMult:R,scalarMultBase:j,utils:{randomSecretKey:G,randomPrivateKey:G},GuBytes:_.slice(),lengths:M}}const Sae=BigInt(1),HO=BigInt(2),Iae=BigInt(3),Oae=BigInt(5);BigInt(8);const J$=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Bae={p:J$,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Pae(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=J$,o=n*n%s*n%s,c=ki(o,HO,s)*o%s,u=ki(c,Sae,s)*n%s,f=ki(u,Oae,s)*u%s,h=ki(f,e,s)*f%s,g=ki(h,t,s)*h%s,p=ki(g,r,s)*g%s,m=ki(p,i,s)*p%s,v=ki(m,i,s)*p%s,b=ki(v,e,s)*f%s;return{pow_p_5_8:ki(b,HO,s)*n%s,b2:o}}function Cae(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const _ae=Fc(Bae.p,{isLE:!0});(()=>{const n=_ae.ORDER;return Aae({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=Pae(e);return Wr(ki(t,Iae,n)*r,n)},adjustScalarBytes:Cae})})();const VO=(n,e)=>(n+(n>=0?e:-e)/Y$)/e;function Nae(n,e,t){const[[r,i],[s,o]]=e,c=VO(o*n,t),u=VO(-i*n,t);let f=n-c*r-u*s,h=-c*i-u*o;const g=f<ko,p=h<ko;g&&(f=-f),p&&(h=-h);const m=Tg(Math.ceil(U$(t)/2))+kf;if(f<ko||f>=m||h<ko||h>=m)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:g,k1:f,k2neg:p,k2:h}}function a3(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function lv(n,e){const t={};for(let r of Object.keys(e))t[r]=n[r]===void 0?e[r]:n[r];return km(t.lowS,"lowS"),km(t.prehash,"prehash"),t.format!==void 0&&a3(t.format),t}class Dae extends Error{constructor(e=""){super(e)}}const mo={Err:Dae,_tlv:{encode:(n,e)=>{const{Err:t}=mo;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=Ay(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?Ay(i.length/2|128):"";return Ay(n)+s+i+e},decode(n,e){const{Err:t}=mo;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new t("tlv.decode: length bytes not complete");if(f[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of f)o=o<<8|h;if(r+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=mo;if(n<ko)throw new e("integer: negative integers are not allowed");let t=Ay(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=mo;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Dw(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=mo,i=Hn("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,s),{v:f,l:h}=r.decode(2,u);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(f)}},hexFromSig(n){const{_tlv:e,_int:t}=mo,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},ko=BigInt(0),kf=BigInt(1),Y$=BigInt(2),Iy=BigInt(3),$ae=BigInt(4);function bf(n,e){const{BYTES:t}=n;let r;if(typeof e=="bigint")r=e;else{let i=Hn("private key",e);try{r=n.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Tae(n,e={}){const t=Eae("weierstrass",n,e),{Fp:r,Fn:i}=t;let s=t.CURVE;const{h:o,n:c}=s;$w(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=e;if(u&&(!r.is0(s.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=e9(r,i);function h(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function g(z,P,D){const{x:w,y:x}=P.toAffine(),B=r.toBytes(w);if(km(D,"isCompressed"),D){h();const C=!r.isOdd(x);return nc(X$(C),B)}else return nc(Uint8Array.of(4),B,r.toBytes(x))}function p(z){Nl(z,void 0,"Point");const{publicKey:P,publicKeyUncompressed:D}=f,w=z.length,x=z[0],B=z.subarray(1);if(w===P&&(x===2||x===3)){const C=r.fromBytes(B);if(!r.isValid(C))throw new Error("bad point: is not on curve, wrong x");const I=b(C);let N;try{N=r.sqrt(I)}catch(L){const Y=L instanceof Error?": "+L.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}h();const $=r.isOdd(N);return(x&1)===1!==$&&(N=r.neg(N)),{x:C,y:N}}else if(w===D&&x===4){const C=r.BYTES,I=r.fromBytes(B.subarray(0,C)),N=r.fromBytes(B.subarray(C,C*2));if(!A(I,N))throw new Error("bad point: is not on curve");return{x:I,y:N}}else throw new Error(`bad point: got length ${w}, expected compressed=${P} or uncompressed=${D}`)}const m=e.toBytes||g,v=e.fromBytes||p;function b(z){const P=r.sqr(z),D=r.mul(P,z);return r.add(r.add(D,r.mul(z,s.a)),s.b)}function A(z,P){const D=r.sqr(P),w=b(z);return r.eql(D,w)}if(!A(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const _=r.mul(r.pow(s.a,Iy),$ae),U=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(_,U)))throw new Error("bad curve params: a or b");function O(z,P,D=!1){if(!r.isValid(P)||D&&r.is0(P))throw new Error(`bad point coordinate ${z}`);return P}function T(z){if(!(z instanceof M))throw new Error("ProjectivePoint expected")}function R(z){if(!u||!u.basises)throw new Error("no endo");return Nae(z,u.basises,i.ORDER)}const j=UO((z,P)=>{const{X:D,Y:w,Z:x}=z;if(r.eql(x,r.ONE))return{x:D,y:w};const B=z.is0();P==null&&(P=B?r.ONE:r.inv(x));const C=r.mul(D,P),I=r.mul(w,P),N=r.mul(x,P);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(N,r.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),H=UO(z=>{if(z.is0()){if(e.allowInfinityPoint&&!r.is0(z.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:D}=z.toAffine();if(!r.isValid(P)||!r.isValid(D))throw new Error("bad point: x or y not field elements");if(!A(P,D))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function V(z,P,D,w,x){return D=new M(r.mul(D.X,z),D.Y,D.Z),P=Um(w,P),D=Um(x,D),P.add(D)}class M{constructor(P,D,w){this.X=O("x",P),this.Y=O("y",D,!0),this.Z=O("z",w),Object.freeze(this)}static CURVE(){return s}static fromAffine(P){const{x:D,y:w}=P||{};if(!P||!r.isValid(D)||!r.isValid(w))throw new Error("invalid affine point");if(P instanceof M)throw new Error("projective point not allowed");return r.is0(D)&&r.is0(w)?M.ZERO:new M(D,w,r.ONE)}static fromBytes(P){const D=M.fromAffine(v(Nl(P,void 0,"point")));return D.assertValidity(),D}static fromHex(P){return M.fromBytes(Hn("pointHex",P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,D=!0){return Q.createCache(this,P),D||this.multiply(Iy),this}assertValidity(){H(this)}hasEvenY(){const{y:P}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(P)}equals(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P,N=r.eql(r.mul(D,I),r.mul(B,x)),$=r.eql(r.mul(w,I),r.mul(C,x));return N&&$}negate(){return new M(this.X,r.neg(this.Y),this.Z)}double(){const{a:P,b:D}=s,w=r.mul(D,Iy),{X:x,Y:B,Z:C}=this;let I=r.ZERO,N=r.ZERO,$=r.ZERO,L=r.mul(x,x),Y=r.mul(B,B),q=r.mul(C,C),Z=r.mul(x,B);return Z=r.add(Z,Z),$=r.mul(x,C),$=r.add($,$),I=r.mul(P,$),N=r.mul(w,q),N=r.add(I,N),I=r.sub(Y,N),N=r.add(Y,N),N=r.mul(I,N),I=r.mul(Z,I),$=r.mul(w,$),q=r.mul(P,q),Z=r.sub(L,q),Z=r.mul(P,Z),Z=r.add(Z,$),$=r.add(L,L),L=r.add($,L),L=r.add(L,q),L=r.mul(L,Z),N=r.add(N,L),q=r.mul(B,C),q=r.add(q,q),L=r.mul(q,Z),I=r.sub(I,L),$=r.mul(q,Y),$=r.add($,$),$=r.add($,$),new M(I,N,$)}add(P){T(P);const{X:D,Y:w,Z:x}=this,{X:B,Y:C,Z:I}=P;let N=r.ZERO,$=r.ZERO,L=r.ZERO;const Y=s.a,q=r.mul(s.b,Iy);let Z=r.mul(D,B),te=r.mul(w,C),re=r.mul(x,I),le=r.add(D,w),se=r.add(B,C);le=r.mul(le,se),se=r.add(Z,te),le=r.sub(le,se),se=r.add(D,x);let ue=r.add(B,I);return se=r.mul(se,ue),ue=r.add(Z,re),se=r.sub(se,ue),ue=r.add(w,x),N=r.add(C,I),ue=r.mul(ue,N),N=r.add(te,re),ue=r.sub(ue,N),L=r.mul(Y,se),N=r.mul(q,re),L=r.add(N,L),N=r.sub(te,L),L=r.add(te,L),$=r.mul(N,L),te=r.add(Z,Z),te=r.add(te,Z),re=r.mul(Y,re),se=r.mul(q,se),te=r.add(te,re),re=r.sub(Z,re),re=r.mul(Y,re),se=r.add(se,re),Z=r.mul(te,se),$=r.add($,Z),Z=r.mul(ue,se),N=r.mul(le,N),N=r.sub(N,Z),Z=r.mul(le,te),L=r.mul(ue,L),L=r.add(L,Z),new M(N,$,L)}subtract(P){return this.add(P.negate())}is0(){return this.equals(M.ZERO)}multiply(P){const{endo:D}=e;if(!i.isValidNot0(P))throw new Error("invalid scalar: out of range");let w,x;const B=C=>Q.cached(this,C,I=>sv(M,I));if(D){const{k1neg:C,k1:I,k2neg:N,k2:$}=R(P),{p:L,f:Y}=B(I),{p:q,f:Z}=B($);x=Y.add(Z),w=V(D.beta,L,q,C,N)}else{const{p:C,f:I}=B(P);w=C,x=I}return sv(M,[w,x])[0]}multiplyUnsafe(P){const{endo:D}=e,w=this;if(!i.isValid(P))throw new Error("invalid scalar: out of range");if(P===ko||w.is0())return M.ZERO;if(P===kf)return w;if(Q.hasCache(this))return this.multiply(P);if(D){const{k1neg:x,k1:B,k2neg:C,k2:I}=R(P),{p1:N,p2:$}=bae(M,w,B,I);return V(D.beta,N,$,x,C)}else return Q.unsafe(w,P)}multiplyAndAddUnsafe(P,D,w){const x=this.multiplyUnsafe(D).add(P.multiplyUnsafe(w));return x.is0()?void 0:x}toAffine(P){return j(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return o===kf?!0:P?P(M,this):Q.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:P}=e;return o===kf?this:P?P(M,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(P=!0){return km(P,"isCompressed"),this.assertValidity(),m(M,this,P)}toHex(P=!0){return Tf(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(P=!0){return this.toBytes(P)}_setWindowSize(P){this.precompute(P)}static normalizeZ(P){return sv(M,P)}static msm(P,D){return vae(M,i,P,D)}static fromPrivateKey(P){return M.BASE.multiply(bf(i,P))}}M.BASE=new M(s.Gx,s.Gy,r.ONE),M.ZERO=new M(r.ZERO,r.ONE,r.ZERO),M.Fp=r,M.Fn=i;const G=i.BITS,Q=new wae(M,e.endo?Math.ceil(G/2):G);return M.BASE.precompute(8),M}function X$(n){return Uint8Array.of(n?2:3)}function e9(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function kae(n,e={}){const{Fn:t}=n,r=e.randomBytes||_x,i=Object.assign(e9(n.Fp,t),{seed:W$(t.ORDER)});function s(p){try{return!!bf(t,p)}catch{return!1}}function o(p,m){const{publicKey:v,publicKeyUncompressed:b}=i;try{const A=p.length;return m===!0&&A!==v||m===!1&&A!==b?!1:!!n.fromBytes(p)}catch{return!1}}function c(p=r(i.seed)){return gae(Nl(p,i.seed,"seed"),t.ORDER)}function u(p,m=!0){return n.BASE.multiply(bf(t,p)).toBytes(m)}function f(p){const m=c(p);return{secretKey:m,publicKey:u(m)}}function h(p){if(typeof p=="bigint")return!1;if(p instanceof n)return!0;const{secretKey:m,publicKey:v,publicKeyUncompressed:b}=i;if(t.allowedLengths||m===v)return;const A=Hn("key",p).length;return A===v||A===b}function g(p,m,v=!0){if(h(p)===!0)throw new Error("first arg must be private key");if(h(m)===!1)throw new Error("second arg must be public key");const b=bf(t,p);return n.fromHex(m).multiply(b).toBytes(v)}return Object.freeze({getPublicKey:u,getSharedSecret:g,keygen:f,Point:n,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:s,randomPrivateKey:c,normPrivateKeyToScalar:p=>bf(t,p),precompute(p=8,m=n.BASE){return m.precompute(p,!1)}},lengths:i})}function Rae(n,e,t={}){v$(e),$w(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||_x,i=t.hmac||((D,...w)=>k$(e,D,nc(...w))),{Fp:s,Fn:o}=n,{ORDER:c,BITS:u}=o,{keygen:f,getPublicKey:h,getSharedSecret:g,utils:p,lengths:m}=kae(n,t),v={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},b="compact";function A(D){const w=c>>kf;return D>w}function _(D,w){if(!o.isValidNot0(w))throw new Error(`invalid signature ${D}: out of range 1..Point.Fn.ORDER`);return w}function U(D,w){a3(w);const x=m.signature,B=w==="compact"?x:w==="recovered"?x+1:void 0;return Nl(D,B,`${w} signature`)}class O{constructor(w,x,B){this.r=_("r",w),this.s=_("s",x),B!=null&&(this.recovery=B),Object.freeze(this)}static fromBytes(w,x=b){U(w,x);let B;if(x==="der"){const{r:$,s:L}=mo.toSig(Nl(w));return new O($,L)}x==="recovered"&&(B=w[0],x="compact",w=w.subarray(1));const C=o.BYTES,I=w.subarray(0,C),N=w.subarray(C,C*2);return new O(o.fromBytes(I),o.fromBytes(N),B)}static fromHex(w,x){return this.fromBytes(Tm(w),x)}addRecoveryBit(w){return new O(this.r,this.s,w)}recoverPublicKey(w){const x=s.ORDER,{r:B,s:C,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(c*Y$<x&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const N=I===2||I===3?B+c:B;if(!s.isValid(N))throw new Error("recovery id 2 or 3 invalid");const $=s.toBytes(N),L=n.fromBytes(nc(X$((I&1)===0),$)),Y=o.inv(N),q=R(Hn("msgHash",w)),Z=o.create(-q*Y),te=o.create(C*Y),re=n.BASE.multiplyUnsafe(Z).add(L.multiplyUnsafe(te));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return A(this.s)}toBytes(w=b){if(a3(w),w==="der")return Tm(mo.hexFromSig(this));const x=o.toBytes(this.r),B=o.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return nc(Uint8Array.of(this.recovery),x,B)}return nc(x,B)}toHex(w){return Tf(this.toBytes(w))}assertValidity(){}static fromCompact(w){return O.fromBytes(Hn("sig",w),"compact")}static fromDER(w){return O.fromBytes(Hn("sig",w),"der")}normalizeS(){return this.hasHighS()?new O(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Tf(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Tf(this.toBytes("compact"))}}const T=t.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const w=Dw(D),x=D.length*8-u;return x>0?w>>BigInt(x):w},R=t.bits2int_modN||function(D){return o.create(T(D))},j=Tg(u);function H(D){return o3("num < 2^"+u,D,ko,j),o.toBytes(D)}function V(D,w){return Nl(D,void 0,"message"),w?Nl(e(D),void 0,"prehashed message"):D}function M(D,w,x){if(["recovered","canonical"].some(te=>te in x))throw new Error("sign() legacy options not supported");const{lowS:B,prehash:C,extraEntropy:I}=lv(x,v);D=V(D,C);const N=R(D),$=bf(o,w),L=[H($),H(N)];if(I!=null&&I!==!1){const te=I===!0?r(m.secretKey):I;L.push(Hn("extraEntropy",te))}const Y=nc(...L),q=N;function Z(te){const re=T(te);if(!o.isValidNot0(re))return;const le=o.inv(re),se=n.BASE.multiply(re).toAffine(),ue=o.create(se.x);if(ue===ko)return;const Ne=o.create(le*o.create(q+ue*$));if(Ne===ko)return;let Re=(se.x===ue?0:2)|Number(se.y&kf),ke=Ne;return B&&A(Ne)&&(ke=o.neg(Ne),Re^=1),new O(ue,ke,Re)}return{seed:Y,k2sig:Z}}function G(D,w,x={}){D=Hn("message",D);const{seed:B,k2sig:C}=M(D,w,x);return oae(e.outputLen,o.BYTES,i)(B,C)}function Q(D){let w;const x=typeof D=="string"||_w(D),B=!x&&D!==null&&typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!x&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(B)w=new O(D.r,D.s);else if(x){try{w=O.fromBytes(Hn("sig",D),"der")}catch(C){if(!(C instanceof mo.Err))throw C}if(!w)try{w=O.fromBytes(Hn("sig",D),"compact")}catch{return!1}}return w||!1}function z(D,w,x,B={}){const{lowS:C,prehash:I,format:N}=lv(B,v);if(x=Hn("publicKey",x),w=V(Hn("message",w),I),"strict"in B)throw new Error("options.strict was renamed to lowS");const $=N===void 0?Q(D):O.fromBytes(Hn("sig",D),N);if($===!1)return!1;try{const L=n.fromBytes(x);if(C&&$.hasHighS())return!1;const{r:Y,s:q}=$,Z=R(w),te=o.inv(q),re=o.create(Z*te),le=o.create(Y*te),se=n.BASE.multiplyUnsafe(re).add(L.multiplyUnsafe(le));return se.is0()?!1:o.create(se.x)===Y}catch{return!1}}function P(D,w,x={}){const{prehash:B}=lv(x,v);return w=V(w,B),O.fromBytes(D,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:f,getPublicKey:h,getSharedSecret:g,utils:p,lengths:m,Point:n,sign:G,verify:z,recoverPublicKey:P,Signature:O,hash:e})}function Uae(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Fc(e.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),s={Fp:t,Fn:i,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function Lae(n){const{CURVE:e,curveOpts:t}=Uae(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,hash:n.hash,ecdsaOpts:r}}function Fae(n,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},n,K$(t.Fn.ORDER,t.Fn.BITS))})}function Mae(n){const{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:i}=Lae(n),s=Tae(e,t),o=Rae(s,r,i);return Fae(n,o)}function c3(n,e){const t=r=>Mae({...n,hash:r});return{...t(e),create:t}}const t9={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},n9={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},r9={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},jae=Fc(t9.p),zae=Fc(n9.p),Hae=Fc(r9.p);c3({...t9,Fp:jae,lowS:!1},Poe);c3({...n9,Fp:zae,lowS:!1},_oe),c3({...r9,Fp:Hae,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Coe);function Ux(n){return n.includes(":")}function vp(n){return Ux(n)?n.split(":")[0]:n}const Vae={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function qO(n,e){const{message:t,code:r}=Vae[n];return{message:e?`${t} ${e}`:t,code:r}}function uv(n,e){return!!Array.isArray(n)}function Cp(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function qae({logger:n,name:e}){const t=typeof n=="string"?K3({opts:{level:n,name:e}}).logger:n;return t.level=typeof n=="string"?n:n.level,t}var Oy={exports:{}},KO;function Kae(){return KO||(KO=1,(function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof $s<"u"&&$s,r=(function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s})();(function(s){(function(o){var c=typeof s<"u"&&s||typeof self<"u"&&self||typeof $s<"u"&&$s||{},u={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function f(w){return w&&DataView.prototype.isPrototypeOf(w)}if(u.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(w){return w&&h.indexOf(Object.prototype.toString.call(w))>-1};function p(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function m(w){return typeof w!="string"&&(w=String(w)),w}function v(w){var x={next:function(){var B=w.shift();return{done:B===void 0,value:B}}};return u.iterable&&(x[Symbol.iterator]=function(){return x}),x}function b(w){this.map={},w instanceof b?w.forEach(function(x,B){this.append(B,x)},this):Array.isArray(w)?w.forEach(function(x){if(x.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+x.length);this.append(x[0],x[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(x){this.append(x,w[x])},this)}b.prototype.append=function(w,x){w=p(w),x=m(x);var B=this.map[w];this.map[w]=B?B+", "+x:x},b.prototype.delete=function(w){delete this.map[p(w)]},b.prototype.get=function(w){return w=p(w),this.has(w)?this.map[w]:null},b.prototype.has=function(w){return this.map.hasOwnProperty(p(w))},b.prototype.set=function(w,x){this.map[p(w)]=m(x)},b.prototype.forEach=function(w,x){for(var B in this.map)this.map.hasOwnProperty(B)&&w.call(x,this.map[B],B,this)},b.prototype.keys=function(){var w=[];return this.forEach(function(x,B){w.push(B)}),v(w)},b.prototype.values=function(){var w=[];return this.forEach(function(x){w.push(x)}),v(w)},b.prototype.entries=function(){var w=[];return this.forEach(function(x,B){w.push([B,x])}),v(w)},u.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function A(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function _(w){return new Promise(function(x,B){w.onload=function(){x(w.result)},w.onerror=function(){B(w.error)}})}function U(w){var x=new FileReader,B=_(x);return x.readAsArrayBuffer(w),B}function O(w){var x=new FileReader,B=_(x),C=/charset=([A-Za-z0-9_-]+)/.exec(w.type),I=C?C[1]:"utf-8";return x.readAsText(w,I),B}function T(w){for(var x=new Uint8Array(w),B=new Array(x.length),C=0;C<x.length;C++)B[C]=String.fromCharCode(x[C]);return B.join("")}function R(w){if(w.slice)return w.slice(0);var x=new Uint8Array(w.byteLength);return x.set(new Uint8Array(w)),x.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:u.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:u.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():u.arrayBuffer&&u.blob&&f(w)?(this._bodyArrayBuffer=R(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||g(w))?this._bodyArrayBuffer=R(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var w=A(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=A(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(u.blob)return this.blob().then(U);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=A(this);if(w)return w;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(G)}),this.json=function(){return this.text().then(JSON.parse)},this}var H=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function V(w){var x=w.toUpperCase();return H.indexOf(x)>-1?x:w}function M(w,x){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var B=x.body;if(w instanceof M){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,x.headers||(this.headers=new b(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!B&&w._bodyInit!=null&&(B=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new b(x.headers)),this.method=V(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal||(function(){if("AbortController"in c){var N=new AbortController;return N.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(B),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var C=/([?&])_=[^&]*/;if(C.test(this.url))this.url=this.url.replace(C,"$1_="+new Date().getTime());else{var I=/\?/;this.url+=(I.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function G(w){var x=new FormData;return w.trim().split("&").forEach(function(B){if(B){var C=B.split("="),I=C.shift().replace(/\+/g," "),N=C.join("=").replace(/\+/g," ");x.append(decodeURIComponent(I),decodeURIComponent(N))}}),x}function Q(w){var x=new b,B=w.replace(/\r?\n[\t ]+/g," ");return B.split("\r").map(function(C){return C.indexOf(`
`)===0?C.substr(1,C.length):C}).forEach(function(C){var I=C.split(":"),N=I.shift().trim();if(N){var $=I.join(":").trim();try{x.append(N,$)}catch(L){console.warn("Response "+L.message)}}}),x}j.call(M.prototype);function z(w,x){if(!(this instanceof z))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=x.statusText===void 0?"":""+x.statusText,this.headers=new b(x.headers),this.url=x.url||"",this._initBody(w)}j.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},z.error=function(){var w=new z(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var P=[301,302,303,307,308];z.redirect=function(w,x){if(P.indexOf(x)===-1)throw new RangeError("Invalid status code");return new z(null,{status:x,headers:{location:w}})},o.DOMException=c.DOMException;try{new o.DOMException}catch{o.DOMException=function(x,B){this.message=x,this.name=B;var C=Error(x);this.stack=C.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function D(w,x){return new Promise(function(B,C){var I=new M(w,x);if(I.signal&&I.signal.aborted)return C(new o.DOMException("Aborted","AbortError"));var N=new XMLHttpRequest;function $(){N.abort()}N.onload=function(){var q={statusText:N.statusText,headers:Q(N.getAllResponseHeaders()||"")};I.url.indexOf("file://")===0&&(N.status<200||N.status>599)?q.status=200:q.status=N.status,q.url="responseURL"in N?N.responseURL:q.headers.get("X-Request-URL");var Z="response"in N?N.response:N.responseText;setTimeout(function(){B(new z(Z,q))},0)},N.onerror=function(){setTimeout(function(){C(new TypeError("Network request failed"))},0)},N.ontimeout=function(){setTimeout(function(){C(new TypeError("Network request timed out"))},0)},N.onabort=function(){setTimeout(function(){C(new o.DOMException("Aborted","AbortError"))},0)};function L(q){try{return q===""&&c.location.href?c.location.href:q}catch{return q}}if(N.open(I.method,L(I.url),!0),I.credentials==="include"?N.withCredentials=!0:I.credentials==="omit"&&(N.withCredentials=!1),"responseType"in N&&(u.blob?N.responseType="blob":u.arrayBuffer&&(N.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof b||c.Headers&&x.headers instanceof c.Headers)){var Y=[];Object.getOwnPropertyNames(x.headers).forEach(function(q){Y.push(p(q)),N.setRequestHeader(q,m(x.headers[q]))}),I.headers.forEach(function(q,Z){Y.indexOf(Z)===-1&&N.setRequestHeader(Z,q)})}else I.headers.forEach(function(q,Z){N.setRequestHeader(Z,q)});I.signal&&(I.signal.addEventListener("abort",$),N.onreadystatechange=function(){N.readyState===4&&I.signal.removeEventListener("abort",$)}),N.send(typeof I._bodyInit>"u"?null:I._bodyInit)})}return D.polyfill=!0,c.fetch||(c.fetch=D,c.Headers=b,c.Request=M,c.Response=z),o.Headers=b,o.Request=M,o.Response=z,o.fetch=D,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(Oy,Oy.exports)),Oy.exports}var Gae=Kae();const GO=fg(Gae),Wae=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),Qae=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Zae(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return Qae(n)}catch{return n}}function WO(n){return typeof n=="string"?n:Wae(n)||""}var Jae=Object.defineProperty,Yae=Object.defineProperties,Xae=Object.getOwnPropertyDescriptors,QO=Object.getOwnPropertySymbols,ece=Object.prototype.hasOwnProperty,tce=Object.prototype.propertyIsEnumerable,ZO=(n,e,t)=>e in n?Jae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,JO=(n,e)=>{for(var t in e||(e={}))ece.call(e,t)&&ZO(n,t,e[t]);if(QO)for(var t of QO(e))tce.call(e,t)&&ZO(n,t,e[t]);return n},YO=(n,e)=>Yae(n,Xae(e));const nce={Accept:"application/json","Content-Type":"application/json"},rce="POST",XO={headers:nce,method:rce},eB=10;let i9=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Zr.EventEmitter,this.isAvailable=!1,this.registering=!1,!K5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=WO(e),r=await(await GO(this.url,YO(JO({},XO),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!K5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=WO({id:1,jsonrpc:"2.0",method:"test",params:[]});await GO(e,YO(JO({},XO),{body:t}))}this.onOpen()}catch(t){const r=this.parseError(t);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Zae(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=r.message||r.toString(),s=Ow(e,i);this.events.emit("payload",s)}parseError(e,t=this.url){return KD(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>eB&&this.events.setMaxListeners(eB)}};function Lx(n){return n==null||typeof n!="object"&&typeof n!="function"}function s9(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function o9(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const ice="[object RegExp]",a9="[object String]",c9="[object Number]",l9="[object Boolean]",u9="[object Arguments]",sce="[object Symbol]",oce="[object Date]",ace="[object Map]",cce="[object Set]",lce="[object Array]",uce="[object ArrayBuffer]",fce="[object Object]",hce="[object DataView]",dce="[object Uint8Array]",pce="[object Uint8ClampedArray]",gce="[object Uint16Array]",yce="[object Uint32Array]",mce="[object Int8Array]",wce="[object Int16Array]",bce="[object Int32Array]",vce="[object Float32Array]",Ece="[object Float64Array]";function Fx(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function xce(n,e){return vf(n,void 0,n,new Map,e)}function vf(n,e,t,r=new Map,i=void 0){const s=i==null?void 0:i(n,e,t,r);if(s!=null)return s;if(Lx(n))return n;if(r.has(n))return r.get(n);if(Array.isArray(n)){const o=new Array(n.length);r.set(n,o);for(let c=0;c<n.length;c++)o[c]=vf(n[c],c,t,r,i);return Object.hasOwn(n,"index")&&(o.index=n.index),Object.hasOwn(n,"input")&&(o.input=n.input),o}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const o=new RegExp(n.source,n.flags);return o.lastIndex=n.lastIndex,o}if(n instanceof Map){const o=new Map;r.set(n,o);for(const[c,u]of n)o.set(c,vf(u,c,t,r,i));return o}if(n instanceof Set){const o=new Set;r.set(n,o);for(const c of n)o.add(vf(c,void 0,t,r,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(Fx(n)){const o=new(Object.getPrototypeOf(n)).constructor(n.length);r.set(n,o);for(let c=0;c<n.length;c++)o[c]=vf(n[c],c,t,r,i);return o}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const o=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return r.set(n,o),gl(o,n,t,r,i),o}if(typeof File<"u"&&n instanceof File){const o=new File([n],n.name,{type:n.type});return r.set(n,o),gl(o,n,t,r,i),o}if(n instanceof Blob){const o=new Blob([n],{type:n.type});return r.set(n,o),gl(o,n,t,r,i),o}if(n instanceof Error){const o=new n.constructor;return r.set(n,o),o.message=n.message,o.name=n.name,o.stack=n.stack,o.cause=n.cause,gl(o,n,t,r,i),o}if(typeof n=="object"&&Ace(n)){const o=Object.create(Object.getPrototypeOf(n));return r.set(n,o),gl(o,n,t,r,i),o}return n}function gl(n,e,t=n,r,i){const s=[...Object.keys(e),...s9(e)];for(let o=0;o<s.length;o++){const c=s[o],u=Object.getOwnPropertyDescriptor(n,c);(u==null||u.writable)&&(n[c]=vf(e[c],c,t,r,i))}}function Ace(n){switch(o9(n)){case u9:case lce:case uce:case hce:case l9:case oce:case vce:case Ece:case mce:case wce:case bce:case ace:case c9:case fce:case ice:case cce:case a9:case sce:case dce:case pce:case gce:case yce:return!0;default:return!1}}function Sce(n,e){return xce(n,(t,r,i,s)=>{if(typeof n=="object")switch(Object.prototype.toString.call(n)){case c9:case a9:case l9:{const o=new n.constructor(n==null?void 0:n.valueOf());return gl(o,n),o}case u9:{const o={};return gl(o,n),o.length=n.length,o[Symbol.iterator]=n[Symbol.iterator],o}default:return}})}function tB(n){return Sce(n)}function nB(n){return n!==null&&typeof n=="object"&&o9(n)==="[object Arguments]"}function rB(n){return typeof n=="object"&&n!==null}function Ice(){}function Oce(n){return Fx(n)}function Bce(n){var t;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!((t=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&t.writable)?!1:n.toString()===`[object ${r}]`}let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function Pce(n){if(Lx(n))return n;if(Array.isArray(n)||Fx(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const e=Object.getPrototypeOf(n),t=e.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new t(n);if(n instanceof RegExp){const r=new t(n);return r.lastIndex=n.lastIndex,r}if(n instanceof DataView)return new t(n.buffer.slice(0));if(n instanceof Error){const r=new t(n.message);return r.stack=n.stack,r.name=n.name,r.cause=n.cause,r}if(typeof File<"u"&&n instanceof File)return new t([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const r=Object.create(e);return Object.assign(r,n)}return n}function Cce(n,...e){const t=e.slice(0,-1),r=e[e.length-1];let i=n;for(let s=0;s<t.length;s++){const o=t[s];i=l3(i,o,r,new Map)}return i}function l3(n,e,t,r){if(Lx(n)&&(n=Object(n)),e==null||typeof e!="object")return n;if(r.has(e))return Pce(r.get(e));if(r.set(e,n),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...s9(e)];for(let s=0;s<i.length;s++){const o=i[s];let c=e[o],u=n[o];if(nB(c)&&(c={...c}),nB(u)&&(u={...u}),typeof Buffer<"u"&&Buffer.isBuffer(c)&&(c=tB(c)),Array.isArray(c))if(typeof u=="object"&&u!=null){const h=[],g=Reflect.ownKeys(u);for(let p=0;p<g.length;p++){const m=g[p];h[m]=u[m]}u=h}else u=[];const f=t(u,c,o,n,e,r);f!=null?n[o]=f:Array.isArray(c)||rB(u)&&rB(c)?n[o]=l3(u,c,t,r):u==null&&Bce(c)?n[o]=l3({},c,t,r):u==null&&Oce(c)?n[o]=tB(c):(u===void 0||c!==void 0)&&(n[o]=c)}return n}function _ce(n,...e){return Cce(n,...e,Ice)}const iB="error",Nce="wss://relay.walletconnect.org",Dce="wc",f9="universal_provider",By=`${Dce}@2:${f9}:`,h9="https://rpc.walletconnect.org/v1/",d9="generic",$ce=`${h9}bundler`,Rf="call_status",Tce=86400,Mx={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var kce=Object.defineProperty,Rce=Object.defineProperties,Uce=Object.getOwnPropertyDescriptors,sB=Object.getOwnPropertySymbols,Lce=Object.prototype.hasOwnProperty,Fce=Object.prototype.propertyIsEnumerable,oB=(n,e,t)=>e in n?kce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Py=(n,e)=>{for(var t in e||(e={}))Lce.call(e,t)&&oB(n,t,e[t]);if(sB)for(var t of sB(e))Fce.call(e,t)&&oB(n,t,e[t]);return n},Mce=(n,e)=>Rce(n,Uce(e));function p9(n,e,t){var r;const i=Pp(n);return((r=e.rpcMap)==null?void 0:r[i.reference])||`${h9}?chainId=${i.namespace}:${i.reference}&projectId=${t}`}function jce(n){return n.includes(":")?n.split(":")[1]:n}function g9(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function zce(n,e){const t=Object.keys(e.namespaces).filter(i=>i.includes(n));if(!t.length)return[];const r=[];return t.forEach(i=>{const s=e.namespaces[i].accounts;r.push(...s)}),r}function aB(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>{var r,i;return((r=t==null?void 0:t.chains)==null?void 0:r.length)&&((i=t==null?void 0:t.chains)==null?void 0:i.length)>0}))}function Cy(n={},e={}){const t=aB(cB(n)),r=aB(cB(e));return _ce(t,r)}function cB(n){var e,t,r,i,s;const o={};if(!Cp(n))return o;for(const[c,u]of Object.entries(n)){const f=Ux(c)?[c]:u.chains,h=u.methods||[],g=u.events||[],p=u.rpcMap||{},m=vp(c);o[m]=Mce(Py(Py({},o[m]),u),{chains:tv(f,(e=o[m])==null?void 0:e.chains),methods:tv(h,(t=o[m])==null?void 0:t.methods),events:tv(g,(r=o[m])==null?void 0:r.events)}),(Cp(p)||Cp(((i=o[m])==null?void 0:i.rpcMap)||{}))&&(o[m].rpcMap=Py(Py({},p),(s=o[m])==null?void 0:s.rpcMap))}return o}function lB(n){return n.includes(":")?n.split(":")[2]:n}function uB(n){const e={};for(const[t,r]of Object.entries(n)){const i=r.methods||[],s=r.events||[],o=r.accounts||[],c=Ux(t)?[t]:r.chains?r.chains:g9(r.accounts);e[t]={chains:c,methods:i,events:s,accounts:o}}return e}function fv(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):(n=n.includes(":")?n.split(":")[1]:n,isNaN(Number(n))?n:Number(n))}function Hce(n){try{const e=JSON.parse(n);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const y9={},Uf=n=>y9[n],hv=(n,e)=>{y9[n]=e};var Vce=Object.defineProperty,fB=Object.getOwnPropertySymbols,qce=Object.prototype.hasOwnProperty,Kce=Object.prototype.propertyIsEnumerable,hB=(n,e,t)=>e in n?Vce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dB=(n,e)=>{for(var t in e||(e={}))qce.call(e,t)&&hB(n,t,e[t]);if(fB)for(var t of fB(e))Kce.call(e,t)&&hB(n,t,e[t]);return n};const pB="eip155",Gce=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Wce=n=>n&&n.startsWith("0x")?BigInt(n).toString(10):n,dv=n=>n&&n.startsWith("0x")?n:`0x${BigInt(n).toString(16)}`,gB=n=>Object.keys(n).filter(e=>Gce.includes(e)).reduce((e,t)=>(e[t]=Qce(n[t]),e),{}),Qce=n=>typeof n=="string"&&Hce(n)?JSON.parse(n):n,Zce=(n,e,t)=>{const{sessionProperties:r={},scopedProperties:i={}}=n,s={};if(!Cp(i)&&!Cp(r))return;const o=gB(r);for(const c of t){const u=Wce(c);if(!u)continue;s[dv(u)]=o;const f=i==null?void 0:i[`${pB}:${u}`];if(f){const h=f==null?void 0:f[`${pB}:${u}:${e}`];s[dv(u)]=dB(dB({},s[dv(u)]),gB(h||f))}}for(const[c,u]of Object.entries(s))Object.keys(u).length===0&&delete s[c];return Object.keys(s).length>0?s:void 0};var Jce=Object.defineProperty,Yce=(n,e,t)=>e in n?Jce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Xce=(n,e,t)=>Yce(n,e+"",t);let pv,ele=class m9{constructor(e){Xce(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,t){return await this.storage.setItem(e,t)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return pv||(pv=new m9(e)),pv}};var tle=Object.defineProperty,nle=Object.defineProperties,rle=Object.getOwnPropertyDescriptors,yB=Object.getOwnPropertySymbols,ile=Object.prototype.hasOwnProperty,sle=Object.prototype.propertyIsEnumerable,mB=(n,e,t)=>e in n?tle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ole=(n,e)=>{for(var t in e||(e={}))ile.call(e,t)&&mB(n,t,e[t]);if(yB)for(var t of yB(e))sle.call(e,t)&&mB(n,t,e[t]);return n},ale=(n,e)=>nle(n,rle(e));async function cle(n,e){const t=Pp(n.result.capabilities.caip345.caip2),r=n.result.capabilities.caip345.transactionHashes,i=await Promise.allSettled(r.map(g=>lle(t.reference,g,e))),s=i.filter(g=>g.status==="fulfilled").map(g=>g.value).filter(g=>g);i.filter(g=>g.status==="rejected").forEach(g=>console.warn("Failed to fetch transaction receipt:",g.reason));const o=!s.length||s.some(g=>!g),c=s.every(g=>(g==null?void 0:g.status)==="0x1"),u=s.every(g=>(g==null?void 0:g.status)==="0x0"),f=s.some(g=>(g==null?void 0:g.status)==="0x0");let h;return o?h=100:c?h=200:u?h=500:f&&(h=600),{id:n.result.id,version:n.request.version,atomic:n.request.atomicRequired,chainId:n.request.chainId,capabilities:n.result.capabilities,receipts:s,status:h}}async function lle(n,e,t){return await t(parseInt(n)).request(Qi("eth_getTransactionReceipt",[e]))}async function ule({sendCalls:n,storage:e}){const t=await e.getItem(Rf);await e.setItem(Rf,ale(ole({},t),{[n.result.id]:{request:n.request,result:n.result,expiry:Zse(Tce)}}))}async function fle({resultId:n,storage:e}){const t=await e.getItem(Rf);if(t){delete t[n],await e.setItem(Rf,t);for(const r in t)m$(t[r].expiry)&&delete t[r];await e.setItem(Rf,t)}}async function hle({resultId:n,storage:e}){const t=await e.getItem(Rf),r=t==null?void 0:t[n];if(r&&!m$(r.expiry))return r;await fle({resultId:n,storage:e})}var dle=Object.defineProperty,ple=Object.defineProperties,gle=Object.getOwnPropertyDescriptors,wB=Object.getOwnPropertySymbols,yle=Object.prototype.hasOwnProperty,mle=Object.prototype.propertyIsEnumerable,u3=(n,e,t)=>e in n?dle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gv=(n,e)=>{for(var t in e||(e={}))yle.call(e,t)&&u3(n,t,e[t]);if(wB)for(var t of wB(e))mle.call(e,t)&&u3(n,t,e[t]);return n},yv=(n,e)=>ple(n,gle(e)),ol=(n,e,t)=>u3(n,typeof e!="symbol"?e+"":e,t);class wle{constructor(e){ol(this,"name","eip155"),ol(this,"client"),ol(this,"chainId"),ol(this,"namespace"),ol(this,"httpProviders"),ol(this,"events"),ol(this,"storage"),this.namespace=e.namespace,this.events=Uf("events"),this.client=Uf("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=ele.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t);const r=this.chainId;this.chainId=parseInt(e),this.events.emit(Mx.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||p9(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ix(new i9(r,Uf("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=parseInt(jce(t));e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(e){const t=e||this.chainId;return this.httpProviders[t]||(this.httpProviders=yv(gv({},this.httpProviders),{[t]:this.createHttpProvider(t)}),this.httpProviders[t])}async handleSwitchChain(e){var t,r;let i=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,i,s,o;const c=(r=(t=e.request)==null?void 0:t.params)==null?void 0:r[0],u=((s=(i=e.request)==null?void 0:i.params)==null?void 0:s[1])||[];if(!c)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const f=this.client.session.get(e.topic),h=((o=f==null?void 0:f.sessionProperties)==null?void 0:o.capabilities)||{},g=`${c}${u.join(",")}`,p=h==null?void 0:h[g];if(p)return p;let m;try{m=Zce(f,c,u)}catch(b){console.warn("Failed to extract capabilities from session",b)}if(m)return m;const v=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:yv(gv({},f.sessionProperties||{}),{capabilities:yv(gv({},h||{}),{[g]:v})})})}catch(b){console.warn("Failed to update session with capabilities",b)}return v}async getCallStatus(e){var t,r,i;const s=this.client.session.get(e.topic),o=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(o){const f=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(f,e)}catch(h){console.warn("Failed to fetch call status from bundler",h,f)}}const c=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,e)}catch(f){console.warn("Failed to fetch call status from custom bundler",f,c)}const u=await hle({resultId:(i=e.request.params)==null?void 0:i[0],storage:this.storage});if(u)try{return await cle(u,this.getHttpProvider.bind(this))}catch(f){console.warn("Failed to fetch call status from stored send calls",f,u)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Qi("eth_getUserOperationReceipt",[(r=t.request.params)==null?void 0:r[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,t){return`${$ce}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}async sendCalls(e){var t,r,i;const s=await this.client.request(e),o=(t=e.request.params)==null?void 0:t[0],c=s==null?void 0:s.id,u=(s==null?void 0:s.capabilities)||{},f=(r=u==null?void 0:u.caip345)==null?void 0:r.caip2,h=(i=u==null?void 0:u.caip345)==null?void 0:i.transactionHashes;return!c||!f||!(h!=null&&h.length)||await ule({sendCalls:{request:o,result:s},storage:this.storage}),s}}var ble=Object.defineProperty,vle=(n,e,t)=>e in n?ble(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cf=(n,e,t)=>vle(n,typeof e!="symbol"?e+"":e,t);class Ele{constructor(e){cf(this,"name",d9),cf(this,"client"),cf(this,"httpProviders"),cf(this,"events"),cf(this,"namespace"),cf(this,"chainId"),this.namespace=e.namespace,this.events=Uf("events"),this.client=Uf("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t);const r=this.chainId;this.chainId=e,this.events.emit(Mx.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Pp(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const r={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(i=>{var s,o;const c=Pp(i),u=(o=(s=this.namespace)==null?void 0:s.rpcMap)==null?void 0:o[`${c.namespace}:${c.reference}`];r[c.reference]=this.createHttpProvider(i,u)}),r}getHttpProvider(e){const t=Pp(e).reference,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||p9(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ix(new i9(r,Uf("disableProviderPing")))}}var xle=Object.defineProperty,Ale=Object.defineProperties,Sle=Object.getOwnPropertyDescriptors,bB=Object.getOwnPropertySymbols,Ile=Object.prototype.hasOwnProperty,Ole=Object.prototype.propertyIsEnumerable,f3=(n,e,t)=>e in n?xle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,op=(n,e)=>{for(var t in e||(e={}))Ile.call(e,t)&&f3(n,t,e[t]);if(bB)for(var t of bB(e))Ole.call(e,t)&&f3(n,t,e[t]);return n},_y=(n,e)=>Ale(n,Sle(e)),ci=(n,e,t)=>f3(n,typeof e!="symbol"?e+"":e,t);class jx{constructor(e){ci(this,"client"),ci(this,"namespaces"),ci(this,"optionalNamespaces"),ci(this,"sessionProperties"),ci(this,"scopedProperties"),ci(this,"events",new T3),ci(this,"rpcProviders",{}),ci(this,"session"),ci(this,"providerOpts"),ci(this,"logger"),ci(this,"uri"),ci(this,"disableProviderPing",!1);var t,r;this.providerOpts=e,this.logger=qae({logger:(t=e.logger)!=null?t:iB,name:(r=this.providerOpts.name)!=null?r:f9}),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new jx(e);return await t.initialize(),t}async request(e,t,r){const[i,s]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:op({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,i){const s=new Date().getTime();this.request(e,r,i).then(o=>t(null,Jp(s,o))).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:qO("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const s=await i();if(this.session=s.session,this.session){const o=uB(this.session.namespaces);this.namespaces=Cy(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const i=await r();this.session=i;const s=uB(i.namespaces);return this.namespaces=Cy(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,i]=this.validateChain(e);this.getProvider(r).setDefaultChain(i,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(!uv(t))return;for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}catch(t){this.logger.warn(t,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await qse.init({core:this.providerOpts.core,logger:this.providerOpts.logger||iB,relayUrl:this.providerOpts.relayUrl||Nce,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error(r,"Failed to get session"),new Error(`The provided session: ${(t=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:t.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>vp(t)))];hv("client",this.client),hv("events",this.events),hv("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const r=zce(t,this.session);if((r==null?void 0:r.length)===0)return;const i=g9(r),s=Cy(this.namespaces,this.optionalNamespaces),o=_y(op({},s[t]),{accounts:r,chains:i});switch(t){case"eip155":this.rpcProviders[t]=new wle({namespace:o});break;default:this.rpcProviders[t]=new Ele({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;const{topic:r}=e;r===((t=this.session)==null?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;const{params:r,topic:i}=e;if(i!==((t=this.session)==null?void 0:t.topic))return;const{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&uv(o)&&this.events.emit("accountsChanged",o.map(lB))}else if(s.name==="chainChanged"){const o=r.chainId,c=r.event.data,u=vp(o),f=fv(o)!==fv(c)?`${u}:${fv(c)}`:o;this.onChainChanged({currentCaipChainId:f})}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,i;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:s}=t,o=(i=this.client)==null?void 0:i.session.get(e);this.session=_y(op({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===((t=this.session)==null?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",_y(op({},qO("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Mx.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(_y(op({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[d9]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:s}=e;this.optionalNamespaces=Cy(t,r),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[t,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(o=>vp(o)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const i=vp(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:t,internal:r=!1}){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(this.updateNamespaceChain(i,s),r?(this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:i,currentCaipChainId:e,previousCaipChainId:t})):this.getProvider(i).setDefaultChain(s),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:t,previousCaipChainId:r}){var i,s;try{if(r===t)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const c=o.filter(u=>u.includes(`${t}:`)).map(lB);if(!uv(c))return;this.events.emit("accountsChanged",c)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,i={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${By}/${e}${i}`,t)}async getFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${By}/${e}${r}`)}async deleteFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${By}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const r of t)r.startsWith(By)&&await this.client.core.storage.removeItem(r)}catch(t){this.logger.warn(t,"Failed to cleanup storage")}}}const Ble=jx,Ple="wc",Cle="ethereum_provider",_le=`${Ple}@2:${Cle}:`,Nle="https://rpc.walletconnect.org/v1/",h3=["eth_sendTransaction","personal_sign"],Dle=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],d3=["chainChanged","accountsChanged"],$le=["chainChanged","accountsChanged","message","disconnect","connect"],Tle=async()=>{const{createAppKit:n}=await CF(()=>import("./core-CfaHfMGK.js").then(e=>e.bK),[]);return n};var kle=Object.defineProperty,Rle=Object.defineProperties,Ule=Object.getOwnPropertyDescriptors,vB=Object.getOwnPropertySymbols,Lle=Object.prototype.hasOwnProperty,Fle=Object.prototype.propertyIsEnumerable,p3=(n,e,t)=>e in n?kle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ul=(n,e)=>{for(var t in e||(e={}))Lle.call(e,t)&&p3(n,t,e[t]);if(vB)for(var t of vB(e))Fle.call(e,t)&&p3(n,t,e[t]);return n},ap=(n,e)=>Rle(n,Ule(e)),Ur=(n,e,t)=>p3(n,typeof e!="symbol"?e+"":e,t);function Lm(n){return Number(n[0].split(":")[1])}function Ny(n){return`0x${n.toString(16)}`}function Mle(n){const{chains:e,optionalChains:t,methods:r,optionalMethods:i,events:s,optionalEvents:o,rpcMap:c}=n;if(!EE(e))throw new Error("Invalid chains");const u={chains:e,methods:r||h3,events:s||d3,rpcMap:ul({},e.length?{[Lm(e)]:c[Lm(e)]}:{})},f=s==null?void 0:s.filter(m=>!d3.includes(m)),h=r==null?void 0:r.filter(m=>!h3.includes(m));if(!t&&!o&&!i&&!(f!=null&&f.length)&&!(h!=null&&h.length))return{required:e.length?u:void 0};const g=(f==null?void 0:f.length)&&(h==null?void 0:h.length)||!t,p={chains:[...new Set(g?u.chains.concat(t||[]):t)],methods:[...new Set(u.methods.concat(i!=null&&i.length?i:Dle))],events:[...new Set(u.events.concat(o!=null&&o.length?o:$le))],rpcMap:c};return{required:e.length?u:void 0,optional:t.length?p:void 0}}class zx{constructor(){Ur(this,"events",new Zr.EventEmitter),Ur(this,"namespace","eip155"),Ur(this,"accounts",[]),Ur(this,"signer"),Ur(this,"chainId",1),Ur(this,"modal"),Ur(this,"rpc"),Ur(this,"STORAGE_KEY",_le),Ur(this,"on",(e,t)=>(this.events.on(e,t),this)),Ur(this,"once",(e,t)=>(this.events.once(e,t),this)),Ur(this,"removeListener",(e,t)=>(this.events.removeListener(e,t),this)),Ur(this,"off",(e,t)=>(this.events.off(e,t),this)),Ur(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const t=new zx;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,r){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),r)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var t;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:i}=Mle(this.rpc);try{const s=await new Promise(async(c,u)=>{var f,h;this.rpc.showQrModal&&((f=this.modal)==null||f.open(),(h=this.modal)==null||h.subscribeState(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),u(new Error("Connection request reset. Please try again.")))}));const g=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(ap(ul({namespaces:ul({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic,scopedProperties:g})).then(p=>{c(p)}).catch(p=>{var m;(m=this.modal)==null||m.showErrorMessage("Unable to connect"),u(new Error(p.message))})});if(!s)return;const o=WI(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:Ny(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{(t=this.modal)==null||t.close()}}async authenticate(e,t){var r;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e==null?void 0:e.chains});try{const i=await new Promise(async(o,c)=>{var u,f;this.rpc.showQrModal&&((u=this.modal)==null||u.open(),(f=this.modal)==null||f.subscribeState(h=>{!h.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(ap(ul({},e),{chains:this.rpc.chains}),t).then(h=>{o(h)}).catch(h=>{var g;(g=this.modal)==null||g.showErrorMessage("Unable to connect"),c(new Error(h.message))})}),s=i.session;if(s){const o=WI(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:Ny(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{(r=this.modal)==null||r.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:r}=t;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Ny(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",ap(ul({},yG("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Ny(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,r,i]=e.split(":");return{chainId:`${t}:${r}`,address:i}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;const i=(t=e==null?void 0:e.chains)!=null?t:[],s=(r=e==null?void 0:e.optionalChains)!=null?r:[],o=i.concat(s);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const c=i.length?(e==null?void 0:e.methods)||h3:[],u=i.length?(e==null?void 0:e.events)||d3:[],f=(e==null?void 0:e.optionalMethods)||[],h=(e==null?void 0:e.optionalEvents)||[],g=(e==null?void 0:e.rpcMap)||this.buildRpcMap(o,e.projectId),p=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:i==null?void 0:i.map(m=>this.formatChainId(m)),optionalChains:s.map(m=>this.formatChainId(m)),methods:c,events:u,optionalMethods:f,optionalEvents:h,rpcMap:g,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:p,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const r={};return e.forEach(i=>{r[i]=this.getRpcUrl(i,t)}),r}async initialize(e){var t;if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Lm(this.rpc.chains):Lm(this.rpc.optionalChains),this.signer=await Ble.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const i=await Tle(),{convertWCMToAppKitOptions:s}=await Promise.resolve().then(function(){return Zle}),o=s(ap(ul({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!o.networks.length)throw new Error("No networks found for WalletConnect·");r=i(ap(ul({},o),{universalProvider:this.signer,manualWCControl:!0,enableMobileFullScreen:((t=this.rpc.qrModalOptions)==null?void 0:t.enableMobileFullScreen)===!0}))}catch(i){throw console.warn(i),new Error("To use QR modal, please install @reown/appkit package")}if(r)try{this.modal=r}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:r,rpcMap:i}=e;t&&EE(t)&&(this.rpc.chains=t.map(s=>this.formatChainId(s)),t.forEach(s=>{this.rpc.rpcMap[s]=(i==null?void 0:i[s])||this.getRpcUrl(s)})),r&&EE(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r==null?void 0:r.map(s=>this.formatChainId(s)),r.forEach(s=>{this.rpc.rpcMap[s]=(i==null?void 0:i[s])||this.getRpcUrl(s)}))}getRpcUrl(e,t){var r;return((r=this.rpc.rpcMap)==null?void 0:r[e])||`${Nle}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(t=>this.signer.logger.warn(t))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}var jle=Object.defineProperty,zle=Object.defineProperties,Hle=Object.getOwnPropertyDescriptors,EB=Object.getOwnPropertySymbols,Vle=Object.prototype.hasOwnProperty,qle=Object.prototype.propertyIsEnumerable,xB=(n,e,t)=>e in n?jle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,w9=(n,e)=>{for(var t in e||(e={}))Vle.call(e,t)&&xB(n,t,e[t]);if(EB)for(var t of EB(e))qle.call(e,t)&&xB(n,t,e[t]);return n},Kle=(n,e)=>zle(n,Hle(e));function Gle(n){if(n)return{"--w3m-font-family":n["--wcm-font-family"],"--w3m-accent":n["--wcm-accent-color"],"--w3m-color-mix":n["--wcm-background-color"],"--w3m-z-index":n["--wcm-z-index"]?Number(n["--wcm-z-index"]):void 0,"--w3m-qr-color":n["--wcm-accent-color"],"--w3m-font-size-master":n["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":n["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}const Wle=n=>{const[e,t]=n.split(":");return b9({id:t,caipNetworkId:n,chainNamespace:e,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function Qle(n){var e,t,r,i,s,o,c;const u=(e=n.chains)==null?void 0:e.map(Wle).filter(Boolean);if(u.length===0)throw new Error("At least one chain must be specified");const f=u.find(g=>{var p;return g.id===((p=n.defaultChain)==null?void 0:p.id)}),h={projectId:n.projectId,networks:u,themeMode:n.themeMode,themeVariables:Gle(n.themeVariables),chainImages:n.chainImages,connectorImages:n.walletImages,defaultNetwork:f,metadata:Kle(w9({},n.metadata),{name:((t=n.metadata)==null?void 0:t.name)||"WalletConnect",description:((r=n.metadata)==null?void 0:r.description)||"Connect to WalletConnect-compatible wallets",url:((i=n.metadata)==null?void 0:i.url)||"https://walletconnect.org",icons:((s=n.metadata)==null?void 0:s.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:n.explorerRecommendedWalletIds==="NONE"?[]:Array.isArray(n.explorerRecommendedWalletIds)?n.explorerRecommendedWalletIds:[],excludeWalletIds:n.explorerExcludedWalletIds==="ALL"?[]:Array.isArray(n.explorerExcludedWalletIds)?n.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if((o=n.mobileWallets)!=null&&o.length||(c=n.desktopWallets)!=null&&c.length){const g=[...(n.mobileWallets||[]).map(v=>({id:v.id,name:v.name,links:v.links})),...(n.desktopWallets||[]).map(v=>({id:v.id,name:v.name,links:{native:v.links.native,universal:v.links.universal}}))],p=[...h.featuredWalletIds||[],...h.excludeWalletIds||[]],m=g.filter(v=>!p.includes(v.id));m.length&&(h.customWallets=m)}return h}function b9(n){return w9({formatters:void 0,fees:void 0,serializers:void 0},n)}var Zle=Object.freeze({__proto__:null,convertWCMToAppKitOptions:Qle,defineChain:b9});function Jle(){const[n,e]=No.useState(null),[t,r]=No.useState(!1),[i,s]=No.useState(!1),o={chainId:"0xa09d8624eae87e8b5f87b23fe694eea2d02dde2e",chainName:"BNB Smart Chain",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:["https://bsc-dataseed.bnbchain.org/"],blockExplorerUrls:["https://bscscan.com/"]},c=h=>(h==null?void 0:h.slice(0,6))+"..."+(h==null?void 0:h.slice(-4)),u=async()=>{try{if(r(!0),!window.ethereum){alert("MetaMask not detected! Please install it."),r(!1);return}const h=new Nh(window.ethereum),{chainId:g}=await h.getNetwork();if(g!==56)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:o.chainId}]})}catch(m){m.code===4902&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[o]})}const p=await h.send("eth_requestAccounts",[]);e(p[0]),s(!1)}catch(h){console.error(h)}finally{r(!1)}},f=async()=>{try{r(!0);const h=await zx.init({projectId:"47c64828c0d34815feee876052336fb8",chains:[56],rpcMap:{56:"https://rpc.ankr.com/bsc"},showQrModal:!0,metadata:{name:"Wintercoins",description:"BNB Smart Chain Wallet Connect",url:"https://wintercoins.vercel.app/"}});await h.enable();const m=await(await new Nh(h).getSigner()).getAddress();e(m),s(!1)}catch(h){console.error("WalletConnect error:",h)}finally{r(!1)}};return No.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",h=>e(h[0]||null))},[]),nt.jsxs("div",{className:"relative",children:[nt.jsx("button",{onClick:()=>n?null:s(!0),disabled:t,className:"bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold px-4 py-2 rounded-lg shadow transition-all",children:t?"Connecting...":n?c(n):"Connect Wallet"}),i&&nt.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800 border border-gray-700 rounded-xl shadow-lg p-3",children:[nt.jsx("p",{className:"text-gray-300 text-sm mb-2 font-semibold",children:"Choose Wallet"}),nt.jsx("button",{onClick:u,className:"w-full text-left bg-white/10 hover:bg-white/20 text-gray-100 px-3 py-2 rounded-lg mb-2 transition",children:"🦊 MetaMask (BNB)"}),nt.jsx("button",{onClick:f,className:"w-full text-left bg-white/10 hover:bg-white/20 text-gray-100 px-3 py-2 rounded-lg transition",children:"🔗 WalletConnect (BNB)"}),nt.jsx("button",{onClick:()=>s(!1),className:"mt-3 w-full text-center text-sm text-gray-400 hover:text-gray-200",children:"Cancel"})]})]})}const mv="0xa09d8624eae87e8b5f87b23fe694eea2d02dde2e",Yle="WTC",Xle="0x10ED43C718714eb63d5aA57B78B54704E256024E",eue=["function getAmountsOut(uint amountIn, address[] memory path) external view returns (uint[] memory amounts)","function swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function WETH() external pure returns (address)"];function tue(){const[n,e]=No.useState(null),[t,r]=No.useState(""),[i,s]=No.useState(!1),[o,c]=No.useState(!1),u=async()=>{try{await navigator.clipboard.writeText(mv),c(!0),setTimeout(()=>c(!1),2e3)}catch(p){console.error("Copy failed",p)}},f=async()=>{if(!window.ethereum)return alert("Please install MetaMask or Trust Wallet.");const m=await new Nh(window.ethereum).send("eth_requestAccounts",[]);e(m[0])},h=async()=>{if(!window.ethereum)return alert("Wallet not found");if(!t||isNaN(t)||Number(t)<=0)return alert("Enter a valid amount");try{s(!0);const m=await new Nh(window.ethereum).getSigner(),v=new Pf(Xle,eue,m),A=[await v.WETH(),mv],_=eR(t.toString()),O=(await v.getAmountsOut(_,A))[1]*95n/100n,T=await v.swapExactETHForTokens(O,A,await m.getAddress(),Math.floor(Date.now()/1e3)+600,{value:_});await T.wait(),alert(`✅ Swap complete! Hash: ${T.hash}`)}catch(p){console.error("Swap failed:",p),alert("Swap failed. Check console for details.")}finally{s(!1)}},g=p=>(p==null?void 0:p.slice(0,6))+"..."+(p==null?void 0:p.slice(-4));return nt.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-gray-900 to-slate-800 text-gray-100 font-sans",children:[nt.jsxs("header",{className:"max-w-6xl mx-auto px-6 py-6 flex items-center justify-between",children:[nt.jsxs("div",{className:"flex items-center gap-3",children:[nt.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-cyan-300 text-lg font-bold",children:"W"}),nt.jsxs("div",{children:[nt.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:"WinterCoin"}),nt.jsx("p",{className:"text-xs text-gray-400",children:"$WTC — community-driven DeFi token"})]})]}),nt.jsx(Jle,{})]}),nt.jsxs("main",{className:"max-w-6xl mx-auto px-6 py-12 text-center",children:[nt.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold leading-tight",children:"WinterCoin — The Future of Decentralized Power"}),nt.jsx("p",{className:"mt-6 text-gray-300 max-w-2xl mx-auto",children:"Swap BNB for $WTC directly on our site."}),nt.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[nt.jsx("button",{onClick:u,className:"inline-flex items-center gap-2 bg-cyan-500 text-slate-900 font-semibold px-5 py-3 rounded-lg shadow hover:scale-[1.01]",children:"Copy Contract"}),o&&nt.jsx("span",{className:"ml-2 text-sm text-cyan-300",children:"Copied!"})]}),nt.jsx("div",{className:"mt-12 max-w-md mx-auto bg-white/10 p-6 rounded-2xl shadow-lg border border-gray-700",children:n?nt.jsxs(nt.Fragment,{children:[nt.jsxs("div",{className:"mb-3 text-sm text-gray-300",children:["Connected: ",g(n)]}),nt.jsxs("div",{className:"flex flex-col gap-3",children:[nt.jsx("input",{type:"number",placeholder:"Amount in BNB",value:t,onChange:p=>r(p.target.value),className:"bg-slate-800 text-gray-200 border border-gray-700 rounded-lg px-4 py-3 w-full focus:outline-none focus:border-cyan-500"}),nt.jsx("button",{onClick:h,disabled:i,className:"bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-3 rounded-lg transition",children:i?"Swapping...":`Swap BNB → ${Yle}`})]})]}):nt.jsx("button",{onClick:f,className:"w-full bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-3 rounded-lg",children:"Connect Wallet"})})]}),nt.jsxs("footer",{className:"border-t border-gray-800 mt-12 py-6 text-center text-gray-400 text-sm",children:["© 2025 WinterCoin — Contract: ",mv]})]})}Ck.createRoot(document.getElementById("root")).render(nt.jsx(xk.StrictMode,{children:nt.jsx(tue,{})}));export{Jp as A,T3 as B,HV as C,KH as D,vc as E,Ow as F,xs as G,bi as H,pu as I,Es as J,i9 as K,kI as P,s_ as Q,CF as _,FG as a,LG as b,nN as c,uy as d,fg as e,vi as f,w6 as g,we as h,Ap as i,hE as j,jG as k,YM as l,HM as m,pM as n,GV as o,Zr as p,wG as q,WV as r,UG as s,Cr as t,Qi as u,gu as v,Ix as w,Nte as x,Sx as y,Bw as z};
